/*
 -------------------------------------------------------------------
 Sketchpad 3.5 - Draw, Create, Share!
 -------------------------------------------------------------------
 Sketch API v3.5.3.18
 Copyright (c) Sketch.IO, Inc. <http://sketch.io>
 -------------------------------------------------------------------
 May contain separate licenses for specific modules (see below)
 -------------------------------------------------------------------
 */

/*
 -------------------------------------------------------------------
 module: Parse URI 1.2.2
 src: http://stevenlevithan.com
 author: Steven Levithan
 -------------------------------------------------------------------
 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 Morf.js - CSS3 matrix decomposition.
 <http://www.joelambert.co.uk/morf/>
 -------------------------------------------------------------------
 Copyright (c) 2011 Joe Lambert <http://www.joelambert.co.uk>

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: arcToBezier - Convert from Elliptical Arc to Bezier Curve(s)
 author: Raph Levien <raph@artofcode.com>
 -------------------------------------------------------------------
 Copyright (c) 2002 USC/Information Sciences Institute

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: GLSL Blend Modes
 src: http://www.nutty.ca/articles/blend_modes/
 author: Nathaniel Meyer
 -------------------------------------------------------------------
 Copyright (C) 2012 Nathaniel Meyer
 Nutty Software, http://www.nutty.ca
 All Rights Reserved.

 Permission is hereby granted, free of charge, to any person obtaining a copy of
 this software and associated documentation files (the "Software"), to deal in
 the Software without restriction, including without limitation the rights to
 use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
 of the Software, and to permit persons to whom the Software is furnished to do
 so, subject to the following conditions:
 1. The above copyright notice and this permission notice shall be included in all
 copies or substantial portions of the Software.
 2. Redistributions in binary or minimized form must reproduce the above copyright
 notice and this list of conditions in the documentation and/or other materials
 provided with the distribution.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.
 -------------------------------------------------------------------
 module: GLSL 2D Simplex Noise
 src: https://github.com/ashima/webgl-noise
 author: Ian McEwan, Ashima Arts.
 -------------------------------------------------------------------
 Copyright (C) 2011 Ashima Arts. All rights reserved.

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: GLSL Kaleidoscope
 src: http://pixelshaders.com/editor/
 author: Toby Schachman / http://tobyschachman.com/
 -------------------------------------------------------------------
 Copyright (c) 2012 Toby Schachman

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: GLSL Old Film
 src: http://www.nutty.ca/articles/blend_modes/
 author: Nathaniel Meyer
 -------------------------------------------------------------------
 Copyright (C) 2012 Nathaniel Meyer
 Nutty Software, http://www.nutty.ca
 All Rights Reserved.

 Permission is hereby granted, free of charge, to any person obtaining a copy of
 this software and associated documentation files (the "Software"), to deal in
 the Software without restriction, including without limitation the rights to
 use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
 of the Software, and to permit persons to whom the Software is furnished to do
 so, subject to the following conditions:
 1. The above copyright notice and this permission notice shall be included in all
 copies or substantial portions of the Software.
 2. Redistributions in binary or minimized form must reproduce the above copyright
 notice and this list of conditions in the documentation and/or other materials
 provided with the distribution.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.
 -------------------------------------------------------------------
 module: GLSL Scanline
 src: http://seriouslyjs.org/
 author: Brian Chirls
 -------------------------------------------------------------------
 Copyright (c) 2012 Brian Chirls

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: GLSL TVGlitch
 src: http://seriouslyjs.org/
 author: Brian Chirls
 -------------------------------------------------------------------
 Copyright (c) 2012 Brian Chirls

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: GLSL Bleach Bypass
 src: https://github.com/mrdoob/three.js/
 author: alteredq / http://alteredqualia.com/
 based on Nvidia example - http://developer.download.nvidia.com/shaderlibrary/webpages/shader_library.html#post_bleach_bypass
 -------------------------------------------------------------------
 Copyright (c) 2010-2013 three.js authors

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: GLSL Colorify
 src: https://github.com/mrdoob/three.js/
 author: alteredq / http://alteredqualia.com/
 -------------------------------------------------------------------
 Copyright (c) 2010-2013 three.js authors

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: GLSL Color Map
 src: https://code.google.com/p/webglsamples/
 license: New BSD
 -------------------------------------------------------------------
 Copyright 2011, Google Inc. All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 - Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.
 - Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following disclaimer
 in the documentation and/or other materials provided with the
 distribution.
 - Neither the name of Google Inc. nor the names of its
 contributors may be used to endorse or promote products derived from
 this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 -------------------------------------------------------------------
 module: GLSL LumaKey
 src: http://seriouslyjs.org/
 author: Brian Chirls
 -------------------------------------------------------------------
 Copyright (c) 2012 Brian Chirls

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: WebRTC.io
 src: https://github.com/webRTC/webRTC.io
 -------------------------------------------------------------------
 Copyright (C) 2012 Ben Brittain, Dennis M?rtensson, David Peter

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: NeuQuant Neural-Net Quantization Algorithm
 src: https://github.com/antimatter15/jsgif
 -------------------------------------------------------------------
 Copyright (c) 1994 Anthony Dekker

 NEUQUANT Neural-Net quantization algorithm by Anthony Dekker, 1994. See
 "Kohonen neural networks for optimal colour quantization" in "Network:
 Computation in Neural Systems" Vol. 5 (1994) pp 351-367. for a discussion of
 the algorithm.

 Any party obtaining a copy of these files from the author, directly or
 indirectly, is granted, free of charge, a full and unrestricted irrevocable,
 world-wide, paid up, royalty-free, nonexclusive right and license to deal in
 this software and documentation files (the "Software"), including without
 limitation the rights to use, copy, modify, merge, publish, distribute,
 sublicense, and/or sell copies of the Software, and to permit persons who
 receive copies from any such party to do so, with the only requirement being
 that this copyright notice remain intact.
 -------------------------------------------------------------------
 module: ContextMenu - Theme-able context menus.
 src: https://github.com/aantthony/contextmenu
 author: Anthony Foster
 -------------------------------------------------------------------
 Copyright (C) 2012 Anthony Foster

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: Alertify.js - Theme-able alerts.
 src: https://github.com/fabien-d/alertify.js/
 author: Fabien Doiron
 -------------------------------------------------------------------
 Copyright (C) 2012 Fabien Doiron

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: JS Beautifier
 src: http://jsbeautifier.org/
 author: Einar Lielmanis <einar@jsbeautifier.org>
 -------------------------------------------------------------------
 Copyright (c) 2007-2013 Einar Lielmanis and contributors.

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: CanvasToBlob.js - A canvas.toBlob() implementation.
 src: https://github.com/eligrey/canvas-toBlob.js
 author: Eli Grey
 -------------------------------------------------------------------
 Copyright (c) 2011 Eli Grey <http://eligrey.com>

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: psd.js - JavaScript PSD Library
 src: https://github.com/imaya/psd.js
 author: Imaya Yuta
 -------------------------------------------------------------------
 Copyright (C) 2012 imaya. All rights reserved.

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 CSSMatrix - as defined by the W3C Transforms specification.
 <https://github.com/camupod/CSSMatrix>
 -------------------------------------------------------------------
 Copyright (c) 2013 Cameron Lakenen & Arian Stolwijk

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: GLFX.js - An image effects library for JavaScript
 src: https://github.com/evanw/glfx.js
 author: Evan Wallace
 -------------------------------------------------------------------
 Copyright (C) 2011 Evan Wallace. All rights reserved.

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: FileSaver.js - A saveAs() FileSaver implementation
 src: https://github.com/eligrey/FileSaver.js
 author: Eli Grey
 -------------------------------------------------------------------
 Copyright (c) 2011 Eli Grey <http://eligrey.com>

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: jsPDF - Generate PDF files in JavaScript
 src: https://github.com/MrRio/jsPDF
 author: James Hall
 -------------------------------------------------------------------
 Copyright (c) 2010-2014 James Hall, https://github.com/MrRio/jsPDF
 2010 Aaron Spike, https://github.com/acspike
 2012 Willow Systems Corporation, willow-systems.com
 2012 Pablo Hess, https://github.com/pablohess
 2012 Florian Jenett, https://github.com/fjenett
 2012 Jason Siefken, https://github.com/siefkenj/
 2013 Warren Weckesser, https://github.com/warrenweckesser
 2013 Youssef Beddad, https://github.com/lifof
 2013 Lee Driscoll, https://github.com/lsdriscoll
 2013 Stefan Slonevskiy, https://github.com/stefslon
 2013 Jeremy Morel, https://github.com/jmorel
 2013 Christoph Hartmann, https://github.com/chris-rock
 2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 2014 James Makes, https://github.com/dollaruw
 2014 Diego Casorran, https://github.com/diegocr

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 JavaScript PubSub library
 2012 (c) ddotsenko@willowsystems.com
 based on Peter Higgins (dante@dojotoolkit.org)
 Loosely based on Dojo publish/subscribe API, limited in scope. Rewritten blindly.
 Original is (c) Dojo Foundation 2004-2010. Released under either AFL or new BSD, see:
 http://dojofoundation.org/license for more information.
 -------------------------------------------------------------------
 */
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.color && (sketch.color = {});
"undefined" === typeof sketch.color.space && (sketch.color.space = {});
"undefined" === typeof sketch.color.spacex && (sketch.color.spacex = {});
(function() {
    var a = {}, h = {
        "HEX24>HSL": "HEX24>RGB>HSL",
        "HEX32>HSLA": "HEX32>RGBA>HSLA",
        "HEX24>CMYK": "HEX24>RGB>CMY>CMYK",
        "RGB>CMYK": "RGB>CMY>CMYK"
    }, ColorSpace = sketch.color.space = function(b, e) {
        h[e] && (e = h[e]);
        var f = e.split(">");
        if ("object" === typeof b && 0 <= b[0]) {
            for (var c = f[0], k = {}, m = 0; m < c.length; m++) {
                var l = c.substr(m, 1);
                k[l] = b[m]
            }
            b = k
        }
        if (a[e]) return a[e](b);
        c = 1;
        for (k = f[0]; c < f.length; c++) 1 < c && (k = k.substr(k.indexOf("_") + 1)), k += (0 === c ? "" : "_") + f[c], b = ColorSpace[k](b);
        return b
    }, ColorSpaceX = sketch.color.spacex = function(a, e) {
        a = (a || "").replace(/ /g, "");
        a = a.toLowerCase();
        var f = {
            "#": function(a, b) {
                a.hex = ColorSpace.W3_HEX24(b);
                a.type = "hex";
                var f = ColorSpace.HEX24_RGB(a.hex);
                a.R = f.R;
                a.G = f.G;
                a.B = f.B;
                a.A = f.A
            },
            rgba: function(a, b) {
                var f = ColorSpace.W3_RGBA(b);
                a.R = f.R;
                a.G = f.G;
                a.B = f.B;
                a.A = f.A;
                a.type = "rgba"
            },
            rgb: function(a, b) {
                var f = ColorSpace.W3_RGB(b);
                a.R = f.R;
                a.G = f.G;
                a.B = f.B;
                a.type = "rgb"
            },
            hsla: function(a, b) {
                var f = ColorSpace.W3_HSLA(b);
                a.H = f.H;
                a.S = f.S;
                a.L = f.L;
                a.A = f.A;
                a.type = "hsla"
            },
            hsl: function(a, b) {
                var f = ColorSpace.W3_HSL(b);
                a.H = f.H;
                a.S = f.S;
                a.L = f.L;
                a.type = "hsl"
            }
        }, c;
        for (c in f) if (0 === a.indexOf(c)) return f[c](this,
            a), this;
        if (sketch.color.webcolors[a]) f["#"](this, sketch.color.webcolors[a]);
        return this
    };
    ColorSpaceX.prototype.toRGBA = function() {};
    ColorSpaceX.prototype.toRGB = function() {
        switch (this.type) {
            case "hex":
                var a = ColorSpace.HEX_RGB(this.hex);
                this.R = a.R;
                this.G = a.G;
                this.B = a.B;
                return this;
            case "rgb":
                return this;
            case "rgba":
                return this
        }
    };
    ColorSpaceX.prototype.toHSLA = function() {};
    ColorSpaceX.prototype.toHSL = function() {
        switch (this.type) {
            case "hex":
                return ColorSpace.RGB_HSL(ColorSpace.HEX24_RGB(this.hex));
            case "rgb":
                return ColorSpace.RGB_HSL(this);
            case "rgba":
                return ColorSpace.RGBA_HSLA(this)
        }
    };
    ColorSpaceX.prototype.toHEX = function() {
        switch (this.type) {
            case "hex":
                return ColorSpace.HEX24_W3(this.hex);
            case "rgb":
            case "rgba":
                return ColorSpace.HEX24_W3(ColorSpace.RGB_HEX24(this));
            case "hsl":
            case "hsla":
                return ColorSpace.HEX24_W3(ColorSpace.RGB_HEX24(ColorSpace.HSL_RGB(this)))
        }
    };
    ColorSpaceX.prototype.isW3Contrast = function(a, e, f) {
        e = e || 125;
        f = f || 500;
        a = a ? (new ColorSpaceX(a)).toRGB() : {
            r: 0,
            g: 0,
            b: 0
        };
        e = this.isW3Brightness(a) <= e;
        f = this.isW3Difference(a) <= f;
        return !(e && f)
    };
    ColorSpaceX.prototype.isW3Brightness = function(a) {
        return Math.abs((299 * this.R + 587 * this.G + 114 * this.B) / 1E3 - (299 * a.R + 587 * a.G + 114 * a.B) / 1E3)
    };
    ColorSpaceX.prototype.isW3Difference = function(a) {
        var e = Math.max(this.R, a.R) - Math.min(this.R, a.R),
            f = Math.max(this.G, a.G) - Math.min(this.G, a.G);
        a = Math.max(this.B, a.B) - Math.min(this.B, a.B);
        return e + f + a
    };
    ColorSpace.W3Brightness = function(a, e) {
        return Math.abs((299 * a.R + 587 * a.G + 114 * a.B) / 1E3 - (299 * e.R + 587 * e.G + 114 * e.B) / 1E3)
    };
    ColorSpace.W3Difference = function(a, e) {
        var f = Math.max(a.R, e.R) - Math.min(a.R, e.R),
            c = Math.max(a.G, e.G) - Math.min(a.G, e.G);
        e = Math.max(a.B, e.B) - Math.min(a.B, e.B);
        return f + c + e
    };
    ColorSpace.isW3Contrast = function(a, e) {
        e = e || {
            R: 255,
            G: 255,
            B: 255
        };
        var f = 125 >= ColorSpace.W3Brightness(a, e),
            c = 500 >= ColorSpace.W3Difference(a, e);
        return !(f && c)
    };
    ColorSpace.RGB_W3 = function(a) {
        return "rgb(" + (a.R >> 0) + "," + (a.G >> 0) + "," + (a.B >> 0) + ")"
    };
    ColorSpace.RGBA_W3 = function(a) {
        return "rgba(" + (a.R >> 0) + "," + (a.G >> 0) + "," + (a.B >> 0) + "," + ("number" === typeof a.A ? a.A / 255 : 1) + ")"
    };
    ColorSpace.W3_RGB = function(a) {
        a = a.substr(4, a.length - 5).split(",");
        return {
            R: parseInt(a[0], 10),
            G: parseInt(a[1], 10),
            B: parseInt(a[2], 10)
        }
    };
    ColorSpace.W3_RGBA = function(a) {
        a = a.substr(5, a.length - 6).split(",");
        return {
            R: parseInt(a[0], 10),
            G: parseInt(a[1],
                10),
            B: parseInt(a[2], 10),
            A: 255 * parseFloat(a[3] || 1)
        }
    };
    ColorSpace.HSL_W3 = function(a) {
        return "hsl(" + (a.H + 0.5 >> 0) + "," + (a.S + 0.5 >> 0) + "%," + (a.L + 0.5 >> 0) + "%)"
    };
    ColorSpace.HSLA_W3 = function(a) {
        return "hsla(" + (a.H + 0.5 >> 0) + "," + (a.S + 0.5 >> 0) + "%," + (a.L + 0.5 >> 0) + "%," + ("number" === typeof a.A ? a.A / 255 : 1) + ")"
    };
    ColorSpace.W3_HSL = function(a) {
        var e = a.indexOf("(") + 1,
            f = a.indexOf(")");
        a = a.substr(e, f - e).split(",");
        return {
            H: parseInt(a[0], 10),
            S: parseInt(a[1], 10),
            L: parseInt(a[2], 10)
        }
    };
    ColorSpace.W3_HSLA = function(a) {
        var e = a.indexOf("(") + 1,
            f = a.indexOf(")");
        a = a.substr(e,
            f - e).split(",");
        return {
            H: parseInt(a[0], 10),
            S: parseInt(a[1], 10),
            L: parseInt(a[2], 10),
            A: 255 * parseFloat(a[3], 10)
        }
    };
    ColorSpace.W3_HEX = ColorSpace.W3_HEX24 = function(a) {
        "#" === a.substr(0, 1) && (a = a.substr(1));
        3 === a.length && (a = a[0] + a[0] + a[1] + a[1] + a[2] + a[2]);
        return parseInt("0x" + a, 16)
    };
    ColorSpace.W3_HEX32 = function(a) {
        "#" === a.substr(0, 1) && (a = a.substr(1));
        3 === a.length && (a = a[0] + a[0] + a[1] + a[1] + a[2] + a[2]);
        return 6 === a.length ? parseInt("0xFF" + a, 16) : parseInt("0x" + a, 16)
    };
    ColorSpace.HEX_W3 = ColorSpace.HEX24_W3 = function(a, e) {
        e || (e = 6);
        a || (a = 0);
        var f, c = a.toString(16);
        for (f = c.length; f < e;) c = "0" + c, f++;
        for (f = c.length; f > e;) c = c.substr(1), f--;
        return "#" + c
    };
    ColorSpace.HEX32_W3 = function(a) {
        return ColorSpace.HEX_W3(a, 8)
    };
    ColorSpace.HEX_RGB = ColorSpace.HEX24_RGB = function(a) {
        return {
            R: a >> 16,
            G: a >> 8 & 255,
            B: a & 255
        }
    };
    ColorSpace.HEX32_RGBA = function(a) {
        return {
            R: a >>> 16 & 255,
            G: a >>> 8 & 255,
            B: a & 255,
            A: a >>> 24
        }
    };
    ColorSpace.RGBA_HEX32 = function(a) {
        return (a.A << 24 | a.R << 16 | a.G << 8 | a.B) >>> 0
    };
    ColorSpace.RGB_HEX24 = ColorSpace.RGB_HEX = function(a) {
        0 > a.R && (a.R = 0);
        0 > a.G && (a.G = 0);
        0 > a.B && (a.B = 0);
        255 < a.R && (a.R = 255);
        255 < a.G && (a.G = 255);
        255 < a.B && (a.B = 255);
        return a.R << 16 | a.G << 8 | a.B
    };
    ColorSpace.RGB_CMY = function(a) {
        return {
            C: 1 - a.R / 255,
            M: 1 - a.G / 255,
            Y: 1 - a.B / 255
        }
    };
    ColorSpace.RGBA_HSLA = ColorSpace.RGB_HSL = function(a) {
        var e = a.R / 255,
            f = a.G / 255,
            c = a.B / 255,
            k = Math.min(e, f, c),
            m = Math.max(e, f, c),
            l = m - k,
            d, g = (m + k) / 2;
        if (0 === l) k = d = 0;
        else {
            var k = 0.5 > g ? l / (m + k) : l / (2 - m - k),
                q = ((m - e) / 6 + l / 2) / l,
                h = ((m - f) / 6 + l / 2) / l,
                l = ((m - c) / 6 + l / 2) / l;
            e === m ? d = l - h : f === m ? d = 1 / 3 + q - l : c === m && (d = 2 / 3 + h - q);
            0 > d && (d += 1);
            1 < d && (d -= 1)
        }
        return {
            H: 360 * d,
            S: 100 * k,
            L: 100 * g,
            A: a.A
        }
    };
    ColorSpace.RGBA_HSVA = ColorSpace.RGB_HSV = function(a) {
        var e = a.R / 255,
            f = a.G / 255,
            c = a.B / 255,
            k = Math.min(e, f, c),
            m = Math.max(e,
                f, c),
            l = m - k,
            d;
        if (0 === l) k = d = 0;
        else {
            var k = l / m,
                g = ((m - e) / 6 + l / 2) / l,
                q = ((m - f) / 6 + l / 2) / l,
                l = ((m - c) / 6 + l / 2) / l;
            e === m ? d = l - q : f === m ? d = 1 / 3 + g - l : c === m && (d = 2 / 3 + q - g);
            0 > d && (d += 1);
            1 < d && (d -= 1)
        }
        return {
            H: 360 * d,
            S: 100 * k,
            V: 100 * m,
            A: a.A
        }
    };
    ColorSpace.CMY_RGB = function(a) {
        return {
            R: Math.max(0, 255 * (1 - a.C)),
            G: Math.max(0, 255 * (1 - a.M)),
            B: Math.max(0, 255 * (1 - a.Y))
        }
    };
    ColorSpace.CMY_CMYK = function(a) {
        var e = a.C,
            f = a.M;
        a = a.Y;
        var c = Math.min(a, Math.min(f, Math.min(e, 1))),
            e = Math.round(100 * ((e - c) / (1 - c))),
            f = Math.round(100 * ((f - c) / (1 - c)));
        a = Math.round(100 * ((a - c) / (1 - c)));
        c = Math.round(100 * c);
        return {
            C: e,
            M: f,
            Y: a,
            K: c
        }
    };
    ColorSpace.CMYK_CMY = function(a) {
        return {
            C: a.C * (1 - a.K) + a.K,
            M: a.M * (1 - a.K) + a.K,
            Y: a.Y * (1 - a.K) + a.K
        }
    };
    ColorSpace.HSLA_RGBA = ColorSpace.HSL_RGB = function(a) {
        var e = a.H / 360,
            f = a.S / 100,
            c = a.L / 100,
            k, m, l;
        0 === f ? c = f = e = c : (m = 0.5 > c ? c * (1 + f) : c + f - f * c, k = 2 * c - m, l = e + 1 / 3, 0 > l && (l += 1), 1 < l && (l -= 1), c = 1 > 6 * l ? k + 6 * (m - k) * l : 1 > 2 * l ? m : 2 > 3 * l ? k + 6 * (m - k) * (2 / 3 - l) : k, l = e, 0 > l && (l += 1), 1 < l && (l -= 1), f = 1 > 6 * l ? k + 6 * (m - k) * l : 1 > 2 * l ? m : 2 > 3 * l ? k + 6 * (m - k) * (2 / 3 - l) : k, l = e - 1 / 3, 0 > l && (l += 1), 1 < l && (l -= 1), e = 1 > 6 * l ? k + 6 * (m - k) * l : 1 > 2 * l ? m : 2 > 3 * l ? k + 6 * (m - k) * (2 / 3 - l) : k);
        return {
            R: 255 * c,
            G: 255 * f,
            B: 255 * e,
            A: a.A
        }
    };
    ColorSpace.HSVA_RGBA = ColorSpace.HSV_RGB = function(a) {
        var e = a.H / 360,
            f = a.S / 100,
            c = a.V / 100,
            k, m, l, d, g;
        if (0 === f) k = m = l = Math.round(255 * c);
        else switch (1 <= e && (e = 0), e *= 6, d = e - Math.floor(e), g = Math.round(255 * c * (1 - f)), l = Math.round(255 * c * (1 - f * d)), f = Math.round(255 * c * (1 - f * (1 - d))), c = Math.round(255 * c), Math.floor(e)) {
            case 0:
                k = c;
                m = f;
                l = g;
                break;
            case 1:
                k = l;
                m = c;
                l = g;
                break;
            case 2:
                k = g;
                m = c;
                l = f;
                break;
            case 3:
                k = g;
                m = l;
                l = c;
                break;
            case 4:
                k = f;
                m = g;
                l = c;
                break;
            case 5:
                k = c, m = g
        }
        return {
            R: k,
            G: m,
            B: l,
            A: a.A
        }
    };
    sketch.color.webcolors = {
        aliceblue: "f0f8ff",
        antiquewhite: "faebd7",
        aqua: "00ffff",
        aquamarine: "7fffd4",
        azure: "f0ffff",
        beige: "f5f5dc",
        bisque: "ffe4c4",
        black: "000000",
        blanchedalmond: "ffebcd",
        blue: "0000ff",
        blueviolet: "8a2be2",
        brown: "a52a2a",
        burlywood: "deb887",
        cadetblue: "5f9ea0",
        chartreuse: "7fff00",
        chocolate: "d2691e",
        coral: "ff7f50",
        cornflowerblue: "6495ed",
        cornsilk: "fff8dc",
        crimson: "dc143c",
        cyan: "00ffff",
        darkblue: "00008b",
        darkcyan: "008b8b",
        darkgoldenrod: "b8860b",
        darkgray: "a9a9a9",
        darkgreen: "006400",
        darkgrey: "a9a9a9",
        darkkhaki: "bdb76b",
        darkmagenta: "8b008b",
        darkolivegreen: "556b2f",
        darkorange: "ff8c00",
        darkorchid: "9932cc",
        darkred: "8b0000",
        darksalmon: "e9967a",
        darkseagreen: "8fbc8f",
        darkslateblue: "483d8b",
        darkslategray: "2f4f4f",
        darkslategrey: "2f4f4f",
        darkturquoise: "00ced1",
        darkviolet: "9400d3",
        deeppink: "ff1493",
        deepskyblue: "00bfff",
        dimgray: "696969",
        dimgrey: "696969",
        dodgerblue: "1e90ff",
        firebrick: "b22222",
        floralwhite: "fffaf0",
        forestgreen: "228b22",
        fuchsia: "ff00ff",
        fuscia: "ff00ff",
        gainsboro: "dcdcdc",
        ghostwhite: "f8f8ff",
        gold: "ffd700",
        goldenrod: "daa520",
        gray: "808080",
        green: "008000",
        greenyellow: "adff2f",
        grey: "808080",
        honeydew: "f0fff0",
        hotpink: "ff69b4",
        indianred: "cd5c5c",
        indigo: "4b0082",
        ivory: "fffff0",
        khaki: "f0e68c",
        lavender: "e6e6fa",
        lavenderblush: "fff0f5",
        lawngreen: "7cfc00",
        lemonchiffon: "fffacd",
        lightblue: "add8e6",
        lightcoral: "f08080",
        lightcyan: "e0ffff",
        lightgoldenrodyellow: "fafad2",
        lightgray: "d3d3d3",
        lightgreen: "90ee90",
        lightgrey: "d3d3d3",
        lightpink: "ffb6c1",
        lightsalmon: "ffa07a",
        lightseagreen: "20b2aa",
        lightskyblue: "87cefa",
        lightslategray: "778899",
        lightslategrey: "778899",
        lightsteelblue: "b0c4de",
        lightyellow: "ffffe0",
        lime: "00ff00",
        limegreen: "32cd32",
        linen: "faf0e6",
        magenta: "ff00ff",
        maroon: "800000",
        mediumaquamarine: "66cdaa",
        mediumblue: "0000cd",
        mediumorchid: "ba55d3",
        mediumpurple: "9370db",
        mediumseagreen: "3cb371",
        mediumslateblue: "7b68ee",
        mediumspringgreen: "00fa9a",
        mediumturquoise: "48d1cc",
        mediumvioletred: "c71585",
        midnightblue: "191970",
        mintcream: "f5fffa",
        mistyrose: "ffe4e1",
        moccasin: "ffe4b5",
        navajowhite: "ffdead",
        navy: "000080",
        oldlace: "fdf5e6",
        olive: "808000",
        olivedrab: "6b8e23",
        orange: "ffa500",
        orangered: "ff4500",
        orchid: "da70d6",
        palegoldenrod: "eee8aa",
        palegreen: "98fb98",
        paleturquoise: "afeeee",
        palevioletred: "db7093",
        papayawhip: "ffefd5",
        peachpuff: "ffdab9",
        peru: "cd853f",
        pink: "ffc0cb",
        plum: "dda0dd",
        powderblue: "b0e0e6",
        purple: "800080",
        red: "ff0000",
        rosybrown: "bc8f8f",
        royalblue: "4169e1",
        saddlebrown: "8b4513",
        salmon: "fa8072",
        sandybrown: "f4a460",
        seagreen: "2e8b57",
        seashell: "fff5ee",
        sienna: "a0522d",
        silver: "c0c0c0",
        skyblue: "87ceeb",
        slateblue: "6a5acd",
        slategray: "708090",
        slategrey: "708090",
        snow: "fffafa",
        springgreen: "00ff7f",
        steelblue: "4682b4",
        tan: "d2b48c",
        teal: "008080",
        thistle: "d8bfd8",
        tomato: "ff6347",
        turquoise: "40e0d0",
        violet: "ee82ee",
        wheat: "f5deb3",
        white: "ffffff",
        whitesmoke: "f5f5f5",
        yellow: "ffff00",
        yellowgreen: "9acd32"
    }
})();
"undefined" !== typeof module && module.exports && (module.exports = sketch.color);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.util && (sketch.util = {});
(function(sketch) {
    var h = function(sketchUtil) {
        sketchUtil.Canvas = function(width, height, id) {
            var canvasEl;
            id && (canvasEl = document.getElementById(id));
            canvasEl || (canvasEl = document.createElement("canvas"));
            "function" === typeof FlashCanvas && (canvasEl.onload = sketch.supports.fn.init);
            canvasEl.id = id || "";
            canvasEl.ctx = canvasEl.getContext("2d");
            width && height ? (canvasEl.width = width || 1, canvasEl.height = height || 1) : (width = sketch.canvas2d, canvasEl.width = width.width * width.pixelRatio, canvasEl.height = width.height * width.pixelRatio);
            return canvasEl
        };
        sketchUtil.Canvas.getContext = function(a, b, c) {
            a = a || sketchUtil.Canvas(b, c);
            if (a.getContext) return isFinite(b) && (a.width = b), isFinite(c) && (a.height = c), a.getContext("2d");
            if (a.globalCompositeOperation) return isFinite(b) && (a.canvas.width = b), isFinite(c) && (a.canvas.height = c), a
        };
        sketchUtil.json = {};
        sketchUtil.json.filterCircular = function(a, b) {
            return "object" === typeof b && (null === b || b.nodeName || b.tagName) ? void 0 : b
        };
        sketchUtil.getTime = function() {
            return window.performance && window.performance.now ? window.performance.now() : (new Date).getTime()
        };
        sketchUtil.perf = sketch.perf = function() {
            var a = sketchUtil.getTime();
            return function() {
                var b = sketchUtil.getTime();
                return Math.round(b - a)
            }
        };
        sketchUtil.exists = function(a, b) {
            try {
                for (var c = a.split("."), k = c.length,
                         m = b || window, l = 0; l < k; l++) {
                    var d = c[l];
                    if (null == m[d]) return !1;
                    m = m[d]
                }
                return !0
            } catch (g) {
                return !1
            }
        };
        var g = "function" === typeof CanvasPattern;
        sketchUtil.clone = function(a) {
            if (!a || "object" !== typeof a) return a;
            if (a.constructor && !(a.childNodes || a.getImageData || g && a instanceof CanvasPattern)) {
                var b = new a.constructor,
                    c;
                for (c in a) b[c] = a[c] && "object" === typeof a[c] ? sketchUtil.clone(a[c]) : a[c];
                return b
            }
        };
        sketchUtil.mergeObject = function(a, b) {
            if (!a || "object" !== typeof a) return b;
            for (var c in a) if (a[c] && "object" === typeof a[c]) {
                var k = a[c];
                k.cloneNode || (b[c] = typeof b[c] === typeof a[c] ? sketchUtil.mergeObject(a[c], b[c]) : sketchUtil.mergeObject(a[c], new k.constructor))
            } else b[c] = a[c];
            return b
        };
        sketchUtil.count = function(a, b, c) {
            if (isFinite(a.length)) return a.length;
            if ("object" === typeof a) {
                var k = 0,
                    m = "undefined" !== typeof b;
                if (m && "undefined" !== typeof c) for (var l in a) a[l] && a[l][b] === c && ++k;
                else if (m) for (l in a) "undefined" !== typeof a[l] && ++k;
                else for (l in a)++k;
                return k
            }
        };
        sketchUtil.clamp = function(a, b, c) {
            return a < b ? b : a > c ? c : a
        };
        sketchUtil.each = function(a, b) {
            if (!b) return console.log("missing callback",
                arguments);
            if (!a) return console.log("missing object", arguments);
            for (var c = 0; c < a.length; c++) b(a[c])
        };
        sketchUtil.object2array = function(a) {
            var b = [],
                c;
            for (c in a) b.push(c);
            return b
        };
        sketchUtil.array2object = function(a) {
            for (var b = {}, c = 0; c < a.length; c++) b[a[c]] = !0;
            return b
        };
        sketchUtil.array2index = function(a) {
            for (var b = {}, c = 0; c < a.length; c++) b[a[c]] = c;
            return b
        };
        sketchUtil.getMetrics = function(a) {
            if (a = a || this.selection && this.selection[0]) {
                if (a === window || a === document) a = document.body;
                var f = {}, c = a.getBoundingClientRect();
                f.width = c.width;
                f.height = c.height;
                f.x1 = c.left;
                f.y1 = c.top;
                f.scaleX = c.width / a.offsetWidth || 1;
                f.scaleY = c.height / a.offsetHeight || 1;
                f.scrollLeft = 0;
                f.scrollTop = 0;
                var c = window.getComputedStyle(a),
                    k = b(c, "border-left-width"),
                    m = b(c, "border-right-width"),
                    l = b(c, "border-bottom-width"),
                    d = b(c, "border-top-width");
                f.border = [k, m, d, l];
                f.x1 += k;
                f.y1 += d;
                f.width -= m + k;
                f.height -= l + d;
                k = b(c, "margin-left");
                m = b(c, "margin-right");
                l = b(c, "margin-bottom");
                d = b(c, "margin-top");
                f.border = [k, m, d, l];
                f.x1 -= k;
                f.y1 -= d;
                f.width += m + k;
                f.height += l + d;
                k = b(c, "padding-left");
                m = b(c, "padding-right");
                l = b(c, "padding-bottom");
                d = b(c, "padding-top");
                f.padding = [k, m, d, l];
                f.x2 = f.x1 + f.width;
                f.y2 = f.y1 + f.height;
                c = c.getPropertyValue("position");
                for (a = "fixed" === c ? a : a.parentNode; null !== a && a !== document.body && void 0 !== a.scrollTop;) {
                    c = window.getComputedStyle(a);
                    c = c.getPropertyValue("position");
                    if ("absolute" !== c) if ("fixed" === c) {
                        f.scrollTop -= a.parentNode.scrollTop;
                        f.scrollLeft -= a.parentNode.scrollLeft;
                        break
                    } else f.scrollLeft += a.scrollLeft, f.scrollTop += a.scrollTop;
                    a = a.parentNode
                }
                f.scrollBodyLeft = void 0 !== window.pageXOffset ? window.pageXOffset : (document.documentElement || document.body.parentNode || document.body).scrollLeft;
                f.scrollBodyTop = void 0 !== window.pageYOffset ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;
                f.scrollLeft -= f.scrollBodyLeft;
                f.scrollTop -= f.scrollBodyTop;
                return f
            }
        };
        var b = function(a, b) {
            var c = parseFloat(a.getPropertyValue(b), 10);
            return isFinite(c) ? c : 0
        };
        sketchUtil.parseUri = function(a) {
            a || (a = window.location);
            var b = sketchUtil.parseUri.options;
            a = b.parser[b.strictMode ? "strict" : "loose"].exec(a);
            for (var c = {}, k = 14; k--;) c[b.key[k]] = a[k] || "";
            c[b.q.name] = {};
            c[b.key[12]].replace(b.q.parser, function(a, k, e) {
                k && (c[b.q.name][k] = e)
            });
            return c
        };
        sketchUtil.parseUri.isLocalhost = function(a) {
            var b = a.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);
            return "<" === a.substr(0, 1) || "string" === typeof b[1] && 0 < b[1].length && b[1].toLowerCase() !== location.protocol || "string" === typeof b[2] && 0 < b[2].length && b[2].replace(RegExp(":(" + {
                "http:": 80,
                "https:": 443
            }[location.protocol] + ")?$"), "") !== location.host ? !1 : !0
        };
        sketchUtil.parseUri.options = {
            strictMode: !1,
            key: "source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),
            q: {
                name: "queryKey",
                parser: /(?:^|&)([^&=]*)=?([^&]*)/g
            },
            parser: {
                strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
                loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
            }
        }
    };
    "undefined" !== typeof module && module.exports ? module.exports = h : h(sketch.util)
})(sketch);
var dom = {};
(function() {
    dom.removeChildNodes = function(a) {
        if (a) for (; a.hasChildNodes();) a.removeChild(a.firstChild)
    };
    dom.removeNodes = function(a) {
        "string" === typeof a && (a = sketch.$$(a));
        for (var h = 0, d = a.length; h < d; h++) {
            var g = a[h];
            g.parentNode.removeChild(g)
        }
    };
    dom.setCSS = function(a, h, d) {
        "string" === typeof a && (a = sketch.$$(a));
        for (var g = 0, b = a.length; g < b; g++) a[g].style[h] = d
    };
    dom.hasClass = function(a, h) {
        "string" === typeof a && (a = sketch.$(a));
        return -1 !== (" " + a.className + " ").indexOf(" " + h + " ")
    };
    dom.setClass = function(a, h, d, g) {
        "string" === typeof a && (a = sketch.$(a));
        if (a) {
            a && h ? g = g || [a] : (d = a, h = d.className || "active", a = d.target || {}, g = d.list || [a], d = d.on);
            "undefined" === typeof d && (d = !0);
            if ("string" === typeof g) {
                if (!a.parentNode) return;
                g = a.parentNode.querySelectorAll(g)
            }
            for (var b = a.className, e = 0, f = g.length; e < f; e++) g[e].className = (" " + g[e].className + " ").split(" " + h + " ").join(" ").trim();
            !1 === d || "toggle" === d && -1 !== b.indexOf(h) || (a.className = (a.className + " " + h).trim())
        }
    };
    dom.create = function(a, h) {
        if (-1 !== a.indexOf("<")) {
            var d = document.createElement("div");
            d.innerHTML = a;
            d = d.firstChild;
            if (!d) return
        } else d = document.createElement(a);
        for (var g in h) "function" === typeof h[g] && 0 === g.indexOf("on") && eventjs.add(d, g, h[g]);
        return d
    };
    dom.append = function(a, h) {
        "string" === typeof a && (a = sketch.$(a));
        "string" === typeof h && (h = dom.create(h));
        a.appendChild(h);
        return h
    }
})();
(function() {
    (function() {
        var a = document.createElement("DIV");
        a.innerHTML = "\x3c!--[if lte IE 9]><I></I><![endif]--\x3e";
        return 0 < a.getElementsByTagName("I").length
    })() && a("html5shiv.js");
    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
    window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL || window.oURL;
    window.Blob = window.Blob || window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;
    var a = function(a,
                     d) {
        document.write('<script src="./inc/' + (d || "polyfill") + "/" + a + '" type="text/javascript">\x3c/script>');
        window.eventjs_stallOnReady = !0
    };
    (function() {
        var h = document.createElement("canvas");
        h.getContext && h.getContext("2d") || a("flashcanvas.js", "FlashCanvasPro")
    })();
    window.ArrayBuffer || (a("TypedArray.js"), a("downloadify.js", "File"));
    window.console || (window.console = {
        log: function() {}
    });
    window.Blob || a("Blob.js", "File");
    window.atob && window.btoa || a("Base64.js");
    window.requestAnimationFrame || a("requestAnimationFrame.js");
    window.getComputedStyle || a("getComputedStyle.js");
    window.JSON && window.JSON.parse || a("JSON.js");
    document.querySelector || a("querySelector.js");
    document.documentElement.classList || a("ClassList.js");
    "undefined" === typeof window.innerHeight && a("dimensions.js");
    sketch.util.exists("localStorage.setItem") || sketch.util.exists("chrome.storage.local") || a("localStorage.js")
})();
"undefined" === typeof dom && (dom = {});
(function() {
    var a, h = {};
    dom.loadImage = function(d) {
        var img = new Image,
            loadImageBase64 = function() {
                var b = d.src;
                return dom.loadImageBase64({
                    url: b,
                    onerror: function(a) {
                        f(3);
                        h[alink.host] = 3
                    },
                    onload: function(c) {
                        if (c) {
                            var k = b.split(".").pop();
                            d.src = "data:image/" + k + ";base64," + c.responseText;
                            f(0);
                            h[alink.host] = !0 === a ? 1 : 0
                        }
                    },
                    onprogress: d.onprogress
                })
            }, f = function(a) {
                img.onload = d.onload;
                img.onerror = d.onerror;
                img.onprogress = d.onprogress;
                switch (a) {
                    case 0:
                        img.src = d.src;
                        break;
                    case 1:
                        img.crossOrigin = "anonymous";
                        img.src = d.src;
                        break;
                    case 2:
                        loadImageBase64();
                        break;
                    case 3:
                        if (!dom.loadImage.proxyUrl) break;
                        img.src = dom.loadImage.proxyUrl + escape(d.src)
                }
                return img
            }, c = function(a) {
                a = a.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);
                return "data:" === a[1] || "blob:" === a[1] || "filesystem:" === a[1] ? !0 : "string" === typeof a[1] && 0 < a[1].length && a[1].toLowerCase() !== location.protocol || "string" === typeof a[2] && 0 < a[2].length && a[2].replace(RegExp(":(" + {
                    "http:": 80,
                    "https:": 443
                }[location.protocol] + ")?$"), "") !== location.host ? !1 : !0
            }, k = function(a) {
                a = a.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);
                if ("data:" === a[1] || "blob:" === a[1] || "filesystem:" === a[1]) return !0
            }, m = function() {
                if (c(d.src)) return f(0);
                var b = h[alink.host];
                return "undefined" !== typeof b ? f(b) : !1 !== a || "withCredentials" in req ? loadImageBase64() : f(3)
            }, alink = document.createElement("a");
        alink.href = d.src;
        if (c(d.src)) return !d.onprogress || k(d.src) || sketch.userAgent.ie || sketch.userAgent.nodewebkit ? f(0) : f(2);
        if ("undefined" !== typeof a) return m(a);
        var img2 = new Image;
        img2.crossOrigin = "anonymous";
        img2.onload = function() {
            var b = document.createElement("canvas").getContext("2d");
            b.drawImage(img2,
                0, 0);
            try {
                b.getImageData(0, 0, 1, 1), m(a = !0)
            } catch (f) {
                m(a = !1)
            }
        };
        img2.src = "https://lh4.googleusercontent.com/-Qw7nlh9DWec/TvV5qTZ9yfI/AAAAAAAADOA/XdalA5bQBOY/s128/1x1.png";
        return img2
    };
    var d = function(a) {
        var b = "",
            e, f = Array(4),
            c = 0;
        for (e = 0; c < a.length;) {
            e = Array(3);
            for (var k = 0; k < e.length; k++) e[k] = c < a.length ? a.charCodeAt(c++) & 255 : 0;
            f[0] = e[0] >> 2;
            f[1] = (e[0] & 3) << 4 | e[1] >> 4;
            f[2] = (e[1] & 15) << 2 | e[2] >> 6;
            f[3] = e[2] & 63;
            e = c - (a.length - 1);
            switch (e) {
                case 2:
                    f[3] = 64;
                    f[2] = 64;
                    break;
                case 1:
                    f[3] = 64
            }
            for (k = 0; k < f.length; k++) b += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f[k])
        }
        return b
    };
    dom.loadImageBase64 = function(a) {
        var b = a.onload;
        a.onload = function(e) {
            if (e.responseText) {
                e = d(e.responseText);
                if (a.JS64) {
                    e = "data:image/png;base64," + e;
                    var f = document.createElement("canvas"),
                        c = f.getContext("2d"),
                        k = new Image;
                    k.onload = function() {
                        var a = this.offsetWidth,
                            e = this.offsetHeight;
                        f.width = a;
                        f.height = e;
                        f.style.width = a + "px";
                        f.style.height = e + "px";
                        document.getElementById("output");
                        c.drawImage(this, 0, 0);
                        for (var a = c.getImageData(0, 0, a, e).data, e = [], d = a.length, g = -1, q = 0; q < d; q += 4) 0 < a[q] && (e[++g] = String.fromCharCode(a[q]));
                        a = e.join("");
                        b({
                            responseText: a
                        });
                        document.body.removeChild(k)
                    };
                    k.src = e;
                    return !0
                }
                b({
                    responseText: e
                })
            }
        };
        sketch.util.request(a)
    }
})();
"undefined" !== typeof module && module.exports && (module.exports = dom.loadImage);
"undefined" === typeof dom && (dom = {});
(function() {
    dom.loadScript = function() {
        this.loaded = {};
        this.loading = {};
        return this
    };
    dom.loadScript.prototype.add = function(a) {
        var h = this;
        "string" === typeof a && (a = {
            url: a
        });
        var d = a.urls;
        "undefined" === typeof d && (d = [{
            url: a.url,
            verify: a.verify
        }]);
        var g = document.getElementsByTagName("head")[0],
            b = function(a, b) {
                if (!(h.loaded[a.url] || b && "undefined" === typeof window[b])) {
                    h.loaded[a.url] = !0;
                    if (h.loading[a.url]) h.loading[a.url]();
                    delete h.loading[a.url];
                    a.callback && a.callback();
                    "undefined" !== typeof p && p()
                }
            }, e = !1,
            f = [],
            c = function(c) {
                "string" === typeof c && (c = {
                    url: c,
                    verify: a.verify
                });
                if (/([\w\d.])$/.test(c.verify)) {
                    var l = c.test = c.verify;
                    if ("object" === typeof l) for (var m = 0; m < l.length; m++) f.push(l[m]);
                    else f.push(l)
                }
                h.loaded[c.url] || (l = document.createElement("script"), l.onreadystatechange = function() {
                    "loaded" !== this.readyState && "complete" !== this.readyState || b(c)
                }, l.onload = function() {
                    b(c)
                }, l.onerror = function() {
                    e = !0;
                    delete h.loading[c.url];
                    if ("object" === typeof c.test) for (var a in c.test) k(c.test[a]);
                    else k(c.test)
                },
                    l.setAttribute("type", "text/javascript"), l.setAttribute("src", c.url), g.appendChild(l), h.loading[c.url] = function() {})
            }, k = function(a) {
                for (var b = [], c = 0; c < f.length; c++) f[c] !== a && b.push(f[c]);
                f = b
            }, m = function(c) {
                if (c) b(c, c.test);
                else for (var k = 0; k < d.length; k++) b(d[k], d[k].test);
                for (var l = !0, k = 0; k < f.length; k++) {
                    var g = f[k];
                    if (g && -1 !== g.indexOf(".")) {
                        var g = g.split("."),
                            p = window[g[0]];
                        "undefined" !== typeof p && (2 === g.length ? "undefined" === typeof p[g[1]] && (l = !1) : 3 === g.length && "undefined" === typeof p[g[1]][g[2]] && (l = !1))
                    } else "undefined" === typeof window[g] && (l = !1)
                }!a.strictOrder && l ? e ? a.error && a.error() : a.callback && a.callback() : setTimeout(function() {
                    m(c)
                }, 10)
            };
        if (a.strictOrder) {
            var l = -1,
                p = function() {
                    l++;
                    if (d[l]) {
                        var b = d[l],
                            f = b.url;
                        h.loading[f] ? h.loading[f] = function() {
                            b.callback && b.callback();
                            p()
                        } : h.loaded[f] ? p() : (c(b), m(b))
                    } else e ? a.error && a.error() : a.callback && a.callback()
                };
            p()
        } else for (l = 0; l < d.length; l++) c(d[l]), m(d[l])
    };
    dom.loadScript = new dom.loadScript
})();
"undefined" !== typeof module && module.exports && (module.exports = dom.loadScript);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.util && (sketch.util = {});
(function(sketch) {
    sketch.util.request = function(h) {
        "undefined" === typeof XMLHttpRequest && (XMLHttpRequest, function() {
            for (var a = [function() {
                return new ActiveXObject("Msxml2.XMLHTTP")
            }, function() {
                return new ActiveXObject("Msxml3.XMLHTTP")
            }, function() {
                return new ActiveXObject("Microsoft.XMLHTTP")
            }], g = 0; g < a.length; g++) {
                try {
                    a[g]()
                } catch (b) {
                    continue
                }
                break
            }
            XMLHttpRequest = a[g]
        }());
        "undefined" === typeof(new XMLHttpRequest).responseText ? (document.write("\x3c!-- IEBinaryToArray_ByteStr --\x3e\r\n<script type='text/vbscript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = \"\"\r\n   End If\r\nEnd Function\r\n\x3c/script>\r\n"),
            sketch.util.request = function(url) {
                function g(a) {
                    for (var b = {}, k = 0; 256 > k; k++) for (var e = 0; 256 > e; e++) b[String.fromCharCode(k + 256 * e)] = String.fromCharCode(k) + String.fromCharCode(e);
                    k = IEBinaryToArray_ByteStr(a);
                    a = IEBinaryToArray_ByteStr_Last(a);
                    return k.replace(/[\s\S]/g, function(a) {
                        return b[a]
                    }) + a
                }
                "string" === typeof url && (url = {
                    url: url
                });
                var xhr = XMLHttpRequest();
                xhr.open(url.body ? "POST" : "GET", url.url, !0);
                xhr.overrideMimeType && xhr.overrideMimeType("text/plain; charset=x-user-defined");
                if (url.headers) for (var e in url.headers) xhr.setRequestHeader(e,
                    url.headers[e]);
                else url.body && xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                url.responseType && (xhr.responseType = url.responseType);
                url.onerror && "onerror" in xhr && (xhr.onerror = url.onerror);
                url.onprogress && "onprogress" in xhr && (xhr.onprogress = url.onprogress);
                xhr.onreadystatechange = function(f) {
                    if (4 === xhr.readyState) if (200 === xhr.status || 304 === xhr.status || 0 === xhr.status) {
                        if (xhr.responseText = g(xhr.responseBody), url.onload) url.onload(xhr)
                    } else if (url.onerror) url.onerror(f, !1)
                };
                xhr.setRequestHeader("Accept-Charset", "x-user-defined");
                xhr.send(null);
                return xhr
            }) : sketch.util.request = function(d) {
            "string" === typeof d && (d = {
                url: d
            });
            var xhr = new XMLHttpRequest;
            xhr.open(d.body ? "POST" : "GET", d.url, !0);
            xhr.overrideMimeType && xhr.overrideMimeType("text/plain; charset=x-user-defined");
            if (d.headers) for (var b in d.headers) xhr.setRequestHeader(b, d.headers[b]);
            else d.body && xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            d.responseType && (xhr.responseType = d.responseType);
            d.onerror && "onerror" in xhr && (xhr.onerror = d.onerror);
            d.onprogress && (xhr.upload && "onprogress" in xhr.upload) && (xhr.upload.onprogress = d.onprogress);
            xhr.onreadystatechange = function(b) {
                if (4 === xhr.readyState) if (200 === xhr.status || 304 === xhr.status || 0 === xhr.status && sketch.userAgent.cordova) {
                    if (d.onload) d.onload(xhr)
                } else if (d.onerror) d.onerror(b, !1)
            };
            xhr.send(d.body);
            return xhr
        };
        sketch.util.request(h)
    }
})(sketch);
"undefined" !== typeof module && module.exports && (XMLHttpRequest = require("xmlhttprequest").XMLHttpRequest, module.exports = sketch.util.request);
if ("undefined" === typeof eventjs) var eventjs = {};
(function(eventjs) {
    eventjs.modifyEventListener = !1;
    eventjs.modifySelectors = !1;
    eventjs.add = function(a, b, c, f) {
        return d(a, b, c, f, "add")
    };
    eventjs.remove = function(a, b, c, f) {
        return d(a, b, c, f, "remove")
    };
    eventjs.returnFalse = function(a) {
        return !1
    };
    eventjs.stop = function(a) {
        a && (a.stopPropagation && a.stopPropagation(), a.cancelBubble = !0, a.cancelBubbleCount = 0)
    };
    eventjs.prevent = function(a) {
        a && (a.preventDefault ? a.preventDefault() : a.preventManipulation ? a.preventManipulation() : a.returnValue = !1)
    };
    eventjs.cancel = function(b) {
        eventjs.stop(b);
        eventjs.prevent(b)
    };
    eventjs.blur = function() {
        var a = document.activeElement;
        if (a) {
            var b = document.activeElement.nodeName;
            ("INPUT" === b || "TEXTAREA" === b || "true" === a.contentEditable) && a.blur && a.blur()
        }
    };
    eventjs.getEventSupport = function(a, b) {
        "string" === typeof a && (b = a, a = window);
        b = "on" + b;
        if (b in a) return !0;
        a.setAttribute || (a = document.createElement("div"));
        if (a.setAttribute && a.removeAttribute) {
            a.setAttribute(b, "");
            var c = "function" === typeof a[b];
            "undefined" !== typeof a[b] && (a[b] = null);
            a.removeAttribute(b);
            return c
        }
    };
    var h = function(a) {
        if (!a || "object" !== typeof a) return a;
        var b = new a.constructor,
            c;
        for (c in a) b[c] = a[c] && "object" === typeof a[c] ? h(a[c]) : a[c];
        return b
    }, d = function(f, e, m, s, x, w) {
        s = s || {};
        if ("[object Object]" === String(f)) {
            var A = f;
            f = A.target;
            delete A.target;
            if (A.type && A.listener) {
                e = A.type;
                delete A.type;
                m = A.listener;
                delete A.listener;
                for (var y in A) s[y] = A[y]
            } else {
                for (var z in A) {
                    var B = A[z];
                    "function" !== typeof B && (s[z] = B)
                }
                var D = {};
                for (y in A) {
                    z = y.split(",");
                    var B = A[y],
                        E = {}, G;
                    for (G in s) E[G] = s[G];
                    if ("function" === typeof B) m = B;
                    else if ("function" === typeof B.listener) for (G in m = B.listener,
                        B) "function" !== typeof B[G] && (E[G] = B[G]);
                    else continue;
                    for (B = 0; B < z.length; B++) D[y] = eventjs.add(f, z[B], m, E, x)
                }
                return D
            }
        }
        if (f && e && m) {
            if ("string" === typeof f && "ready" === e) if (window.eventjs_stallOnReady) e = "load", f = window;
            else {
                var J = (new Date).getTime(),
                    C = s.timeout,
                    O = window.setInterval(function() {
                        (new Date).getTime() - J > C && window.clearInterval(O);
                        document.querySelector(f) && (window.clearInterval(O), setTimeout(m, 1))
                    }, s.interval || 1E3 / 60);
                return
            }
            if ("string" === typeof f) {
                f = document.querySelectorAll(f);
                if (0 === f.length) return b("Missing target on listener!",
                    arguments);
                1 === f.length && (f = f[0])
            }
            A = {};
            if (0 < f.length && f !== window) {
                y = 0;
                for (G = f.length; y < G; y++)(z = d(f[y], e, m, h(s), x)) && (A[y] = z);
                return g(A)
            }
            "string" === typeof e && (e = e.toLowerCase(), - 1 !== e.indexOf(" ") ? e = e.split(" ") : -1 !== e.indexOf(",") && (e = e.split(",")));
            if ("string" !== typeof e) {
                if ("number" === typeof e.length) for (y = 0, G = e.length; y < G; y++)(z = d(f, e[y], m, h(s), x)) && (A[e[y]] = z);
                else for (y in e)(z = "function" === typeof e[y] ? d(f, y, e[y], h(s), x) : d(f, y, e[y].listener, h(e[y]), x)) && (A[y] = z);
                return g(A)
            }
            0 === e.indexOf("on") && (e = e.substr(2));
            if ("object" !== typeof f) return b("Target is not defined!", arguments);
            if ("function" !== typeof m) return b("Listener is not a function!", arguments);
            y = s.useCapture || !1;
            A = setUniqueID(f) + "." + setUniqueID(m) + "." + (y ? 1 : 0);
            if (eventjs.Gesture && eventjs.Gesture._gestureHandlers[e]) {
                A = e + A;
                if ("remove" === x) {
                    if (!k[A]) return;
                    k[A].remove();
                    delete k[A]
                } else if ("add" === x) {
                    if (k[A]) return k[A].add(), k[A];
                    if (s.useCall && !eventjs.modifyEventListener) {
                        var N = m;
                        m = function(a, b) {
                            for (var c in b) a[c] = b[c];
                            return N.call(f, a)
                        }
                    }
                    s.gesture = e;
                    s.target = f;
                    s.listener = m;
                    s.fromOverwrite = w;
                    k[A] = eventjs.proxy[e](s)
                }
                return k[A]
            }
            for (var L = c(e), B = 0; B < L.length; B++) if (e = L[B], D = e + "." + A, "remove" === x) k[D] && (f[removeEvent](e, m, y), delete k[D]);
            else if ("add" === x) {
                if (k[D]) break;
                f[addEvent](e, m, y);
                k[D] = {
                    id: D,
                    type: e,
                    target: f,
                    listener: m,
                    remove: function() {
                        for (var b = 0; b < L.length; b++) eventjs.remove(f, L[b], m, s)
                    }
                }
            }
            return k[D]
        }
    }, g = function(a) {
        return {
            remove: function() {
                for (var b in a) a[b].remove()
            },
            add: function() {
                for (var b in a) a[b].add()
            }
        }
    }, b = function(a, b) {
        "undefined" !== typeof console && "undefined" !== typeof console.error && console.error(a, b)
    }, e = {
        msPointer: ["MSPointerDown", "MSPointerMove", "MSPointerUp"],
        touch: ["touchstart", "touchmove", "touchend"],
        mouse: ["mousedown", "mousemove", "mouseup"]
    }, f = {
        MSPointerDown: 0,
        MSPointerMove: 1,
        MSPointerUp: 2,
        touchstart: 0,
        touchmove: 1,
        touchend: 2,
        mousedown: 0,
        mousemove: 1,
        mouseup: 2
    };
    eventjs.supports = {};
    window.navigator.msPointerEnabled && (eventjs.supports.msPointer = !0);
    eventjs.getEventSupport("touchstart") && (eventjs.supports.touch = !0);
    eventjs.getEventSupport("mousedown") && (eventjs.supports.mouse = !0);
    var c = function() {
            return function(b) {
                var c = document.addEventListener ? "" : "on",
                    k = f[b];
                if (isFinite(k)) {
                    b = [];
                    for (var l in eventjs.supports) b.push(c + e[l][k]);
                    return b
                }
                return [c + b]
            }
        }(),
        k = {}, m = 0,
        setUniqueID = function(a) {
            if (a === window) return "#window";
            if (a === document) return "#document";
            a.uniqueID || (a.uniqueID = "e" + m++);
            return a.uniqueID
        }, addEvent = document.addEventListener ? "addEventListener" : "attachEvent",
        removeEvent = document.removeEventListener ? "removeEventListener" : "detachEvent";
    eventjs.createPointerEvent = function(event, f, evt) {
        var gesture = f.gesture,
            target = f.target,
            changedTouches = event.changedTouches || eventjs.proxy.getCoords(event);
        if (changedTouches.length) {
            var m = changedTouches[0];
            f.pointers = evt ? [] : changedTouches;
            f.pageX = m.pageX;
            f.pageY = m.pageY;
            f.x = f.pageX;
            f.y = f.pageY
        }
        evt = document.createEvent("Event");
        evt.initEvent(gesture, !0, !0);
        evt.originalEvent = event;
        for (var d in f) "target" !== d && (evt[d] = f[d]);
        event = evt.type;
        eventjs.Gesture && eventjs.Gesture._gestureHandlers[event] && f.oldListener.call(target, evt, f, !1)
    };
    eventjs.modifyEventListener && window.HTMLElement && function() {
        var b = function(b) {
            var f = function(f) {
                var k = f + "EventListener",
                    e = b[k];
                b[k] = function(b, k, l) {
                    if (eventjs.Gesture && eventjs.Gesture._gestureHandlers[b]) {
                        var m = l;
                        "object" === typeof l ? m.useCall = !0 : m = {
                            useCall: !0,
                            useCapture: l
                        };
                        d(this, b, k, m, f, !0)
                    } else for (b = c(b), m = 0; m < b.length; m++) e.call(this, b[m], k, l)
                }
            };
            f("add");
            f("remove")
        };
        navigator.userAgent.match(/Firefox/) ? (b(HTMLDivElement.prototype), b(HTMLCanvasElement.prototype)) : b(HTMLElement.prototype);
        b(document);
        b(window)
    }();
    eventjs.modifySelectors && function() {
        var proto = NodeList.prototype;
        proto.removeEventListener = function(name, handler, bubble) {
            for (var c = 0, k = this.length; c < k; c++) this[c].removeEventListener(name, handler, bubble)
        };
        proto.addEventListener = function(name, handler, bubble) {
            for (var c = 0, k = this.length; c < k; c++) this[c].addEventListener(name, handler, bubble)
        }
    }();
    return eventjs
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function(eventjsProxy) {
    eventjsProxy.pointerSetup = function(b) {
        b.target = b.target || window;
        b.doc = b.target.ownerDocument || b.target;
        b.minFingers = b.minFingers || b.fingers || 1;
        b.maxFingers = b.maxFingers || b.fingers || Infinity;
        b.position = b.position || "relative";
        delete b.fingers;
        var f = {
            enabled: !0
        };
        f.gesture = b.gesture;
        f.target = b.target;
        f.env = b.env;
        eventjs.modifyEventListener && b.fromOverwrite && (b.oldListener = b.listener, b.listener = eventjs.createPointerEvent);
        var c = 0,
            k = 0 === f.gesture.indexOf("pointer") && eventjs.modifyEventListener ? "pointer" : "mouse";
        b.oldListener && (f.oldListener = b.oldListener);
        f.listener = b.listener;
        f.__listener = b.listener;
        f.proxy = function(a) {
            b.listener = a;
            a(b.event, f)
        };
        f.add = function() {
            !0 !== f.enabled && (b.onPointerDown && eventjs.add(b.target, k + "down", b.onPointerDown), b.onPointerMove && eventjs.add(b.doc, k + "move", b.onPointerMove), b.onPointerUp && eventjs.add(b.doc, k + "up", b.onPointerUp), f.enabled = !0)
        };
        f.remove = function() {
            !1 !== f.enabled && (b.onPointerDown && eventjs.remove(b.target, k + "down", b.onPointerDown), b.onPointerMove && eventjs.remove(b.doc, k + "move", b.onPointerMove), b.onPointerUp && eventjs.remove(b.doc, k + "up", b.onPointerUp), f.reset(), f.enabled = !1)
        };
        f.pause = function(a) {
            !b.onPointerMove || a && !a.move || eventjs.remove(b.doc, k + "move", b.onPointerMove);
            !b.onPointerUp || a && !a.up || eventjs.remove(b.doc, k + "up", b.onPointerUp);
            c = b.fingers;
            b.fingers = 0
        };
        f.resume = function(a) {
            !b.onPointerMove || a && !a.move || eventjs.add(b.doc, k + "move", b.onPointerMove);
            !b.onPointerUp || a && !a.up || eventjs.add(b.doc, k + "up", b.onPointerUp);
            b.fingers = c
        };
        f.cancel = function(b) {
            eventjsProxy.animation.stop();
            f.pause(b)
        };
        f.reset = function() {
            b.tracker = {};
            b.fingers = 0
        };
        return f
    };
    eventjsProxy.hasDistance = function(a, b) {
        return !(a.x === b.x && a.y === b.y)
    };
    eventjsProxy.animation = new function() {
        var a = this,
            b = !1,
            c = null,
            k = function() {
                c();
                b && requestAnimationFrame(k)
            };
        this.stop = function() {
            b = !1
        };
        this.listener = function(m, l, d) {
            if ("down" === l.state) {
                var g = null,
                    h = null;
                c = function() {
                    if (g !== l.x || h !== l.y || "up" === l.state) d(m, l), g = l.x, h = l.y
                };
                b || (b = !0, k())
            } else "up" === l.state && a.stop()
        };
        return this
    };
    var h = eventjs.supports;
    eventjs.isMouse = !! h.mouse;
    eventjs.isMSPointer = !! h.touch;
    eventjs.isTouch = !! h.msPointer;
    eventjsProxy.pointerStart = function(b, f, c) {
        var k = (b.type || "mousedown").toUpperCase();
        0 === k.indexOf("MOUSE") ? (eventjs.isMouse = !0, eventjs.isTouch = !1, eventjs.isMSPointer = !1) : 0 === k.indexOf("TOUCH") ? (eventjs.isMouse = !1, eventjs.isTouch = !0, eventjs.isMSPointer = !1) : 0 === k.indexOf("MSPOINTER") && (eventjs.isMouse = !1, eventjs.isTouch = !1, eventjs.isMSPointer = !0);
        var m = function(a, b) {
            var f = c.bbox,
                k = l[b] = {};
            switch (c.position) {
                case "absolute":
                    k.offsetX = 0;
                    k.offsetY = 0;
                    break;
                case "differenceFromLast":
                    k.offsetX = a.pageX;
                    k.offsetY = a.pageY;
                    break;
                case "difference":
                    k.offsetX = a.pageX;
                    k.offsetY = a.pageY;
                    break;
                case "move":
                    k.offsetX = a.pageX - f.x1;
                    k.offsetY = a.pageY - f.y1;
                    break;
                default:
                    k.offsetX = f.x1 - f.scrollLeft, k.offsetY = f.y1 - f.scrollTop
            }
            var f = a.pageX - k.offsetX,
                e = a.pageY - k.offsetY;
            k.rotation = 0;
            k.scale = 1;
            k.startTime = k.moveTime = (new Date).getTime();
            k.move = {
                x: f,
                y: e
            };
            k.start = {
                x: f,
                y: e
            };
            c.fingers++
        };
        c.event = b;
        c.listener = f.__listener;
        var k = !c.fingers,
            l = c.tracker;
        b = b.changedTouches || eventjsProxy.getCoords(b);
        for (var d = b.length, g = 0; g < d; g++) {
            var h = b[g],
                u = h.identifier || Infinity;
            if (c.fingers) {
                if (c.fingers >= c.maxFingers) {
                    var v = [];
                    for (u in c.tracker) v.push(u);
                    f.identifier = v.join(",");
                    return k
                }
                var s = 0;
                for (v in l) {
                    if (l[v].up) {
                        delete l[v];
                        m(h, u);
                        c.cancel = !0;
                        break
                    }
                    s++
                }
                l[u] || m(h, u)
            } else l = c.tracker = {}, f.bbox = c.bbox = eventjsProxy.getBoundingBox(c.target), c.fingers = 0, c.cancel = !1, m(h, u)
        }
        v = [];
        for (u in c.tracker) v.push(u);
        f.identifier = v.join(",");
        eventjs.isTouchStart = !0;
        eventjs.isTouchEnd = !1;
        return k
    };
    eventjsProxy.pointerEnd = function(a, b, c, k) {
        var m = a.touches || [],
            l = m.length;
        a = {};
        for (var d = 0; d < l; d++) {
            var g = m[d].identifier;
            a[g || Infinity] = !0
        }
        for (g in c.tracker) m = c.tracker[g], a[g] || m.up || (k && k({
            pageX: m.pageX,
            pageY: m.pageY,
            changedTouches: [{
                pageX: m.pageX,
                pageY: m.pageY,
                identifier: "Infinity" === g ? Infinity : g
            }]
        }, "up"), m.up = !0, c.fingers--);
        if (0 !== c.fingers) return !1;
        k = [];
        c.gestureFingers = 0;
        for (g in c.tracker) c.gestureFingers++, k.push(g);
        b.identifier = k.join(",");
        eventjs.isTouchEnd = !0;
        eventjs.isTouchStart = !1;
        return !0
    };
    eventjsProxy.getCoords = function(b) {
        isFinite(b.pageX) ? eventjsProxy.getCoords = function(a) {
            return Array({
                type: "mouse",
                x: a.pageX,
                y: a.pageY,
                pageX: a.pageX,
                pageY: a.pageY,
                identifier: a.pointerId || Infinity
            })
        } : eventjsProxy.getCoords = function(a) {
            var b = document.documentElement;
            a = a || window.event;
            return Array({
                type: "mouse",
                x: a.clientX + b.scrollLeft,
                y: a.clientY + b.scrollTop,
                pageX: a.clientX + b.scrollLeft,
                pageY: a.clientY + b.scrollTop,
                identifier: Infinity
            })
        };
        return eventjsProxy.getCoords(b)
    };
    var d = 0,
        g = 0;
    eventjsProxy.getCoord = function(a) {
        if (a.changedTouches) return (a = a.changedTouches) && a.length ? {
            x: d = a[0].pageX,
            y: g = a[0].pageY
        } : {
            x: d,
            y: g
        };
        if (isFinite(a.pageX) && isFinite(a.pageY)) return {
            x: a.pageX,
            y: a.pageY
        };
        var b = document.documentElement;
        a = a || window.event;
        return {
            x: a.clientX + b.scrollLeft,
            y: a.clientY + b.scrollTop
        }
    };
    var b = function(a, b) {
        var c = parseFloat(a.getPropertyValue(b), 10);
        return isFinite(c) ? c : 0
    };
    eventjsProxy.getBoundingBox = function(a) {
        if (a === window || a === document) a = document.body;
        var f = {}, c = a.getBoundingClientRect();
        f.width = c.width;
        f.height = c.height;
        f.x1 = c.left;
        f.y1 = c.top;
        f.scaleX = c.width / a.offsetWidth || 1;
        f.scaleY = c.height / a.offsetHeight || 1;
        f.scrollLeft = 0;
        f.scrollTop = 0;
        c = window.getComputedStyle(a);
        if (!1 === ("border-box" === c.getPropertyValue("box-sizing"))) {
            var k = b(c, "border-left-width"),
                m = b(c, "border-right-width"),
                l = b(c, "border-bottom-width"),
                d = b(c, "border-top-width");
            f.border = [k, m, d, l];
            f.x1 += k;
            f.y1 += d;
            f.width -= m + k;
            f.height -= l + d
        }
        f.x2 = f.x1 + f.width;
        f.y2 = f.y1 + f.height;
        c = c.getPropertyValue("position");
        for (a = "fixed" === c ? a : a.parentNode; null !== a && a !== document.body && void 0 !== a.scrollTop;) {
            c = window.getComputedStyle(a);
            c = c.getPropertyValue("position");
            if ("absolute" !== c) if ("fixed" === c) {
                f.scrollTop -= a.parentNode.scrollTop;
                f.scrollLeft -= a.parentNode.scrollLeft;
                break
            } else f.scrollLeft += a.scrollLeft, f.scrollTop += a.scrollTop;
            a = a.parentNode
        }
        f.scrollBodyLeft = void 0 !== window.pageXOffset ? window.pageXOffset : (document.documentElement || document.body.parentNode || document.body).scrollLeft;
        f.scrollBodyTop = void 0 !== window.pageYOffset ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;
        f.scrollLeft -= f.scrollBodyLeft;
        f.scrollTop -= f.scrollBodyTop;
        return f
    };
    (function() {
        var b = navigator.userAgent.toLowerCase(),
            f = -1 !== b.indexOf("macintosh"),
            c;
        c = f && -1 !== b.indexOf("khtml") ? {
            91: !0,
            93: !0
        } : f && -1 !== b.indexOf("firefox") ? {
            224: !0
        } : {
            17: !0
        };
        (eventjsProxy.metaTrackerReset = function() {
            eventjs.fnKey = eventjsProxy.fnKey = !1;
            eventjs.metaKey = eventjsProxy.metaKey = !1;
            eventjs.escKey = eventjsProxy.escKey = !1;
            eventjs.ctrlKey = eventjsProxy.ctrlKey = !1;
            eventjs.shiftKey = eventjsProxy.shiftKey = !1;
            eventjs.altKey = eventjsProxy.altKey = !1
        })();
        eventjsProxy.metaTracker = function(b) {
            var f = "keydown" === b.type;
            27 === b.keyCode && (eventjs.escKey = eventjsProxy.escKey = f);
            c[b.keyCode] && (eventjs.metaKey = eventjsProxy.metaKey = f);
            eventjs.ctrlKey = eventjsProxy.ctrlKey = b.ctrlKey;
            eventjs.shiftKey = eventjsProxy.shiftKey = b.shiftKey;
            eventjs.altKey = eventjsProxy.altKey = b.altKey
        }
    })();
    return eventjsProxy
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
eventjs.MutationObserver = function() {
    var a = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver,
        h = !a && function() {
            var a = document.createElement("p"),
                g = !1,
                b = function() {
                    g = !0
                };
            if (a.addEventListener) a.addEventListener("DOMAttrModified", b, !1);
            else if (a.attachEvent) a.attachEvent("onDOMAttrModified", b);
            else return !1;
            a.setAttribute("id", "target");
            return g
        }();
    return function(d, g) {
        a ? (new a(function(a) {
            a.forEach(function(a) {
                g.call(a.target, a.attributeName)
            })
        })).observe(d, {
                subtree: !1,
                attributes: !0
            }) : h ? eventjs.add(d, "DOMAttrModified", function(a) {
            g.call(d, a.attrName)
        }) : "onpropertychange" in document.body && eventjs.add(d, "propertychange", function(a) {
            g.call(d, window.event.propertyName)
        })
    }
}();
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function(a) {
    a.click = function(h) {
        h.gesture = h.gesture || "click";
        h.maxFingers = h.maxFingers || h.fingers || 1;
        h.onPointerDown = function(g) {
            a.pointerStart(g, d, h) && eventjs.add(h.target, "mouseup", h.onPointerUp)
        };
        h.onPointerUp = function(g) {
            if (a.pointerEnd(g, d, h)) {
                eventjs.remove(h.target, "mouseup", h.onPointerUp);
                var b = (g.changedTouches || a.getCoords(g))[0],
                    e = h.bbox,
                    f = a.getBoundingBox(h.target),
                    c = b.pageY - f.scrollBodyTop,
                    b = b.pageX - f.scrollBodyLeft;
                if (b > e.x1 && c > e.y1 && b < e.x2 && c < e.y2 && e.scrollTop === f.scrollTop) {
                    for (var k in h.tracker) break;
                    e = h.tracker[k];
                    d.x = e.start.x;
                    d.y = e.start.y;
                    h.listener(g, d)
                }
            }
        };
        var d = a.pointerSetup(h);
        d.state = "click";
        eventjs.add(h.target, "mousedown", h.onPointerDown);
        return d
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.click = a.click;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function(a) {
    a.dbltap = a.dblclick = function(h) {
        h.gesture = h.gesture || "dbltap";
        h.maxFingers = h.maxFingers || h.fingers || 1;
        var d, g, b, e, f;
        h.onPointerDown = function(k) {
            var m = k.changedTouches || a.getCoords(k);
            d && !g ? (f = m[0], g = (new Date).getTime() - d) : (e = m[0], d = (new Date).getTime(), g = 0, clearTimeout(b), b = setTimeout(function() {
                d = 0
            }, 700));
            a.pointerStart(k, c, h) && (eventjs.add(h.target, "mousemove", h.onPointerMove).listener(k), eventjs.add(h.target, "mouseup", h.onPointerUp))
        };
        h.onPointerMove = function(c) {
            if (d && !g) f = (c.changedTouches || a.getCoords(c))[0];
            else if (!f) return;
            c = h.bbox;
            var m = f.pageX - c.x1,
                l = f.pageY - c.y1;
            0 < m && m < c.width && 0 < l && l < c.height && 25 >= Math.abs(f.pageX - e.pageX) && 25 >= Math.abs(f.pageY - e.pageY) || (eventjs.remove(h.target, "mousemove", h.onPointerMove), clearTimeout(b), d = g = 0)
        };
        h.onPointerUp = function(f) {
            a.pointerEnd(f, c, h) && (eventjs.remove(h.target, "mousemove", h.onPointerMove), eventjs.remove(h.target, "mouseup", h.onPointerUp));
            if (d && g) {
                if (700 >= g) {
                    c.state = h.gesture;
                    for (var e in h.tracker) break;
                    e = h.tracker[e];
                    c.x = e.start.x;
                    c.y = e.start.y;
                    h.listener(f, c)
                }
                clearTimeout(b);
                d = g = 0
            }
        };
        var c = a.pointerSetup(h);
        c.state = "dblclick";
        eventjs.add(h.target, "mousedown", h.onPointerDown);
        return c
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.dbltap = a.dbltap;
    eventjs.Gesture._gestureHandlers.dblclick = a.dblclick;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function(a) {
    a.dragElement = function(h, d) {
        a.drag({
            event: d,
            target: h,
            position: "move",
            listener: function(a, b) {
                h.style.left = b.x + "px";
                h.style.top = b.y + "px";
                eventjs.prevent(a)
            }
        })
    };
    a.drag = function(h) {
        h.gesture = "drag";
        h.onPointerDown = function(g) {
            a.pointerStart(g, d, h) && !h.monitor && (eventjs.add(h.doc, "mousemove", h.onPointerMove), eventjs.add(h.doc, "mouseup", h.onPointerUp));
            h.onPointerMove(g, "down")
        };
        h.onPointerMove = function(g, b) {
            if (!h.tracker) return h.onPointerDown(g);
            for (var e = g.changedTouches || a.getCoords(g),
                     f = e.length, c = 0; c < f; c++) {
                var k = e[c],
                    m = k.identifier || Infinity,
                    l = h.tracker[m];
                l && (l.pageX = k.pageX, l.pageY = k.pageY, d.state = b || "move", d.identifier = m, d.start = l.start, d.fingers = h.fingers, "differenceFromLast" === h.position ? (d.x = l.pageX - l.offsetX, d.y = l.pageY - l.offsetY, l.offsetX = l.pageX, l.offsetY = l.pageY) : (d.x = l.pageX - l.offsetX, d.y = l.pageY - l.offsetY), h.animationFrame ? a.animation.listener(g, d, h.listener) : h.listener(g, d))
            }
        };
        h.onPointerUp = function(g) {
            a.pointerEnd(g, d, h, h.onPointerMove) && !h.monitor && (eventjs.remove(h.doc, "mousemove", h.onPointerMove), eventjs.remove(h.doc, "mouseup", h.onPointerUp))
        };
        var d = a.pointerSetup(h);
        if (h.event) h.onPointerDown(h.event);
        else eventjs.add(h.target, "mousedown", h.onPointerDown), h.monitor && (eventjs.add(h.doc, "mousemove", h.onPointerMove), eventjs.add(h.doc, "mouseup", h.onPointerUp));
        return d
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.drag = a.drag;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function(a) {
    var h = Math.PI / 180,
        d = function(a, b) {
            var e = 0,
                f = 0,
                c = 0,
                k;
            for (k in b) {
                var m = b[k];
                m.up || (e += m.move.x, f += m.move.y, c++)
            }
            a.x = e / c;
            a.y = f / c;
            return a
        };
    a.gesture = function(g) {
        g.gesture = g.gesture || "gesture";
        g.minFingers = g.minFingers || g.fingers || 2;
        g.onPointerDown = function(e) {
            var f = g.fingers;
            a.pointerStart(e, b, g) && (eventjs.add(g.doc, "mousemove", g.onPointerMove), eventjs.add(g.doc, "mouseup", g.onPointerUp));
            if (g.fingers === g.minFingers && f !== g.fingers) {
                b.fingers = g.minFingers;
                b.scale = 1;
                b.rotation = 0;
                b.state = "start";
                var f = "",
                    c;
                for (c in g.tracker) f += c;
                b.identifier = parseInt(f);
                d(b, g.tracker);
                g.listener(e, b)
            }
        };
        g.onPointerMove = function(e, f) {
            for (var c = g.bbox, k = g.tracker, m = e.changedTouches || a.getCoords(e), l = m.length, p = 0; p < l; p++) {
                var r = m[p],
                    q = r.identifier || Infinity,
                    u = k[q];
                u && (u.move.x = r.pageX - c.x1, u.move.y = r.pageY - c.y1)
            }
            if (!(g.fingers < g.minFingers)) {
                m = [];
                l = c = 0;
                d(b, k);
                for (q in k) if (r = k[q], !r.up) {
                    p = r.start;
                    if (!p.distance) {
                        var u = p.x - b.x,
                            v = p.y - b.y;
                        p.distance = Math.sqrt(u * u + v * v);
                        p.angle = Math.atan2(u, v) / h
                    }
                    var u = r.move.x - b.x,
                        v = r.move.y - b.y,
                        s = Math.sqrt(u * u + v * v),
                        c = c + s / p.distance,
                        u = Math.atan2(u, v) / h,
                        p = (p.angle - u + 360) % 360 - 180;
                    r.DEG2 = r.DEG1;
                    r.DEG1 = 0 < p ? p : -p;
                    isFinite(r.DEG2) && (r.rotation = 0 < p ? r.rotation + (r.DEG1 - r.DEG2) : r.rotation - (r.DEG1 - r.DEG2), l += r.rotation);
                    m.push(r.move)
                }
                b.touches = m;
                b.fingers = g.fingers;
                b.scale = c / g.fingers;
                b.rotation = l / g.fingers;
                b.state = "change";
                g.listener(e, b)
            }
        };
        g.onPointerUp = function(e) {
            var f = g.fingers;
            a.pointerEnd(e, b, g) && (eventjs.remove(g.doc, "mousemove", g.onPointerMove), eventjs.remove(g.doc, "mouseup", g.onPointerUp));
            f === g.minFingers && g.fingers < g.minFingers && (b.fingers = g.fingers, b.state = "end", g.listener(e, b))
        };
        var b = a.pointerSetup(g);
        eventjs.add(g.target, "mousedown", g.onPointerDown);
        return b
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.gesture = a.gesture;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function(a) {
    a.pointerdown = a.pointermove = a.pointerup = function(h) {
        h.gesture = h.gesture || "pointer";
        if (!h.target.isPointerEmitter) {
            var d = !0;
            h.onPointerDown = function(a) {
                d = !1;
                g.gesture = "pointerdown";
                h.listener(a, g)
            };
            h.onPointerMove = function(a) {
                g.gesture = "pointermove";
                h.listener(a, g, d)
            };
            h.onPointerUp = function(a) {
                d = !0;
                g.gesture = "pointerup";
                h.listener(a, g, !0)
            };
            var g = a.pointerSetup(h);
            eventjs.add(h.target, "mousedown", h.onPointerDown);
            eventjs.add(h.target, "mousemove", h.onPointerMove);
            eventjs.add(h.doc, "mouseup", h.onPointerUp);
            h.target.isPointerEmitter = !0;
            return g
        }
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.pointerdown = a.pointerdown;
    eventjs.Gesture._gestureHandlers.pointermove = a.pointermove;
    eventjs.Gesture._gestureHandlers.pointerup = a.pointerup;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function(a) {
    a.shake = function(a) {
        var d = {
                gesture: "devicemotion",
                acceleration: {},
                accelerationIncludingGravity: {},
                target: a.target,
                listener: a.listener,
                remove: function() {
                    window.removeEventListener("devicemotion", f, !1)
                }
            }, g = (new Date).getTime(),
            b = {
                x: 0,
                y: 0,
                z: 0
            }, e = {
                x: {
                    count: 0,
                    value: 0
                },
                y: {
                    count: 0,
                    value: 0
                },
                z: {
                    count: 0,
                    value: 0
                }
            }, f = function(c) {
                var f = c.accelerationIncludingGravity;
                b.x = 0.8 * b.x + (1 - 0.8) * f.x;
                b.y = 0.8 * b.y + (1 - 0.8) * f.y;
                b.z = 0.8 * b.z + (1 - 0.8) * f.z;
                d.accelerationIncludingGravity = b;
                d.acceleration.x = f.x - b.x;
                d.acceleration.y = f.y - b.y;
                d.acceleration.z = f.z - b.z;
                if ("devicemotion" === a.gesture) a.listener(c, d);
                else for (var f = (new Date).getTime(), m = 0; 3 > m; m++) {
                    var l = "xyz" [m],
                        p = d.acceleration[l],
                        l = e[l],
                        r = Math.abs(p);
                    !(1E3 > f - g) && 4 < r && (p = f * p / r, r = Math.abs(p + l.value), l.value && 200 > r ? (l.value = p, l.count++, 3 === l.count && (a.listener(c, d), g = f, l.value = 0, l.count = 0)) : (l.value = p, l.count = 1))
                }
            };
        if (window.addEventListener) return window.addEventListener("devicemotion", f, !1), d
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.shake = a.shake;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function(a) {
    var h = Math.PI / 180;
    a.swipe = function(d) {
        d.snap = d.snap || 90;
        d.threshold = d.threshold || 1;
        d.gesture = d.gesture || "swipe";
        d.onPointerDown = function(b) {
            a.pointerStart(b, g, d) && (eventjs.add(d.doc, "mousemove", d.onPointerMove).listener(b), eventjs.add(d.doc, "mouseup", d.onPointerUp))
        };
        d.onPointerMove = function(b) {
            b = b.changedTouches || a.getCoords(b);
            for (var e = b.length, f = 0; f < e; f++) {
                var c = b[f],
                    k = d.tracker[c.identifier || Infinity];
                k && (k.move.x = c.pageX, k.move.y = c.pageY, k.moveTime = (new Date).getTime())
            }
        };
        d.onPointerUp = function(b) {
            if (a.pointerEnd(b, g, d)) {
                eventjs.remove(d.doc, "mousemove", d.onPointerMove);
                eventjs.remove(d.doc, "mouseup", d.onPointerUp);
                var e, f, c, k, m = {
                        x: 0,
                        y: 0
                    }, l = 0,
                    p = 0,
                    r = 0,
                    q;
                for (q in d.tracker) {
                    var u = d.tracker[q];
                    k = u.move.x - u.start.x;
                    var v = u.move.y - u.start.y,
                        l = l + u.move.x,
                        p = p + u.move.y;
                    m.x += u.start.x;
                    m.y += u.start.y;
                    r++;
                    f = Math.sqrt(k * k + v * v);
                    u = u.moveTime - u.startTime;
                    k = Math.atan2(k, v) / h + 180;
                    f = u ? f / u : 0;
                    if ("undefined" === typeof c) c = k, e = f;
                    else if (20 >= Math.abs(k - c)) c = (c + k) / 2, e = (e + f) / 2;
                    else return
                }
                q = d.gestureFingers;
                d.minFingers <= q && d.maxFingers >= q && e > d.threshold && (m.x /= r, m.y /= r, g.start = m, g.x = l / r, g.y = p / r, g.angle = -(((c / d.snap + 0.5 >> 0) * d.snap || 360) - 360), g.velocity = e, g.fingers = q, g.state = "swipe", d.listener(b, g))
            }
        };
        var g = a.pointerSetup(d);
        eventjs.add(d.target, "mousedown", d.onPointerDown);
        return g
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.swipe = a.swipe;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function(a) {
    a.longpress = function(h) {
        h.gesture = "longpress";
        return a.tap(h)
    };
    a.tap = function(h) {
        h.delay = h.delay || 500;
        h.timeout = h.timeout || 250;
        h.driftDeviance = h.driftDeviance || 10;
        h.gesture = h.gesture || "tap";
        var d, g;
        h.onPointerDown = function(e) {
            a.pointerStart(e, b, h) && (d = (new Date).getTime(), eventjs.add(h.doc, "mousemove", h.onPointerMove).listener(e), eventjs.add(h.doc, "mouseup", h.onPointerUp), "longpress" === h.gesture && (g = setTimeout(function() {
                if (!(e.cancelBubble && 1 < ++e.cancelBubbleCount)) {
                    var a = 0,
                        c;
                    for (c in h.tracker) {
                        var k = h.tracker[c];
                        if (!0 === k.end || h.cancel) return;
                        a++
                    }
                    h.minFingers <= a && h.maxFingers >= a && (b.state = "start", b.fingers = a, b.x = k.start.x, b.y = k.start.y, h.listener(e, b))
                }
            }, h.delay)))
        };
        h.onPointerMove = function(b) {
            var f = h.bbox;
            b = b.changedTouches || a.getCoords(b);
            for (var c = b.length, k = 0; k < c; k++) {
                var m = b[k],
                    l = h.tracker[m.identifier || Infinity];
                if (l) {
                    var d = m.pageX - f.x1,
                        m = m.pageY - f.y1,
                        g = d - l.start.x,
                        l = m - l.start.y,
                        l = Math.sqrt(g * g + l * l);
                    if (!(0 < d && d < f.width && 0 < m && m < f.height && l <= h.driftDeviance)) {
                        eventjs.remove(h.doc, "mousemove", h.onPointerMove);
                        h.cancel = !0;
                        break
                    }
                }
            }
        };
        h.onPointerUp = function(e) {
            if (a.pointerEnd(e, b, h) && (clearTimeout(g), eventjs.remove(h.doc, "mousemove", h.onPointerMove), eventjs.remove(h.doc, "mouseup", h.onPointerUp), !(e.cancelBubble && 1 < ++e.cancelBubbleCount))) if ("longpress" === h.gesture) "start" === b.state && (b.state = "end", h.listener(e, b));
            else if (!(h.cancel || (new Date).getTime() - d > h.timeout)) {
                var f = h.gestureFingers;
                h.minFingers <= f && h.maxFingers >= f && (b.state = "tap", b.fingers = h.gestureFingers, h.listener(e,
                    b))
            }
        };
        var b = a.pointerSetup(h);
        eventjs.add(h.target, "mousedown", h.onPointerDown);
        return b
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.tap = a.tap;
    eventjs.Gesture._gestureHandlers.longpress = a.longpress;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function(a) {
    a.wheelPreventElasticBounce = function(a) {
        a && ("string" === typeof a && (a = document.querySelector(a)), eventjs.add(a, "wheel", function(a, g) {
            g.preventElasticBounce();
            eventjs.stop(a)
        }))
    };
    a.wheel = function(a) {
        var d, g = a.timeout || 150,
            b = 0,
            e = {
                gesture: "wheel",
                state: "start",
                wheelDelta: 0,
                target: a.target,
                listener: a.listener,
                preventElasticBounce: function(a) {
                    var b = this.target,
                        f = b.scrollTop;
                    f + b.offsetHeight === b.scrollHeight && 0 >= this.wheelDelta ? eventjs.cancel(a) : 0 === f && 0 <= this.wheelDelta && eventjs.cancel(a);
                    eventjs.stop(a)
                },
                add: function() {
                    a.target[c](m, f, !1)
                },
                remove: function() {
                    a.target[k](m, f, !1)
                }
            }, f = function(f) {
                f = f || window.event;
                e.state = b++ ? "change" : "start";
                e.wheelDelta = f.detail ? -20 * f.detail : f.wheelDelta;
                a.listener(f, e);
                clearTimeout(d);
                d = setTimeout(function() {
                    b = 0;
                    e.state = "end";
                    e.wheelDelta = 0;
                    a.listener(f, e)
                }, g)
            }, c = document.addEventListener ? "addEventListener" : "attachEvent",
            k = document.removeEventListener ? "removeEventListener" : "detachEvent",
            m = eventjs.getEventSupport("mousewheel") ? "mousewheel" : "DOMMouseScroll";
        a.target[c](m, f, !1);
        return e
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.wheel = a.wheel;
    return a
}(eventjs.proxy);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.language && (sketch.language = {});
(function(sketch) {
    var h;
    sketch.language.setLocale = function(g) {
        h ? h.setLocale(g) : h = new d({
            directory: "./js/project/locales",
            locale: g,
            extension: ".json",
            onload: function(b) {
                sketch.configure.lang = g
            }
        })
    };
    sketch.language.translate = function(d) {
        var b = sketch.configure.lang,
            e = h.__(d);
        e ? -1 !== e.indexOf("{") && (e = e.replace("{sk-version}", sketch.__version)) : (e = d, "en" !== b && sketch.feature.debug && console.log("Missing translation:", arguments));
        return e
    };
    var d = function(d) {
        for (var b in d) this[b] = d[b];
        d = this.locale;
        sketch.language[d] ? this.setLocaleData(d, sketch.language[d]) : this.setLocale(d)
    };
    d.localeCache = {};
    d.prototype = {
        defaultLocale: "en",
        directory: "/locales",
        extension: ".min.json",
        getLocale: function() {
            return this.locale
        },
        setLocale: function(a) {
            a || (a = document.querySelector("html").getAttribute("lang"));
            a || (a = this.defaultLocale);
            this.locale = a;
            a in d.localeCache || this.getLocaleFileFromServer()
        },
        setLocaleData: function(a, b) {
            d.localeCache[a] = b
        },
        getLocaleFileFromServer: function(a) {
            var b = this.onload,
                e = this.locale;
            sketch.util.request({
                url: this.directory + "/" + e + this.extension,
                onload: function(a) {
                    a = JSON.parse(a.responseText);
                    d.localeCache[e] = a;
                    b && b(a)
                }
            })
        },
        __: function() {
            var a = d.localeCache[this.locale][arguments[0]];
            1 < arguments.length && (a = vsprintf(a, Array.prototype.slice.call(arguments, 1)));
            return a
        },
        __n: function(a, b) {
            var e = d.localeCache[this.locale][a];
            b = parseInt(b, 10);
            e = 0 === b ? e.zero : 1 < b ? e.other : e.one;
            e = vsprintf(e, [b]);
            2 < arguments.length && (e = vsprintf(e, Array.prototype.slice.call(arguments, 2)));
            return e
        }
    };
    (function(a) {
        function b(a) {
            return Object.prototype.toString.call(a).slice(8, - 1).toLowerCase()
        }
        var e = function() {
            e.cache.hasOwnProperty(arguments[0]) || (e.cache[arguments[0]] = e.parse(arguments[0]));
            return e.format.call(null, e.cache[arguments[0]], arguments)
        };
        e.format = function(a, c) {
            var k = 1,
                m = a.length,
                l = "",
                d = [],
                g, h, u, v;
            for (g = 0; g < m; g++) if (l = b(a[g]), "string" === l) d.push(a[g]);
            else if ("array" === l) {
                u = a[g];
                if (u[2]) for (l = c[k], h = 0; h < u[2].length; h++) {
                    if (!l.hasOwnProperty(u[2][h])) throw e('[sprintf] property "%s" does not exist', u[2][h]);
                    l = l[u[2][h]]
                } else l = u[1] ? c[u[1]] : c[k++];
                if (/[^s]/.test(u[8]) && "number" != b(l)) throw e("[sprintf] expecting number but found %s", b(l));
                switch (u[8]) {
                    case "b":
                        l = l.toString(2);
                        break;
                    case "c":
                        l = String.fromCharCode(l);
                        break;
                    case "d":
                        l = parseInt(l, 10);
                        break;
                    case "e":
                        l = u[7] ? l.toExponential(u[7]) : l.toExponential();
                        break;
                    case "f":
                        l = u[7] ? parseFloat(l).toFixed(u[7]) : parseFloat(l);
                        break;
                    case "o":
                        l = l.toString(8);
                        break;
                    case "s":
                        l = (l = String(l)) && u[7] ? l.substring(0, u[7]) : l;
                        break;
                    case "u":
                        l >>>= 0;
                        break;
                    case "x":
                        l = l.toString(16);
                        break;
                    case "X":
                        l = l.toString(16).toUpperCase()
                }
                l = /[def]/.test(u[8]) && u[3] && 0 <= l ? "+" + l : l;
                h = u[4] ? "0" == u[4] ? "0" : u[4].charAt(1) : " ";
                v = u[6] - String(l).length;
                if (u[6]) {
                    for (var s = []; 0 < v; s[--v] = h);
                    h = s.join("")
                } else h = "";
                d.push(u[5] ? l + h : h + l)
            }
            return d.join("")
        };
        e.cache = {};
        e.parse = function(a) {
            for (var b = [], k = [], e = 0; a;) {
                if (null !== (b = /^[^\x25]+/.exec(a))) k.push(b[0]);
                else if (null !== (b = /^\x25{2}/.exec(a))) k.push("%");
                else if (null !== (b = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(a))) {
                    if (b[2]) {
                        var e = e | 1,
                            l = [],
                            d = b[2],
                            g = [];
                        if (null !== (g = /^([a-z_][a-z_\d]*)/i.exec(d))) for (l.push(g[1]);
                                                                               "" !== (d = d.substring(g[0].length));) if (null !== (g = /^\.([a-z_][a-z_\d]*)/i.exec(d))) l.push(g[1]);
                            else if (null !== (g = /^\[(\d+)\]/.exec(d))) l.push(g[1]);
                            else throw "[sprintf] huh?";
                        else throw "[sprintf] huh?";
                        b[2] = l
                    } else e |= 2;
                    if (3 === e) throw "[sprintf] mixing positional and named placeholders is not (yet) supported";
                    k.push(b)
                } else throw "[sprintf] huh?";
                a = a.substring(b[0].length)
            }
            return k
        };
        a.sprintf = e;
        a.vsprintf = function(a, b, k) {
            k = b.slice(0);
            k.splice(0, 0, a);
            return e.apply(null, k)
        }
    })("undefined" != typeof exports ? exports : window)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.util && (sketch.util = {});
(function(sketch) {
    sketch.util.RAD_DEG = 180 / Math.PI;
    sketch.util.DEG_RAD = 1 / sketch.util.RAD_DEG;
    sketch.util.INFINITY = 4294967295;
    sketch.util.INFINITY_MINUS_24bit = sketch.util.INFINITY - 16777215;
    sketch.util.INFINITY_MINUS_16bit = sketch.util.INFINITY - 65535;
    sketch.util.INFINITY_MINUS_8bit = sketch.util.INFINITY - 255;
    sketch.util.Random = function(h) {
        this.seed = "number" === typeof h ? h : sketch.util.Random.seed();
        this.n = Number(this.seed);
        return this
    };
    sketch.util.Random.seed = function() {
        return 2147483648 * Math.random() >> 0
    };
    sketch.util.Random.prototype = {
        toInt: function() {
            return this.n = 16807 * this.n % 2147483647
        },
        toDouble: function() {
            return (this.n = 16807 * this.n % 2147483647) / 2147483647
        },
        intRange: function(a, d) {
            a -= 0.4999;
            return Math.round(a + (d + 0.4999 - a) * ((this.n = 16807 * this.n % 2147483647) / 2147483647))
        },
        doubleRange: function(a, d) {
            return a + (d - a) * ((this.n = 16807 * this.n % 2147483647) / 2147483647)
        }
    };
    sketch.util.getScreenMetrics = function() {
        var a = function(a) {
            try {
                g.style.fontSize = a
            } catch (b) {
                g.style.fontSize = ""
            }
            return g.offsetHeight / 1E4
        }, d = document.createElement("div");
        d.style.cssText = "position: relative; width: 1px; height: 1px; overflow: scroll;";
        var g = document.createElement("div");
        g.style.cssText = "position: absolute; width: 100em; height: 10000em; overflow: hidden;";
        d.appendChild(g);
        document.body.appendChild(d);
        for (var b = "normal xx-small x-small small medium large x-large xx-large".split(" "), e = {}, f = 0; f < b.length; f++) e[b[f] + "_px"] = a(b[f]);
        e["%>px"] = a("100%") / 100;
        e["px>pt"] = 1 / a("1pt");
        e["pt>pc"] = 1 / 12;
        e["px>in"] = 1 / a("72pt");
        e["in>ft"] = 1 / 12;
        e["ft>yd"] = 1 / 3;
        e["px>mm"] = 25.4 * e["px>in"];
        e["mm>cm"] = 0.1;
        e["cm>m"] = 0.01;
        e["px>ex"] = 1 / a("1ex");
        e["ex>em"] = 1 / e["px>ex"] / a("1em");
        e["px>px"] = 1;
        document.body.removeChild(d);
        var c = function(a, b, f, e) {
            for (var d in b) "object" === typeof(e = b[d]) ? c(a, e, d) : (f && (a["px>" + d] = a["px>" + f] * a[f + ">" + d], a[f + ">" + e] = a[f + ">" + d] * a[d + ">" + e], a[f + ">px"] = 1 / a["px>" + f], a[e + ">" + f] = 1 * (1 / a[d + ">" + e]) / a[f + ">" + d], a[d + ">" + f] = 1 / a[f + ">" + d]), a["px>" + e] = a["px>" + d] * a[d + ">" + e], a[d + ">px"] = 1 / a["px>" + d], a[e + ">px"] = 1 * (1 / a["px>" + d]) / a[d + ">" + e], a[e + ">" + d] = 1 / a[d + ">" + e])
        };
        c(e, {
            pt: "pc",
            mm: {
                cm: "m"
            },
            "in": {
                ft: "yd"
            },
            ex: "em"
        });
        return e
    };
    sketch.util.createHash = function(a) {
        if (!a) return 0;
        for (var d = 5381, g = 0, b = a.length; g < b; g++) var e = a[g].charCodeAt(),
            d = (d << 5) + d + e;
        return d
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.util && (sketch.util = {});
(function(sketch) {
    sketch.util.version = function(a, d) {
        function g(a, e) {
            e = e || 4;
            a = a.split(".").map(function(a) {
                var b = parseInt(a);
                return (a = a.replace(b, "")) ? b + a[0].charCodeAt() / 255 : b
            });
            for (var f = 0, c = 0; c < a.length && e !== c; ++c) f += a[c] / 255 * Math.pow(255, e - c + 1);
            return f
        }
        this.value = a;
        this.hash = g(a, d);
        this.isGreaterThan = function(b, e) {
            return g(a, e) > g(b, e)
        };
        this.isLessThan = function(b, e) {
            return g(a, e) < g(b, e)
        };
        return this
    }
})(sketch);
var STRING = {
    rxSplitByUppercase: /([A-Z]?[^A-Z]*)/g,
    rxAlphaNumeric: /[^A-Z0-9]+/gi,
    rxNumeric: /[0-9.-]*/g,
    replaceAll: function(a, h, d) {
        if (a) {
            if ("object" === typeof h) {
                for (var g = 0; g < h.length; g++) a = a.split(h[g]).join(d[g]);
                return a
            }
            return a.split(h).join(d)
        }
    },
    ucfirst: function(a) {
        if (a) return a[0].toUpperCase() + a.substr(1)
    },
    ucwords: function(a) {
        if (a) return a.replace(/^(.)|\s(.)/g, function(a) {
            return a.toUpperCase()
        })
    },
    addslashes: function(a) {
        return a.replace(/([\\"'])/g, "\\$1").replace(/\0/g, "\\0")
    },
    stripslashes: function(a) {
        return a.replace(/\0/g, "0").replace(/\\([\\'"])/g, "$1")
    },
    dirname: function(a) {
        return a.replace(/\\/g, "/").replace(/\/[^\/]*$/, "")
    },
    basename: function(a) {
        return a.replace(/\\/g, "/").replace(/.*\//, "")
    },
    filename: function(a) {
        return a ? a.split(".").shift() : ""
    },
    splitByUpperCase: function(a) {
        return a.match(/([A-Z]?[^A-Z]*)/g).slice(0, - 1)
    },
    extension: function(a) {
        return a ? a.split(".").pop().toLowerCase() : ""
    },
    lpad: function(a, h, d) {
        for (; a.length < d;) a = h + a;
        return a
    },
    rpad: function(a, h, d) {
        for (; a.length < d;) a += h;
        return a
    },
    encode_utf8: function(a) {
        return unescape(encodeURIComponent(a))
    },
    decode_utf8: function(a) {
        return decodeURIComponent(escape(a))
    }
};
"trim" in String.prototype || (String.prototype.trim = function(a) {
    return this.replace(/^\s+|\s+$/g, "")
});
"undefined" !== typeof module && module.exports && (module.exports = STRING);
(function(a) {
    if ("object" === typeof exports) module.exports = a();
    else if ("function" === typeof define && define.amd) define(a);
    else {
        var h;
        try {
            h = window
        } catch (d) {
            h = self
        }
        h.SparkMD5 = a()
    }
})(function() {
    var a = function(a, b) {
            return a + b & 4294967295
        }, h = function(b, f, c, k, l, e) {
            f = a(a(f, b), a(k, e));
            return a(f << l | f >>> 32 - l, c)
        }, d = function(a, b, f, c, k, l, e) {
            return h(b & f | ~b & c, a, b, k, l, e)
        }, g = function(a, b, f, c, k, l, e) {
            return h(b & c | f & ~c, a, b, k, l, e)
        }, b = function(a, b, f, c, k, l, e) {
            return h(f ^ (b | ~c), a, b, k, l, e)
        }, e = function(f, c) {
            var k = f[0],
                l = f[1],
                e = f[2],
                m = f[3],
                k = d(k, l, e, m, c[0], 7, - 680876936),
                m = d(m, k, l, e, c[1], 12, - 389564586),
                e = d(e, m, k, l, c[2], 17, 606105819),
                l = d(l, e, m, k, c[3], 22, - 1044525330),
                k = d(k, l, e, m, c[4], 7, - 176418897),
                m = d(m, k, l, e, c[5], 12, 1200080426),
                e = d(e, m, k, l, c[6], 17, - 1473231341),
                l = d(l, e, m, k, c[7], 22, - 45705983),
                k = d(k, l, e, m, c[8], 7, 1770035416),
                m = d(m, k, l, e, c[9], 12, - 1958414417),
                e = d(e, m, k, l, c[10], 17, - 42063),
                l = d(l, e, m, k, c[11], 22, - 1990404162),
                k = d(k, l, e, m, c[12], 7, 1804603682),
                m = d(m, k, l, e, c[13], 12, - 40341101),
                e = d(e, m, k, l, c[14], 17, - 1502002290),
                l = d(l, e,
                    m, k, c[15], 22, 1236535329),
                k = g(k, l, e, m, c[1], 5, - 165796510),
                m = g(m, k, l, e, c[6], 9, - 1069501632),
                e = g(e, m, k, l, c[11], 14, 643717713),
                l = g(l, e, m, k, c[0], 20, - 373897302),
                k = g(k, l, e, m, c[5], 5, - 701558691),
                m = g(m, k, l, e, c[10], 9, 38016083),
                e = g(e, m, k, l, c[15], 14, - 660478335),
                l = g(l, e, m, k, c[4], 20, - 405537848),
                k = g(k, l, e, m, c[9], 5, 568446438),
                m = g(m, k, l, e, c[14], 9, - 1019803690),
                e = g(e, m, k, l, c[3], 14, - 187363961),
                l = g(l, e, m, k, c[8], 20, 1163531501),
                k = g(k, l, e, m, c[13], 5, - 1444681467),
                m = g(m, k, l, e, c[2], 9, - 51403784),
                e = g(e, m, k, l, c[7], 14, 1735328473),
                l = g(l, e, m, k, c[12], 20, - 1926607734),
                k = h(l ^ e ^ m, k, l, c[5], 4, - 378558),
                m = h(k ^ l ^ e, m, k, c[8], 11, - 2022574463),
                e = h(m ^ k ^ l, e, m, c[11], 16, 1839030562),
                l = h(e ^ m ^ k, l, e, c[14], 23, - 35309556),
                k = h(l ^ e ^ m, k, l, c[1], 4, - 1530992060),
                m = h(k ^ l ^ e, m, k, c[4], 11, 1272893353),
                e = h(m ^ k ^ l, e, m, c[7], 16, - 155497632),
                l = h(e ^ m ^ k, l, e, c[10], 23, - 1094730640),
                k = h(l ^ e ^ m, k, l, c[13], 4, 681279174),
                m = h(k ^ l ^ e, m, k, c[0], 11, - 358537222),
                e = h(m ^ k ^ l, e, m, c[3], 16, - 722521979),
                l = h(e ^ m ^ k, l, e, c[6], 23, 76029189),
                k = h(l ^ e ^ m, k, l, c[9], 4, - 640364487),
                m = h(k ^ l ^ e, m, k, c[12], 11, - 421815835),
                e = h(m ^ k ^ l, e, m, c[15], 16, 530742520),
                l = h(e ^ m ^ k, l, e, c[2], 23, - 995338651),
                k = b(k, l, e, m, c[0], 6, - 198630844),
                m = b(m, k, l, e, c[7], 10, 1126891415),
                e = b(e, m, k, l, c[14], 15, - 1416354905),
                l = b(l, e, m, k, c[5], 21, - 57434055),
                k = b(k, l, e, m, c[12], 6, 1700485571),
                m = b(m, k, l, e, c[3], 10, - 1894986606),
                e = b(e, m, k, l, c[10], 15, - 1051523),
                l = b(l, e, m, k, c[1], 21, - 2054922799),
                k = b(k, l, e, m, c[8], 6, 1873313359),
                m = b(m, k, l, e, c[15], 10, - 30611744),
                e = b(e, m, k, l, c[6], 15, - 1560198380),
                l = b(l, e, m, k, c[13], 21, 1309151649),
                k = b(k, l, e, m, c[4], 6, - 145523070),
                m = b(m, k, l, e, c[11],
                    10, - 1120210379),
                e = b(e, m, k, l, c[2], 15, 718787259),
                l = b(l, e, m, k, c[9], 21, - 343485551);
            f[0] = a(k, f[0]);
            f[1] = a(l, f[1]);
            f[2] = a(e, f[2]);
            f[3] = a(m, f[3])
        }, f = function(a) {
            var b = [],
                c;
            for (c = 0; 64 > c; c += 4) b[c >> 2] = a.charCodeAt(c) + (a.charCodeAt(c + 1) << 8) + (a.charCodeAt(c + 2) << 16) + (a.charCodeAt(c + 3) << 24);
            return b
        }, c = function(a) {
            var b = [],
                c;
            for (c = 0; 64 > c; c += 4) b[c >> 2] = a[c] + (a[c + 1] << 8) + (a[c + 2] << 16) + (a[c + 3] << 24);
            return b
        }, k = function(a) {
            var b = a.length,
                c = [1732584193, - 271733879, - 1732584194, 271733878],
                k, l, m;
            for (k = 64; k <= b; k += 64) e(c, f(a.substring(k - 64, k)));
            a = a.substring(k - 64);
            l = a.length;
            m = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            for (k = 0; k < l; k += 1) m[k >> 2] |= a.charCodeAt(k) << (k % 4 << 3);
            m[k >> 2] |= 128 << (k % 4 << 3);
            if (55 < k) for (e(c, m), k = 0; 16 > k; k += 1) m[k] = 0;
            b = (8 * b).toString(16).match(/(.*?)(.{0,8})$/);
            a = parseInt(b[2], 16);
            b = parseInt(b[1], 16) || 0;
            m[14] = a;
            m[15] = b;
            e(c, m);
            return c
        }, m = "0123456789abcdef".split(""),
        l = function(a) {
            var b;
            for (b = 0; b < a.length; b += 1) {
                for (var c = a, f = b, k = a[b], l = "", e = void 0, e = 0; 4 > e; e += 1) l += m[k >> 8 * e + 4 & 15] + m[k >> 8 * e & 15];
                c[f] = l
            }
            return a.join("")
        }, p = function() {
            this.reset()
        };
    "5d41402abc4b2a76b9719d911017c592" !== l(k("hello")) && (a = function(a, b) {
        var c = (a & 65535) + (b & 65535);
        return (a >> 16) + (b >> 16) + (c >> 16) << 16 | c & 65535
    });
    p.prototype.append = function(a) {
        /[\u0080-\uFFFF]/.test(a) && (a = unescape(encodeURIComponent(a)));
        this.appendBinary(a);
        return this
    };
    p.prototype.appendBinary = function(a) {
        this._buff += a;
        this._length += a.length;
        a = this._buff.length;
        var b;
        for (b = 64; b <= a; b += 64) e(this._state, f(this._buff.substring(b - 64, b)));
        this._buff = this._buff.substr(b - 64);
        return this
    };
    p.prototype.end = function(a) {
        var b = this._buff,
            c = b.length,
            f, k = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        for (f = 0; f < c; f += 1) k[f >> 2] |= b.charCodeAt(f) << (f % 4 << 3);
        this._finish(k, c);
        a = a ? this._state : l(this._state);
        this.reset();
        return a
    };
    p.prototype._finish = function(a, b) {
        var c = b,
            f;
        a[c >> 2] |= 128 << (c % 4 << 3);
        if (55 < c) for (e(this._state, a), c = 0; 16 > c; c += 1) a[c] = 0;
        f = 8 * this._length;
        f = f.toString(16).match(/(.*?)(.{0,8})$/);
        c = parseInt(f[2], 16);
        f = parseInt(f[1], 16) || 0;
        a[14] = c;
        a[15] = f;
        e(this._state, a)
    };
    p.prototype.reset = function() {
        this._buff = "";
        this._length = 0;
        this._state = [1732584193, - 271733879, - 1732584194, 271733878];
        return this
    };
    p.prototype.destroy = function() {
        delete this._state;
        delete this._buff;
        delete this._length
    };
    p.hash = function(a, b) {
        /[\u0080-\uFFFF]/.test(a) && (a = unescape(encodeURIComponent(a)));
        var c = k(a);
        return b ? c : l(c)
    };
    p.hashBinary = function(a, b) {
        var c = k(a);
        return b ? c : l(c)
    };
    p.ArrayBuffer = function() {
        this.reset()
    };
    p.ArrayBuffer.prototype.append = function(a) {
        var b = this._concatArrayBuffer(this._buff, a),
            f = b.length;
        this._length += a.byteLength;
        for (a = 64; a <= f; a += 64) e(this._state,
            c(b.subarray(a - 64, a)));
        this._buff = a - 64 < f ? b.subarray(a - 64) : new Uint8Array(0);
        return this
    };
    p.ArrayBuffer.prototype.end = function(a) {
        var b = this._buff,
            c = b.length,
            f = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            k;
        for (k = 0; k < c; k += 1) f[k >> 2] |= b[k] << (k % 4 << 3);
        this._finish(f, c);
        a = a ? this._state : l(this._state);
        this.reset();
        return a
    };
    p.ArrayBuffer.prototype._finish = p.prototype._finish;
    p.ArrayBuffer.prototype.reset = function() {
        this._buff = new Uint8Array(0);
        this._length = 0;
        this._state = [1732584193, - 271733879, - 1732584194, 271733878];
        return this
    };
    p.ArrayBuffer.prototype.destroy = p.prototype.destroy;
    p.ArrayBuffer.prototype._concatArrayBuffer = function(a, b) {
        var c = a.length,
            f = new Uint8Array(c + b.byteLength);
        f.set(a);
        f.set(new Uint8Array(b), c);
        return f
    };
    p.ArrayBuffer.hash = function(a, b) {
        var f = new Uint8Array(a),
            k = f.length,
            m = [1732584193, - 271733879, - 1732584194, 271733878],
            d, g, p;
        for (d = 64; d <= k; d += 64) e(m, c(f.subarray(d - 64, d)));
        f = d - 64 < k ? f.subarray(d - 64) : new Uint8Array(0);
        g = f.length;
        p = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        for (d = 0; d < g; d += 1) p[d >> 2] |= f[d] << (d % 4 << 3);
        p[d >> 2] |= 128 << (d % 4 << 3);
        if (55 < d) for (e(m, p), d = 0; 16 > d; d += 1) p[d] = 0;
        k = (8 * k).toString(16).match(/(.*?)(.{0,8})$/);
        f = parseInt(k[2], 16);
        k = parseInt(k[1], 16) || 0;
        p[14] = f;
        p[15] = k;
        e(m, p);
        return b ? m : l(m)
    };
    return p
});
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.util && (sketch.util = {});
(function(sketchUtil) {
    sketchUtil.Queue = function(a) {
        var d = this,
            g = a.oncomplete || a.callback,
            b = a.onprogress || a.progress,
            e = !1 === a.flatten ? !1 : !0;
        this.canceled = !1;
        this.cancel = function() {
            if (!(d.canceled || 0 >= d.remaining)) {
                if (a.oncancel) a.oncancel();
                d.canceled = !0
            }
        };
        this.next = function() {
            if (!d.canceled) {
                var f = d.queue,
                    c = d.remaining,
                    k = d.length,
                    m = k - c - 1,
                    l = d.keys[m];
                b && b(k ? 1 - (c + 1) / k : 1);
                if (f.length) if (d.remaining--, k = (c = "[object Object]" === String(p)) && p.length, e) a.next.call(d, f.shift(), l, m);
                else {
                    var p = f[0];
                    c && !k && f.shift();
                    c && k ? a.next.call(d,
                        p.shift(), l, m) : a.next.call(d, f.shift(), l, m)
                } else g && g()
            }
        };
        this.reset = function(b) {
            if (a.range) {
                var c = a.range,
                    k = c.from;
                for (b = []; k <= c.to; k++) b.push(k)
            } else b = b || a.items;
            this.length = 0;
            this.remaining = -1;
            this.queue = [];
            this.keys = [];
            for (var m in b) if ("[object Object]" !== String(b[m]) || e) this.keys.push(m), this.queue.push(b[m]), this.length++, this.remaining++;
            else {
                c = [];
                this.queue.push(c);
                for (var l in b[m]) c.push(b[m][l]), this.keys.push(l), this.length++, this.remaining++
            }
        };
        this.reset();
        this.next();
        return this
    };
    "undefined" !== typeof module && module.exports && (module.exports = sketchUtil.Queue)
})(sketch.util);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.language && (sketch.language = {});
sketch.language.en = {
    "useMaxCopies-alert": "You can only include {maxCopies} {plural} of this clipart.",
    "about-version": "[?] <a href='http://sketch.io/' target='_blank'>SketchAPI</a> v{sk-version}",
    "exit-app-confirm": "Youâ€™re about to exit this app.<p>Any unsaved data in current document will be lost.<p>Would you like to save before exiting?",
    "delete-project-confirm": "Youâ€™re about to delete this document.<p>Do you want to continue?",
    "clear-confirm": "Changes to the open document will be lost.<p>Do you want to continue?",
    "new-project-confirm": "Youâ€™re about to create a <i>new document</i>.<p>Any unsaved data in <i>current document</i> will be lost.",
    "open-confirm": "Youâ€™re about to create a <i>new document</i>.<p>Any unsaved data in <i>current document</i> will be lost.",
    Helo: "Hello",
    "Hello %s, how are you today?": "Hello %s, how are you today?",
    weekend: "weekend",
    "Hello %s, how are you today? How was your %s.": "Hello %s, how are you today? How was your %s.",
    Hi: "Hi",
    Howdy: "Howdy",
    "%s cat": {
        one: "%s cat",
        other: "%s cats"
    },
    "There is one monkey in the %%s": {
        one: "There is one monkey in the %%s",
        other: "There are %d monkeys in the %%s"
    },
    tree: "tree",
    "There is one monkey in the %s": {
        one: "There is one monkey in the %s",
        other: "There are %d monkeys in the %s"
    },
    "Hello %s": "Hello %s"
};
var _html2canvas;
(function(win, doc, d) {
    function g(a, b, c) {
        var f = a.runtimeStyle && a.runtimeStyle[b],
            e, d = a.style;
        !/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(c) && /^-?\d/.test(c) && (e = d.left, f && (a.runtimeStyle.left = a.currentStyle.left), d.left = "fontSize" === b ? "1em" : c || 0, c = d.pixelLeft + "px", d.left = e, f && (a.runtimeStyle.left = f));
        return /^(thin|medium|thick)$/i.test(c) ? c : Math.round(parseFloat(c)) + "px"
    }
    function b(a) {
        return parseInt(a, 10)
    }
    function e(a, b, c, f, e, d) {
        b = _html2canvas.Util.getCSS(b, a, e);
        var g;
        1 === b.length && (e = b[0], b = [], b[0] = e, b[1] = e); - 1 !== b[0].toString().indexOf("%") ? (g = parseFloat(b[0]) / 100, e = c.width * g, "backgroundSize" !== a && (e -= (d || f).width * g)) : e = "backgroundSize" === a ? "auto" === b[0] ? f.width : /contain|cover/.test(b[0]) ? _html2canvas.Util.resizeBounds(f.width, f.height, c.width, c.height, b[0]).width : parseInt(b[0], 10) : parseInt(b[0], 10);
        "auto" === b[1] ? c = e / f.width * f.height : -1 !== b[1].toString().indexOf("%") ? (g = parseFloat(b[1]) / 100, c = c.height * g, "backgroundSize" !== a && (c -= (d || f).height * g)) : c = parseInt(b[1], 10);
        return [e, c]
    }
    function f(a, b) {
        var c = [];
        return {
            storage: c,
            width: a,
            height: b,
            clip: function() {
                c.push({
                    type: "function",
                    name: "clip",
                    arguments: arguments
                })
            },
            translate: function() {
                c.push({
                    type: "function",
                    name: "translate",
                    arguments: arguments
                })
            },
            fill: function() {
                c.push({
                    type: "function",
                    name: "fill",
                    arguments: arguments
                })
            },
            save: function() {
                c.push({
                    type: "function",
                    name: "save",
                    arguments: arguments
                })
            },
            restore: function() {
                c.push({
                    type: "function",
                    name: "restore",
                    arguments: arguments
                })
            },
            fillRect: function() {
                c.push({
                    type: "function",
                    name: "fillRect",
                    arguments: arguments
                })
            },
            createPattern: function() {
                c.push({
                    type: "function",
                    name: "createPattern",
                    arguments: arguments
                })
            },
            drawShape: function() {
                var a = [];
                c.push({
                    type: "function",
                    name: "drawShape",
                    arguments: a
                });
                return {
                    moveTo: function() {
                        a.push({
                            name: "moveTo",
                            arguments: arguments
                        })
                    },
                    lineTo: function() {
                        a.push({
                            name: "lineTo",
                            arguments: arguments
                        })
                    },
                    arcTo: function() {
                        a.push({
                            name: "arcTo",
                            arguments: arguments
                        })
                    },
                    bezierCurveTo: function() {
                        a.push({
                            name: "bezierCurveTo",
                            arguments: arguments
                        })
                    },
                    quadraticCurveTo: function() {
                        a.push({
                            name: "quadraticCurveTo",
                            arguments: arguments
                        })
                    }
                }
            },
            drawImage: function() {
                c.push({
                    type: "function",
                    name: "drawImage",
                    arguments: arguments
                })
            },
            fillText: function() {
                c.push({
                    type: "function",
                    name: "fillText",
                    arguments: arguments
                })
            },
            setVariable: function(a, b) {
                c.push({
                    type: "variable",
                    name: a,
                    arguments: b
                });
                return b
            }
        }
    }
    _html2canvas = {};
    var c;
    _html2canvas.Util = {};
    _html2canvas.Util.log = function(b) {
        _html2canvas.logging && (win.console && win.console.log) && win.console.log(b)
    };
    _html2canvas.Util.trimText = function(a) {
        return function(b) {
            return a ? a.apply(b) : ((b || "") + "").replace(/^\s+|\s+$/g, "")
        }
    }(String.prototype.trim);
    _html2canvas.Util.asFloat = function(a) {
        return parseFloat(a)
    };
    (function() {
        var a = /((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,
            b = /(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;
        _html2canvas.Util.parseTextShadows = function(c) {
            if (!c || "none" === c) return [];
            c = c.match(a);
            for (var f = [], e = 0; c && e < c.length; e++) {
                var d = c[e].match(b);
                f.push({
                    color: d[0],
                    offsetX: d[1] ? d[1].replace("px", "") : 0,
                    offsetY: d[2] ? d[2].replace("px", "") : 0,
                    blur: d[3] ? d[3].replace("px", "") : 0
                })
            }
            return f
        }
    })();
    _html2canvas.Util.parseBackgroundImage = function(a) {
        var b, c, f, e, d, g = [],
            h, s = 0,
            x = 0,
            w, A, y = function() {
                b && ('"' === c.substr(0, 1) && (c = c.substr(1, c.length - 2)), c && A.push(c), "-" === b.substr(0, 1) && 0 < (e = b.indexOf("-", 1) + 1) && (f = b.substr(0, e), b = b.substr(e)), g.push({
                    prefix: f,
                    method: b.toLowerCase(),
                    value: d,
                    args: A
                }));
                A = [];
                b = f = c = d = ""
            };
        y();
        for (var z = 0, B = a.length; z < B; z++) if (h = a[z], !(0 === s && -1 < " \r\n\t".indexOf(h))) {
            switch (h) {
                case '"':
                    w ? w === h && (w = null) : w = h;
                    break;
                case "(":
                    if (w) break;
                    else if (0 === s) {
                        s = 1;
                        d += h;
                        continue
                    } else x++;
                    break;
                case ")":
                    if (w) break;
                    else if (1 === s) if (0 === x) {
                        s = 0;
                        d += h;
                        y();
                        continue
                    } else x--;
                    break;
                case ",":
                    if (!w) if (0 === s) {
                        y();
                        continue
                    } else if (1 === s && 0 === x && !b.match(/^url$/i)) {
                        A.push(c);
                        c = "";
                        d += h;
                        continue
                    }
            }
            d += h;
            0 === s ? b += h : c += h
        }
        y();
        return g
    };
    _html2canvas.Util.Bounds = function(a) {
        var b, c = {};
        a.getBoundingClientRect && (b = a.getBoundingClientRect(), c.top = b.top, c.bottom = b.bottom || b.top + b.height, c.left = b.left, c.width = a.offsetWidth, c.height = a.offsetHeight);
        return c
    };
    _html2canvas.Util.OffsetBounds = function(a) {
        var b = a.offsetParent ? _html2canvas.Util.OffsetBounds(a.offsetParent) : {
            top: 0,
            left: 0
        };
        return {
            top: a.offsetTop + b.top,
            bottom: a.offsetTop + a.offsetHeight + b.top,
            left: a.offsetLeft + b.left,
            width: a.offsetWidth,
            height: a.offsetHeight
        }
    };
    _html2canvas.Util.getCSS = function(a, f, e) {
        void 0 !== a && (c = doc.defaultView.getComputedStyle(a, null));
        var p = c[f];
        if (/^background(Size|Position)$/.test(f)) {
            a: {
                p = (p || "").split(",");
                p = p[e || 0] || p[0] || "auto";
                p = _html2canvas.Util.trimText(p).split(" ");
                if ("backgroundSize" !== f || p[0] && !p[0].match(/cover|contain|auto/)) {
                    p[0] = -1 === p[0].indexOf("%") ? g(a, f + "X", p[0]) : p[0];
                    if (p[1] === d) if ("backgroundSize" === f) {
                        p[1] = "auto";
                        a = p;
                        break a
                    } else p[1] = p[0];
                    p[1] = -1 === p[1].indexOf("%") ? g(a, f + "Y", p[1]) : p[1]
                }
                a = p
            }
            return a
        }
        return /border(Top|Bottom)(Left|Right)Radius/.test(f) ? (a = p.split(" "), 1 >= a.length && (a[1] = a[0]), a.map(b)) : p
    };
    _html2canvas.Util.resizeBounds = function(a, b, c, f, e) {
        a /= b;
        e && "auto" !== e ? c / f < a ^ "contain" === e ? (c = f, e = f * a) : (e = c, c /= a) : (e = c, c = f);
        return {
            width: e,
            height: c
        }
    };
    _html2canvas.Util.BackgroundPosition = function(a, b, c, f, d) {
        a = e("backgroundPosition",
            a, b, c, f, d);
        return {
            left: a[0],
            top: a[1]
        }
    };
    _html2canvas.Util.BackgroundSize = function(a, b, c, f) {
        a = e("backgroundSize", a, b, c, f);
        return {
            width: a[0],
            height: a[1]
        }
    };
    _html2canvas.Util.Extend = function(a, b) {
        for (var c in a) a.hasOwnProperty(c) && (b[c] = a[c]);
        return b
    };
    _html2canvas.Util.Children = function(a) {
        var b;
        try {
            var c;
            if (a.nodeName && "IFRAME" === a.nodeName.toUpperCase()) c = a.contentDocument || a.contentWindow.document;
            else {
                var f = a.childNodes;
                a = [];
                if (null !== f) {
                    var e = a.length,
                        g = 0;
                    if ("number" === typeof f.length) for (var h = f.length; g < h; g++) a[e++] = f[g];
                    else for (; f[g] !== d;) a[e++] = f[g++];
                    a.length = e
                }
                c = a
            }
            b = c
        } catch (v) {
            _html2canvas.Util.log("html2canvas.Util.Children failed with exception: " + v.message), b = []
        }
        return b
    };
    _html2canvas.Util.isTransparent = function(a) {
        return "transparent" === a || "rgba(0, 0, 0, 0)" === a
    };
    _html2canvas.Util.Font = function() {
        var a = {};
        return function(b, c, f) {
            if (a[b + "-" + c] !== d) return a[b + "-" + c];
            var e = f.createElement("div"),
                g = f.createElement("img"),
                h = f.createElement("span"),
                v;
            e.style.visibility = "hidden";
            e.style.fontFamily = b;
            e.style.fontSize = c;
            e.style.margin = 0;
            e.style.padding = 0;
            f.body.appendChild(e);
            g.src = "data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=";
            g.width = 1;
            g.height = 1;
            g.style.margin = 0;
            g.style.padding = 0;
            g.style.verticalAlign = "baseline";
            h.style.fontFamily = b;
            h.style.fontSize = c;
            h.style.margin = 0;
            h.style.padding = 0;
            h.appendChild(f.createTextNode("Hidden Text"));
            e.appendChild(h);
            e.appendChild(g);
            v = g.offsetTop - h.offsetTop + 1;
            e.removeChild(h);
            e.appendChild(f.createTextNode("Hidden Text"));
            e.style.lineHeight = "normal";
            g.style.verticalAlign = "super";
            g = {
                baseline: v,
                lineWidth: 1,
                middle: g.offsetTop - e.offsetTop + 1
            };
            a[b + "-" + c] = g;
            f.body.removeChild(e);
            return g
        }
    }();
    (function() {
        function a(c) {
            return function(a) {
                try {
                    c.addColorStop(a.stop, a.color)
                } catch (f) {
                    b.log(["failed to add color stop: ", f, "; tried to add: ", a])
                }
            }
        }
        var b = _html2canvas.Util,
            c = {};
        _html2canvas.Generate = c;
        var f = [/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/, /^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/, /^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/, /^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/, /^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/, /^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/, /^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];
        c.parseGradient = function(a, b) {
            var c, k, e = f.length,
                l, m, d, g;
            for (k = 0; k < e && !(l = a.match(f[k])); k += 1);
            if (l) switch (l[1]) {
                case "-webkit-linear-gradient":
                case "-o-linear-gradient":
                    c = {
                        type: "linear",
                        x0: null,
                        y0: null,
                        x1: null,
                        y1: null,
                        colorStops: []
                    };
                    if (e = l[2].match(/\w+/g)) for (m = e.length, k = 0; k < m; k += 1) switch (e[k]) {
                        case "top":
                            c.y0 = 0;
                            c.y1 = b.height;
                            break;
                        case "right":
                            c.x0 = b.width;
                            c.x1 = 0;
                            break;
                        case "bottom":
                            c.y0 = b.height;
                            c.y1 = 0;
                            break;
                        case "left":
                            c.x0 = 0, c.x1 = b.width
                    }
                    null === c.x0 && null === c.x1 && (c.x0 = c.x1 = b.width / 2);
                    null === c.y0 && null === c.y1 && (c.y0 = c.y1 = b.height / 2);
                    if (e = l[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g)) for (m = e.length, d = 1 / Math.max(m - 1, 1), k = 0; k < m; k += 1) g = e[k].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/), g[2] ? (l = parseFloat(g[2]), l = "%" === g[3] ? l / 100 : l / b.width) : l = k * d, c.colorStops.push({
                        color: g[1],
                        stop: l
                    });
                    break;
                case "-webkit-gradient":
                    c = {
                        type: "radial" === l[2] ? "circle" : l[2],
                        x0: 0,
                        y0: 0,
                        x1: 0,
                        y1: 0,
                        colorStops: []
                    };
                    if (e = l[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/)) c.x0 = e[1] * b.width / 100, c.y0 = e[2] * b.height / 100, c.x1 = e[3] * b.width / 100, c.y1 = e[4] * b.height / 100;
                    if (e = l[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g)) for (m = e.length, k = 0; k < m; k += 1) g = e[k].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/), l = parseFloat(g[2]), "from" === g[1] && (l = 0), "to" === g[1] && (l = 1), c.colorStops.push({
                        color: g[3],
                        stop: l
                    });
                    break;
                case "-moz-linear-gradient":
                    c = {
                        type: "linear",
                        x0: 0,
                        y0: 0,
                        x1: 0,
                        y1: 0,
                        colorStops: []
                    };
                    if (e = l[2].match(/(\d{1,3})%?\s(\d{1,3})%?/)) c.x0 = e[1] * b.width / 100, c.y0 = e[2] * b.height / 100, c.x1 = b.width - c.x0, c.y1 = b.height - c.y0;
                    if (e = l[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g)) for (m = e.length, d = 1 / Math.max(m - 1, 1), k = 0; k < m; k += 1) g = e[k].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/), g[2] ? (l = parseFloat(g[2]), g[3] && (l /= 100)) : l = k * d, c.colorStops.push({
                        color: g[1],
                        stop: l
                    });
                    break;
                case "-webkit-radial-gradient":
                case "-moz-radial-gradient":
                case "-o-radial-gradient":
                    c = {
                        type: "circle",
                        x0: 0,
                        y0: 0,
                        x1: b.width,
                        y1: b.height,
                        cx: 0,
                        cy: 0,
                        rx: 0,
                        ry: 0,
                        colorStops: []
                    };
                    if (e = l[2].match(/(\d{1,3})%?\s(\d{1,3})%?/)) c.cx = e[1] * b.width / 100, c.cy = e[2] * b.height / 100;
                    e = l[3].match(/\w+/);
                    g = l[4].match(/[a-z\-]*/);
                    if (e && g) switch (g[0]) {
                        case "farthest-corner":
                        case "cover":
                        case "":
                            k = Math.sqrt(Math.pow(c.cx, 2) + Math.pow(c.cy, 2));
                            e = Math.sqrt(Math.pow(c.cx, 2) + Math.pow(c.y1 - c.cy, 2));
                            m = Math.sqrt(Math.pow(c.x1 - c.cx, 2) + Math.pow(c.y1 - c.cy, 2));
                            g = Math.sqrt(Math.pow(c.x1 - c.cx, 2) + Math.pow(c.cy, 2));
                            c.rx = c.ry = Math.max(k, e, m, g);
                            break;
                        case "closest-corner":
                            k = Math.sqrt(Math.pow(c.cx, 2) + Math.pow(c.cy, 2));
                            e = Math.sqrt(Math.pow(c.cx, 2) + Math.pow(c.y1 - c.cy, 2));
                            m = Math.sqrt(Math.pow(c.x1 - c.cx, 2) + Math.pow(c.y1 - c.cy, 2));
                            g = Math.sqrt(Math.pow(c.x1 - c.cx, 2) + Math.pow(c.cy, 2));
                            c.rx = c.ry = Math.min(k, e, m, g);
                            break;
                        case "farthest-side":
                            "circle" === e[0] ? c.rx = c.ry = Math.max(c.cx, c.cy, c.x1 - c.cx, c.y1 - c.cy) : (c.type = e[0], c.rx = Math.max(c.cx, c.x1 - c.cx), c.ry = Math.max(c.cy, c.y1 - c.cy));
                            break;
                        case "closest-side":
                        case "contain":
                            "circle" === e[0] ? c.rx = c.ry = Math.min(c.cx, c.cy, c.x1 - c.cx, c.y1 - c.cy) : (c.type = e[0], c.rx = Math.min(c.cx, c.x1 - c.cx), c.ry = Math.min(c.cy, c.y1 - c.cy))
                    }
                    if (e = l[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g)) for (m = e.length, d = 1 / Math.max(m - 1, 1), k = 0; k < m; k += 1) g = e[k].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/), g[2] ? (l = parseFloat(g[2]), l = "%" === g[3] ? l / 100 : l / b.width) : l = k * d, c.colorStops.push({
                        color: g[1],
                        stop: l
                    })
            }
            return c
        };
        c.Gradient = function(b, c) {
            if (0 !== c.width && 0 !== c.height) {
                var f = doc.createElement("canvas"),
                    e = f.getContext("2d"),
                    l, m;
                f.width = c.width;
                f.height = c.height;
                if (l = _html2canvas.Generate.parseGradient(b, c)) switch (l.type) {
                    case "linear":
                        m = e.createLinearGradient(l.x0,
                            l.y0, l.x1, l.y1);
                        l.colorStops.forEach(a(m));
                        e.fillStyle = m;
                        e.fillRect(0, 0, c.width, c.height);
                        break;
                    case "circle":
                        m = e.createRadialGradient(l.cx, l.cy, 0, l.cx, l.cy, l.rx);
                        l.colorStops.forEach(a(m));
                        e.fillStyle = m;
                        e.fillRect(0, 0, c.width, c.height);
                        break;
                    case "ellipse":
                        var d = doc.createElement("canvas"),
                            g = d.getContext("2d");
                        m = Math.max(l.rx, l.ry);
                        var p = 2 * m;
                        d.width = d.height = p;
                        m = g.createRadialGradient(l.rx, l.ry, 0, l.rx, l.ry, m);
                        l.colorStops.forEach(a(m));
                        g.fillStyle = m;
                        g.fillRect(0, 0, p, p);
                        e.fillStyle = l.colorStops[l.colorStops.length - 1].color;
                        e.fillRect(0, 0, f.width, f.height);
                        e.drawImage(d, l.cx - l.rx, l.cy - l.ry, 2 * l.rx, 2 * l.ry)
                }
                return f
            }
        };
        c.ListAlpha = function(a) {
            var b = "",
                c;
            do c = a % 26, b = String.fromCharCode(c + 64) + b, a /= 26;
            while (26 < 26 * a);
            return b
        };
        c.ListRoman = function(a) {
            var b = "M CM D CD C XC L XL X IX V IV I".split(" "),
                c = [1E3, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1],
                f = "",
                k, e = b.length;
            if (0 >= a || 4E3 <= a) return a;
            for (k = 0; k < e; k += 1) for (; a >= c[k];) a -= c[k], f += b[k];
            return f
        }
    })();
    _html2canvas.Parse = function(b, c) {
        function e(a, b) {
            var c = parseInt(ca(a, b),
                10);
            return isNaN(c) ? 0 : c
        }
        function g(a, b, c, f, k, e) {
            "transparent" !== e && (a.setVariable("fillStyle", e), a.fillRect(b, c, f, k))
        }
        function r(a, b, c) {
            if (0 < a.length) return b + c.toUpperCase()
        }
        function q(a, b) {
            switch (b) {
                case "lowercase":
                    return a.toLowerCase();
                case "capitalize":
                    return a.replace(/(^|\s|:|-|\(|\))([a-z])/g, r);
                case "uppercase":
                    return a.toUpperCase();
                default:
                    return a
            }
        }
        function u(a) {
            return /^(normal|none|0px)$/.test(a)
        }
        function v(a, b, c, f) {
            var k = ca(b, "fontWeight"),
                e = ca(b, "fontFamily"),
                l = ca(b, "fontSize"),
                m = ba.parseTextShadows(ca(b, "textShadow"));
            switch (parseInt(k, 10)) {
                case 401:
                    k = "bold";
                    break;
                case 400:
                    k = "normal"
            }
            a.setVariable("fillStyle", f);
            a.setVariable("font", [ca(b, "fontStyle"), ca(b, "fontVariant"), k, l, e].join(" "));
            a.setVariable("textAlign", "left");
            m.length && (a.setVariable("shadowColor", m[0].color), a.setVariable("shadowOffsetX", m[0].offsetX), a.setVariable("shadowOffsetY", m[0].offsetY), a.setVariable("shadowBlur", m[0].blur));
            if ("none" !== c) return ba.Font(e, l, R)
        }
        function s(a, b, f) {
            var k = f.ctx,
                e = ca(a, "color"),
                l = ca(a, "textDecoration"),
                d = ca(a, "textAlign"),
                h, r, s = b,
                x = 0;
            0 < ba.trimText(b.nodeValue).length && (b.nodeValue = q(b.nodeValue, ca(a, "textTransform")), d = d.replace(["-webkit-auto"], ["auto"]), r = !c.letterRendering && /^(left|right|justify|auto)$/.test(d) && u(ca(a, "letterSpacing")) ? b.nodeValue.split(/(\b| )/) : b.nodeValue.split(""), h = v(k, a, l, e), c.chinese && r.forEach(function(a, b) {
                /.*[\u4E00-\u9FA5].*$/.test(a) && (a = a.split(""), a.unshift(b, 1), r.splice.apply(r, a))
            }), r.forEach(function(a, b) {
                var c, m = b < r.length - 1;
                c = f.transform.matrix;
                var d;
                if (ya.rangeBounds && !c) {
                    if ("none" !== l || 0 !== ba.trimText(a).length) c = s, m = x, d = R.createRange(), d.setStart(c, m), d.setEnd(c, m + a.length), d = d.getBoundingClientRect();
                    x += a.length
                } else if (s && "string" === typeof s.nodeValue) {
                    var m = m ? s.splitText(a.length) : null,
                        q = s;
                    d = q.parentNode;
                    var u = R.createElement("wrapper"),
                        v = q.cloneNode(!0);
                    u.appendChild(q.cloneNode(!0));
                    d.replaceChild(u, q);
                    c = c ? ba.OffsetBounds(u) : ba.Bounds(u);
                    d.replaceChild(v, u);
                    d = c;
                    s = m
                }
                if (c = d) switch (m = c.left, d = c.bottom, null !== a && 0 < ba.trimText(a).length && k.fillText(a, m, d), l) {
                    case "underline":
                        g(k, c.left, Math.round(c.top + h.baseline + h.lineWidth), c.width, 1, e);
                        break;
                    case "overline":
                        g(k, c.left, Math.round(c.top), c.width, 1, e);
                        break;
                    case "line-through":
                        g(k, c.left, Math.ceil(c.top + h.middle + h.lineWidth), c.width, 1, e)
                }
            }))
        }
        function x(a, b, c) {
            var f;
            b = b.ctx;
            var k = ca(a, "listStyleType");
            if (/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(k)) {
                var e;
                e = -1;
                var l = 1,
                    m = a.parentNode.childNodes;
                if (a.parentNode) {
                    for (; m[++e] !== a;) 1 === m[e].nodeType && l++;
                    e = l
                } else e = -1;
                switch (k) {
                    case "decimal":
                        f = e;
                        break;
                    case "decimal-leading-zero":
                        f = 1 === e.toString().length ? "0" + e.toString() : e.toString();
                        break;
                    case "upper-roman":
                        f = _html2canvas.Generate.ListRoman(e);
                        break;
                    case "lower-roman":
                        f = _html2canvas.Generate.ListRoman(e).toLowerCase();
                        break;
                    case "lower-alpha":
                        f = _html2canvas.Generate.ListAlpha(e).toLowerCase();
                        break;
                    case "upper-alpha":
                        f = _html2canvas.Generate.ListAlpha(e)
                }
                f += ". ";
                e = R.createElement("boundelement");
                e.style.display = "inline";
                l = a.style.listStyleType;
                a.style.listStyleType = "none";
                e.appendChild(R.createTextNode(f));
                a.insertBefore(e, a.firstChild);
                k = ba.Bounds(e);
                a.removeChild(e);
                a.style.listStyleType = l;
                v(b, a, "none", ca(a, "color"));
                "inside" === ca(a, "listStylePosition") && (b.setVariable("textAlign", "left"), a = c.left, c = k.bottom, null !== f && 0 < ba.trimText(f).length && b.fillText(f, a, c))
            }
        }
        function w(a) {
            return (a = b[a]) && !0 === a.succeeded ? a.img : !1
        }
        function A(a, b) {
            var c = Math.max(a.left, b.left),
                f = Math.max(a.top, b.top),
                e = Math.min(a.left + a.width,
                    b.left + b.width),
                k = Math.min(a.top + a.height, b.top + b.height);
            return {
                left: c,
                top: f,
                width: e - c,
                height: k - f
            }
        }
        function y(a, b, c, f, k) {
            var m = e(b, "paddingLeft"),
                d = e(b, "paddingTop"),
                g = e(b, "paddingRight");
            b = e(b, "paddingBottom");
            N(a, c, 0, 0, c.width, c.height, f.left + m + k[3].width, f.top + d + k[0].width, f.width - (k[1].width + k[3].width + m + g), f.height - (k[0].width + k[2].width + d + b))
        }
        function z(a) {
            return ["Top", "Right", "Bottom", "Left"].map(function(b) {
                return {
                    width: e(a, "border" + b + "Width"),
                    color: ca(a, "border" + b + "Color")
                }
            })
        }
        function B(a) {
            return ["TopLeft", "TopRight", "BottomRight", "BottomLeft"].map(function(b) {
                return ca(a, "border" + b + "Radius")
            })
        }
        function D(a, b, c, f) {
            var e = function(a, b, c) {
                return {
                    x: a.x + (b.x - a.x) * c,
                    y: a.y + (b.y - a.y) * c
                }
            };
            return {
                start: a,
                startControl: b,
                endControl: c,
                end: f,
                subdivide: function(k) {
                    var l = e(a, b, k),
                        m = e(b, c, k),
                        d = e(c, f, k),
                        g = e(l, m, k),
                        m = e(m, d, k);
                    k = e(g, m, k);
                    return [D(a, l, g, k), D(k, m, d, f)]
                },
                curveTo: function(a) {
                    a.push(["bezierCurve", b.x, b.y, c.x, c.y, f.x, f.y])
                },
                curveToReversed: function(f) {
                    f.push(["bezierCurve", c.x, c.y, b.x, b.y, a.x, a.y])
                }
            }
        }
        function E(a,
                   b, c, f, e, k, l) {
            0 < b[0] || 0 < b[1] ? (a.push(["line", f[0].start.x, f[0].start.y]), f[0].curveTo(a), f[1].curveTo(a)) : a.push(["line", k, l]);
            (0 < c[0] || 0 < c[1]) && a.push(["line", e[0].start.x, e[0].start.y])
        }
        function G(a, b, c, f, e, k, l) {
            var m = [];
            0 < b[0] || 0 < b[1] ? (m.push(["line", f[1].start.x, f[1].start.y]), f[1].curveTo(m)) : m.push(["line", a.c1[0], a.c1[1]]);
            0 < c[0] || 0 < c[1] ? (m.push(["line", k[0].start.x, k[0].start.y]), k[0].curveTo(m), m.push(["line", l[0].end.x, l[0].end.y]), l[0].curveToReversed(m)) : (m.push(["line", a.c2[0], a.c2[1]]),
                m.push(["line", a.c3[0], a.c3[1]]));
            0 < b[0] || 0 < b[1] ? (m.push(["line", e[1].end.x, e[1].end.y]), e[1].curveToReversed(m)) : m.push(["line", a.c4[0], a.c4[1]]);
            return m
        }
        function J(a, b, c) {
            var f, e, k, l, m, d, g, p, h = b.left,
                r = b.top,
                q = b.width,
                u = b.height,
                s, v, x, w, A = B(a);
            p = b.left;
            s = b.top;
            d = b.width;
            g = b.height;
            e = A[0][0];
            k = A[0][1];
            l = A[1][0];
            m = A[1][1];
            var y = A[2][0],
                z = A[2][1];
            v = A[3][0];
            x = A[3][1];
            var C = d - l,
                V = g - z,
                D = d - y,
                J = g - x;
            f = X(p, s, e, k).topLeft.subdivide(0.5);
            e = X(p + c[3].width, s + c[0].width, Math.max(0, e - c[3].width), Math.max(0, k - c[0].width)).topLeft.subdivide(0.5);
            k = X(p + C, s, l, m).topRight.subdivide(0.5);
            l = X(p + Math.min(C, d + c[3].width), s + c[0].width, C > d + c[3].width ? 0 : l - c[3].width, m - c[0].width).topRight.subdivide(0.5);
            m = X(p + D, s + V, y, z).bottomRight.subdivide(0.5);
            d = X(p + Math.min(D, d + c[3].width), s + Math.min(V, g + c[0].width), Math.max(0, y - c[1].width), Math.max(0, z - c[2].width)).bottomRight.subdivide(0.5);
            g = X(p, s + J, v, x).bottomLeft.subdivide(0.5);
            p = X(p + c[3].width, s + J, Math.max(0, v - c[3].width), Math.max(0, x - c[2].width)).bottomLeft.subdivide(0.5);
            s = [];
            switch (ca(a, "backgroundClip")) {
                case "content-box":
                case "padding-box":
                    E(s, A[0], A[1], e, l, b.left + c[3].width, b.top + c[0].width);
                    E(s, A[1], A[2], l, d, b.left + b.width - c[1].width, b.top + c[0].width);
                    E(s, A[2], A[3], d, p, b.left + b.width - c[1].width, b.top + b.height - c[2].width);
                    E(s, A[3], A[0], p, e, b.left + c[3].width, b.top + b.height - c[2].width);
                    break;
                default:
                    E(s, A[0], A[1], f, k, b.left, b.top), E(s, A[1], A[2], k, m, b.left + b.width, b.top), E(s, A[2], A[3], m, g, b.left + b.width, b.top + b.height), E(s, A[3], A[0], g, f, b.left, b.top + b.height)
            }
            J = {
                clip: s,
                borders: []
            };
            for (a = 0; 4 > a; a++) if (0 < c[a].width) {
                b = h;
                s = r;
                v = q;
                x = u - c[2].width;
                switch (a) {
                    case 0:
                        x = c[0].width;
                        w = G({
                            c1: [b, s],
                            c2: [b + v, s],
                            c3: [b + v - c[1].width, s + x],
                            c4: [b + c[3].width, s + x]
                        }, A[0], A[1], f, e, k, l);
                        break;
                    case 1:
                        b = h + q - c[1].width;
                        v = c[1].width;
                        w = G({
                            c1: [b + v, s],
                            c2: [b + v, s + x + c[2].width],
                            c3: [b, s + x],
                            c4: [b, s + c[0].width]
                        }, A[1], A[2], k, l, m, d);
                        break;
                    case 2:
                        s = s + u - c[2].width;
                        x = c[2].width;
                        w = G({
                            c1: [b + v, s + x],
                            c2: [b, s + x],
                            c3: [b + c[3].width, s],
                            c4: [b + v - c[3].width, s]
                        }, A[2], A[3], m, d, g, p);
                        break;
                    case 3:
                        v = c[3].width, w = G({
                            c1: [b,
                                s + x + c[2].width],
                            c2: [b, s],
                            c3: [b + v, s + c[0].width],
                            c4: [b + v, s + x]
                        }, A[3], A[0], g, p, f, e)
                }
                J.borders.push({
                    args: w,
                    color: c[a].color
                })
            }
            return J
        }
        function C(a, b) {
            var c = a.drawShape();
            b.forEach(function(a, b) {
                c[0 === b ? "moveTo" : a[0] + "To"].apply(null, a.slice(1))
            });
            return c
        }
        function O(a, b, c) {
            var f = R.createElement("valuewrap");
            "lineHeight textAlign fontFamily color fontSize paddingLeft paddingTop width height border borderLeftWidth borderTopWidth".split(" ").forEach(function(b) {
                try {
                    f.style[b] = ca(a, b)
                } catch (c) {
                    ba.log("html2canvas: Parse: Exception caught in renderFormValue: " + c.message)
                }
            });
            f.style.borderColor = "black";
            f.style.borderStyle = "solid";
            f.style.display = "block";
            f.style.position = "absolute";
            if (/^(submit|reset|button|text|password)$/.test(a.type) || "SELECT" === a.nodeName) f.style.lineHeight = ca(a, "height");
            f.style.top = b.top + "px";
            f.style.left = b.left + "px";
            b = "SELECT" === a.nodeName ? (a.options[a.selectedIndex] || 0).text : a.value;
            b || (b = a.placeholder);
            b = R.createTextNode(b);
            f.appendChild(b);
            ha.appendChild(f);
            s(a, b, c);
            ha.removeChild(f)
        }
        function N(a) {
            a.drawImage.apply(a, Array.prototype.slice.call(arguments,
                1))
        }
        function L(b, c) {
            var f = win.getComputedStyle(b, c);
            if (f && f.content && "none" !== f.content && "-moz-alt-content" !== f.content && "none" !== f.display) {
                var e = f.content + "",
                    k = e.substr(0, 1);
                k === e.substr(e.length - 1) && k.match(/'|"/) && (e = e.substr(1, e.length - 2));
                var k = "url" === e.substr(0, 3),
                    l = doc.createElement(k ? "img" : "span");
                l.className = sa + "-before " + sa + "-after";
                Object.keys(f).filter(Q).forEach(function(a) {
                    try {
                        l.style[a] = f[a]
                    } catch (b) {
                        ba.log(["Tried to assign readonly property ", a, "Error:", b])
                    }
                });
                k ? l.src = ba.parseBackgroundImage(e)[0].args[0] : l.innerHTML = e;
                return l
            }
        }
        function Q(b) {
            return isNaN(win.parseInt(b, 10))
        }
        function K(a, b) {
            var c = L(a, ":before"),
                f = L(a, ":after");
            if (c || f) c && (a.className += " " + sa + "-before", a.parentNode.insertBefore(c, a), na(c, b, !0), a.parentNode.removeChild(c), a.className = a.className.replace(sa + "-before", "").trim()), f && (a.className += " " + sa + "-after", a.appendChild(f), na(f, b, !0), a.removeChild(f), a.className = a.className.replace(sa + "-after", "").trim())
        }
        function F(a, b, c, f) {
            var e = Math.round(f.left + c.left);
            c = Math.round(f.top + c.top);
            a.createPattern(b);
            a.translate(e, c);
            a.fill();
            a.translate(-e, - c)
        }
        function aa(a, b, c, f, e, k, l, m) {
            var d = [];
            d.push(["line", Math.round(e), Math.round(k)]);
            d.push(["line", Math.round(e + l), Math.round(k)]);
            d.push(["line", Math.round(e + l), Math.round(m + k)]);
            d.push(["line", Math.round(e), Math.round(m + k)]);
            C(a, d);
            a.save();
            a.clip();
            F(a, b, c, f);
            a.restore()
        }
        function U(a, b, c) {
            for (var f = ca(a, "backgroundImage"), e = ba.parseBackgroundImage(f), k, l = e.length; l--;) if (f = e[l], f.args && 0 !== f.args.length) if (k = w("url" === f.method ? f.args[0] : f.value)) {
                var m = a,
                    f = b,
                    d = c,
                    g = k;
                k = l;
                var p = ba.BackgroundSize(m, f, g, k),
                    h = ba.BackgroundPosition(m, f, g, k, p),
                    m = ca(m, "backgroundRepeat").split(",").map(ba.trimText);
                if (g.width !== p.width || g.height !== p.height) {
                    var r = void 0,
                        q = R.createElement("canvas");
                    q.width = p.width;
                    q.height = p.height;
                    r = q.getContext("2d");
                    N(r, g, 0, 0, g.width, g.height, 0, 0, p.width, p.height);
                    g = q
                }
                m = m[k] || m[0];
                switch (m) {
                    case "repeat-x":
                        aa(d, g, h, f, f.left, f.top + h.top, 99999, g.height);
                        break;
                    case "repeat-y":
                        aa(d, g, h, f, f.left + h.left, f.top, g.width, 99999);
                        break;
                    case "no-repeat":
                        aa(d, g, h, f, f.left + h.left, f.top + h.top, g.width, g.height);
                        break;
                    default:
                        F(d, g, h, {
                            top: f.top,
                            left: f.left,
                            width: g.width,
                            height: g.height
                        })
                }
            } else ba.log("html2canvas: Error loading background:", f)
        }
        function Z(a) {
            return a.replace("px", "")
        }
        function T(a, b) {
            var c = ca(a, "transform") || ca(a, "-webkit-transform") || ca(a, "-moz-transform") || ca(a, "-ms-transform") || ca(a, "-o-transform"),
                f = ca(a, "transform-origin") || ca(a, "-webkit-transform-origin") || ca(a, "-moz-transform-origin") || ca(a, "-ms-transform-origin") || ca(a, "-o-transform-origin") || "0px 0px",
                f = f.split(" ").map(Z).map(ba.asFloat),
                e;
            if (c && "none" !== c && (c = c.match(W))) switch (c[1]) {
                case "matrix":
                    e = c[2].split(",").map(ba.trimText).map(ba.asFloat)
            }
            return {
                origin: f,
                matrix: e
            }
        }
        function P(a, b, e, k) {
            var l = f(b ? e.width : Math.max(Math.max(R.body.scrollWidth, R.documentElement.scrollWidth), Math.max(R.body.offsetWidth, R.documentElement.offsetWidth), Math.max(R.body.clientWidth, R.documentElement.clientWidth)), b ? e.height : Math.max(Math.max(R.body.scrollHeight, R.documentElement.scrollHeight),
                Math.max(R.body.offsetHeight, R.documentElement.offsetHeight), Math.max(R.body.clientHeight, R.documentElement.clientHeight)));
            k = {
                ctx: l,
                opacity: l.setVariable("globalAlpha", ca(a, "opacity") * (b ? b.opacity : 1)),
                cssPosition: ca(a, "position"),
                borders: z(a),
                transform: k,
                clip: b && b.clip ? ba.Extend({}, b.clip) : null
            };
            var d = "static" !== k.cssPosition,
                g = d ? ca(a, "zIndex") : "auto",
                p = ca(a, "opacity"),
                h = "none" !== ca(a, "cssFloat");
            k.zIndex = l = {
                zindex: g,
                children: []
            };
            l.isPositioned = d;
            l.isFloated = h;
            l.opacity = p;
            l.ownStacking = "auto" !== g || 1 > p;
            b && b.zIndex.children.push(k);
            !0 === c.useOverflow && (!0 === /(hidden|scroll|auto)/.test(ca(a, "overflow")) && !1 === /(BODY)/i.test(a.nodeName)) && (k.clip = k.clip ? A(k.clip, e) : e);
            return k
        }
        function Y(a, b, c) {
            a = {
                left: b.left + a[3].width,
                top: b.top + a[0].width,
                width: b.width - (a[1].width + a[3].width),
                height: b.height - (a[0].width + a[2].width)
            };
            c && (a = A(a, c));
            return a
        }
        function da(a, b) {
            var c = b.matrix ? ba.OffsetBounds(a) : ba.Bounds(a);
            b.origin[0] += c.left;
            b.origin[1] += c.top;
            return c
        }
        function ia(a, b, c, f) {
            var e = T(a, b),
                k = da(a,
                    e),
                l;
            b = P(a, b, k, e);
            var e = b.borders,
                m = b.ctx,
                d = Y(e, k, b.clip),
                h = J(a, k, e),
                r = ka.test(a.nodeName) ? "#efefef" : ca(a, "backgroundColor");
            C(m, h.clip);
            m.save();
            m.clip();
            0 < d.height && 0 < d.width && !f ? (g(m, k.left, k.top, k.width, k.height, r), U(a, d, m)) : f && (b.backgroundColor = r);
            m.restore();
            h.borders.forEach(function(a) {
                var b = a.args;
                a = a.color;
                "transparent" !== a && (m.setVariable("fillStyle", a), C(m, b), m.fill())
            });
            c || K(a, b);
            switch (a.nodeName) {
                case "IMG":
                    (l = w(a.getAttribute("src"))) ? y(m, a, l, k, e) : ba.log("html2canvas: Error loading <img>:" + a.getAttribute("src"));
                    break;
                case "INPUT":
                    /^(text|url|email|submit|button|reset)$/.test(a.type) && 0 < (a.value || a.placeholder || "").length && O(a, k, b);
                    break;
                case "TEXTAREA":
                    0 < (a.value || a.placeholder || "").length && O(a, k, b);
                    break;
                case "SELECT":
                    0 < (a.options || a.placeholder || "").length && O(a, k, b);
                    break;
                case "LI":
                    x(a, b, d);
                    break;
                case "CANVAS":
                    y(m, a, a, k, e)
            }
            return b
        }
        function na(a, b, c) {
            "none" === ca(a, "display") || ("hidden" === ca(a, "visibility") || a.hasAttribute("data-html2canvas-ignore")) || (b = ia(a, b, c, !1) || b, ka.test(a.nodeName) || pa(a, b, c))
        }
        function pa(a, b, c) {
            ba.Children(a).forEach(function(f) {
                f.nodeType === f.ELEMENT_NODE ? na(f, b, c) : f.nodeType === f.TEXT_NODE && s(a, f, b)
            })
        }
        win.scroll(0, 0);
        var ea = c.elements === d ? doc.body : c.elements[0],
            R = ea.ownerDocument,
            ba = _html2canvas.Util,
            ya = ba.Support(c, R),
            ka = RegExp("(" + c.ignoreElements + ")"),
            ha = R.body,
            ca = ba.getCSS,
            sa = "___html2canvas___pseudoelement",
            V = R.createElement("style");
        V.innerHTML = "." + sa + '-before:before { content: "" !important; display: none !important; }.' + sa + '-after:after { content: "" !important; display: none !important; }';
        ha.appendChild(V);
        b = b || {};
        var X = function(a) {
                return function(b, c, f, k) {
                    var e = f * a,
                        l = k * a;
                    f = b + f;
                    k = c + k;
                    return {
                        topLeft: D({
                            x: b,
                            y: k
                        }, {
                            x: b,
                            y: k - l
                        }, {
                            x: f - e,
                            y: c
                        }, {
                            x: f,
                            y: c
                        }),
                        topRight: D({
                            x: b,
                            y: c
                        }, {
                            x: b + e,
                            y: c
                        }, {
                            x: f,
                            y: k - l
                        }, {
                            x: f,
                            y: k
                        }),
                        bottomRight: D({
                            x: f,
                            y: c
                        }, {
                            x: f,
                            y: c + l
                        }, {
                            x: b + e,
                            y: k
                        }, {
                            x: b,
                            y: k
                        }),
                        bottomLeft: D({
                            x: f,
                            y: k
                        }, {
                            x: f - e,
                            y: k
                        }, {
                            x: b,
                            y: c + l
                        }, {
                            x: b,
                            y: c
                        })
                    }
                }
            }(4 * ((Math.sqrt(2) - 1) / 3)),
            W = /(matrix)\((.+)\)/;
        return function() {
            var a = ca(doc.documentElement, "backgroundColor"),
                b = ba.isTransparent(a) && ea === doc.body,
                c = ia(ea, null, !1, b);
            pa(ea,
                c);
            b && (a = c.backgroundColor);
            ha.removeChild(V);
            return {
                backgroundColor: a,
                stack: c
            }
        }()
    };
    _html2canvas.Preload = function(b) {
        function c() {
            w.log("html2canvas: start: images: " + s.numLoaded + " / " + s.numTotal + " (failed: " + s.numFailed + ")");
            !s.firstRun && s.numLoaded >= s.numTotal && (w.log("Finished loading images: # " + s.numTotal + " (failed: " + s.numFailed + ")"), "function" === typeof b.complete && b.complete(s))
        }
        function f(e, l, g) {
            var p, h = b.proxy,
                r;
            G.href = e;
            e = G.href;
            p = "html2canvas_" + z++;
            g.callbackname = p;
            h = -1 < h.indexOf("?") ? h + "&" : h + "?";
            h += "url=" + encodeURIComponent(e) + "&callback=" + p;
            r = B.createElement("script");
            win[p] = function(b) {
                "error:" === b.substring(0, 6) ? (g.succeeded = !1, s.numLoaded++, s.numFailed++, c()) : (v(l, g), l.src = b);
                win[p] = d;
                try {
                    delete win[p]
                } catch (f) {}
                r.parentNode.removeChild(r);
                r = null;
                delete g.script;
                delete g.callbackname
            };
            r.setAttribute("type", "text/javascript");
            r.setAttribute("src", h);
            g.script = r;
            win.document.body.appendChild(r)
        }
        function e(b, c) {
            var f = win.getComputedStyle(b, c),
                k = f.content;
            "url" === k.substr(0, 3) && A.loadImage(_html2canvas.Util.parseBackgroundImage(k)[0].args[0]);
            q(f.backgroundImage, b)
        }
        function g(a) {
            return a && a.method && a.args && 0 < a.args.length
        }
        function q(a, b) {
            var f;
            _html2canvas.Util.parseBackgroundImage(a).filter(g).forEach(function(a) {
                if ("url" === a.method) A.loadImage(a.args[0]);
                else if (a.method.match(/\-?gradient$/)) {
                    f === d && (f = _html2canvas.Util.Bounds(b));
                    a = a.value;
                    var e = _html2canvas.Generate.Gradient(a, f);
                    e !== d && (s[a] = {
                        img: e,
                        succeeded: !0
                    }, s.numTotal++, s.numLoaded++, c())
                }
            })
        }
        function u(a) {
            var b = !1;
            try {
                w.Children(a).forEach(u)
            } catch (c) {}
            try {
                b = a.nodeType
            } catch (f) {
                b = !1, w.log("html2canvas: failed to access some element's nodeType - Exception: " + f.message)
            }
            if (1 === b || b === d) {
                e(a, ":before");
                e(a, ":after");
                try {
                    q(w.getCSS(a, "backgroundImage"), a)
                } catch (k) {
                    w.log("html2canvas: failed to get background-image - Exception: " + k.message)
                }
                q(a)
            }
        }
        function v(e, g) {
            e.onload = function() {
                g.timer !== d && win.clearTimeout(g.timer);
                s.numLoaded++;
                g.succeeded = !0;
                e.onerror = e.onload = null;
                c()
            };
            e.onerror = function() {
                if ("anonymous" === e.crossOrigin && (win.clearTimeout(g.timer), b.proxy)) {
                    var d = e.src;
                    e = new Image;
                    g.img = e;
                    e.src = d;
                    f(e.src, e, g);
                    return
                }
                s.numLoaded++;
                s.numFailed++;
                g.succeeded = !1;
                e.onerror = e.onload = null;
                c()
            }
        }
        var s = {
                numLoaded: 0,
                numFailed: 0,
                numTotal: 0,
                cleanupDone: !1
            }, x, w = _html2canvas.Util,
            A, y, z = 0;
        y = b.elements[0] || doc.body;
        var B = y.ownerDocument,
            D = y.getElementsByTagName("img"),
            E = D.length,
            G = B.createElement("a"),
            J = function(a) {
                return a.crossOrigin !== d
            }(new Image),
            C;
        G.href = win.location.href;
        x = G.protocol + G.host;
        A = {
            loadImage: function(a) {
                var c, e;
                a && s[a] === d && (c = new Image, a.match(/data:image\/.*;base64,/i) ? (c.src = a.replace(/url\(['"]{0,}|['"]{0,}\)$/ig, ""), e = s[a] = {
                    img: c
                }, s.numTotal++, v(c, e)) : (G.href = a, G.href = G.href, G.protocol + G.host === x || !0 === b.allowTaint ? (e = s[a] = {
                    img: c
                }, s.numTotal++, v(c, e), c.src = a) : J && !b.allowTaint && b.useCORS ? (c.crossOrigin = "anonymous", e = s[a] = {
                    img: c
                }, s.numTotal++, v(c, e), c.src = a) : b.proxy && (e = s[a] = {
                    img: c
                }, s.numTotal++, f(a, c, e))))
            },
            cleanupDOM: function(f) {
                var e, l;
                if (!s.cleanupDone) {
                    f && "string" === typeof f ? w.log("html2canvas: Cleanup because: " + f) : w.log("html2canvas: Cleanup after timeout: " + b.timeout + " ms.");
                    for (l in s) if (s.hasOwnProperty(l) && (e = s[l], "object" === typeof e && e.callbackname && e.succeeded === d)) {
                        win[e.callbackname] = d;
                        try {
                            delete win[e.callbackname]
                        } catch (g) {}
                        e.script && e.script.parentNode && (e.script.setAttribute("src", "about:blank"), e.script.parentNode.removeChild(e.script));
                        s.numLoaded++;
                        s.numFailed++;
                        w.log("html2canvas: Cleaned up failed img: '" + l + "' Steps: " + s.numLoaded + " / " + s.numTotal)
                    }
                    win.stop !== d ? win.stop() : doc.execCommand !== d && doc.execCommand("Stop", !1);
                    doc.close !== d && doc.close();
                    s.cleanupDone = !0;
                    f && "string" === typeof f || c()
                }
            },
            renderingDone: function() {
                C && win.clearTimeout(C)
            }
        };
        0 < b.timeout && (C = win.setTimeout(A.cleanupDOM, b.timeout));
        w.log("html2canvas: Preload starts: finding background-images");
        s.firstRun = !0;
        u(y);
        w.log("html2canvas: Preload: Finding images");
        for (y = 0; y < E; y += 1) A.loadImage(D[y].getAttribute("src"));
        s.firstRun = !1;
        w.log("html2canvas: Preload: Done.");
        s.numTotal === s.numLoaded && c();
        return A
    };
    _html2canvas.Renderer = function(a, b) {
        return function(a) {
            if ("string" === typeof b.renderer && _html2canvas.Renderer[a] !== d) a = _html2canvas.Renderer[a](b);
            else if ("function" === typeof a) a = a(b);
            else throw Error("Unknown renderer");
            if ("function" !== typeof a) throw Error("Invalid renderer defined");
            return a
        }(b.renderer)(a, b, doc, function(a) {
                function b(a) {
                    Object.keys(a).sort().forEach(function(f) {
                        var e = [],
                            k = [],
                            l = [],
                            m = [];
                        a[f].forEach(function(a) {
                            a.node.zIndex.isPositioned || 1 > a.node.zIndex.opacity ? l.push(a) : a.node.zIndex.isFloated ? k.push(a) : e.push(a)
                        });
                        (function y(a) {
                            a.forEach(function(a) {
                                m.push(a);
                                a.children && y(a.children)
                            })
                        })(e.concat(k,
                                l));
                        m.forEach(function(a) {
                            a.context ? b(a.context) : c.push(a.node)
                        })
                    })
                }
                var c = [];
                a = function(a) {
                    function b(a, c, f) {
                        var e = "auto" === c.zIndex.zindex ? 0 : Number(c.zIndex.zindex),
                            k = a,
                            l = c.zIndex.isPositioned,
                            m = c.zIndex.isFloated,
                            g = {
                                node: c
                            }, p = f;
                        if (c.zIndex.ownStacking) k = g.context = {
                            "!": [{
                                node: c,
                                children: []
                            }]
                        }, p = d;
                        else if (l || m) p = g.children = [];
                        0 === e && f ? f.push(g) : (a[e] || (a[e] = []), a[e].push(g));
                        c.zIndex.children.forEach(function(a) {
                            b(k, a, p)
                        })
                    }
                    var c = {};
                    b(c, a);
                    return c
                }(a);
                b(a);
                return c
            }(a.stack), _html2canvas)
    };
    _html2canvas.Util.Support = function(a, b) {
        function c() {
            var a = new Image,
                f = b.createElement("canvas"),
                e = f.getContext === d ? !1 : f.getContext("2d");
            if (!1 === e) return !1;
            f.width = f.height = 10;
            a.src = "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'><foreignObject width='10' height='10'><div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>sup</div></foreignObject></svg>";
            try {
                e.drawImage(a, 0, 0), f.toDataURL()
            } catch (k) {
                return !1
            }
            _html2canvas.Util.log("html2canvas: Parse: SVG powered rendering available");
            return !0
        }
        return {
            rangeBounds: function() {
                var a, c, f = !1;
                b.createRange && (a = b.createRange(), a.getBoundingClientRect && (c = b.createElement("boundtest"), c.style.height = "123px", c.style.display = "block", b.body.appendChild(c), a.selectNode(c), a = a.getBoundingClientRect(), a = a.height, 123 === a && (f = !0), b.body.removeChild(c)));
                return f
            }(),
            svgRendering: a.svgRendering && c()
        }
    };
    win.html2canvas = function(b, c) {
        b = b.length ? b : [b];
        var f, e, d = {
            logging: !1,
            elements: b,
            background: "#fff",
            proxy: null,
            timeout: 0,
            useCORS: !1,
            allowTaint: !1,
            svgRendering: !1,
            ignoreElements: "IFRAME|OBJECT|PARAM",
            useOverflow: !0,
            letterRendering: !1,
            chinese: !1,
            width: null,
            height: null,
            taintTest: !0,
            renderer: "Canvas"
        }, d = _html2canvas.Util.Extend(c, d);
        _html2canvas.logging = d.logging;
        d.complete = function(a) {
            if ("function" !== typeof d.onpreloaded || !1 !== d.onpreloaded(a)) if (f = _html2canvas.Parse(a, d), "function" !== typeof d.onparsed || !1 !== d.onparsed(f)) if (e = _html2canvas.Renderer(f, d), "function" === typeof d.onrendered) d.onrendered(e)
        };
        win.setTimeout(function() {
            _html2canvas.Preload(d)
        }, 0);
        return {
            render: function(a,
                             b) {
                return _html2canvas.Renderer(a, _html2canvas.Util.Extend(b, d))
            },
            parse: function(a, b) {
                return _html2canvas.Parse(a, _html2canvas.Util.Extend(b, d))
            },
            preload: function(a) {
                return _html2canvas.Preload(_html2canvas.Util.Extend(a, d))
            },
            log: _html2canvas.Util.log
        }
    };
    win.html2canvas.log = _html2canvas.Util.log;
    win.html2canvas.Renderer = {
        Canvas: d
    };
    _html2canvas.Renderer.Canvas = function(a) {
        function b(a, c) {
            a.beginPath();
            c.forEach(function(b) {
                a[b.name].apply(a, b.arguments)
            });
            a.closePath()
        }
        a = a || {};
        var c = doc,
            f = [],
            e = doc.createElement("canvas"),
            g = e.getContext("2d"),
            u = _html2canvas.Util,
            v = a.canvas || c.createElement("canvas");
        return function(h, x, w, A, y) {
            var z = v.getContext("2d"),
                B, D = h.stack;
            v.width = v.style.width = x.width || D.ctx.width;
            v.height = v.style.height = x.height || D.ctx.height;
            B = z.fillStyle;
            z.fillStyle = u.isTransparent(D.backgroundColor) && x.background !== d ? x.background : h.backgroundColor;
            z.fillRect(0, 0, v.width, v.height);
            z.fillStyle = B;
            A.forEach(function(d) {
                z.textBaseline = "bottom";
                z.save();
                d.transform.matrix && (z.translate(d.transform.origin[0], d.transform.origin[1]),
                    z.transform.apply(z, d.transform.matrix), z.translate(-d.transform.origin[0], - d.transform.origin[1]));
                d.clip && (z.beginPath(), z.rect(d.clip.left, d.clip.top, d.clip.width, d.clip.height), z.clip());
                d.ctx.storage && d.ctx.storage.forEach(function(d) {
                    var h = z;
                    switch (d.type) {
                        case "variable":
                            h[d.name] = d.arguments;
                            break;
                        case "function":
                            switch (d.name) {
                                case "createPattern":
                                    if (0 < d.arguments[0].width && 0 < d.arguments[0].height) try {
                                        h.fillStyle = h.createPattern(d.arguments[0], "repeat")
                                    } catch (s) {
                                        u.log("html2canvas: Renderer: Error creating pattern",
                                            s.message)
                                    }
                                    break;
                                case "drawShape":
                                    b(h, d.arguments);
                                    break;
                                case "drawImage":
                                    if (0 < d.arguments[8] && 0 < d.arguments[7]) {
                                        var v;
                                        if (!(v = !a.taintTest) && (v = a.taintTest)) a: {
                                            if (-1 === f.indexOf(d.arguments[0].src)) {
                                                g.drawImage(d.arguments[0], 0, 0);
                                                try {
                                                    g.getImageData(0, 0, 1, 1)
                                                } catch (x) {
                                                    e = c.createElement("canvas");
                                                    g = e.getContext("2d");
                                                    v = !1;
                                                    break a
                                                }
                                                f.push(d.arguments[0].src)
                                            }
                                            v = !0
                                        }
                                        v && h.drawImage.apply(h, d.arguments)
                                    }
                                    break;
                                default:
                                    h[d.name].apply(h, d.arguments)
                            }
                    }
                });
                z.restore()
            });
            u.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj");
            return 1 === x.elements.length && "object" === typeof x.elements[0] && "BODY" !== x.elements[0].nodeName ? (h = y.Util.Bounds(x.elements[0]), w = w.createElement("canvas"), w.width = Math.ceil(h.width), w.height = Math.ceil(h.height), z = w.getContext("2d"), z.drawImage(v, h.left, h.top, h.width, h.height, 0, 0, h.width, h.height), v = null, w) : v
        }
    }
})(window, document);
"undefined" === typeof Modernizr && (Modernizr = {});
Modernizr.upgrade = function(a) {
    "string" === typeof a && (a = {
        message: a
    });
    var h = {
            Chrome: {
                description: "Runs websites and applications with lightning speed.",
                stable: {
                    ver: "29",
                    url: "http://www.google.com/chrome"
                }
            },
            Firefox: {
                description: "Firefox is free and made to help you get the most out of the web.",
                stable: {
                    ver: "24",
                    url: "http://www.mozilla.com/firefox/"
                }
            },
            Safari: {
                description: "Browse the web in smarter, more powerful ways.",
                stable: {
                    ver: "6",
                    url: "http://www.apple.com/safari/download/"
                }
            },
            Opera: {
                description: "Secure, powerful and easy to use, with excellent privacy protection.",
                stable: {
                    ver: "12",
                    url: "http://www.opera.com/download/"
                }
            },
            IE: {
                description: "Designed to help you take control of your privacy and browse with confidence.",
                stable: {
                    ver: "10",
                    url: "http://www.microsoft.com/windows/internet-explorer/default.aspx"
                }
            }
        }, d = document.getElementsByTagName("head")[0],
        g = document.createElement("link");
    g.rel = "stylesheet";
    g.type = "text/css";
    g.media = "screen";
    g.href = "./inc/BrowseHappier/upgrade.css";
    d.appendChild(g);
    d = document.createElement("div");
    d.id = "browser-upgrade";
    var g = document.createElement("ul"),
        b = a.browsers;
    if ("string" === typeof b) for (var e = b.split(","), b = {}, f = 0; f < e.length; f++) {
        var c = e[f];
        b[c.substr(0, 1)] = c.substr(1)
    }
    var e = 0,
        k;
    for (k in h) if (b[k[0]]) {
        f = h[k];
        c = document.createElement("li");
        c.id = "sprite-" + k.toLowerCase();
        var m = document.createElement("a");
        m.href = f.stable.url;
        m.target = "_blank";
        m.title = k;
        var l = document.createElement("div");
        l.className = "icon";
        m.appendChild(l);
        var p = document.createElement("h2");
        p.innerHTML = k;
        l.appendChild(p);
        l = document.createElement("p");
        l.className = "version";
        l.innerHTML = "Version: <strong>" + f.stable.ver + "</strong>";
        m.appendChild(l);
        l = document.createElement("p");
        l.className = "info";
        l.innerHTML = "â€œ" + f.description + "â€";
        m.appendChild(l);
        c.appendChild(m);
        g.appendChild(c);
        e++
    }
    g.style.width = 191 * e + "px";
    p = document.createElement("h2");
    p.className = "header";
    p.innerHTML = a.message || "Please upgrade your browser to view this website";
    d.appendChild(p);
    d.appendChild(g);
    document.body.appendChild(d)
};
Array.isArray = Array.isArray || function(a) {
    return a && "[object Array]" === Object.prototype.toString.call(a)
};
Array.prototype.every = Array.prototype.every || function(a, h) {
    for (var d = 0, g = this.length; d < g && a.call(h || window, this[d], d, this); ++d);
    return d === g
};
Array.prototype.filter = Array.prototype.filter || function(a, h) {
    for (var d = [], g = 0, b = this.length, e; g < b; ++g) e = this[g], a.call(h || window, e, g, this) && d.push(e);
    return d
};
Array.prototype.forEach = Array.prototype.forEach || function(a, h) {
    for (var d = 0, g = this.length; d < g; ++d) a.call(h || window, this[d], d, this)
};
Array.prototype.indexOf = Array.prototype.indexOf || function(a) {
    for (var h = 0, d = this.length; h < d; ++h) if (this[h] === a) return h;
    return -1
};
Array.prototype.lastIndexOf = Array.prototype.lastIndexOf || function(a) {
    for (var h = this.length - 1; - 1 < h; --h) if (this[h] === a) return h;
    return -1
};
Array.prototype.map = Array.prototype.map || function(a, h) {
    for (var d = [], g = 0, b = this.length; g < b; ++g) d.push(a.call(h || window, this[g], g, this));
    return d
};
Array.prototype.reduce = Array.prototype.reduce || function(a, h) {
    for (var d = h || 0, g = 0, b = this.length; g < b; ++g) d = a.call(window, d, this[g], g, this);
    return d
};
Array.prototype.reduceRight = Array.prototype.reduceRight || function(a, h) {
    for (var d = h || 0, g = this.length - 1; - 1 < g; --g) d = a.call(window, d, this[g], g, this);
    return d
};
Array.prototype.some = Array.prototype.some || function(a, h) {
    for (var d = 0, g = this.length; d < g && !a.call(h || window, this[d], d, this); ++d);
    return d === g
};
Array.prototype.concat = Array.prototype.concat || function(a) {
    for (var h = 0; h < a.length; h++) this.push(a[h]);
    return this
};
"undefined" === typeof sketch && (sketch = {});
(function(sketch) {
    sketch.orientation = function(a, d) {
        var g = this;
        this.mirrorY = this.mirrorX = 1;
        this.zoom = {
            clampFormat: "px",
            fromCenter: !0,
            value: 1,
            min: 20,
            max: 100
        };
        this.rotate = {
            clampFormat: "degree",
            value: 0,
            min: 0,
            max: 0
        };
        this.mouse = {};
        this.origin = {};
        this.offset = {};
        for (var b in d) this[b] = d[b];
        this.ctx = this.canvas.getContext("2d");
        this.trx = {};
        this.trx.scale = new a.vector.Transform;
        this.trx.rotate = new a.vector.Transform;
        this.trx.mirror = new a.vector.Transform;
        this.render = function() {
            e();
            a.render.clipped = !1;
            a.setBounds();
            a.render("root.orientation.render");
            return this
        };
        var e = function() {
            var b = new a.vector.Transform;
            b.combine(g.trx.mirror);
            b.combine(g.trx.scale);
            b.combine(g.trx.rotate);
            b.translate(g.offset.x, g.offset.y);
            var c = new CSSMatrix,
                b = b.matrix;
            c.a = b.a;
            c.b = b.b;
            c.c = b.c;
            c.d = b.d;
            c.e = b.x;
            c.f = b.y;
            c = c.decompose();
            b = g.zoom.value;
            a.canvas2d.zoom = b;
            a.canvas2d.x = c.translate.x - sk.project.x * b;
            a.canvas2d.y = c.translate.y - sk.project.y * b;
            a.alignDummy()
        };
        this.reset = function(b) {
            this.media = a.project.bounds;
            b || (this.zoom.value = 1, this.rotate.value = 0, this.mirrorY = this.mirrorX = 1, this.offset.x = 0, this.offset.y = 0);
            this.center && this.setCenter();
            this.scale = 1;
            this.mouse.x = 0;
            this.mouse.y = 0;
            this.origin.x = 0;
            this.origin.y = 0;
            this.setCenterMouse();
            this.mirrorTo(this.mirrorX, this.mirrorY);
            this.rotateTo(this.rotate.value);
            this.zoomTo(this.zoom.value, !0);
            e();
            return this
        };
        this.setCenter = function() {
            var b = a.canvas2d.pixelRatio,
                c = parseFloat(this.canvas.style.width) || this.canvas.width,
                e = parseFloat(this.canvas.style.height) || this.canvas.height;
            this.center.x = c / 2;
            this.center.y = e / 2;
            this.offset.x = Math.max(0, this.center.x - this.media.width / 2) * b;
            this.offset.y = Math.max(0, this.center.y - this.media.height / 2) * b;
            this.mouse.x = 0;
            this.mouse.y = 0;
            this.origin.x = 0;
            this.origin.y = 0;
            return this
        };
        this.setPan = function(a, b) {
            this.offset.x += isFinite(a) ? a : 0;
            this.offset.y += isFinite(b) ? b : 0;
            this.setCenterMouse();
            this.render();
            return this
        };
        this.setRotate = function(a) {
            this.rotate.value = 360 === a ? 360 : (a + 360) % 360;
            this.rotateTo(this.rotate.value);
            this.render();
            return this
        };
        this.setZoom = function(b, c) {
            var e = this.zoom.value,
                d = Math.max(this.media.width, this.media.width);
            if ("px" === this.zoom.clampFormat) var l = this.zoom.min / d,
                d = this.zoom.max / d;
            else l = this.zoom.min, d = this.zoom.max;
            l = Math.min(d, Math.max(l, b));
            e = 1 + (l - e) / e;
            this.zoom.value = l;
            e && this.zoomTo(e);
            if (!c) return this.render(), a.toolkit.text && a.toolkit.text.updateCSSTransform(), this
        };
        this.mirrorTo = function(a, b) {
            var e = this.media,
                d = -1 === a ? e.width : 0,
                e = -1 === b ? e.height : 0;
            this.trx.mirror.reset();
            this.trx.mirror.translate(d, e);
            this.trx.mirror.scale(a, b);
            return this
        };
        this.rotateTo = function(a) {
            var b = this.trx.rotate,
                e = this.media,
                d = e.width / 2 + this.offset.x,
                e = e.height / 2 + this.offset.y;
            b.reset();
            b.translate(d, e);
            b.rotate(a * Math.PI / 180);
            b.translate(-d, - e);
            return this
        };
        this.zoomTo = function(a, b) {
            if (!this.origin) return console.log("not initialized");
            var e = this.trx.scale;
            b && (e.reset(), this.origin.x = 0, this.origin.y = 0, this.scale = 1);
            e.translate(this.origin.x, this.origin.y);
            e.scale(a, a);
            this.origin.x = this.mouse.x / this.scale + this.origin.x - this.mouse.x / (this.scale * a);
            this.origin.y = this.mouse.y / this.scale + this.origin.y - this.mouse.y / (this.scale * a);
            e.translate(-this.origin.x, - this.origin.y);
            this.scale *= a;
            return this
        };
        this.events = {};
        this.enabled = !1;
        this.enable = function() {
            if (!this.enabled) return this.enabled = !0, g.events.mousedown = eventjs.add(d.mouseLayer, "mousedown", this.mousedown), g.events.wheel = eventjs.add([d.mouseLayer], "wheel", this.mousewheel), g.events.key = eventjs.add(window, "keyup keydown", eventjs.proxy.metaTracker), g.events.keydown = eventjs.add(window, "keydown", this.keydown), this
        };
        this.disable = function() {
            if (this.enabled) {
                this.enabled = !1;
                for (var a in g.events) g.events[a].remove();
                return this
            }
        };
        this.ly = this.lx = 0;
        this.drag = function(b, c) {
            eventjs.prevent(b);
            if (g.zoom.fromCenter) g.setZoomFromCenter();
            else {
                var e = eventjs.proxy.getCoord(b),
                    d = eventjs.proxy.getBoundingBox(g.canvas);
                g.mouse.x = e.x - d.x1;
                g.mouse.y = e.y - d.y1
            }
            e = a.canvas2d.pixelRatio;
            g.offset.x += (c.x - g.lx) / g.zoom.value * g.mirrorX * e;
            g.offset.y += (c.y - g.ly) / g.zoom.value * g.mirrorY * e;
            g.lx = c.x;
            g.ly = c.y;
            g.render();
            g.runCallback();
            return this
        };
        this.mousedown = function(a) {
            eventjs.proxy.getBoundingBox(g.canvas);
            g.lx = 0;
            g.ly = 0;
            g.events.drag = eventjs.proxy.drag({
                fingers: 1,
                event: a,
                position: "difference",
                target: g.canvas,
                listener: g.drag
            });
            return this
        };
        this.mousewheel = function(b, c) {
            eventjs.cancel(b);
            var e = c.wheelDelta / 120,
                d = eventjs.proxy.getCoord(b),
                l = eventjs.proxy.getBoundingBox(g.canvas),
                p = a.canvas2d.pixelRatio;
            g.mouse.x = d.x * p - l.x1;
            g.mouse.y = d.y * p - l.y1;
            b.shiftKey ? (g.rotate.value = (g.rotate.value + 2 * e + 360) % 360, g.rotateTo(g.rotate.value)) : g.setZoom(g.zoom.value * (1 + e / 2), !0);
            e = a.orientation.getKnobOffset(g.zoom.value);
            a.orientation.setController(e);
            g.render();
            g.runCallback();
            return this
        };
        this.keydown = function(a) {
            var b = g.zoomMin,
                b = g.zoom.value / (g.zoomMax - b + b),
                e = a.shiftKey ? 10 : 1;
            switch (a.keyCode) {
                case 37:
                    eventjs.metaKey ? (eventjs.cancel(a), g.setRotate(g.rotate.value + 1 * e)) : g.setPan(-1 * e, 0);
                    g.runCallback();
                    break;
                case 39:
                    eventjs.metaKey ? (eventjs.cancel(a), g.setRotate(g.rotate.value - 1 * e)) : g.setPan(1 * e, 0);
                    g.runCallback();
                    break;
                case 38:
                    eventjs.metaKey ? (eventjs.cancel(a),
                        g.setZoom(b - 0.01 * e)) : g.setPan(0, - 1 * e);
                    g.runCallback();
                    break;
                case 40:
                    eventjs.metaKey ? (eventjs.cancel(a), g.setZoom(b + 0.01 * e)) : g.setPan(0, 1 * e), g.runCallback()
            }
            return this
        };
        this.toString = function() {
            return JSON.stringify(this.getValues())
        };
        this.setCenterMouse = function() {
            var b = a.canvas2d.pixelRatio,
                c = Math.min(this.canvas.width, this.media.width * b),
                b = Math.min(this.canvas.height, this.media.height * b);
            this.mouse.x = c / 2 + this.offset.x;
            this.mouse.y = b / 2 + this.offset.y;
            return this
        };
        this.setZoomFromCenter = function() {
            var a = this.zoom.value,
                b = Math.min(this.canvas.width, this.media.width),
                e = Math.min(this.canvas.height, this.media.height),
                d = this.trx.scale.matrix;
            this.mouse.x = (d.x / a + this.offset.x) * a + b * a / 2;
            this.mouse.y = (d.y / a + this.offset.y) * a + e * a / 2;
            return this
        };
        this.getValues = function() {
            var a = this.zoom.value,
                b = this.trx.scale.matrix;
            return {
                x: b.x + this.offset.x * a,
                y: b.y + this.offset.y * a,
                zoom: a,
                rotate: this.rotate.value,
                mirror: {
                    x: g.mirrorX,
                    y: g.mirrorY
                }
            }
        };
        this.setMedia = function(a) {
            var b = this;
            "string" === typeof a ? (this.media = new Image,
                this.media.onload = function() {
                    b.reset(!0)
                }, this.media.src = a) : (this.media = a, this.reset(!0));
            return this
        };
        this.runCallback = function(a) {
            this.callback && this.callback({
                rotate: g.rotate.value,
                zoom: g.zoom.value,
                mirrorX: g.mirrorX,
                mirrorY: g.mirrorY
            });
            return this
        };
        this.setMedia(this.src);
        return this
    };
    sketch.orientation.init = function() {
        var h = sketch.feature.canvas.zoom || "",
            d = h.min || 0.25,
            g = h.max || 6,
            h = h.increment || 0.1;
        sketch.orientation.reset = function() {
            sketch.orient.reset().render();
            var b = this.getKnobOffset(1);
            this.setController(b)
        };
        sketch.orientation.setZoom = function(a) {
            a = this.getKnobOffset(a || 1);
            this.setController(a)
        };
        sketch.orientation.getKnobOffset = function(f) {
            var c = sketch.orient.zoom.max;
            f = f || sketch.canvas2d.zoom;
            var e = b.offsetHeight || 100;
            return (1 - (Math.log(f) / Math.log(2) + 2) / c) * e
        };
        sketch.orientation.zoomOut = function() {
            var b = Math.max(sketch.orient.zoom.min, sketch.canvas2d.zoom - sketch.orient.zoom.increment),
                b = this.getKnobOffset(b);
            this.setController(b)
        };
        sketch.orientation.zoomIn = function() {
            var b = Math.max(sketch.orient.zoom.min, sketch.canvas2d.zoom + sketch.orient.zoom.increment),
                b = this.getKnobOffset(b);
            this.setController(b)
        };
        sketch.orientation.setController = function(f) {
            var c = b.offsetHeight || 100;
            e && (e.style.top = f - e.offsetHeight / 2 + "px");
            f = Math.pow(2, (1 - f / c) * sketch.orient.zoom.max - 2);
            sketch.orient.setZoom(f)
        };
        sketch.ui.MenuOverlay({
            id: "sk-orientation",
            options: {
                "icon-plus": function() {
                    sketch.exec("zoom-in>render")
                },
                "icon-minus": function() {
                    sketch.exec("zoom-out>render")
                }
            },
            close: function() {
                sketch.exec(sketch.tool.lastType)
            }
        });
        var b = {}, e = null;
        sketch.orient = new sketch.orientation(sketch, {
            src: sketch.project.bounds,
            canvas: sketch.ctx.canvas,
            mouseLayer: sketch.active.canvas,
            center: {
                x: sketch.ctx.canvas.width / 2,
                y: sketch.ctx.canvas.height / 2
            },
            rotate: {
                clampFormat: "degree",
                value: 0,
                min: 0,
                max: 0
            },
            zoom: {
                clampFormat: "%",
                fromCenter: !0,
                value: 1,
                min: d,
                max: g,
                increment: h
            }
        })
    }
})(sketch);
window.WebKitCSSMatrix ? window.CSSMatrix = WebKitCSSMatrix : function() {
    function a() {
        var a = [].slice.call(arguments);
        if (a.length) for (var e = a.length; e--;) Math.abs(a[e]) < g && (a[e] = 0);
        d(this);
        if (16 == a.length) this.m11 = this.a = a[0], this.m12 = this.b = a[1], this.m13 = a[2], this.m14 = a[3], this.m21 = this.c = a[4], this.m22 = this.d = a[5], this.m23 = a[6], this.m24 = a[7], this.m31 = a[8], this.m32 = a[9], this.m33 = a[10], this.m34 = a[11], this.m41 = this.e = a[12], this.m42 = this.f = a[13], this.m43 = a[14], this.m44 = a[15];
        else if (6 == a.length) this.m11 = this.a = a[0], this.m12 = this.b = a[1], this.m21 = this.c = a[2], this.m22 = this.d = a[3], this.m41 = this.e = a[4], this.m42 = this.f = a[5];
        else if ("string" == typeof a[0]) this.setMatrixValue(a[0]);
        else if (0 < a.length) throw new TypeError("Invalid Matrix Value");
    }
    function h(b, e) {
        return new a(e.m11 * b.m11 + e.m12 * b.m21 + e.m13 * b.m31 + e.m14 * b.m41, e.m11 * b.m12 + e.m12 * b.m22 + e.m13 * b.m32 + e.m14 * b.m42, e.m11 * b.m13 + e.m12 * b.m23 + e.m13 * b.m33 + e.m14 * b.m43, e.m11 * b.m14 + e.m12 * b.m24 + e.m13 * b.m34 + e.m14 * b.m44, e.m21 * b.m11 + e.m22 * b.m21 + e.m23 * b.m31 + e.m24 * b.m41, e.m21 * b.m12 + e.m22 * b.m22 + e.m23 * b.m32 + e.m24 * b.m42, e.m21 * b.m13 + e.m22 * b.m23 + e.m23 * b.m33 + e.m24 * b.m43, e.m21 * b.m14 + e.m22 * b.m24 + e.m23 * b.m34 + e.m24 * b.m44, e.m31 * b.m11 + e.m32 * b.m21 + e.m33 * b.m31 + e.m34 * b.m41, e.m31 * b.m12 + e.m32 * b.m22 + e.m33 * b.m32 + e.m34 * b.m42, e.m31 * b.m13 + e.m32 * b.m23 + e.m33 * b.m33 + e.m34 * b.m43, e.m31 * b.m14 + e.m32 * b.m24 + e.m33 * b.m34 + e.m34 * b.m44, e.m41 * b.m11 + e.m42 * b.m21 + e.m43 * b.m31 + e.m44 * b.m41, e.m41 * b.m12 + e.m42 * b.m22 + e.m43 * b.m32 + e.m44 * b.m42, e.m41 * b.m13 + e.m42 * b.m23 + e.m43 * b.m33 + e.m44 * b.m43, e.m41 * b.m14 + e.m42 * b.m24 + e.m43 * b.m34 + e.m44 * b.m44)
    }
    function d(a) {
        a.m11 = a.a = 1;
        a.m12 = a.b = 0;
        a.m13 = 0;
        a.m14 = 0;
        a.m21 = a.c = 0;
        a.m22 = a.d = 1;
        a.m23 = 0;
        a.m24 = 0;
        a.m31 = 0;
        a.m32 = 0;
        a.m33 = 1;
        a.m34 = 0;
        a.m41 = a.e = 0;
        a.m42 = a.f = 0;
        a.m43 = 0;
        a.m44 = 1;
        return a
    }
    var g = 1E-6;
    a.prototype.setMatrixValue = function(a) {
        var e, f = [],
            c = /^matrix3d\((.*)\)/;
        a = String(a).trim();
        d(this);
        if (/^none$/.test(a)) return this;
        f = a.replace(/^.*\((.*)\)$/g, "$1").split(/\s*,\s*/);
        for (e = f.length; e--;) f[e] = parseFloat(f[e]);
        if (/^matrix\((.*)\)/.test(a) && 6 === f.length) this.m11 = this.a = f[0], this.m12 = this.b = f[2], this.m41 = this.e = f[4], this.m21 = this.c = f[1], this.m22 = this.d = f[3], this.m42 = this.f = f[5];
        else if (c.test(a) && 16 === f.length) this.m11 = this.a = f[0], this.m12 = this.b = f[1], this.m13 = f[2], this.m14 = f[3], this.m21 = this.c = f[4], this.m22 = this.d = f[5], this.m23 = f[6], this.m24 = f[7], this.m31 = f[8], this.m32 = f[9], this.m33 = f[10], this.m34 = f[11], this.m41 = this.e = f[12], this.m42 = this.f = f[13], this.m43 = f[14], this.m44 = f[15];
        else throw new TypeError("Invalid Matrix Value");
        return this
    };
    a.prototype.multiply = function(a) {
        return h(this,
            a)
    };
    a.prototype.inverse = function() {
        throw Error("the inverse() method is not implemented (yet).");
    };
    a.prototype.translate = function(b, e, f) {
        "undefined" == typeof f && (f = 0);
        var c = new a;
        c.m41 = c.e = b;
        c.m42 = c.f = e;
        c.m43 = f;
        return h(this, c)
    };
    a.prototype.scale = function(b, e, f) {
        "undefined" == typeof e && (e = b);
        "undefined" == typeof f && (f = 1);
        var c = new a;
        c.m11 = c.a = b;
        c.m22 = c.d = e;
        c.m33 = f;
        return h(this, c)
    };
    a.prototype.rotate = function(b, e, f) {
        "undefined" == typeof e && (e = b);
        "undefined" == typeof f && (f = b);
        var c, k;
        b *= Math.PI / 180;
        c = e * (Math.PI / 180);
        k = f * (Math.PI / 180);
        f = Math.cos(b);
        b = -Math.sin(b);
        e = Math.cos(c);
        c = -Math.sin(c);
        var d = Math.cos(k);
        k = -Math.sin(k);
        var l = new a;
        l.m11 = l.a = e * d;
        l.m12 = l.b = -e * k;
        l.m13 = c;
        l.m21 = l.c = b * c * d + f * k;
        l.m22 = l.d = f * d - b * c * k;
        l.m23 = -b * e;
        l.m31 = b * k - f * c * d;
        l.m32 = b * d + f * c * k;
        l.m33 = f * e;
        return h(this, l)
    };
    a.prototype.rotateAxisAngle = function(b, e, f, c) {
        "undefined" == typeof e && (e = b);
        "undefined" == typeof f && (f = b);
        var k;
        k = c * (Math.PI / 360);
        c = Math.sin(k);
        k = Math.cos(k);
        var d = c * c,
            l = Math.sqrt(b * b + e * e + f * f);
        0 === l ? (e = b = 0, f = 1) : (b /= l, e /= l, f /= l);
        var l = b * b,
            g = e * e,
            r = f * f,
            q = new a;
        q.m11 = q.a = 1 - 2 * (g + r) * d;
        q.m12 = q.b = 2 * (b * e * d + f * c * k);
        q.m13 = 2 * (b * f * d - e * c * k);
        q.m21 = q.c = 2 * (e * b * d - f * c * k);
        q.m22 = q.d = 1 - 2 * (r + l) * d;
        q.m23 = 2 * (e * f * d + b * c * k);
        q.m31 = 2 * (f * b * d + e * c * k);
        q.m32 = 2 * (f * e * d - b * c * k);
        q.m33 = 1 - 2 * (l + g) * d;
        q.m14 = q.m24 = q.m34 = 0;
        q.m41 = q.e = q.m42 = q.f = q.m43 = 0;
        q.m44 = 1;
        return h(this, q)
    };
    a.prototype.toString = function() {
        var a, e = function(a) {
            return a.toFixed(6)
        }, f;
        f = this.m13 || this.m14 || this.m23 || this.m24 || this.m31 || this.m32 || 1 !== this.m33 || this.m34 || this.m43 || 1 !== this.m44 ? !1 : !0;
        f && (a = !0);
        return a ? "matrix(" + [this.a, this.b, this.c, this.d, this.e, this.f].map(e).join(", ") + ")" : "matrix3d(" + [this.m11, this.m12, this.m13, this.m14, this.m21, this.m22, this.m23, this.m24, this.m31, this.m32, this.m33, this.m34, this.m41, this.m42, this.m43, this.m44].map(e).join(", ") + ")"
    };
    a.prototype.skewX = function(b) {
        b *= Math.PI / 180;
        var e = new a;
        e.m21 = e.c = Math.tan(b);
        return h(e, this)
    };
    a.prototype.skewY = function(b) {
        b *= Math.PI / 180;
        var e = new a;
        e.m12 = e.b = Math.tan(b);
        return h(e, this)
    };
    "undefined" !== typeof exports ? ("undefined" !== typeof module && module.exports && (exports = module.exports = a), exports.CSSMatrix = a) : window.CSSMatrix = a
}();
(function() {
    var a = function(d, g, b, e) {
        this.x = d ? d : 0;
        this.y = g ? g : 0;
        this.z = b ? b : 0;
        this.w = e ? e : 0;
        this.checkValues = function() {
            this.x = this.x ? this.x : 0;
            this.y = this.y ? this.y : 0;
            this.z = this.z ? this.z : 0;
            this.w = this.w ? this.w : 0
        };
        this.length = function() {
            this.checkValues();
            return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
        };
        this.normalise = function() {
            var b = this.length();
            return new a(this.x / b, this.y / b, this.z / b)
        };
        this.dot = function(a) {
            return this.x * a.x + this.y * a.y + this.z * a.z + this.w * a.w
        };
        this.cross = function(b) {
            return new a(this.y * b.z - this.z * b.y, this.z * b.x - this.x * b.z, this.x * b.y - this.y * b.x)
        };
        this.combine = function(b, c, e) {
            return new a(c * this.x + e * b.x, c * this.y + e * b.y, c * this.z + e * b.z)
        }
    }, h = function(d) {
        void 0 === d ? d = {} : null;
        var g = {
            perspective: null,
            translate: null,
            skew: null,
            scale: null,
            rotate: null
        }, b;
        for (b in g) this[b] = d[b] ? d[b] : new a
    };
    CSSMatrix.prototype.transformVector = function(d) {
        return new a(this.m11 * d.x + this.m12 * d.y + this.m13 * d.z, this.m21 * d.x + this.m22 * d.y + this.m23 * d.z, this.m31 * d.x + this.m32 * d.y + this.m33 * d.z)
    };
    CSSMatrix.prototype.transpose = function() {
        for (var a = new CSSMatrix, g = 0, b = 0, g = 0; 2 >= g; g++) for (b = g + 1; 3 >= b; b++) a["m" + (g + 1) + (b + 1)] = this["m" + (b + 1) + (g + 1)], a["m" + (b + 1) + (g + 1)] = this["m" + (g + 1) + (b + 1)];
        return a
    };
    CSSMatrix.prototype.determinant = function() {
        return this.m14 * this.m23 * this.m32 * this.m41 - this.m13 * this.m24 * this.m32 * this.m41 - this.m14 * this.m22 * this.m33 * this.m41 + this.m12 * this.m24 * this.m33 * this.m41 + this.m13 * this.m22 * this.m34 * this.m41 - this.m12 * this.m23 * this.m34 * this.m41 - this.m14 * this.m23 * this.m31 * this.m42 + this.m13 * this.m24 * this.m31 * this.m42 + this.m14 * this.m21 * this.m33 * this.m42 - this.m11 * this.m24 * this.m33 * this.m42 - this.m13 * this.m21 * this.m34 * this.m42 + this.m11 * this.m23 * this.m34 * this.m42 + this.m14 * this.m22 * this.m31 * this.m43 - this.m12 * this.m24 * this.m31 * this.m43 - this.m14 * this.m21 * this.m32 * this.m43 + this.m11 * this.m24 * this.m32 * this.m43 + this.m12 * this.m21 * this.m34 * this.m43 - this.m11 * this.m22 * this.m34 * this.m43 - this.m13 * this.m22 * this.m31 * this.m44 + this.m12 * this.m23 * this.m31 * this.m44 + this.m13 * this.m21 * this.m32 * this.m44 - this.m11 * this.m23 * this.m32 * this.m44 - this.m12 * this.m21 * this.m33 * this.m44 + this.m11 * this.m22 * this.m33 * this.m44
    };
    CSSMatrix.prototype.decompose = function() {
        var d = new CSSMatrix(this.toString()),
            g, b, e, f, c;
        if (0 === d.m33) return new h((new CSSMatrix).decompose());
        for (c = 1; 4 >= c; c++) for (j = 1; 4 >= j; j++) d["m" + c + j] /= d.m44;
        for (c = 1; 3 >= c; c++) d["m" + c + "4"] = 0;
        d.m44 = 1;
        if (0 === d.determinant()) return new h((new CSSMatrix).decompose());
        0 != d.m14 || 0 != d.m24 || 0 != d.m34 ? (g = new a(d.m14, d.m24, d.m34, d.m44), b = d.inverse(), b = b.transpose(), g = b.transformVector(g), d.m14 = d.m24 = d.m34 = 0, d.m44 = 1) : g = new a(0, 0, 0, 1);
        b = new a(d.m41, d.m42, d.m43);
        d.m41 = 0;
        d.m42 = 0;
        d.m43 = 0;
        e = [new a, new a, new a];
        for (c = 1; 3 >= c; c++) e[c - 1].x = d["m" + c + "1"], e[c - 1].y = d["m" + c + "2"], e[c - 1].z = d["m" + c + "3"];
        d = new a;
        f = new a;
        d.x = e[0].length();
        e[0] = e[0].normalise();
        f.x = e[0].dot(e[1]);
        e[1] = e[1].combine(e[0], 1, - f.x);
        d.y = e[1].length();
        e[1] = e[1].normalise();
        f.x /= d.y;
        f.y = e[0].dot(e[2]);
        e[2] = e[2].combine(e[0], 1, - f.y);
        f.z = e[1].dot(e[2]);
        e[2] = e[2].combine(e[1], 1, - f.z);
        d.z = e[2].length();
        e[2] = e[2].normalise();
        f.y /= d.z;
        f.y /= d.z;
        c = e[1].cross(e[2]);
        if (0 > e[0].dot(c)) for (c = 0; 3 > c; c++) d.x *= -1, e[c].x *= -1, e[c].y *= -1, e[c].z *= -1;
        c = new a;
        c.y = Math.asin(-e[0].z);
        0 != Math.cos(c.y) ? (c.x = Math.atan2(e[1].z, e[2].z), c.z = Math.atan2(e[0].y, e[0].x)) : (c.x = Math.atan2(-e[2].x, e[1].y), c.z = 0);
        return new h({
            perspective: g,
            translate: b,
            skew: f,
            scale: d,
            rotate: c
        })
    }
})();
var detectZoom = function() {
    var a = function() {
        return {
            zoom: 1,
            devicePxPerCssPx: 1
        }
    }, h = function() {
        var a = Math.round(100 * (screen.deviceXDPI / screen.logicalXDPI)) / 100;
        return {
            zoom: a,
            devicePxPerCssPx: a * (window.devicePixelRatio || 1)
        }
    }, d = function() {
        var a = Math.round(100 * (document.documentElement.offsetHeight / window.innerHeight)) / 100;
        return {
            zoom: a,
            devicePxPerCssPx: a * (window.devicePixelRatio || 1)
        }
    }, g = function() {
        var a = (90 == Math.abs(window.orientation) ? screen.height : screen.width) / window.innerWidth;
        return {
            zoom: a,
            devicePxPerCssPx: a * (window.devicePixelRatio || 1)
        }
    }, b = function() {
        var a = window.outerWidth / window.innerWidth,
            a = Math.round(100 * a) / 100;
        return {
            zoom: a,
            devicePxPerCssPx: a * (window.devicePixelRatio || 1)
        }
    }, e = function() {
        var a = k("min--moz-device-pixel-ratio", "", 0, 10, 20, 1E-4),
            a = Math.round(100 * a) / 100;
        return {
            zoom: a,
            devicePxPerCssPx: a
        }
    }, f = function() {
        return {
            zoom: e().zoom,
            devicePxPerCssPx: window.devicePixelRatio || 1
        }
    }, c = function() {
        var a = window.top.outerWidth / window.top.innerWidth,
            a = Math.round(100 * a) / 100;
        return {
            zoom: a,
            devicePxPerCssPx: a * (window.devicePixelRatio || 1)
        }
    }, k = function(a, b, c, f, e, k) {
        function d(c, f, e) {
            var g = (c + f) / 2;
            return 0 >= e || f - c < k ? g : m("(" + a + ":" + g + b + ")").matches ? d(g, f, e - 1) : d(c, g, e - 1)
        }
        var m, g, h, y;
        window.matchMedia ? m = window.matchMedia : (g = document.getElementsByTagName("head")[0], h = document.createElement("style"), g.appendChild(h), y = document.createElement("div"), y.className = "mediaQueryBinarySearch", y.style.display = "none", document.body.appendChild(y), m = function(a) {
            h.sheet.insertRule("@media " + a + "{.mediaQueryBinarySearch {text-decoration: underline} }",
                0);
            a = "underline" == getComputedStyle(y, null).textDecoration;
            h.sheet.deleteRule(0);
            return {
                matches: a
            }
        });
        c = d(c, f, e);
        y && (g.removeChild(h), document.body.removeChild(y));
        return c
    }, m = function() {
        var k = a;
        isNaN(screen.logicalXDPI) || isNaN(screen.systemXDPI) ? window.navigator.msMaxTouchPoints ? k = d : "orientation" in window && "string" === typeof document.body.style.webkitMarquee ? k = g : "string" === typeof document.body.style.webkitMarquee ? k = b : 0 <= navigator.userAgent.indexOf("Opera") ? k = c : window.devicePixelRatio ? k = f : 0.001 < e().zoom && (k = e) : k = h;
        return k
    }();
    return {
        zoom: function() {
            return m().zoom
        },
        device: function() {
            return m().devicePxPerCssPx
        }
    }
};
"undefined" === typeof sketch && (sketch = {});
sketch.color = sketch.color || {};
sketch.color.gradient = sketch.color.gradient || {};
(function(sketch) {
    sketch.color.gradient.getColors = function(h) {
        var d = sketch.color.space,
            g = new sketch.util.Random(h.seed || 1),
            b = h.dna,
            e = h.resolution,
            f = h.length,
            c = !1,
            k = h.blend || "Normal",
            m;
        sketch.color.blend ? (c = sketch.color.blend.isAlphaRequired[k], m = sketch.color.blend[k]) : m = function(a, b) {
            return a * b / 255
        };
        var l = h.H || 0,
            p = h.S || 0,
            r = h.L || 0;
        "string" === typeof h.dna && (b = b.split(","));
        h = [];
        for (var q = 0; q < b.length; q += 2) h.push({
            hex: b[q + 1],
            stop: parseFloat(b[q], 10)
        });
        var b = 0,
            u = h[b].hex,
            q = "string" === typeof u ? "W3>HEX32>RGBA" : "HEX32>RGBA",
            u = d(u,
                q),
            v = h[b].stop,
            s = h[b + 1];
        if (!s) return h;
        for (var x = d(s.hex, q), s = h[b + 1].stop, w = [], A = 0; A <= f; A += e) {
            var y;
            y = A / f;
            y > s && (b++, h[b] && (u = x, v = s, h[b + 1] && (x = d(h[b + 1].hex, q), s = h[b + 1].stop)));
            y = (y - v) / (s - v);
            Infinity === y && (y = 0);
            if ("Normal" === k && 0 === l && 0 === p && 0 === r) y = d.RGB_W3({
                R: u.R * (1 - y) + x.R * y,
                G: u.G * (1 - y) + x.G * y,
                B: u.B * (1 - y) + x.B * y
            });
            else {
                var z = d.RGB_HSL({
                    R: u.R * (1 - y) + x.R * y,
                    G: u.G * (1 - y) + x.G * y,
                    B: u.B * (1 - y) + x.B * y
                });
                y = d.HSLA_RGBA({
                    H: (z.H + g.toDouble() * l + 360) % 360,
                    S: Math.min(100, Math.max(0, z.S - g.toDouble() * p)),
                    L: Math.min(100, Math.max(0,
                        z.L - g.toDouble() * r)),
                    A: 255
                });
                z = d.HSLA_RGBA({
                    H: (z.H + g.toDouble() * l + 360) % 360,
                    S: Math.min(100, Math.max(0, z.S + g.toDouble() * p)),
                    L: Math.min(100, Math.max(0, z.L + g.toDouble() * r)),
                    A: 255
                });
                c ? (y = m(y, z), y = d(y, "HEX32>RGBA>W3")) : y = d.RGBA_W3({
                    R: m(y.R, z.R),
                    G: m(y.G, z.G),
                    B: m(y.B, z.B),
                    A: m(y.A, z.A)
                })
            }
            w.push(A / f);
            w.push(y)
        }
        return w
    }
})(sketch);
"undefined" === typeof Color && (Color = {});
"undefined" === typeof Color.Space && (Color.Space = {});
(function(a) {
    var h = Math.PI / 180,
        d = 1 / h;
    a.RGB_HSI = function(a) {
        var b = a.R,
            e = a.G;
        a = a.B;
        var f = 0.5 * (2 * b - e - a),
            c = Math.sqrt(3) * (e - a);
        I = (b + e + a) / 3;
        0 < I ? (S = 1 - Math.min(b, e, a) / I, H = Math.atan2(c, f) * d, 0 > H && (H += 360)) : H = S = 0;
        return {
            H: H,
            S: 100 * S,
            I: I
        }
    };
    a.HSI_RGB = function(a) {
        var b = a.H,
            e = a.S / 100;
        a = a.I;
        var f, c, k, b = b - 360 * Math.floor(b / 360);
        120 > b ? (k = a * (1 - e), f = a * (1 + e * Math.cos(b * h) / Math.cos((60 - b) * h)), c = 3 * a - f - k) : 240 > b ? (b -= 120, f = a * (1 - e), c = a * (1 + e * Math.cos(b * h) / Math.cos((60 - b) * h)), k = 3 * a - f - c) : (b -= 240, c = a * (1 - e), k = a * (1 + e * Math.cos(b * h) / Math.cos((60 - b) * h)), f = 3 * a - c - k);
        return {
            R: f,
            G: c,
            B: k
        }
    }
})(Color.Space);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.color && (sketch.color = {});
"undefined" === typeof sketch.color.space && (sketch.color.space = {});
"undefined" === typeof sketch.color.spacex && (sketch.color.spacex = {});
(function() {
    var a = {}, h = {
        "HEX24>HSL": "HEX24>RGB>HSL",
        "HEX32>HSLA": "HEX32>RGBA>HSLA",
        "HEX24>CMYK": "HEX24>RGB>CMY>CMYK",
        "RGB>CMYK": "RGB>CMY>CMYK"
    }, d = sketch.color.space = function(b, e) {
        h[e] && (e = h[e]);
        var f = e.split(">");
        if ("object" === typeof b && 0 <= b[0]) {
            for (var c = f[0], k = {}, m = 0; m < c.length; m++) {
                var l = c.substr(m, 1);
                k[l] = b[m]
            }
            b = k
        }
        if (a[e]) return a[e](b);
        c = 1;
        for (k = f[0]; c < f.length; c++) 1 < c && (k = k.substr(k.indexOf("_") + 1)), k += (0 === c ? "" : "_") + f[c], b = d[k](b);
        return b
    }, g = sketch.color.spacex = function(a, e) {
        a = (a || "").replace(/ /g, "");
        a = a.toLowerCase();
        var f = {
            "#": function(a, b) {
                a.hex = d.W3_HEX24(b);
                a.type = "hex";
                var c = d.HEX24_RGB(a.hex);
                a.R = c.R;
                a.G = c.G;
                a.B = c.B;
                a.A = c.A
            },
            rgba: function(a, b) {
                var c = d.W3_RGBA(b);
                a.R = c.R;
                a.G = c.G;
                a.B = c.B;
                a.A = c.A;
                a.type = "rgba"
            },
            rgb: function(a, b) {
                var c = d.W3_RGB(b);
                a.R = c.R;
                a.G = c.G;
                a.B = c.B;
                a.type = "rgb"
            },
            hsla: function(a, b) {
                var c = d.W3_HSLA(b);
                a.H = c.H;
                a.S = c.S;
                a.L = c.L;
                a.A = c.A;
                a.type = "hsla"
            },
            hsl: function(a, b) {
                var c = d.W3_HSL(b);
                a.H = c.H;
                a.S = c.S;
                a.L = c.L;
                a.type = "hsl"
            }
        }, c;
        for (c in f) if (0 === a.indexOf(c)) return f[c](this,
            a), this;
        if (sketch.color.webcolors[a]) f["#"](this, sketch.color.webcolors[a]);
        return this
    };
    g.prototype.toRGBA = function() {};
    g.prototype.toRGB = function() {
        switch (this.type) {
            case "hex":
                var a = d.HEX_RGB(this.hex);
                this.R = a.R;
                this.G = a.G;
                this.B = a.B;
                return this;
            case "rgb":
                return this;
            case "rgba":
                return this
        }
    };
    g.prototype.toHSLA = function() {};
    g.prototype.toHSL = function() {
        switch (this.type) {
            case "hex":
                return d.RGB_HSL(d.HEX24_RGB(this.hex));
            case "rgb":
                return d.RGB_HSL(this);
            case "rgba":
                return d.RGBA_HSLA(this)
        }
    };
    g.prototype.toHEX = function() {
        switch (this.type) {
            case "hex":
                return d.HEX24_W3(this.hex);
            case "rgb":
            case "rgba":
                return d.HEX24_W3(d.RGB_HEX24(this));
            case "hsl":
            case "hsla":
                return d.HEX24_W3(d.RGB_HEX24(d.HSL_RGB(this)))
        }
    };
    g.prototype.isW3Contrast = function(a, e, f) {
        e = e || 125;
        f = f || 500;
        a = a ? (new g(a)).toRGB() : {
            r: 0,
            g: 0,
            b: 0
        };
        e = this.isW3Brightness(a) <= e;
        f = this.isW3Difference(a) <= f;
        return !(e && f)
    };
    g.prototype.isW3Brightness = function(a) {
        return Math.abs((299 * this.R + 587 * this.G + 114 * this.B) / 1E3 - (299 * a.R + 587 * a.G + 114 * a.B) / 1E3)
    };
    g.prototype.isW3Difference = function(a) {
        var e = Math.max(this.R, a.R) - Math.min(this.R, a.R),
            f = Math.max(this.G, a.G) - Math.min(this.G, a.G);
        a = Math.max(this.B, a.B) - Math.min(this.B, a.B);
        return e + f + a
    };
    d.W3Brightness = function(a, e) {
        return Math.abs((299 * a.R + 587 * a.G + 114 * a.B) / 1E3 - (299 * e.R + 587 * e.G + 114 * e.B) / 1E3)
    };
    d.W3Difference = function(a, e) {
        var f = Math.max(a.R, e.R) - Math.min(a.R, e.R),
            c = Math.max(a.G, e.G) - Math.min(a.G, e.G);
        e = Math.max(a.B, e.B) - Math.min(a.B, e.B);
        return f + c + e
    };
    d.isW3Contrast = function(a, e) {
        e = e || {
            R: 255,
            G: 255,
            B: 255
        };
        var f = 125 >= d.W3Brightness(a, e),
            c = 500 >= d.W3Difference(a, e);
        return !(f && c)
    };
    d.RGB_W3 = function(a) {
        return "rgb(" + (a.R >> 0) + "," + (a.G >> 0) + "," + (a.B >> 0) + ")"
    };
    d.RGBA_W3 = function(a) {
        return "rgba(" + (a.R >> 0) + "," + (a.G >> 0) + "," + (a.B >> 0) + "," + ("number" === typeof a.A ? a.A / 255 : 1) + ")"
    };
    d.W3_RGB = function(a) {
        a = a.substr(4, a.length - 5).split(",");
        return {
            R: parseInt(a[0], 10),
            G: parseInt(a[1], 10),
            B: parseInt(a[2], 10)
        }
    };
    d.W3_RGBA = function(a) {
        a = a.substr(5, a.length - 6).split(",");
        return {
            R: parseInt(a[0], 10),
            G: parseInt(a[1],
                10),
            B: parseInt(a[2], 10),
            A: 255 * parseFloat(a[3] || 1)
        }
    };
    d.HSL_W3 = function(a) {
        return "hsl(" + (a.H + 0.5 >> 0) + "," + (a.S + 0.5 >> 0) + "%," + (a.L + 0.5 >> 0) + "%)"
    };
    d.HSLA_W3 = function(a) {
        return "hsla(" + (a.H + 0.5 >> 0) + "," + (a.S + 0.5 >> 0) + "%," + (a.L + 0.5 >> 0) + "%," + ("number" === typeof a.A ? a.A / 255 : 1) + ")"
    };
    d.W3_HSL = function(a) {
        var e = a.indexOf("(") + 1,
            f = a.indexOf(")");
        a = a.substr(e, f - e).split(",");
        return {
            H: parseInt(a[0], 10),
            S: parseInt(a[1], 10),
            L: parseInt(a[2], 10)
        }
    };
    d.W3_HSLA = function(a) {
        var e = a.indexOf("(") + 1,
            f = a.indexOf(")");
        a = a.substr(e,
            f - e).split(",");
        return {
            H: parseInt(a[0], 10),
            S: parseInt(a[1], 10),
            L: parseInt(a[2], 10),
            A: 255 * parseFloat(a[3], 10)
        }
    };
    d.W3_HEX = d.W3_HEX24 = function(a) {
        "#" === a.substr(0, 1) && (a = a.substr(1));
        3 === a.length && (a = a[0] + a[0] + a[1] + a[1] + a[2] + a[2]);
        return parseInt("0x" + a, 16)
    };
    d.W3_HEX32 = function(a) {
        "#" === a.substr(0, 1) && (a = a.substr(1));
        3 === a.length && (a = a[0] + a[0] + a[1] + a[1] + a[2] + a[2]);
        return 6 === a.length ? parseInt("0xFF" + a, 16) : parseInt("0x" + a, 16)
    };
    d.HEX_W3 = d.HEX24_W3 = function(a, e) {
        e || (e = 6);
        a || (a = 0);
        var f, c = a.toString(16);
        for (f = c.length; f < e;) c = "0" + c, f++;
        for (f = c.length; f > e;) c = c.substr(1), f--;
        return "#" + c
    };
    d.HEX32_W3 = function(a) {
        return d.HEX_W3(a, 8)
    };
    d.HEX_RGB = d.HEX24_RGB = function(a) {
        return {
            R: a >> 16,
            G: a >> 8 & 255,
            B: a & 255
        }
    };
    d.HEX32_RGBA = function(a) {
        return {
            R: a >>> 16 & 255,
            G: a >>> 8 & 255,
            B: a & 255,
            A: a >>> 24
        }
    };
    d.RGBA_HEX32 = function(a) {
        return (a.A << 24 | a.R << 16 | a.G << 8 | a.B) >>> 0
    };
    d.RGB_HEX24 = d.RGB_HEX = function(a) {
        0 > a.R && (a.R = 0);
        0 > a.G && (a.G = 0);
        0 > a.B && (a.B = 0);
        255 < a.R && (a.R = 255);
        255 < a.G && (a.G = 255);
        255 < a.B && (a.B = 255);
        return a.R << 16 | a.G << 8 | a.B
    };
    d.RGB_CMY = function(a) {
        return {
            C: 1 - a.R / 255,
            M: 1 - a.G / 255,
            Y: 1 - a.B / 255
        }
    };
    d.RGBA_HSLA = d.RGB_HSL = function(a) {
        var e = a.R / 255,
            f = a.G / 255,
            c = a.B / 255,
            k = Math.min(e, f, c),
            d = Math.max(e, f, c),
            l = d - k,
            g, h = (d + k) / 2;
        if (0 === l) k = g = 0;
        else {
            var k = 0.5 > h ? l / (d + k) : l / (2 - d - k),
                q = ((d - e) / 6 + l / 2) / l,
                u = ((d - f) / 6 + l / 2) / l,
                l = ((d - c) / 6 + l / 2) / l;
            e === d ? g = l - u : f === d ? g = 1 / 3 + q - l : c === d && (g = 2 / 3 + u - q);
            0 > g && (g += 1);
            1 < g && (g -= 1)
        }
        return {
            H: 360 * g,
            S: 100 * k,
            L: 100 * h,
            A: a.A
        }
    };
    d.RGBA_HSVA = d.RGB_HSV = function(a) {
        var e = a.R / 255,
            f = a.G / 255,
            c = a.B / 255,
            k = Math.min(e, f, c),
            d = Math.max(e,
                f, c),
            l = d - k,
            g;
        if (0 === l) k = g = 0;
        else {
            var k = l / d,
                h = ((d - e) / 6 + l / 2) / l,
                q = ((d - f) / 6 + l / 2) / l,
                l = ((d - c) / 6 + l / 2) / l;
            e === d ? g = l - q : f === d ? g = 1 / 3 + h - l : c === d && (g = 2 / 3 + q - h);
            0 > g && (g += 1);
            1 < g && (g -= 1)
        }
        return {
            H: 360 * g,
            S: 100 * k,
            V: 100 * d,
            A: a.A
        }
    };
    d.CMY_RGB = function(a) {
        return {
            R: Math.max(0, 255 * (1 - a.C)),
            G: Math.max(0, 255 * (1 - a.M)),
            B: Math.max(0, 255 * (1 - a.Y))
        }
    };
    d.CMY_CMYK = function(a) {
        var e = a.C,
            f = a.M;
        a = a.Y;
        var c = Math.min(a, Math.min(f, Math.min(e, 1))),
            e = Math.round(100 * ((e - c) / (1 - c))),
            f = Math.round(100 * ((f - c) / (1 - c)));
        a = Math.round(100 * ((a - c) / (1 - c)));
        c = Math.round(100 * c);
        return {
            C: e,
            M: f,
            Y: a,
            K: c
        }
    };
    d.CMYK_CMY = function(a) {
        return {
            C: a.C * (1 - a.K) + a.K,
            M: a.M * (1 - a.K) + a.K,
            Y: a.Y * (1 - a.K) + a.K
        }
    };
    d.HSLA_RGBA = d.HSL_RGB = function(a) {
        var e = a.H / 360,
            f = a.S / 100,
            c = a.L / 100,
            k, d, l;
        0 === f ? c = f = e = c : (d = 0.5 > c ? c * (1 + f) : c + f - f * c, k = 2 * c - d, l = e + 1 / 3, 0 > l && (l += 1), 1 < l && (l -= 1), c = 1 > 6 * l ? k + 6 * (d - k) * l : 1 > 2 * l ? d : 2 > 3 * l ? k + 6 * (d - k) * (2 / 3 - l) : k, l = e, 0 > l && (l += 1), 1 < l && (l -= 1), f = 1 > 6 * l ? k + 6 * (d - k) * l : 1 > 2 * l ? d : 2 > 3 * l ? k + 6 * (d - k) * (2 / 3 - l) : k, l = e - 1 / 3, 0 > l && (l += 1), 1 < l && (l -= 1), e = 1 > 6 * l ? k + 6 * (d - k) * l : 1 > 2 * l ? d : 2 > 3 * l ? k + 6 * (d - k) * (2 / 3 - l) : k);
        return {
            R: 255 * c,
            G: 255 * f,
            B: 255 * e,
            A: a.A
        }
    };
    d.HSVA_RGBA = d.HSV_RGB = function(a) {
        var e = a.H / 360,
            f = a.S / 100,
            c = a.V / 100,
            k, d, l, g, h;
        if (0 === f) k = d = l = Math.round(255 * c);
        else switch (1 <= e && (e = 0), e *= 6, g = e - Math.floor(e), h = Math.round(255 * c * (1 - f)), l = Math.round(255 * c * (1 - f * g)), f = Math.round(255 * c * (1 - f * (1 - g))), c = Math.round(255 * c), Math.floor(e)) {
            case 0:
                k = c;
                d = f;
                l = h;
                break;
            case 1:
                k = l;
                d = c;
                l = h;
                break;
            case 2:
                k = h;
                d = c;
                l = f;
                break;
            case 3:
                k = h;
                d = l;
                l = c;
                break;
            case 4:
                k = f;
                d = h;
                l = c;
                break;
            case 5:
                k = c, d = h
        }
        return {
            R: k,
            G: d,
            B: l,
            A: a.A
        }
    };
    sketch.color.webcolors = {
        aliceblue: "f0f8ff",
        antiquewhite: "faebd7",
        aqua: "00ffff",
        aquamarine: "7fffd4",
        azure: "f0ffff",
        beige: "f5f5dc",
        bisque: "ffe4c4",
        black: "000000",
        blanchedalmond: "ffebcd",
        blue: "0000ff",
        blueviolet: "8a2be2",
        brown: "a52a2a",
        burlywood: "deb887",
        cadetblue: "5f9ea0",
        chartreuse: "7fff00",
        chocolate: "d2691e",
        coral: "ff7f50",
        cornflowerblue: "6495ed",
        cornsilk: "fff8dc",
        crimson: "dc143c",
        cyan: "00ffff",
        darkblue: "00008b",
        darkcyan: "008b8b",
        darkgoldenrod: "b8860b",
        darkgray: "a9a9a9",
        darkgreen: "006400",
        darkgrey: "a9a9a9",
        darkkhaki: "bdb76b",
        darkmagenta: "8b008b",
        darkolivegreen: "556b2f",
        darkorange: "ff8c00",
        darkorchid: "9932cc",
        darkred: "8b0000",
        darksalmon: "e9967a",
        darkseagreen: "8fbc8f",
        darkslateblue: "483d8b",
        darkslategray: "2f4f4f",
        darkslategrey: "2f4f4f",
        darkturquoise: "00ced1",
        darkviolet: "9400d3",
        deeppink: "ff1493",
        deepskyblue: "00bfff",
        dimgray: "696969",
        dimgrey: "696969",
        dodgerblue: "1e90ff",
        firebrick: "b22222",
        floralwhite: "fffaf0",
        forestgreen: "228b22",
        fuchsia: "ff00ff",
        fuscia: "ff00ff",
        gainsboro: "dcdcdc",
        ghostwhite: "f8f8ff",
        gold: "ffd700",
        goldenrod: "daa520",
        gray: "808080",
        green: "008000",
        greenyellow: "adff2f",
        grey: "808080",
        honeydew: "f0fff0",
        hotpink: "ff69b4",
        indianred: "cd5c5c",
        indigo: "4b0082",
        ivory: "fffff0",
        khaki: "f0e68c",
        lavender: "e6e6fa",
        lavenderblush: "fff0f5",
        lawngreen: "7cfc00",
        lemonchiffon: "fffacd",
        lightblue: "add8e6",
        lightcoral: "f08080",
        lightcyan: "e0ffff",
        lightgoldenrodyellow: "fafad2",
        lightgray: "d3d3d3",
        lightgreen: "90ee90",
        lightgrey: "d3d3d3",
        lightpink: "ffb6c1",
        lightsalmon: "ffa07a",
        lightseagreen: "20b2aa",
        lightskyblue: "87cefa",
        lightslategray: "778899",
        lightslategrey: "778899",
        lightsteelblue: "b0c4de",
        lightyellow: "ffffe0",
        lime: "00ff00",
        limegreen: "32cd32",
        linen: "faf0e6",
        magenta: "ff00ff",
        maroon: "800000",
        mediumaquamarine: "66cdaa",
        mediumblue: "0000cd",
        mediumorchid: "ba55d3",
        mediumpurple: "9370db",
        mediumseagreen: "3cb371",
        mediumslateblue: "7b68ee",
        mediumspringgreen: "00fa9a",
        mediumturquoise: "48d1cc",
        mediumvioletred: "c71585",
        midnightblue: "191970",
        mintcream: "f5fffa",
        mistyrose: "ffe4e1",
        moccasin: "ffe4b5",
        navajowhite: "ffdead",
        navy: "000080",
        oldlace: "fdf5e6",
        olive: "808000",
        olivedrab: "6b8e23",
        orange: "ffa500",
        orangered: "ff4500",
        orchid: "da70d6",
        palegoldenrod: "eee8aa",
        palegreen: "98fb98",
        paleturquoise: "afeeee",
        palevioletred: "db7093",
        papayawhip: "ffefd5",
        peachpuff: "ffdab9",
        peru: "cd853f",
        pink: "ffc0cb",
        plum: "dda0dd",
        powderblue: "b0e0e6",
        purple: "800080",
        red: "ff0000",
        rosybrown: "bc8f8f",
        royalblue: "4169e1",
        saddlebrown: "8b4513",
        salmon: "fa8072",
        sandybrown: "f4a460",
        seagreen: "2e8b57",
        seashell: "fff5ee",
        sienna: "a0522d",
        silver: "c0c0c0",
        skyblue: "87ceeb",
        slateblue: "6a5acd",
        slategray: "708090",
        slategrey: "708090",
        snow: "fffafa",
        springgreen: "00ff7f",
        steelblue: "4682b4",
        tan: "d2b48c",
        teal: "008080",
        thistle: "d8bfd8",
        tomato: "ff6347",
        turquoise: "40e0d0",
        violet: "ee82ee",
        wheat: "f5deb3",
        white: "ffffff",
        whitesmoke: "f5f5f5",
        yellow: "ffff00",
        yellowgreen: "9acd32"
    }
})();
"undefined" !== typeof module && module.exports && (module.exports = sketch.color);
if (!window.Color) var Color = {};
window.Color.open || (Color.open = {});
(function(a) {
    a.GPL = function(a) {
        var g = [];
        a = a.split("\n");
        for (var b = 0; b < a.length; b++) isNaN(parseInt(a[b].substr(0, 3))) || g.push(sketch.color.space({
            R: parseInt(a[b].substr(0, 3)),
            G: parseInt(a[b].substr(4, 3)),
            B: parseInt(a[b].substr(8, 3))
        }, "RGB>HEX24>W3"));
        return g
    };
    a.GGR = function(a, g) {
        function b(a, b) {
            var f = Math.round(255 * b[a[2]]),
                k = Math.round(255 * b[a[3]]),
                d = Math.round(255 * b[a[4]]),
                f = (Math.round(255 * b[a[5]]) << 24 | f << 16 | k << 8 | d) >>> 0,
                f = sketch.color.space.HEX24_W3(f, g || 8),
                k = b[a[1]] - e;
            e += k;
            d = (b[a[0]] - (e - k)) / k;
            c.push(f);
            c.push(Math.round(1E6 * k) / 1E6);
            c.push(Math.round(1E6 * d) / 1E6)
        }
        for (var e = 0, f = a.split("\n"), c = [], k = [], m = 3; m < f.length - 1; m++) {
            var l = f[m].split(" ");
            l[3] == k[0] && l[4] == k[1] && l[5] == k[2] || b([0, 1, 3, 4, 5, 6], l);
            b([2, 2, 7, 8, 9, 10], l);
            k = [l[7], l[8], l[9]]
        }
        return h(c)
    };
    var h = function(a) {
        "string" === typeof a && (a = a.split(","));
        for (var g = [], b = 0, e = "", f = 0; f < a.length; f += 3) {
            var c = sketch.color.space(a[f], 6 === a[f].length ? "HEX>W3" : "HEX32>W3"),
                k = parseFloat(a[f + 1]),
                m = parseFloat(a[f + 2]) * k + b;
            if (e) {
                var l = sketch.color.space(c, "W3>HEX32>RGBA"),
                    e = sketch.color.space(e, "W3>HEX32>RGBA"),
                    l = sketch.color.space({
                        R: 0.5 * l.R + 0.5 * e.R,
                        G: 0.5 * l.G + 0.5 * e.G,
                        B: 0.5 * l.B + 0.5 * e.B,
                        A: 0.5 * l.A + 0.5 * e.A
                    }, "RGBA>HEX32>W3");
                g.push(b);
                g.push(l.substr(1))
            }
            g.push(m);
            g.push(c.substr(1));
            b += k;
            e = c
        }
        return g
    }
})(Color.open);
"undefined" === typeof Color && (Color = {});
Color.Sort = function(a) {
    a.sortHexList = function(a, d) {
        for (var g = [], b = 0; b < a.length; b++) {
            var e = a[b];
            g.push({
                id: e,
                hilbert: Color.HilbertRGB(parseInt("0x" + e))
            })
        }
        a = [];
        g = Color.Sort.Hilbert(g);
        for (b = 0; b < g.length; b++) a.push(g[b].id);
        return a
    };
    a.Alpha_Num = function(h, d) {
        return a.f(h, d, function(a, b) {
            return a.name === b.name ? 0 : a.name < b.name ? -1 : 1
        })
    };
    a.Delta = function(h, d, g) {
        g = g && g.L ? g : Color.XYZ_Lab(Color.RGB_XYZ({
            R: 255,
            G: 0,
            B: 0
        }));
        for (var b in h) h[b].delta = Color.Delta.E(g, h[b].Lab);
        return a.f(h, d, function(a, b) {
            return a.delta - b.delta
        })
    };
    a.LCH = function(h, d, g) {
        g || (g = "H");
        return a.f(h, d, function(a, e) {
            if (a.LCH && e.LCH) return a.LCH[g] - e.LCH[g]
        })
    };
    a.RGB = function(h, d, g) {
        g || (g = "R");
        return a.f(h, d, function(a, e) {
            return a.RGB[g] - e.RGB[g]
        })
    };
    a.Hilbert = function(h, d) {
        return a.f(h, d, function(a, b) {
            return a.hilbert - b.hilbert
        })
    };
    a.f = function(a, d, g) {
        a.sort(g ? g : function(a, b) {
            return a.n - b.n
        });
        d && a.reverse();
        d = [];
        g = 0;
        for (var b in a) d[g++] = a[b];
        return d
    };
    return a
}(Color.Sort || {});
"undefined" === typeof Color && (Color = {});
Color.HilbertRGB = function() {
    var a = function(a, g) {
        for (;;) switch (a) {
            case 0:
            case -1:
                return 0 + g;
            case 1:
            case -2:
                return 1 + g;
            case 2:
            case 3:
            case -3:
            case -4:
                return 2 + g;
            case 4:
            case 5:
            case 6:
            case 7:
            case -5:
            case -6:
            case -7:
            case -8:
                return 3 + g;
            default:
                a >>= 4, g = 4 + g
        }
    }, h = function(a) {
        return a ? h(a >> 8) << 8 | 255 & a ^ (255 & a) >> 1 : 0
    };
    return function(d) {
        var g;
        d = h(d);
        for (var b = 0, e = 0; !(8 <= b);) g = 1 + b, e = e << 3 | (1 << 16 + b & d ? 4 : 0) | (1 << 8 + b & d ? 2 : 0) | (1 << 0 + b & d ? 1 : 0), b = g;
        g = e;
        d = 7;
        var b = g >> 3,
            e = (-1 + a(g & 7 & -(g & 7), 0) + 2) % 3,
            f = 1;
        for (g &= 7;;) if (d) {
            var c, f = f ^ b & 7;
            c = -e;
            c = (c + 3) % 3;
            var k = 7 & f >> 0;
            c = (7 & k << c | k >> 3 - c) << 0 | -8 & f;
            k = (-1 + a(c & -c, 0) + 2 + e) % 3;
            d = -1 + d;
            b >>= 3;
            f = 1 << e;
            g = 4 ^ c | g << 3;
            e = k
        } else {
            e = g;
            d = a(e, 0);
            b = 1;
            for (e ^= e >> 1; !(2 * b >= d);) g = 2 * b, e ^= e >> 2 * b, b = g;
            return e
        }
    }
}();
"undefined" === typeof sketch && (sketch = {});
(function(a) {
    a.exec = function(d, g, b) {
        if (!d) return console.log("missing trigger", arguments);
        if (-1 !== d.indexOf(">")) new sketch.util.Queue({
            items: d.split(">"),
            flatten: !0,
            next: function(b) {
                a.exec(b);
                this.next()
            }
        });
        else {
            var e = "root.exec(" + Array.prototype.slice.call(arguments).join(",") + ")";
            if (a.exec.cmds[d]) return a.exec.cmds[d](d, g, b, e);
            a.setTool(d, g, b)
        }
    };
    a.exec.register = function(d, g) {
        d.indexOf && (-1 !== d.indexOf(" ") ? d = d.split(" ") : -1 !== d.indexOf(",") && (d = d.split(",")));
        if ("object" === typeof d) for (var b = 0; b < d.length; b++) a.exec.cmds[d[b]] = g;
        else a.exec.cmds[d] = g
    };
    a.exec.unregister = function(d) {
        delete a.exec.cmds[d]
    };
    var h = function(d, g, b) {
        eventjs.shiftKey && (d *= 10, g *= 10);
        b ? 0 !== a.selection.length && a.scene.copy().paste().selection.move(d, g) : (a.keyboard.pressed[37] || a.selection.move(0, 0, "cache"), a.selection.move(d, g, "move"))
    };
    a.exec.cmds = {
        "layer-move-left": function(a, g, b, e) {
            h(-(g || 1), 0)
        },
        "layer-move-up": function(a, g, b, e) {
            h(0, - (g || 1))
        },
        "layer-move-right": function(a, g, b, e) {
            h(g || 1, 0)
        },
        "layer-move-down": function(a,
                                    g, b, e) {
            h(0, g || 1)
        },
        "layer-clone-left": function(a, g, b, e) {
            h(-(g || 1), 0, !0)
        },
        "layer-clone-up": function(a, g, b, e) {
            h(0, - (g || 1), !0)
        },
        "layer-clone-right": function(a, g, b, e) {
            h(g || 1, 0, !0)
        },
        "layer-clone-down": function(a, g, b, e) {
            h(0, g || 1, !0)
        },
        "debug-action": function(d, g, b, e) {
            if (0 !== a.selection.length) for (var f in a.selection.items) {
                d = a.scene.data[f];
                if ("undefined" === typeof d) break;
                a.feature.debug && console.log(d.id, d.hash, d)
            }
        },
        render: function() {
            a.render.clean()
        },
        "zoom-in": function(d, g, b, e) {
            a.render.dirtyControls = !0;
            a.orientation.zoomIn()
        },
        "zoom-out": function(d, g, b, e) {
            a.render.dirtyControls = !0;
            a.orientation.zoomOut()
        },
        "zoom-reset": function(d, g, b, e) {
            a.render.dirtyControls = !0;
            a.orientation.reset()
        },
        "layer-to-stamp": function(d, g, b, e) {
            a.assets.addStampFromSelection()
        },
        "layer-merge": function(d, g, b, e) {
            a.assets.addCloneFromSelection()
        },
        "path-merge": function(d, g, b, e) {
            a.vector.mergeActions();
            d = a.scene.getSelection();
            a.scene.removeSelection();
            if (d = a.vector.mergeActions(d)) d.dirty = !0, a.history.store("add", [a.scene.clone(d)]),
                a.scene.push(d), a.scene.sort(), a.scene.reindex(), a.render.clean("pathMerge")
        },
        "layer-forwards": function(d, g, b, e) {
            a.scene.sendForwards && a.selection.length && (a.scene.sendForwards({
                record: !0
            }), a.render.clean(e))
        },
        "layer-to-front": function(d, g, b, e) {
            a.scene.sendForwards && a.selection.length && (a.scene.sendForwards({
                record: !0,
                toFront: !0
            }), a.render.clean(e))
        },
        "layer-backwards": function(d, g, b, e) {
            a.scene.sendBackwards && a.selection.length && (a.scene.sendBackwards({
                record: !0
            }), a.render.clean(e))
        },
        "layer-to-back": function(d,
                                  g, b, e) {
            a.scene.sendBackwards && a.selection.length && (a.scene.sendBackwards({
                record: !0,
                toBack: !0
            }), a.render.clean(e))
        },
        "layer-delete": function(d, g, b, e) {
            a.selection.length && (a.scene.removeSelection(), a.render.clean(e))
        },
        "layer-copy": function(d, g, b, e) {
            a.scene.copy && a.selection.length && (a.scene.copy(), a.scene.setDirtyControl(), a.scene.render(e))
        },
        "layer-cut": function(d, g, b, e) {
            a.scene.cut && a.selection.length && (a.scene.cut(), a.scene.render(e))
        },
        "layer-paste": function(d, g, b, e) {
            a.scene.paste && a.scene.paste(function() {
                g && a.scene.deselectAll();
                a.scene.render(e);
                a.exec("select")
            })
        },
        "select-all": function(d, g, b, e) {
            a.exec("select", function() {
                a.scene.selectAll().render("exec.select-all")
            })
        },
        "select-inverse": function(d, g, b, e) {
            a.exec("select", function() {
                a.scene.selectInverse().render("exec.select-inverse")
            })
        },
        "deselect-all": function(d, g, b, e) {
            a.scene.deselectAll();
            a.render.clean(e)
        },
        undo: function(d, g, b, e) {
            a.history && (a.scene.deselectAll(), a.render.dirtyControls = !0, a.history.undo())
        },
        redo: function(d, g, b, e) {
            a.history && (a.scene.deselectAll(),
                a.render.dirtyControls = !0, a.history.redo())
        },
        print: function(d, g, b, e) {
            a.print()
        },
        save: function(d, g, b, e) {
            a.download.image()
        },
        "save-server": function(d, g, b, e) {
            a.server.save()
        },
        "save-image": function(d, g, b, e) {
            a.download.image()
        },
        "save-gif": function(d, g, b, e) {
            a.download.image("gif")
        },
        "save-jpeg": function(d, g, b, e) {
            a.download.image("jpeg", g, b)
        },
        "save-png": function(d, g, b, e) {
            a.download.image("png", g, b)
        },
        "save-webp": function(d, g, b, e) {
            a.download.image("webp", g, b)
        },
        "save-json": function(d, g, b, e) {
            a.download.json()
        },
        "save-pdf": function(d, g, b, e) {
            a.download.pdf()
        },
        "save-zip": function(d, g, b, e) {
            a.download.zip()
        },
        camera: function(d, g, b, e) {
            a.exec("take-snapshot")
        },
        "take-snapshot": function(d, g, b, e) {
            a.camera.capture && !a.camera.capturing && (a.rtc.videos.you ? a.camera.capture(null, null, rtc && rtc._me.id, null, function() {
                a.exec("select")
            }) : a.setup.webRTC(function() {
                a.exec("take-snapshot");
                a.rtc.pause()
            }))
        },
        clear: function(d, g, b, e) {
            a.scene.clear()
        },
        reset: function(d, g, b, e) {
            a.ctx.canvas.width = a.ctx.canvas.width;
            a.render.clipped = !1;
            a.scene.reset();
            a.history.reset();
            a.project.resetScroll();
            a.orient.reset()
        },
        "new": function(d, g, b, e) {
            a.exec("reset")
        },
        "new-prompt": function(d, g, b, e) {
            if ((!a.actions || a.actions && 0 === a.scene.data.length) && (!a.history || a.history && 0 === a.history.history.vector.data.length)) a.exec("reset"), g && g(), window.alertify && alertify.log("New Project Created!");
            else return a.ui.confirm({
                message: "new-project-confirm",
                callback: function(f) {
                    f ? (a.exec("reset"), g && g(), window.alertify && alertify.log("New Project Created!")) : b && b()
                },
                labels: {
                    ok: "Continue",
                    cancel: "Cancel"
                }
            })
        },
        "configure-blink": function(d, g, b, e) {
            a.exec.cmds.configure(g, b, e)
        },
        configure: function(d, g, b, e) {
            d = -1 === (e || "").indexOf("blink") ? "toggle" : "blink";
            a.windows[d]("sk-configure", function(b) {
                if (b) {
                    b = a.tool.type;
                    if ("select" === b) {
                        var c = a.scene.data[a.selection.idx];
                        c && (b = c.type)
                    }
                    a.ui.buildConfigure(b, !0)
                }
            })
        },
        menu: function(d, g, b, e) {
            d = a.$("#tool-menu");
            contextmenu.show(a.ui.menuMain, d.offsetLeft, 45, !0)
        },
        "menu-export": function(d, g, b, e) {
            d = a.$("#tool-menu-export");
            contextmenu.show(a.ui.menuMainExport, d.offsetLeft, 45, !0)
        },
        "menu-download": function(d, g, b, e) {
            d = a.$("#tool-menu-download");
            contextmenu.show(a.ui.menuMainDownload, d.offsetLeft, 45, !0)
        },
        "menu-about": function(d, g, b, e) {
            d = a.$("#tool-menu-about");
            contextmenu.show(a.ui.menuMainAbout, d.offsetLeft, 45, !0)
        },
        help: function(d, g, b, e) {
            a.windows.byId("sketch-help") ? a.windows.toggle("sketch-help") : a.windows.write("help")
        },
        about: function(d, g, b, e) {
            a.windows.byId("sketch-about") ? a.windows.toggle("sketch-about") : a.windows.write("about")
        },
        palette: function(d, g, b, e) {
            a.windows.toggle("sk-palette")
        },
        "color-picker": function(d, g, b, e) {
            a.windows.toggle("sk-palette")
        },
        colorPalette: function(d, g, b, e) {
            a.colorPalette.enabled ? a.colorPalette.disable() : a.colorPalette.enable()
        },
        login: function(d, g, b, e) {
            a.windows.write("login");
            a.loader.stop()
        },
        file: function(d, g, b, e) {
            a.windows.write("file")
        },
        open: function(d, g, b, e) {
            a.windows.write("open")
        },
        "open-computer": function(d, g, b, e) {
            a.windows.write("open-computer")
        },
        "save-computer": function(d, g, b, e) {
            a.windows.write("save-computer")
        },
        "open-sketch": function(d, g, b, e) {
            a.windows.write("open-sketch");
            window.API && API.Sketchpad.list()
        },
        "save-sketch": function(d, g, b, e) {
            a.windows.write("save-sketch");
            d = document.querySelector("#sketch-sync");
            d.innerHTML = a.configure.sync || "";
            d.href = a.location.createURL("share");
            document.querySelector("#avgrund-html .filename");
            document.querySelector("#avgrund-html .description")
        },
        "open-drive": function(d, g, b, e) {
            a.windows.write("open-drive");
            window.API && API.GoogleDrive.list()
        },
        "save-drive": function(d, g, b, e) {
            a.windows.write("save-drive");
            window.API && API.GoogleDrive.enable();
            document.querySelector("#sketch-file .filename").value = a.project.title || ""
        },
        snapshot: function(d, g, b, e) {
            a.scene.deselectAll();
            a.toolkit.setTool("snapshot");
            window.alertify && alertify.log("Click & drag to create your screenshot.")
        }
    }
})(sketch);
if ("undefined" === typeof console) var console = {
    log: function() {}
};
"undefined" === typeof sketch && (sketch = {});
if ("undefined" === typeof sk) var sk = {};
(function(a) {
    sk = a;
    a.__editing = !1;
    a.__enabled = !1;
    a.__modified = !1;
    a.__modifiedOnline = !1;
    a.__rendering = !1;
    a.__state = "";
    a.__version = "3.5.3";
    "{{" == a.__version.substr(0, 2) && (a.__version = "3.5.2.4dev");
    window.location && (a.__debug = "?debug" === window.location.search);
    a.configure || (a.configure = {
        tools: {}
    });
    a.convert || (a.convert = {});
    a.feature || (a.feature = {});
    a.vector || (a.vector = {});
    a.language || (a.language = {});
    a.ui || (a.ui = {});
    a.setup || (a.setup = {});
    a.server || (a.server = {});
    a.colorPicker || (a.colorPicker = {});
    a.render || (a.render = {});
    a.on || (a.on = {});
    a.util || (a.util = {});
    a.location || (a.location = {});
    a.loc || (a.loc = a.location);
    a.gen || (a.gen = {});
    a.lib || (a.lib = {});
    a.userAgent || (a.userAgent = {});
    a.supports || (a.supports = {
        io: {}
    });
    a.tool || (a.tool = {});
    a.toolkit || (a.toolkit = {
        __init: {},
        __icons: {}
    });
    a.configure.defaultSketch = "new";
    a.configure.lang = "en";
    a.configure.theme = "light";
    a.configure.prefix = "sketch";
    a.configure.background = void 0;
    a.configure.defaultFill = {
        type: "color"
    };
    a.configure.defaultStroke = {
        type: "color"
    };
    a.configure.image = {};
    a.configure.image.mime = "image/png";
    a.configure.image.quality = 1;
    a.feature.debug = !1;
    a.feature.debugCache = !1;
    a.feature.debugMouse = !1;
    a.feature.debugRender = !1;
    a.feature.debugSetup = !1;
    a.feature.log = !1;
    a.feature.kiosk = !1;
    a.feature.cache2D = !0;
    a.feature.cache257 = !1;
    a.feature.cacheSVG = !0;
    a.feature.bruteForce = !0;
    a.feature.project = {};
    a.feature.project.lockProperties = !1;
    a.feature.project.format = "json";
    a.feature.project.title = "Drawing";
    a.feature.project.description = "made with https://sketch.io/";
    a.feature.project.bounds = {};
    a.feature.project.clip = {};
    a.feature.project.background = "rgba(0,0,0,0)";
    a.feature.project.units = "%";
    a.feature.project.width = 1;
    a.feature.project.height = 1;
    a.feature.project.x = 0;
    a.feature.project.y = 0;
    a.feature.tools = {};
    a.feature.tools.drawBoundingBox = !0;
    a.feature.tools.controls = {};
    a.feature.tools.controls.anchor = void 0;
    a.feature.tools.controls.n = void 0;
    a.feature.tools.controls.s = void 0;
    a.feature.tools.controls.e = void 0;
    a.feature.tools.controls.w = void 0;
    a.feature.tools.controls.ne = void 0;
    a.feature.tools.controls.se = void 0;
    a.feature.tools.controls.sw = void 0;
    a.feature.tools.controls.nw = void 0;
    a.feature.tools.controls.mouse = {};
    a.feature.tools.controls.mouse.width = 16;
    a.feature.tools.controls.mouse.height = 16;
    a.feature.tools.controls.touch = {};
    a.feature.tools.controls.touch.width = 24;
    a.feature.tools.controls.touch.height = 24;
    a.feature.tools.usePointInPath = !1;
    a.feature.tools.usePointInBoundingBox = !0;
    a.feature.tools.usePointInImageData = !1;
    a.feature.tools.usePointNearest = !0;
    a.feature.tools.movable = !0;
    a.feature.tools.defaultWidth = 100;
    a.feature.tools.defaultHeight = 100;
    a.feature.tools.minWidth = 1;
    a.feature.tools.minHeight = 1;
    a.feature.tools.maxWidth = sketch.util.INFINITY;
    a.feature.tools.maxHeight = sketch.util.INFINITY;
    a.feature.tools.image = {};
    a.feature.tools.image.filter = !1;
    a.feature.tools.text = {};
    a.feature.tools.text.clickToPlace = !1;
    a.feature.tools.text.dragToPlace = !0;
    a.feature.canvas = {};
    a.feature.canvas.useGroupBoundingBox = !1;
    a.feature.canvas.openDefaultProject = !1;
    a.feature.canvas.scaleContainer = !1;
    a.feature.canvas.clearWithBackground = !0;
    a.feature.canvas.saveWithBackground = !0;
    a.feature.canvas.zoom = {};
    a.feature.canvas.zoom.min = 0.25;
    a.feature.canvas.zoom.max = 100;
    a.feature.canvas.zoom.increment = 0.1;
    a.feature.canvas.pixelRatio = !1;
    a.feature.vector = {};
    a.feature.vector.record = !0;
    a.feature.vector.edit = !0;
    a.feature.social = {};
    a.feature.social.setCookie = !0;
    a.feature.social.autoLogout = !1;
    a.feature.social.autoLogoutTimeout = !1;
    a.feature.beforeUnloadPrompt = !1;
    a.feature.cursorCSS = !1;
    a.feature.windows = !0;
    a.feature.preventScroll = !1;
    a.feature.requireAuth = !1;
    a.feature.exportDrop = !1;
    a.feature.ui = {};
    a.feature.ui.mediaSelect = !1;
    a.feature.ui.sourceAtopColor = "#fff";
    a.feature.ui.tooltips = !1;
    a.feature.palette = {};
    a.feature.palette.hexInput = !1;
    a.feature.palette.closeButton = !1;
    a.feature.palette.eyeDropper = !1;
    a.feature.palette.grid = !1;
    a.feature.palette.gridInstantLoad = !1;
    a.feature.style = {};
    a.feature.style.lockToGlobal = !0;
    a.feature.palette.colorPicker = !1;
    a.feature.palette.color = !0;
    a.feature.palette.gradient = !1;
    a.feature.palette.pattern = !1;
    a.feature.palette.blend = !1;
    a.feature.palette.composite = !1;
    a.feature.palette.header = "";
    a.feature.placement = {};
    a.feature.placement.drag = !0;
    a.feature.placement.click = !0;
    a.feature.placement.mediaClick = !0;
    a.feature.placement.mediaDrag = !1;
    a.feature.placement.constrainToCanvas = !1;
    a.feature.history = {};
    a.feature.history.autoSelect = !1;
    a.feature.history.bitmap = !1;
    a.feature.history.vector = !1;
    a.feature.history.limit = !1;
    a.feature.sync = {};
    a.feature.sync.json = !1;
    a.feature.sync.thumb = !1;
    a.feature.sync.image = !1;
    a.feature.sync.svg = !1;
    a.feature.sync.zip = !1;
    a.feature.sync.maxFileSize = 0;
    a.feature.sync.maxAssetSize = 0;
    a.feature.sync.localRefs = !0;
    a.feature.sync.useDefaultFormat = !1;
    a.feature.sync.hash = !1;
    a.feature.fileSystem = !1;
    a.feature.stream = {};
    a.feature.stream.maxFileSize = 0;
    a.feature.stream.audio = !1;
    a.feature.stream.sketch = !1;
    a.feature.stream.sketchLive = !1;
    a.feature.stream.text = !1;
    a.feature.stream.video = !1;
    a.feature.stream.videoAtop = !1;
    a.feature.stream.tech = "RTCDataChannel";
    a.feature.stream.spectrumAnalysis = !1
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(a) {
    document.querySelector.bind ? (a.$ = document.querySelector.bind(document), a.$$ = document.querySelectorAll.bind(document)) : (a.$ = function() {
        return document.querySelector.apply(document, arguments)
    }, a.$$ = function() {
        return document.querySelectorAll.apply(document, arguments)
    });
    "undefined" !== typeof eventjs && (a.addEvent = eventjs.add, a.removeEvent = eventjs.remove);
    a.canvas2d = {
        pixelRatio: window.devicePixelRatio || 1,
        container: document,
        zoom: 1,
        rotate: 0,
        y: 0,
        x: 0,
        bounds: {
            x1: 0,
            y1: 0,
            x2: Infinity,
            y2: Infinity
        },
        layers: {
            cache: "",
            bitmap: "",
            layer0: "z-index: 0;",
            draw: "z-index: 1;",
            active: "z-index: 2;"
        }
    };
    a.project = new function() {
        var h = this;
        this.units = "%";
        this.y = this.x = 0;
        this.height = this.width = 1;
        this.scrollTop = this.scrollLeft = 0;
        this.pages = {};
        this.pages.data = [];
        this.pages.current = 0;
        this.pages.length = 0;
        this.format = "json";
        this.title = a.feature.project.title;
        this.description = a.feature.project.description;
        this.clip = {};
        this.bounds = {
            width: 0,
            height: 0,
            style: {
                fillStyle: "",
                strokeStyle: "",
                lineWidth: 0
            }
        };
        this.viewport = {
            width: 0,
            height: 0,
            clip: {}
        };
        this.getBounds = function() {
            var d = this.getViewport();
            if ("%" === a.project.units) var g = (a.project.width || 1) * d.width,
                d = (a.project.height || 1) * d.height;
            else g = a.project.width, d = a.project.height;
            this.bounds.width = g;
            this.bounds.height = d;
            return this.bounds
        };
        this.getViewport = function() {
            var d = a.canvas2d,
                g = d.bounds,
                b = d.container;
            a.feature.canvas.scaleContainer ? (d = window.innerWidth - g.x1, b = window.innerHeight - g.y1) : (d = b.offsetWidth - g.x1, b = b.offsetHeight - g.y1);
            isFinite(g.x2) && (d = Math.min(d, g.x2 - g.x1));
            isFinite(g.y2) && (b = Math.min(b, g.y2 - g.y1));
            this.viewport.width = d;
            this.viewport.height = b;
            return this.viewport
        };
        this.setData = function(d) {
            h.x = d.x;
            h.y = d.y;
            a.orient.reset();
            h.setSize(d.width, d.height, d.units);
            h.setScroll(d.scrollLeft, d.scrollTop);
            a.orient.reset();
            a.orient.setZoom(d.zoom || 1)
        };
        this.getData = function() {
            var d = {};
            d.units = h.units;
            d.x = h.x;
            d.y = h.y;
            d.width = h.width;
            d.height = h.height;
            d.scrollLeft = h.scrollLeft;
            d.scrollTop = h.scrollTop;
            d.zoom = a.canvas2d.zoom;
            return d
        };
        this.setSize = function(d, g, b) {
            d || g ? "%" === b ? (this.width = d, this.height = g, this.units = "%") : (this.width = d, this.height = g, this.units = "px") : (this.height = this.width = 1, this.units = "%");
            a.setSize()
        };
        this.setPage = function(a, g) {
            var b = this.pages,
                e = Math.min(b.length - 1, Math.max(0, g ? b.current + a : a));
            b.current = e;
            for (var f = 0, c = 0; c < e; c++) f += b.data[c].height;
            this.scrollElement.scrollTop = f
        };
        this.setScroll = function(d, g) {
            var b = a.project.scrollElement;
            isFinite(d) && (b.scrollLeft = d);
            isFinite(g) && (b.scrollTop = g)
        };
        this.resetScroll = function() {
            var d = a.project.scrollElement;
            d.scrollTop = 0;
            d.scrollLeft = 0;
            a.project.scrollTop = 0;
            a.project.scrollLeft = 0
        }
    };
    a.construct = function(h) {
        if (!h) return console.log("sketch.construct() requires configuration.");
        if (!a.__state) {
            a.__state = "building";
            for (var d = ["prefix", "lang", "background", "defaultSketch"], g = 0; g < d.length; g++) {
                var b = d[g];
                h[b] && (a.configure[b] = h[b], delete h[b])
            }
            var e = h.onready || h.onReady;
            a.on.sketchReady = function() {
                a.__state = "ready";
                a.on.sketchReady = function() {};
                a.feature.history.bitmap && a.history.storeBitmap();
                e && window.setTimeout(function() {
                        e("sketch")
                    },
                    1)
            };
            a.util.mergeObject(h.icons || {}, a.toolkit.__icons);
            a.util.mergeObject(h.configure || {}, a.configure);
            a.util.mergeObject(h.feature || {}, a.feature);
            a.util.mergeObject(h.feature.project || {}, a.project);
            d = a.util.clone(a.feature.tools);
            for (b in a.configure.tools)!1 !== a.util.exists("sketch.toolkit.__init." + a.configure.tools[b].toolkit) && (a.feature[b] = a.util.mergeObject(a.feature.tools[b] || a.feature[b] || d, d));
            a.location.setHost(a.configure.hosts || h.hosts);
            a.setContainer(h);
            var f = a.canvas2d,
                c = h.onsupport || h.onSupport;
            a.supports.fn.init(function() {
                c && c();
                setTimeout(function() {
                    a.language.setLocale(a.configure.lang || "en");
                    a.setBackground(a.configure.background || "none");
                    a.project.units = a.feature.project.units;
                    a.setSize();
                    var b = f.layers;
                    a.active = b.active.ctx;
                    a.cache = b.cache.ctx;
                    a.ctx = b.layer0.ctx;
                    a.style.init();
                    a.history = new a.History(a);
                    a.toolkit.loadTools();
                    a.setup.run();
                    a.feature.debug && (document.body.style.overflow = "auto");
                    a.setup.events();
                    a.feature.stream.sketchLive && a.setup.webRTC();
                    a.getItem("sync",

                        function(b) {
                            a.render.start();
                            var c = a.location.search;
                            c.debug && (a.feature.debug = c.debug);
                            c.pixelRatio && (a.canvas2d.pixelRatio = parseFloat(c.pixelRatio));
                            c.zoom && (a.canvas2d.zoom = parseFloat(c.zoom));
                            a.configure.sync = b;
                            a.on.sketchReady()
                        })
                }, 0)
            })
        }
    };
    a.alignDummy = function() {
        if (a.orient && !a.feature.canvas.clearWithBackground) {
            var h = a.orient.scale,
                d = a.orient.getValues(),
                g = a.setBounds(),
                b = a.canvas2d.dummy;
            b.style.width = h * g.width + "px";
            b.style.height = h * g.height + "px";
            b.style.left = d.x + a.project.scrollLeft * (1 - h) + "px";
            b.style.top = d.y + a.project.scrollTop * (1 - h) + "px";
            (d = a.configure.backgroundRaw) && d.canvas && (d = d.canvas, b.style.backgroundSize = d.width * h + "px " + d.height * h + "px")
        }
    };
    a.setBackground = function(h) {
        if (h) {
            var d = a.configure,
                g = function(b) {
                    a.feature.canvas.clearWithBackground || (a.canvas2d.dummy.style.background = b)
                }, b = function(b, f, e) {
                    d.theme = e;
                    b(f, function(a) {
                        g(a.css);
                        d.backgroundRaw = a
                    });
                    a.setItem("backdrop", h)
                };
            a.project.background = h;
            switch (h) {
                case "none":
                    return;
                case "blank":
                    d.theme = "dark";
                    g("#fff");
                    d.backgroundRaw = "#fff";
                    a.setItem("backdrop", "light");
                    return;
                case "white":
                    d.theme = "light";
                    g("#fff");
                    d.backgroundRaw = "#fff";
                    a.setItem("backdrop", "light");
                    return;
                case "black":
                    d.theme = "dark";
                    g("#000");
                    d.backgroundRaw = "#000";
                    a.setItem("backdrop", "dark");
                    return;
                case "grid":
                    return b(a.gen.grid, "grid", "light");
                case "graphPaper":
                    return b(a.gen.grid, "graphPaper", "light");
                case "bluePrint":
                    return b(a.gen.grid, "bluePrint", "light");
                case "notebook":
                    return b(a.gen.paper, "notebook", "light");
                case "looseLeaf":
                    return b(a.gen.paper, "looseLeaf", "light");
                case "lined":
                    return b(a.gen.paper, "lined", "dark");
                case "transparent":
                    return b(a.gen.interlace, "transparent", "light");
                case "transparentDark":
                    return b(a.gen.interlace, "transparentDark", "dark");
                default:
                    b = h.trim(), - 1 !== b.indexOf("://") && "url" !== b.substr(0, 3) && (b = "url(" + b + ")"), g(b)
            }
            if (h.indexOf && -1 !== h.indexOf("url(")) {
                var e = document.createElement("img"),
                    b = h.substr(4, h.length - 5).split("'").join("").split('"').join(""),
                    f = a.util.Canvas(1, 1).ctx;
                e.onload = function() {
                    var a = f.createPattern(e, "repeat");
                    d.backgroundRaw = a
                };
                e.src = b
            } else d.backgroundRaw = h;
            a.actions && a.selection.length && a.render("root.setBackground");
            a.setItem("backdrop", h)
        } else a.getItem("backdrop", function(b) {
            a.setBackground(b || "light")
        })
    };
    a.setZoom = function(h) {
        if (!a.orient) return console.log("Missing orientation module.", arguments);
        a.orient.setZoom(h)
    };
    a.setPixelRatio = function(h) {
        a.canvas2d.pixelRatio = h;
        a.scene.setDirtyCache(a.scene.data);
        a.setSize();
        a.orient.reset();
        a.orient.render("root.setPixelRatio")
    };
    a.setBounds = function(h,
                           d) {
        var g = a.canvas2d,
            b = g.container,
            e = g.zoom,
            f = a.project.getBounds(),
            c = h || f.width,
            f = d || f.height;
        c && f || (f = a.util.getMetrics(b), c = f.width - g.bounds.x1, f = f.height - g.bounds.y1);
        var k = a.project.getViewport(),
            g = k.height,
            k = Math.max(k.width, c),
            g = Math.max(g, f);
        "%" === a.project.units ? (b.style.width = k * e + "px", b.style.height = g * e + "px") : (b.style.width = k + "px", b.style.height = g + "px");
        return {
            targetWidth: k,
            targetHeight: g,
            width: c,
            height: f
        }
    };
    a.setSize = function(h, d) {
        a.render.clipped = !1;
        var g = !a.feature.vector.edit && a.cache,
            b = a.canvas2d,
            e = b.layers,
            f = b.container,
            c = f.parentNode;
        c.style.overflow = "auto";
        "%" === a.project.units && (f.style.width = c.style.width = "100%", f.style.height = c.style.height = "100%", c.scrollTop = 0);
        var k = a.project.getViewport(),
            m = k.width,
            k = k.height,
            l = a.setBounds(h, d);
        "%" === a.project.units ? c.style.overflow = "hidden" : (c.style.overflowX = l.targetWidth <= m ? "hidden" : "auto", c.style.overflowY = l.targetHeight <= k ? "hidden" : "auto", l.targetWidth <= m && l.targetHeight <= k && a.project.resetScroll());
        a.feature.canvas.scaleContainer && !a.render.forOutput ? (h = Math.min(l.targetWidth, m), d = Math.min(l.targetHeight, k)) : (h = l.targetWidth, d = l.targetHeight, c.style.overflow = "visible", c.scrollTop = 0);
        b.width = h;
        b.height = d;
        c && "sk-canvas" === c.id ? (c.style.width = h + "px", c.style.height = d + "px", c.style.left = b.bounds.x1 + "px", c.style.top = b.bounds.y1 + "px") : (f.style.left = b.bounds.x1 + "px", f.style.top = b.bounds.y1 + "px");
        g && (a.cache.canvas.width = h, a.cache.canvas.height = d, a.cache.drawImage(a.ctx.canvas, 0, 0));
        for (var p in e) g && "cache" === p || (f = a.util.Canvas(null,
            null, p), b.container.appendChild(f), e[p].indexOf && (f.style.cssText = b.layers[p]), f.style.width = b.width + "px", f.style.height = b.height + "px", e[p] = f);
        g && (a.ctx.canvas.width = h, a.ctx.canvas.height = d, a.ctx.drawImage(a.cache.canvas, 0, 0), a.cache.canvas.width = h, a.cache.canvas.height = d);
        if (a.actions && a.scene.data) {
            g = a.selection.items;
            for (p in g) if (g = a.scene.data[p]) g.dirtyControl = !0;
            a.scene.detectVisible();
            sk.windows.restore()
        }
    };
    a.setContainer = function(h) {
        var d = "string" === typeof h ? h : h.container || document.body;
        "string" === typeof d && (d = document.querySelector(d));
        if (!document.querySelector("#sk-canvas")) {
            var g = d,
                b = dom.create('<div class="sk-viewport"></div>'),
                d = dom.create('<div id="sk-canvas"></div>');
            b.appendChild(d);
            g.appendChild(b)
        }
        g = d.querySelector(".sk-dummy-canvas");
        g || (g = document.createElement("div"), g.className = "sk-dummy-canvas", d.appendChild(g));
        a.canvas2d.dummy = g;
        a.project.scrollElement = h.scrollElement || d.parentNode || d;
        return a.canvas2d.container = d
    };
    a.getItem = function(h, d) {
        d = d || function(a) {
            console.log("Missing callback:",
                a)
        };
        if (a.util.exists("chrome.storage.local")) chrome.storage.local.get(h, function(a) {
            d(a[h])
        });
        else {
            var g = a.configure.prefix;
            "dev" === g ? (console.log("dev mode"), d("")) : (g = localStorage.getItem(g + "/" + h) || "", d(g))
        }
    };
    a.setItem = function(h, d) {
        if (a.util.exists("chrome.storage.local")) {
            var g = {};
            g[h] = d;
            chrome.storage.local.set(g)
        } else localStorage.setItem(a.configure.prefix + "/" + h, d)
    };
    a.reset = function() {
        a.project.resetScroll();
        a.assets && a.assets.reset();
        a.orient && a.orient.reset();
        a.actions && a.scene.reset();
        a.history && a.history.reset()
    };
    (function() {
        var h = navigator.userAgent || navigator.vendor || window.opera;
        a.userAgent.__ = h;
        a.userAgent.nodewebkit = !(!a.util.exists("process.versions") || !process.versions["node-webkit"]);
        a.userAgent.ios = /iPhone|iPad|iPod/i.test(h);
        a.userAgent.android = /Android/i.test(h);
        a.userAgent.blackberry = /Blackberry/i.test(h);
        a.userAgent.mobile = /Opera Mini|IEMobile|Symbian|WebOS/i.test(h) || a.userAgent.ios || a.userAgent.android || a.userAgent.blackberry;
        a.userAgent.mac = /Mac/.test(h);
        a.userAgent.ie = /MSIE/.test(h);
        a.userAgent.cordova = /^file:\/{3}[^\/]/i.test(window.location.href) && a.userAgent.mobile;
        a.userAgent.windows = /Windows/.test(h);
        a.userAgent.linux = /Linux/.test(h);
        a.userAgent.ios && (h = ("" + (/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [0, ""])[1]).replace("undefined", "3_2").replace("_", ".").replace("_", "") || !1) && (a.userAgent.iosVersion = new a.util.version(h))
    })();
    a.util.antizoom = function() {};
    (function() {
        var h = [];
        a.setup = {};
        a.setup.add = function(a) {
            h.push(a)
        };
        a.setup.run = function() {
            for (var a = 0; a < h.length; a++) h[a]()
        }
    })();
    a.setup.add(function() {
        a.util.exists("detectZoom") && (a.util.detectZoom = detectZoom());
        a.util.exists("sketch.util.getScreenMetrics") && (a.convert.metrics = a.util.getScreenMetrics());
        a.util.exists("dom.loadImage") && (dom.loadImage.proxyUrl = a.location.host + "getImage.php?url=");
        a.util.exists("EnableContextMenu") && (a.ui.contextMenu = EnableContextMenu(document, window));
        a.util.exists("sketch.vector.shape") && (a.vector.VOBPath = a.vector.shape.VOBPath);
        a.util.exists("sketch.Save") && (a.save = new a.Save(a));
        if (a.util.exists("sketch.Scene")) {
            var h = a.actions = a.scene = new a.Scene(a);
            a.hovered = a.scene.hovered;
            a.selection = a.scene.selection;
            h.clipboard && h.clipboard.addFocusEvent()
        }
        a.util.exists("sketch.theme") && a.theme.init();
        a.util.exists("sketch.Camera") && (a.camera = new a.Camera(a));
        a.util.exists("sketch.RTC") && (a.rtc = new a.RTC(a));
        a.util.exists("widget.Thumbnailer") && !a.util.thumbnailer && (a.util.thumbnailer = (new widget.Thumbnailer).generate);
        a.util.exists("widget.Loader") && !a.loader && (a.loader = new widget.Loader);
        a.util.exists("widget.Vortex") && (a.vortex = widget.Vortex(document.body));
        a.Assets && (a.assets = new a.Assets);
        a.Palette && (a.palette = new a.Palette);
        a.util.exists("sketch.render.Cache2d") && (a.render.cache = new a.render.Cache2d(a));
        a.util.exists("sketch.keyboard.init") && a.keyboard.init();
        a.util.exists("sketch.orientation") && a.orientation.init()
    });
    a.setup.onResize = function() {
        var h = a.canvas2d,
            d = h.container.parentNode;
        eventjs.add(window, "resize", function(d) {
            a.util.antizoom();
            window.clearTimeout(window.resizeTimeout);
            window.resizeTimeout = window.setTimeout(function() {
                a.on.beforeResize && a.on.beforeResize();
                a.setSize();
                a.orient.reset(!0);
                a.render("onResize");
                a.on.resize && a.on.resize();
                a.eventOverride("onResize", d) || "text" === a.tool.type && a.toolkit.text.updateCSS()
            }, 100)
        });
        eventjs.add(d, "scroll", function(g) {
            var b = d.scrollTop,
                e = d.scrollLeft;
            a.project.scrollTop = b;
            a.project.scrollLeft = e;
            a.render.clipped = !1;
            a.alignDummy();
            var f = h.layers,
                c;
            for (c in f) {
                var k = f[c];
                k.style.left = e + "px";
                k.style.top = b + "px"
            }
            if (a.scene) {
                for (c in a.scene.data) b = a.scene.data[c], b.dirtyTransform = !0, delete b.visible;
                a.toolkit.text && (b = a.scene.data[a.selection.idx]) && "text" === b.type && a.toolkit.text.updateCSSTransform();
                a.render.dirtyControls = !0;
                a.render("container.onscroll");
                a.toolkit.callOverride("onScroll", g)
            }
        });
        a.util.antizoom()
    };
    a.setup.onHashChange = function() {
        var h = function() {
            a.dataChannel ? (a.server.open(), a.dataChannel.send(["session.change", d])) : a.server.open()
        }, d = a.location.getRoomID();
        eventjs.add(window, "hashchange", function(g) {
            g = a.location.getRoomID();
            if (d !== g) {
                var b = d;
                d = g;
                "ready" === a.__state && a.scene.data.length ? a.ui.confirm({
                    message: "open-confirm",
                    callback: function(e) {
                        e ? (a.exec("save"), a.location.setHash("sketch", b)) : h()
                    },
                    labels: {
                        ok: "Save sketch",
                        cancel: "No thanks"
                    }
                }) : h()
            }
        })
    };
    a.setTooltip = function(h, d) {
        var g = a.active && a.active.canvas;
        g && (g.style.cursor = d || "");
        a.feature.ui.tooltips && widget.Tooltip ? "" === h ? widget.Tooltip.hide() : widget.Tooltip.show(h) : g && (g.title = h || "")
    };
    a.addTooltip = function(h, d, g) {
        eventjs.add({
            target: h,
            mouseover: function(b) {
                a.setTooltip(d,
                    g);
                eventjs.stop(b)
            },
            mouseout: function(b) {
                a.setTooltip("");
                eventjs.stop(b)
            }
        })
    }
})(sketch);
(function(a) {
    a.Assets = function() {
        var a = this,
            f = b();
        this.reset = function() {
            a.data = {};
            a.URLtoID = {};
            a.IDtoURL = {};
            return a
        };
        this.remove = function(b) {
            delete a.data[b];
            return b
        };
        this.isEqual = function(b, f) {
            if (b === f) return !0;
            var d = a.getItem(b);
            return d && d.src === f ? !0 : (d = a.getItem(f)) && d.src === b ? !0 : !1
        };
        this.getItem = function(b) {
            return a.URLtoID[b] ? a.getById(a.URLtoID[b]) : a.data[b] ? a.data[b] : ""
        };
        this.getAsBlob = function(b) {
            return a.getById(b).blob
        };
        this.getById = function(b) {
            return a.data[b] ? a.data[b] : f
        };
        return this.reset()
    };
    var h = a.Assets.prototype;
    h.addClipart = function(b, f, c, k) {
        a.assets.add({
            type: "clipart",
            data: b,
            onload: function(b, c) {
                var e = a.lib.clipart;
                if (!e || !e.tree) return f(b, c);
                var k = e.tree.yourFiles;
                if (!k) return f(b, c);
                if (k[b]) f && f(b, c);
                else {
                    k[b] = "loading";
                    if (!a.gen.preview) return f(b, c);
                    a.gen.preview({
                        type: "clipart",
                        resource: c,
                        width: 52,
                        height: 52,
                        oncomplete: function(a) {
                            e.paths.splice(0, 0, k[b] = {
                                type: "clipart",
                                filename: b,
                                filepath: b,
                                thumbnail: a.canvas.toDataURL()
                            });
                            f && f(b, c)
                        }
                    })
                }
            },
            onerror: c,
            targetId: k
        })
    };
    h.addImage = function(b, f, c, k) {
        a.assets.add({
            type: "image",
            data: b,
            onload: function(b, c) {
                var e = a.lib.clipart;
                if (!e || !e.tree) return f(b, c);
                var k = e.tree.yourFiles;
                if (!k) return f(b, c);
                k[b] ? f && f(b, c) : (k[b] = "loading", a.util.thumbnailer({
                    src: c,
                    width: 52,
                    height: 52,
                    onload: function(a) {
                        e.paths.splice(0, 0, k[b] = {
                            type: "image",
                            filename: b,
                            filepath: b,
                            thumbnail: a.toDataURL()
                        });
                        f && f(b, c)
                    }
                }))
            },
            onerror: c,
            targetId: k
        })
    };
    h.addFromActions = function(b) {
        for (var f = 0; f < b.length; f++) {
            var c = b[f];
            if (c.src) {
                var k = c.src;
                if ("#" === k[0]) switch (c.type) {
                    case "clipart":
                        a.assets.addClipart(k);
                        break;
                    case "image":
                        a.assets.addImage(k);
                        break;
                    case "stamp":
                        a.assets.addStamp(k)
                }
            }
        }
    };
    h.addCloneFromSelection = function() {
        a.save.canvas({
            background: "none",
            fromSelection: !0,
            callback: function(b) {
                b.toBlob(function(b) {
                    a.scene.add({
                        type: "image",
                        src: URL.createObjectURL(b)
                    })
                })
            }
        })
    };
    h.addStampFromSelection = function() {
        a.save.canvas({
            background: "none",
            fromSelection: !0,
            callback: function(b) {
                a.scene.deselectAll();
                a.assets.addStamp(b, function() {
                    a.ui.setToolMenu("stamp");
                    a.ui.buildConfigure("stamp", !0);
                    a.toolkit.setTool("stamp",

                        function() {
                            var b = a.tool.device.brush,
                                c = b.fill;
                            c[c.type] = "none";
                            delete b.fill.__colors
                        })
                })
            }
        })
    };
    h.addStamp = function(b, f, c, k) {
        a.assets.add({
            type: "image",
            data: b,
            onload: function(b, c) {
                var e = a.lib.stamp;
                if (!e) return f(b, c);
                var k = e.tree.yourFiles;
                if (!k) return f(b, c);
                k[b] ? f && f() : (k[b] = "loading", a.util.thumbnailer({
                    src: c,
                    width: 52,
                    height: 52,
                    onload: function(d) {
                        a.configure.tools.stamp.src = b;
                        e.paths.splice(0, 0, k[b] = {
                            type: "stamp",
                            filename: b,
                            filepath: b,
                            thumbnail: d.toDataURL()
                        });
                        f && f(b, c)
                    }
                }))
            },
            onerror: c,
            targetId: k
        })
    };
    h.addPattern = function(a, b) {};
    h.addFont = function(a, b) {};
    var d = a.util.array2object(["[object Blob]", "[object File]"]),
        g = a.util.array2object(["[object HTMLCanvasElement]", "[object HTMLImageElement]"]);
    h.add = function(e, f, c, k) {
        "string" === typeof e && (e = {
            src: e
        });
        var m = e.src || e.blob || e.data,
            l;
        if (!(l = e.type)) a: {
            if ("string" === typeof m) switch (STRING.basename(m).toLowerCase().split(".").pop()) {
                case "jpeg":
                case "png":
                case "gif":
                case "webp":
                    l = "image";
                    break a;
                case "svg":
                    l = "clipart";
                    break a
            }
            l = void 0
        }
        var p = e.targetId || null;
        f = e.onload || f;
        c = e.onerror || c;
        k = e.onprogress || k;
        var h = this,
            q = String(m),
            u;
        if (g[q]) return this.createId(m, function(a) {
            h.data[a] = m;
            h.data[a].type = "image";
            f && f.call(m, a, m)
        });
        if (d[q]) {
            if ("image/svg+xml" === m.type) return a.convert.blobToText(m, function(a) {
                e.src = a;
                e.type = "clipart";
                h.add(e, f, c, k)
            });
            u = m;
            m = URL.createObjectURL(m)
        }
        if (0 === m.indexOf("#asset-")) {
            q = m;
            m = this.getById(m);
            if ("undefined" === typeof this.data[q]) {
                if (a.io.json.folder) return u = "clipart" === e.type ? ".svg" : ".png", e.src = a.io.json.folder + q.substr(1) + u, h.add(e, f, c, k);
                this.data[q] = b()
            }
            f && f.call(m, q, m)
        } else {
            if (this.URLtoID[m]) {
                var q = this.URLtoID[m],
                    v = this.getById(q);
                if ("clipart" !== v.type || !v.clone || a.feature.cacheSVG) {
                    f && f.call(v, q, m);
                    return
                }
            }
            0 === m.indexOf("<svg") && (m = '<?xml version="1.0" encoding="UTF-8"?>' + m);
            0 === m.indexOf("<?xml") && (m = "data:image/svg+xml;base64," + btoa(STRING.encode_utf8(m)));
            if (0 === m.indexOf("data:image/svg")) return this.createId(m, function(b) {
                if (a.feature.cacheSVG && h.data[b]) {
                    var e = h.data[b];
                    f && f.call(e, b, e)
                } else new a.vector.SVG({
                    src: m,
                    ctx: a.canvas2d.layers.cache.ctx,
                    useCache: a.feature.cacheSVG,
                    onerror: function(b) {
                        a.feature.debug && console.log(b);
                        c && c(b)
                    },
                    onload: function(a) {
                        h.data[b] = a;
                        h.data[b].type = "clipart";
                        f && f.call(a, b, a)
                    }
                })
            });
            if ("clipart" === l || "svg" === m.split(".").pop()) return a.util.request({
                url: m,
                onerror: c,
                onload: function(b) {
                    h.add({
                        data: b.responseText,
                        onerror: function(b) {
                            a.feature.debug && console.log(b);
                            c && c(b)
                        },
                        onload: function(a, b) {
                            h.URLtoID[m] = a;
                            h.IDtoURL[a] = m;
                            f && f.call(b, a, b)
                        },
                        targetId: p
                    })
                }
            });
            this.loadImage({
                src: m,
                blob: u,
                onload: f,
                onerror: c,
                onprogress: k,
                targetId: p
            })
        }
    };
    h.loadImage = function(b) {
        var f = this,
            c = b.src,
            k = b.targetId,
            d = b.onprogress || b.onProgress,
            l = b.onload || b.onLoad,
            g = b.onerror || b.onError,
            h = function(a) {
                d && d(a)
            }, q = function() {
                g && g()
            }, u = function(k, d) {
                f.data[v] = k;
                f.data[v].type = "image";
                k.setAttribute("data-src", c);
                k.image = d;
                k.assetID = k.title = v;
                if (b.blob) k.blob = b.blob;
                else if (a.feature.stream.maxFileSize) return k.toBlob(function(a) {
                    k.blob = a;
                    l && l.call(k, v, k)
                });
                l && l.call(k, v, k)
            }, v, s = a.convert.fileToCanvas;
        k && "string" === typeof c ? (this.URLtoID[c] = v = k, this.IDtoURL[v] = c, s(c, this.data[v], function(a, b) {
            u(a, b)
        }, q, h)) : s(c, this.data[v], function(a, b) {
            f.createId(a, function(e) {
                f.URLtoID[c] = v = e;
                f.IDtoURL[v] = c;
                u(a, b)
            })
        }, q, h)
    };
    h.createId = function(b, f) {
        "string" === typeof b ? 25E4 < b.length ? f("#asset-" + SparkMD5.hash(b.substr(0, 25E4))) : f("#asset-" + SparkMD5.hash(b)) : b.assetID ? f(b.assetID) : b.toDataURL ? f(this.createIdFromCanvas(b, b)) : a.convert.fileToCanvas(b, null, function(a, k) {
            f(this.createIdFromCanvas(a, b))
        })
    };
    h.createIdFromCanvas = function(a,
                                    b) {
        var c = a.width,
            k = a.height;
        if (64 > c && 64 > k) return b.assetID = "#asset-" + SparkMD5.hash(a.toDataURL()), b.assetID;
        var d = this.thumbnail || document.createElement("canvas");
        d.ctx = d.ctx || d.getContext("2d");
        this.thumbnail = d;
        var l = Math.min(c, 64),
            g = Math.min(k, 64);
        d.width = l;
        d.height = g;
        d.ctx.drawImage(a, 0, 0, c, k, 0, 0, l, g);
        c = d.toDataURL();
        b.assetID = "#asset-" + SparkMD5.hash(c);
        return b.assetID
    };
    var b = function() {
        var a = document.createElement("canvas"),
            b = a.getContext("2d");
        a.width = 1;
        a.height = 1;
        a.className = "default";
        b.fillStyle = "rgba(127,127,127,0.5)";
        b.fillRect(0, 0, 1, 1);
        return a
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.server && (sketch.server = {});
sketch = function(a) {
    a.fs = new function(g) {
        g = g || {};
        var b = this;
        this.fs = null;
        this.type = window.PERSISTENT;
        this.database = g.database || "sketchpad";
        this.folder = g.folder || "sketch";
        this.thumb = {
            width: 69,
            height: 69
        };
        this.init = function(e, f) {
            if (!a.feature.fileSystem) return f({
                code: 1,
                note: "FileSystem feature is turned off."
            });
            a.getItem("fileSystem.failRestore", function(c) {
                "true" !== c && a.getItem("fileSystem.folder", function(a) {
                    b.folder = a || b.folder
                })
            });
            var c = function() {
                var a = document.querySelector(".sk-project-listing .sk-error");
                a && (a.style.display = "block");
                (f || d)({
                    code: 1,
                    name: "NoFileSystem"
                })
            };
            !1 === a.supports.fileSystem ? c() : !a.userAgent.nodewebkit && navigator.webkitPersistentStorage ? navigator.webkitPersistentStorage.requestQuota(1073741824, function(a) {
                window.webkitRequestFileSystem(b.type, a, function(a) {
                    b.fs = a;
                    e && e(a)
                }, c)
            }, c) : window.requestFileSystem ? window.requestFileSystem(b.type, 1073741824, function(a) {
                b.fs = a;
                e && e(a)
            }, c) : c()
        };
        this.getFileSystem = function(a, f) {
            if (b.fs) return b.fs;
            b.init(function() {
                a(f[0], f[1], f[2], f[3], f[4],
                    f[5], f[6], f[7])
            }, f && f[0] && f[0].onerror || d)
        };
        this.getCurrentPath = function() {
            return this.getRootPath() + b.folder + "/"
        };
        this.getRootPath = function() {
            var a = window.location;
            return "filesystem:" + a.protocol + "//" + a.host + "/" + (0 === b.type ? "temporary" : "persistent") + "/" + b.database + "/"
        };
        this.open = function(e, f, c, k) {
            f = f || function() {};
            k = k || d;
            e = h(e || b.database + "/" + b.folder + "/thumb.png");
            a.setItem("fileSystem.failRestore", "true");
            c = STRING.basename(e);
            b.getDirectory(e.replace("/" + c, ""), function(b) {
                var c = 0,
                    e = [];
                b.createReader().readEntries(function(b) {
                    if (!b.length) return f(b);
                    for (var k = 0; k < b.length; k++) {
                        var d = b[k];
                        d.isDirectory ? k + 1 !== b.length || c || f(e) : d.isFile && (++c, d.file(function(b) {
                            setTimeout(function() {
                                e.push(b);
                                --c || (a.__modified = !1, a.setItem("fileSystem.failRestore", "false"), f(e))
                            }, 0)
                        }))
                    }
                }, k)
            }, k)
        };
        this.openFile = function(e) {
            if (b.getFileSystem(b.openFile, arguments)) {
                var f = e.src,
                    c = e.onerror,
                    k = e.onload || function(b) {
                        a.open.folder(b, a.on.sketchReady)
                    };
                a.ui.confirm({
                    message: "clear-confirm",
                    callback: function(a) {
                        a && b.open(f, k, null, c)
                    },
                    labels: {
                        ok: "Open Project",
                        cancel: "Cancel"
                    }
                })
            }
        };
        this.browse = {};
        this.browse.container = null;
        this.browse.addProject = function(e, f) {
            var c = b.browse.container,
                k = document.createElement("div");
            c.appendChild(k);
            var c = a.util.thumbnailer({
                    src: e + "/thumb.png",
                    background: a.configure.backgroundRaw,
                    width: b.thumb.width,
                    height: b.thumb.height,
                    useCache: !1,
                    onload: function() {}
                }),
                d = document.createElement("div");
            d.className = "icon-remove";
            k.title = f;
            k.appendChild(d);
            k.appendChild(c);
            k.className = f === b.folder ? "fileEntry fileEntrySelected dir-" + f : "fileEntry dir-" + f;
            eventjs.add({
                target: d,
                mousedown: eventjs.cancel,
                click: function() {
                    b.removeFile(e, null, !0)
                }
            });
            eventjs.add({
                target: k,
                mousedown: eventjs.cancel,
                click: function(c, e) {
                    b.openFile({
                        src: b.database + "/" + f + "/thumb.png",
                        onload: function(c) {
                            b.folder = f;
                            a.setItem("fileSystem.folder", b.folder);
                            dom.setClass({
                                target: k,
                                list: "div",
                                className: "fileEntrySelected"
                            });
                            a.open.folder(c, a.on.sketchReady)
                        }
                    })
                }
            })
        };
        this.browse.updateProject = function(e, f) {
            e = e || document.querySelector(".fileEntry.dir-" + b.folder);
            f = f || b.getCurrentPath() + "thumb.png";
            e && f && a.util.thumbnailer({
                src: f,
                background: a.configure.backgroundRaw,
                canvas: e.querySelector("canvas"),
                width: b.thumb.width,
                height: b.thumb.height
            })
        };
        this.updateProjects = function(a, f) {
            var c = b.browse.container = document.querySelector(".sk-project-listing");
            c && b.list({
                filter: {
                    name: "thumb.png"
                },
                onload: function(k) {
                    a && dom.removeChildNodes(c);
                    for (var d in k) {
                        var l = k[d],
                            g = l.toURL(),
                            l = l.fullPath.split("/").slice(0, - 1).pop(),
                            h = document.querySelector(".fileEntry.dir-" + l);
                        h ? b.browse.updateProject(h, g) : b.browse.addProject(g.replace("/thumb.png", ""), l)
                    }
                    f && f()
                }
            })
        };
        this.list = function(a) {
            var f = b.getFileSystem(b.list, arguments);
            if (f) {
                a = a || {};
                var c = a.onload || function(a) {
                        console.log(a)
                    }, k = a.levels || 2,
                    d = a.filter || {}, l = a.directory || null,
                    g = function() {
                        --u || c(q)
                    }, h = function(a) {
                        if (a.fullPath.substr(1).split("/").length > k) return g(++u);
                        ++u;
                        a.createReader().readEntries(function(a) {
                            for (var b = 0; b < a.length; b++) {
                                var c = a[b];
                                d.exclude && c.name.match(d.exclude) || (c.isDirectory ? (d.name && c.name !== d.name || d.isFile || (q[c.fullPath] = c), h(c)) : d.name && c.name !== d.name || d.isDirectory || (q[c.fullPath] = c))
                            }
                            g()
                        })
                    }, q = {}, u = 0;
                l ? h(l) : f.root.getDirectory(b.database, {
                    create: !0,
                    exclusive: !1
                }, function(a) {
                    h(a)
                })
            }
        };
        this.getDirectory = function(a, f, c) {
            var k = b.getFileSystem(b.getDirectory, arguments);
            k && (f = f || d, c = c || d, k.root.getDirectory(a, {
                exclusive: !1
            }, function(a) {
                f(a)
            }, function(a) {
                c(a)
            }))
        };
        this.addDirectory = function(a, f, c, k) {
            var d = b.getFileSystem(b.addDirectory, arguments);
            if (d) {
                "string" === typeof a && (a = a.split("/"));
                k = k || "/" + a.join("/");
                var l = function(c) {
                    c.fullPath === k ? f(c) : c.getDirectory(a.shift(), {
                        create: !0,
                        exclusive: !1
                    }, function(c) {
                        a.length ? b.addDirectory(a, f, c, k) : f && f(c)
                    }, function(b) {
                        console.log(b, a, c.fullPath)
                    })
                };
                c ? l(c) : l(d.root)
            }
        };
        this.remove = function(a, f, c) {
            var k = b.getFileSystem(b.remove, arguments);
            k && (a = a || "/" + b.database + "/" + b.folder + "/", a = h(a), "/sketchpad/" !== a && (-1 !== a.indexOf(".") ? k.root.getFile(a, {
                create: !1
            }, function(a) {
                a.remove(function() {
                    f && f("File successfully removed.")
                }, f)
            }, f) : c ? k.root.getDirectory(a, {}, function(a) {
                a.removeRecursively(function() {
                        f && f("Directory successfully removed.")
                    },
                    f)
            }, f) : k.root.getDirectory(a, {}, function(a) {
                a.remove(function() {
                    f && f("Directory successfully removed.")
                }, f)
            }, f)))
        };
        this.removeFile = function(e, f) {
            a.ui.confirm({
                message: "delete-project-confirm",
                callback: function(c) {
                    c && (c = STRING.basename(e), c = a.$(".dir-" + c), c.parentNode.removeChild(c), b.remove(e, f, !0), e && b.getCurrentPath() !== e + "/" || a.reset())
                },
                labels: {
                    ok: "Remove Project",
                    cancel: "Cancel"
                }
            })
        };
        this.saving = !1;
        this.saveFile = this.save = function(e, f) {
            if (!this.saving) {
                if (!b.getFileSystem(b.save, arguments)) return f && f();
                this.saving = !0;
                a.loader.thread = a.loader.message("saving...");
                var c = 0,
                    k = !1,
                    d = function(f) {
                        ++c;
                        var d = b.database + "/" + b.folder + "/" + f.filename;
                        b.remove(d, function(g) {
                            g && "NotFoundError" === g.name && (k = !0);
                            b.write({
                                blob: f.blob,
                                dir: b.folder,
                                filename: f.filename,
                                callback: function() {
                                    --c || (a.loader.update(a.loader.thread, null, 100), k ? b.updateProjects(!0) : b.browse.updateProject(), b.saving = !1, a.__modified = !1, e && e(d))
                                }
                            })
                        })
                    };
                a.save.syncData({
                    onload: function(a) {
                        for (var b in a) {
                            var c = a[b];
                            if ("folder" === b) for (var f = 0; f < c.length; f++) d(c[f]);
                            else d({
                                filename: b,
                                blob: c
                            })
                        }
                    },
                    onprogress: function(b) {
                        a.loader.update(a.loader.thread, null, Math.max(0, b - 1))
                    }
                })
            }
        };
        this.createFile = function(a) {
            b.getFileSystem(b.createFile, arguments) && this.getUniqueName({
                name: a || this.folder,
                callback: function(a) {
                    b.folder = a;
                    b.saveFile(function() {
                        b.updateProjects(!0)
                    })
                }
            })
        };
        this.getUniqueName = function(a) {
            var f = b.getFileSystem(b.getUniqueName, arguments);
            f && (a = a || {}, a.callback = a.callback || function(a) {
                console.log(a)
            }, a.name = a.name || this.folder, f.root.getDirectory(b.database + "/" + a.name, {}, function(c) {
                var f = a.name.trim(),
                    d = f;
                for (c = ""; d;) {
                    var l = parseInt(d.slice(-1)),
                        d = d.slice(0, - 1);
                    if (isNaN(l)) break;
                    c = l + c
                }
                f = f.replace(c, "");
                c = parseInt(c);
                c = isNaN(c) ? 1 : ++c;
                a.name = f + c;
                b.getUniqueName(a)
            }, function() {
                a.callback(a.name)
            }))
        };
        this.getProjects = function(a) {
            this.list({
                filter: {
                    exclude: /^\.\w*/g,
                    isDirectory: !0
                },
                onload: a
            })
        };
        this.backupProjects = function() {
            this.getProjects(function(e) {
                new a.util.Queue({
                    items: e,
                    flatten: !1,
                    callback: function() {
                        a.feature.debug && console.log("all projects saved!")
                    },
                    next: function(f, c, e) {
                        var d = this;
                        b.getFiles({
                            directory: f,
                            callback: function(b) {
                                var c = {};
                                c.fileName = f.name;
                                b.forEach(function(a) {
                                    var b = STRING.basename(a.filename);
                                    c[b] = a.blob
                                });
                                a.feature.debug && console.log(c);
                                a.server.saveData({
                                    metadata: c,
                                    callback: function(a) {
                                        d.next()
                                    }
                                })
                            }
                        })
                    }
                })
            })
        };
        this.getFiles = function(e) {
            var f = e.entries || [],
                c = e.callback || function(a) {
                    console.log(a)
                };
            if (e = e.directory || null) return b.list({
                directory: e,
                onload: function(a) {
                    b.getFiles({
                        entries: a,
                        callback: c
                    })
                }
            });
            var k = [];
            new a.util.Queue({
                items: f,
                flatten: !1,
                callback: function() {
                    c && c(k)
                },
                next: function(a, b, c) {
                    var f = this;
                    a.file(function(a) {
                        k.push({
                            filename: b,
                            blob: a
                        });
                        f.next()
                    })
                }
            })
        };
        this.read = function(a, f) {
            if (f = b.getFileSystem(b.read, arguments)) {
                var c = a.callback || d;
                f.root.getFile(a.path, {}, function(a) {
                    a.file(function(a) {
                        c(a)
                    }, d)
                }, d)
            }
        };
        this.write = function(e, f) {
            if (f = b.getFileSystem(b.write, arguments)) {
                var c = e.blob,
                    k = e.callback || d;
                b.addDirectory(e.path || b.database + "/" + e.dir, function(b) {
                    b.getFile(e.filename, {
                        create: !0,
                        exclusive: !1
                    }, function(b) {
                        b.createWriter(function(f) {
                            f.onwriteend = function(c) {
                                k && k(b);
                                a.feature.debug && console.log(b.toURL())
                            };
                            f.onerror = d;
                            f.write(c)
                        }, d)
                    }, d)
                })
            }
        }
    };
    var h = function(a) {
        a = a.replace("/persistent", "");
        a = a.replace("/temporary", "");
        a = a.replace(location.protocol + "//" + location.host, "");
        return a = a.replace("filesystem:", "")
    }, d = function(a) {
        console.log(a)
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function(a) {
    a.History = function(a) {
        var d = this;
        this.reset = function(b, c) {
            a.__modified = !1;
            a.__modifiedOnline = !1;
            var f = a.feature.history;
            f.vector && d.resetActionHistory(c);
            f.bitmap && d.resetBitmapHistory(c);
            return this
        };
        this.store = function(b, c, f) {
            a.__modified = (new Date).getTime();
            a.__modifiedOnline = (new Date).getTime();
            var e = a.feature.history;
            e.vector && d.storeAction(b, c, f);
            e.bitmap && d.storeBitmap(f);
            a.on.addHistory && a.on.addHistory(b, c);
            return this
        };
        this.redo = function(b, c) {
            g("redo", b, c);
            a.on.redo && a.on.redo(b);
            return d
        };
        this.undo = function(b, c) {
            g("undo", b, c);
            a.on.undo && a.on.undo(b);
            return d
        };
        var g = function(b, c, f) {
            --c;
            var e = a.feature.history;
            if (e.vector) d[b + "Action"](c, f);
            if (e.bitmap) d[b + "Bitmap"](c, f);
            c && g(b, c, f)
        };
        this.history = {};
        this.history.bitmap = {
            max: a.feature.history.limit,
            current: -1,
            data: []
        };
        this.resetBitmapHistory = function(b) {
            var c = d.history.bitmap;
            c.current = 0;
            c.data = c.data.splice(0, 1);
            a.setSize();
            d.storeBitmap(b);
            return this
        };
        this.storeBitmap = function(b) {
            b = a.feature.debugHistory;
            var c = d.history.bitmap,
                f = c.data.length - 1,
                e = f - c.current;
            if (e) {
                if (b) for (var g = 0; g < e; g++) {
                    var q = c.data[f - g];
                    document.body.removeChild(q)
                }
                c.data = c.data.splice(0, f - e + 1)
            }
            c.data.length === c.max ? c.data.push(c.data.shift()) : c.data.push(a.util.Canvas());
            c.current = c.data.length - 1;
            q = a.canvas2d.layers.layer0;
            c = c.data[c.current].ctx;
            c.canvas.width = c.canvas.width;
            c.drawImage(q, 0, 0);
            b && document.body.appendChild(c.canvas);
            return this
        };
        this.undoBitmap = function(b, c) {
            var f = a.canvas2d.layers.layer0.ctx,
                e = d.history.bitmap;
            e.current = Math.max(0, --e.current);
            f.canvas.width = f.canvas.width;
            f.drawImage(e.data[e.current], 0, 0);
            "eraser" === a.tool.type && (f = a.canvas2d.layers.active.ctx, f.canvas.width = f.canvas.width, f.drawImage(e.data[e.current], 0, 0));
            return this
        };
        this.redoBitmap = function(b, c) {
            var f = a.canvas2d.layers.layer0.ctx,
                e = d.history.bitmap;
            e.current = Math.min(e.data.length - 1, ++e.current);
            f.canvas.width = f.canvas.width;
            f.drawImage(e.data[e.current], 0, 0);
            "eraser" === a.tool.type && (f = a.canvas2d.layers.active.ctx, f.canvas.width = f.canvas.width,
                f.drawImage(e.data[e.current], 0, 0));
            return this
        };
        this.history.vector = {
            max: a.feature.history.limit,
            current: -1,
            data: []
        };
        this.resetActionHistory = function(a) {
            d.history.vector.data = [];
            d.history.vector.current = -1;
            return this
        };
        this.popAction = function() {
            d.history.vector.data.pop();
            d.history.vector.data.pop();
            return this
        };
        this.getLastAction = function() {
            var a = d.history.vector.data;
            return [a[a.length - 2], a[a.length - 1]]
        };
        this.storeAction = function(e, g, l) {
            if (e && g) {
                f(e);
                f(g);
                if (l || a.fromServer) {
                    g = d.history.vector;
                    if (0 === g.current % 2 || !g.data[g.current - 1] || !g.data[g.current]) return;
                    b = void 0;
                    e = JSON.parse(g.data[g.current - 1]);
                    g = JSON.parse(g.data[g.current]);
                    c(e, g, !1, l)
                } else a.dataChannel && (a.feature.stream.sketch && !l) && a.dataChannel.sendPriority(["history.store", e, g]);
                return this
            }
        };
        this.undoAction = function(b, f) {
            sk.active.canvas.width = sk.active.canvas.width;
            var e = d.history.vector;
            if (0 === e.current) return !1;
            e.current = Math.max(0, e.current - 2);
            0 !== e.current % 2 && e.current++;
            if (!e.data[e.current] || !e.data[e.current + 1]) return !1;
            var g = JSON.parse(e.data[e.current]),
                e = JSON.parse(e.data[e.current + 1]);
            c(g, e, !0, f, b);
            a.dataChannel && (a.feature.stream.sketch && !f) && (a.dataChannel.sendPriority(["history.undo", b, !0]), a.dataChannel.send(["history.undo", b]));
            return this
        };
        this.redoAction = function(b, f) {
            var e = d.history.vector;
            if (e.current === e.data.length - 1) return !1;
            e.current = Math.min(e.data.length - 1, e.current + 2);
            0 === e.current % 2 && e.current--;
            if (!e.data[e.current - 1] || !e.data[e.current]) return !1;
            var g = JSON.parse(e.data[e.current - 1]),
                e = JSON.parse(e.data[e.current]);
            c(g, e, !1, f, b);
            a.dataChannel && (a.feature.stream.sketch && !f) && (a.dataChannel.sendPriority(["history.redo", b, !0]), a.dataChannel.send(["history.redo", b]));
            return this
        };
        var b = 0,
            e = {
                add: "add",
                remove: "remove",
                replace: "replace"
            }, f = function(a) {
                var c = d.history.vector,
                    f = c.data.length - 1,
                    e = f - c.current;
                0 !== e % 2 && e++;
                e && (c.data = c.data.splice(0, f - e + 1));
                c.data.length === 2 * c.max && (c.data.shift(), c.data.shift());
                c.data.push(JSON.stringify(a));
                c.current = c.data.length - 1;
                b = c.current
            };
        this.cmds = {};
        this.registerFunction = function(a) {
            var b = a.type;
            this.cmds[b] = a.fn;
            e[b] = b
        };
        this.registerFunction({
            type: "VOBNodeList",
            fn: function(b, c, f, e) {
                for (b = 0; b < c.length; b++) {
                    var d = c[b];
                    if (e = a.scene.getById(d.id)) {
                        var g = a.assets.getItem(e.src);
                        if (g) {
                            var u = {}, v;
                            for (v in d) "id" !== v && "uida" !== v && (u[v] = d[v]);
                            for (var d = d.uida, s = 0; s < d.length; s++) {
                                var x = d[s],
                                    w = g.getLayerBy("uid", x.uid);
                                if (w) if (f) for (v in x) "uid" !== v && (w.style[v] = x[v]);
                                else for (v in u) w.style[v] = u[v]
                            }
                            e.dirtyCacheForce = !0;
                            e.dirtyRender = !0
                        }
                    }
                }
            }
        });
        this.registerFunction({
            type: "transform",
            fn: function(b,
                         c, f, e) {
                var d = b.origin,
                    g = b.rotate,
                    u = b.translate;
                b = b.scale;
                if (!e) var v = a.selection.reset().items;
                var s, x;
                "number" === typeof b ? x = s = b : b && (s = b.x, x = b.y);
                var w, A;
                u && (w = u.x, A = u.y);
                f && (g && (g = 360 - g), b && (s = 1 / s, x = 1 / x), u && (w = -w, A = -A));
                for (f = 0; f < c.length; f++) {
                    var y = a.scene.getById(c[f]);
                    if (y) {
                        var z = y.bbox;
                        if (g) {
                            var B = d.x - z.width / 2 * z.scale.x,
                                D = d.y - z.height / 2 * z.scale.y,
                                E = g * a.util.DEG_RAD,
                                G = Math.cos(E) * (z.x - B) - Math.sin(E) * (z.y - D) + B,
                                B = Math.sin(E) * (z.x - B) + Math.cos(E) * (z.y - D) + D;
                            z.x = G;
                            z.y = B;
                            z.rotate += g;
                            y.dirtyTransform = !0
                        }
                        b && (w = (d.x - z.x) * s, A = (d.y - z.y) * x, z.x = d.x - w, z.y = d.y - A, z.scale.x *= s, z.scale.y *= x, y.dirty = !0);
                        u && (z.x += w, z.y += A, y.dirtyTransform = !0);
                        e || (v[y.zIndex] = !0);
                        delete y.visible
                    }
                }
            }
        });
        this.registerFunction({
            type: "add",
            fn: function(b, c, f, e, d) {
                console.log("add", b, c, f);
                for (b = 0; b < c.length; b++) if (f = c[b], !a.scene.getById(f.id)) {
                    var g = a.scene.clone(f);
                    a.fromServer || a.toolkit.updateToolkit(g);
                    a.scene.data.splice(f.zIndex, 0, g);
                    e && a.area && a.area.inGenesis ? (a.scene.deselect(a.selection.idx), a.selection.idx = a.scene.getById(a.util.INFINITY).zIndex + 1) : a.feature.history.autoSelect && !1 === e && "select" === a.tool.type && a.scene.selectByIndex(f.zIndex, !1)
                }
                d || a.fromServer || !1 !== a.feature.vector.edit && a.render.preload({
                    fromSocket: !0
                })
            }
        });
        this.registerFunction({
            type: "remove",
            fn: function(b, c, f, e, d) {
                console.log("remove", b, c, f);
                b = a.scene.data;
                for (f = 0; f < c.length; f++) {
                    d = c[f].id;
                    var g = a.scene.getById(d);
                    if (g) for (e && g.zIndex === a.selection.idx && (a.scene.deselectAll(), window.alertify && alertify.log("Another user removed the item you were editing.")), g = 0; g < b.length; g++) if (b[g].id === d) {
                        b.splice(g, 1);
                        break
                    }
                }
            }
        });
        this.registerFunction({
            type: "replace",
            fn: function(a, f, e, d) {
                e ? (b = void 0, c(f[1], "remove", !1, d, 1), b = void 0, c("add", f[0], !1, d, 0)) : (b = void 0, c(f[0], "remove", !1, d, 1), b = void 0, c("add", f[1], !1, d, 0))
            }
        });
        this.registerFunction({
            type: "zoom",
            fn: function(a, b, c, f, e) {
                console.log("zoom", a, b, c)
            }
        });
        var c = function(c, f, g, p, r) {
            p = p || !1;
            if (b !== d.history.vector.current) {
                b = d.history.vector.current;
                var q = e[c.cmd || c],
                    u = e[f.cmd || f],
                    v = q ? c : u ? f : null,
                    s = q || u,
                    q = g ? c : f,
                    u = g ? f : c;
                "remove" === s ? (g && (s = "add"), q = u = c) : "add" === s && (g && (s = "remove"), q = u = f);
                if (d.cmds[s]) {
                    if (g) d.cmds[s](v, u, !0, p, r);
                    else d.cmds[s](v, q, !1, p, r);
                    a.render && !r && a.render("sketch.history: " + (g ? "undo" : "redo") + " '" + s + "'")
                } else {
                    c = a.detect.refreshPixelData;
                    f = a.selection.items;
                    if (q[0] && isFinite(q[0].zIndex) && u[0] && isFinite(u[0].zIndex) && !q[0].bbox) if (0 < u[0].zIndex - q[0].zIndex) for (g = 0, v = q.length; g < v; g++) {
                        s = q[g];
                        p = u[g];
                        a.scene.data.splice(s.zIndex, 0, a.scene.data.splice(p.zIndex, 1)[0]);
                        var x = a.scene.data[s.zIndex];
                        c[x.type] && (x.dirtyCacheForce = !0);
                        a.selection.idx === p.zIndex && (a.selection.idx = s.zIndex);
                        f[p.zIndex] && "select" === a.tool.type && (a.scene.selectByIndex(s.zIndex, !1), a.scene.deselect(p.zIndex))
                    } else for (g = q.length; g--;) s = q[g], p = u[g], a.scene.data.splice(s.zIndex, 0, a.scene.data.splice(p.zIndex, 1)[0]), (x = a.scene.data[s.zIndex]) && c[x.type] && (x.dirtyCacheForce = !0), f[p.zIndex] && "select" === a.tool.type && (a.scene.selectByIndex(s.zIndex, !1), a.scene.deselect(p.zIndex)), a.selection.idx === p.zIndex && (a.selection.idx = s.zIndex);
                    else if (isFinite(q.length)) for (g = 0, v = q.length; g < v; g++) {
                        if (s = q[g], x = a.scene.getById(s.id)) s.labels && (x.labels = []), a.util.mergeObject(s, x), a.feature.history.autoSelect && !1 === p && "select" === a.tool.type && a.scene.selectByIndex(x.zIndex, !1), a.feature.vector.edit && (c[x.type] ? x.dirtyCacheForce = !0 : s.content ? (delete x.__textMetrics, x.dirty = !0) : s.color || s.fillStyle || s.bbox && s.bbox.scale ? (x.dirty = !0, x.dirtyTransform = !0, delete x.visible) : (x.dirty = !0, x.dirtyResource = !0))
                    } else a.util.mergeObject(q, a.project);
                    r || (a.scene.reindex(), a.fromServer || !1 !== a.feature.vector.edit && a.render.preload({
                        fromSocket: !0
                    }))
                }
            }
        }
    };
    return a
}(sketch);
"undefined" !== typeof module && module.exports && (module.exports = sketch.History);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.keyboard && (sketch.keyboard = {});
(function(a) {
    a.keyboard.pressed = {};
    a.keyboard.keydown = function(e) {
        eventjs.proxy.metaTracker(e);
        var f = eventjs.metaKey,
            c = eventjs.shiftKey,
            k = eventjs.altKey,
            m = a.detect.editing(),
            l = e.keyCode;
        switch (l) {
            case 75:
                if (f && c && a.userAgent.nodewebkit) {
                    var p = require("nw.gui").Window.get();
                    p.isKioskMode ? require("nw.gui").App.quit() : p.enterKioskMode()
                }
                break;
            case 219:
                if (f) return k ? a.exec("layer-to-back") : a.exec("layer-backwards"), d(e);
                break;
            case 221:
                if (f) return k ? a.exec("layer-to-front") : a.exec("layer-forwards"), d(e);
                break;
            case 80:
                if (f) return a.print(), d(e);
                break;
            case 83:
                if (f) return k ? a.download.image() : c && a.toolkit.snapshot ? a.exec("snapshot") : a.server.enabled() ? a.save.fromQuery() : a.download.image(), d(e);
                break;
            case 27:
                if (a.eventOverride("onEscapeKey", e)) return;
                sk.windows.hasFocus() ? sk.windows.closeFocused() : a.scene.deselectAll();
                b("escapeKey", e);
                return d(e)
        }
        if (!m && "eyeDropper" !== a.colorPicker.state && !a.eventOverride(h[l], e)) {
            switch (l) {
                case 48:
                    if (c && a.feature.canvas.zoom) {
                        if (m && !f) break;
                        a.exec("zoom-reset");
                        return d(e)
                    }
                    break;
                case 173:
                case 189:
                    if (c && a.feature.canvas.zoom) {
                        if (m && !f) break;
                        a.exec("zoom-out");
                        return d(e)
                    }
                    break;
                case 61:
                case 187:
                    if (c && a.feature.canvas.zoom) {
                        if (m && !f) break;
                        a.exec("zoom-in");
                        return d(e)
                    }
                    break;
                case 188:
                    if (c) return a.windows.blink("sk-configure"), a.ui.buildConfigure(), d(e);
                    break;
                case 83:
                    if (c && a.fs && a.ui.openProjectWindow) return a.ui.openProjectWindow(".export-project", !0), d(e);
                    break;
                case 78:
                    if (c && a.fs && a.ui.openProjectWindow) return a.ui.openProjectWindow(".new-project", !0), d(e);
                    break;
                case 79:
                    if (f && a.supports.chooseEntry) return a.open.chooseEntry(function(b) {
                        a.addMedia({
                            openAsNew: !0,
                            file: b
                        })
                    }), d(e);
                    if (c && a.fs && a.ui.openProjectWindow) return a.ui.openProjectWindow(".open-project", !0), d(e);
                    break;
                case 32:
                    if (a.orient) {
                        e.preventDefault();
                        if ("zoom" === a.tool.type) return;
                        a.ptool = a.tool.type;
                        a.exec("zoom")
                    } else a.util.toggleVideo && a.util.toggleVideo();
                    return;
                case 49:
                case 50:
                case 51:
                case 52:
                case 53:
                case 54:
                case 55:
                case 56:
                case 57:
                    if (!a.feature.hotkeys) return;
                    e = a.feature.hotkeys[l - 49];
                    switch (e) {
                        case "brush":
                        case "shape":
                            if ((f = document.querySelector(".sketch-select-" + e)) && f.id) return a.exec(f.id.replace("tool-", ""));
                        default:
                            return a.exec(e)
                    }
                case 191:
                    if (c) return a.exec("help");
                    return;
                case 46:
                case 8:
                    eventjs.cancel(e);
                    a.exec("layer-delete");
                    b("deleteKey", e);
                    return;
                case 13:
                    document.activeElement === document.body && eventjs.cancel(e);
                    document.querySelector("#alertify-ok") && document.querySelector("#alertify-ok").click();
                    b("enterKey", e);
                    return;
                case 18:
                    if (a.toolkit.select) {
                        if (f) break;
                        if (!a.feature.vector.edit || a.tool === a.toolkit.select) return;
                        a.ptool = a.tool.type;
                        a.exec("select")
                    }
                    return;
                case 65:
                    f && (eventjs.cancel(e), c ? a.exec("select-inverse") : a.exec("select-all"));
                    return;
                case 67:
                    c ? a.exec("color-picker") : f && (eventjs.cancel(e), a.exec("layer-copy"));
                    return;
                case 73:
                    a.exec("debug-action");
                    return;
                case 86:
                    if (f && !g()) {
                        if (a.__rendering) return;
                        a.tool.reset && a.tool.reset();
                        eventjs.cancel(e);
                        a.exec("layer-paste", "select" !== a.tool.type)
                    }
                    return;
                case 88:
                    f && (eventjs.cancel(e), a.exec("layer-cut"));
                    return;
                case 90:
                    if (f) {
                        eventjs.cancel(e);
                        if (a.__rendering) return;
                        if (c) {
                            if (a.eventOverride("onRedo", e)) break;
                            a.exec("redo")
                        } else {
                            if (a.eventOverride("onUndo", e)) break;
                            a.exec("undo")
                        }
                    }
                    return;
                case 37:
                    if (a.on.leftKey) b("leftKey", e);
                    else if (sketch.selection.length) {
                        eventjs.altKey ? a.exec("layer-clone-left", 1) : a.exec("layer-move-left", 1);
                        eventjs.cancel(e);
                        break
                    } else if (a.util.changeVideoFilter && a.rtc.videos.you) {
                        a.util.changeVideoFilter(-1);
                        break
                    } else {
                        if (a.tool.device && a.tool.device.brush && a.tool.device.brush.isGhost) {
                            e = a.tool.device.brush;
                            e.seed++;
                            a.tool.ghost(e.event);
                            return
                        }
                        c && (a.sidebar && a.sidebar.close) && a.sidebar.close()
                    }
                    break;
                case 39:
                    if (a.on.rightKey) b("rightKey", e);
                    else if (sketch.selection.length) {
                        eventjs.altKey ? a.exec("layer-clone-right", 1) : a.exec("layer-move-right", 1);
                        eventjs.cancel(e);
                        break
                    } else if (a.util.changeVideoFilter && a.rtc.videos.you) {
                        a.util.changeVideoFilter(1);
                        break
                    } else {
                        if (a.tool.device && a.tool.device.brush && a.tool.device.brush.isGhost) {
                            e = a.tool.device.brush;
                            e.seed--;
                            a.tool.ghost(e.event);
                            return
                        }
                        c && (a.sidebar && a.sidebar.open) && a.sidebar.open()
                    }
                    break;
                case 38:
                    a.on.upKey ? b("upKey", e) : k && a.project.pages && a.project.pages.length ? (sketch.project.setPage(-1, "useRelative"), eventjs.cancel(e)) : sketch.selection.length && (eventjs.altKey ? a.exec("layer-clone-up", 1) : a.exec("layer-move-up", 1), eventjs.cancel(e));
                    break;
                case 40:
                    a.on.downKey ? b("downKey", e) : k && a.project.pages && a.project.pages.length ? (sketch.project.setPage(1, "useRelative"), eventjs.cancel(e)) : sketch.selection.length && (eventjs.altKey ? a.exec("layer-clone-down", 1) : a.exec("layer-move-down", 1), eventjs.cancel(e));
                    break;
                default:
                    return
            }
            d(e, !1)
        }
    };
    var h = {
        8: "Backspace",
        9: "Tab",
        13: "Enter",
        16: "Shift",
        17: "Ctrl",
        18: "Alt",
        19: "PauseBreak",
        20: "CapsLock",
        27: "Escape",
        33: "PageUp",
        34: "PageDown",
        35: "End",
        36: "Home",
        37: "Left",
        38: "Up",
        39: "Right",
        40: "Down",
        45: "Insert",
        46: "Delete",
        48: "0",
        49: "1",
        50: "2",
        51: "3",
        52: "4",
        53: "5",
        54: "6",
        55: "7",
        56: "8",
        57: "9",
        65: "A",
        66: "B",
        67: "C",
        68: "D",
        69: "E",
        70: "F",
        71: "G",
        72: "H",
        73: "I",
        74: "J",
        75: "K",
        76: "L",
        77: "M",
        78: "N",
        79: "O",
        80: "P",
        81: "Q",
        82: "R",
        83: "S",
        84: "T",
        85: "U",
        86: "V",
        87: "W",
        88: "X",
        89: "Y",
        90: "Z",
        91: "LeftWindow",
        92: "RightWindow",
        93: "Select",
        96: "Numpad0",
        97: "Numpad1",
        98: "Numpad2",
        99: "Numpad3",
        100: "Numpad4",
        101: "Numpad5",
        102: "Numpad6",
        103: "Numpad7",
        104: "Numpad8",
        105: "Numpad9",
        106: "Multiply",
        107: "Add",
        109: "Subtract",
        110: "DecimalPoint",
        111: "Divide",
        112: "F1",
        113: "F2",
        114: "F3",
        115: "F4",
        116: "F5",
        117: "F6",
        118: "F7",
        119: "F8",
        120: "F9",
        121: "F10",
        122: "F11",
        123: "F12",
        144: "NumLock",
        145: "ScrollLock",
        186: "SemiColon",
        187: "EqualSign",
        188: "Comma",
        189: "Dash",
        190: "Period",
        191: "ForwardSlash",
        192: "GraveAccent",
        219: "OpenBracket",
        220: "Backslash",
        221: "CloseBracket",
        222: "SingleQuote"
    };
    a.keyboard.keyup = function(b) {
        eventjs.proxy.metaTracker(b);
        var f = eventjs.metaKey,
            c = b.keyCode;
        if (!a.detect.editing() && (a.keyboard.pressed[c] = !1, f && a.ptool && (a.scene.deselectAll(), a.exec(a.ptool), delete a.ptool), !a.eventOverride(h[c], b))) switch (c) {
            case 18:
                if (a.toolkit.select) {
                    if (!a.ptool || !a.feature.vector.edit) break;
                    a.exec(a.ptool);
                    delete a.ptool
                }
                break;
            case 32:
                a.orient && a.exec(a.ptool);
                break;
            case 37:
            case 38:
            case 39:
            case 40:
                a.selection.move(0, 0, "record")
        }
    };
    var d = function(b, f) {
        a.scene.setDirtyControl();
        a.render("root.select.keydown " + b.keyCode);
        a.keyboard.pressed[b.keyCode] = !0;
        !1 !== f && eventjs.cancel(b)
    }, g = function() {
        return window.Clipboard && "[object ClipboardConstructor]" !== String(window.Clipboard) ? a.scene && a.scene.paste && a.addMedia : !1
    };
    (function() {
        var b;
        a.keyboard.enable = function() {
            g() && (b = eventjs.add(window, "paste", a.scene.onPasteNative))
        };
        a.keyboard.disable = function() {
            b && b.remove()
        }
    })();
    a.keyboard.init = function() {
        if (!a.userAgent.mobile) {
            var b = function(a,
                             b) {
                return '<span class="icon-' + a + '" style="' + b + '"></span> '
            }, f = [];
            a.keyboard.enable();
            a.save && (f.push("File" + b("save", "float:right")), a.toolkit.snapshot ? (f.push([b("save") + "Save", "cmd.s"]), f.push([b("download") + "Download PNG", "alt.cmd.s"]), f.push([b("camera") + "Take Snapshot", "shift.cmd.s"])) : f.push([b("save") + "Save", "cmd.s"]), f.push([b("print") + "Print", "cmd.p"]));
            a.history && (f.push("History" + b("undo", "float:right")), f.push([b("undo") + "Undo history", "cmd.z"]), f.push([b("redo") + "Redo history", "shift.cmd.z"]));
            f.push("Controls");
            f.push(["Page Up", "opt.up"]);
            f.push(["Page Down", "opt.down"]);
            f.push(["Move", "space"]);
            f.push("Shortcuts");
            f.push([b("select") + "Quick Selection", "alt"]);
            var c = a.feature.hotkeys;
            if (c) for (var d = 0; d < c.length; d++) {
                var g = c[d],
                    l = STRING.ucwords(g);
                f.push([b(g) + l + " tool", d + 1 + ""])
            }
            a.feature.vector.edit && (f.push(" Select tool" + b("select", "float:right")), f.push(["Select", "click"]), f.push(["Add to Selection", "shift.click"]), f.push(["Remove from Selection", "cmd.click"]), f.push(["Select all", "cmd.a"]), f.push(["Select inverse", "shift.cmd.a"]), f.push(["Unselect", "escape"]), f.push(["Remove", "delete"]), a.scene && (a.scene.cut && (f.push(["Copy", "cmd.c"]), f.push(["Cut", "cmd.x"]), f.push(["Paste", "cmd.v"])), a.scene.sendForwards && (f.push(["Send Backwards", "cmd.["]), f.push(["Send Forwards", "cmd.]"]), f.push(["Send to Back", "alt.cmd.["]), f.push(["Send to Front", "alt.cmd.]"])), a.feature.tools.movable && (f.push(["Move Left", "left"]), f.push(["Move Left Fast", "shift.left"]), f.push(["Move Right", "right"]),
                f.push(["Move Right Fast", "shift.right"]), f.push(["Move Up", "up"]), f.push(["Move Up Fast", "shift.up"]), f.push(["Move Down", "down"]), f.push(["Move Down Fast", "shift.down"]))));
            f.push("Brush tools" + b("streamer", "float:right"));
            f.push(["Constrain", "shift"]);
            f.push("Shape tools" + b("square", "float:right"));
            f.push(["Constrain", "shift"]);
            a.feature.windows && (f.push("Windows"), f.push([b("close") + "Close window", "escape"]), a.fs && f.push([b("file") + "New Project", "shift.n"]), a.fs && f.push([b("folder") + "My Projects", "shift.o"]), a.fs && f.push([b("export") + "Export", "shift.s"]), a.palette && f.push(['<img class="lazy" src="./media/ux/transparent.png" data-src="./media/ux/tools/ColorPicker.png" width="18" style="margin: 2px 2px 2px 0;"/> Color Picker', "shift.c"]), f.push([b("help") + "Help <i>(you are here)</i>", "shift.?"]));
            a.feature.canvas.zoom && (f.push("Zoom" + b("zoom-in", "float: right")), f.push(["Zoom in", "shift.+"]), f.push(["Zoom out", "shift.-"]), f.push(["Zoom to actual size", "shift.0"]));
            if (d = document.getElementById("shortcuts")) {
                d.innerHTML = '<h1><img class="lazy" src="./media/ux/transparent.png" data-src="./media/ux/keyboard-shortcuts.png" height="36" />Keyboard Shortcuts</h1>';
                b = document.createElement("div");
                b.style.cssText = "margin: 0 10px";
                d.appendChild(b);
                d.appendChild(document.createElement("br"));
                for (var p = function(a, b, c) {
                    var f = [];
                    a = a.replace("cmd", h);
                    a = a.replace("alt", q);
                    a = a.replace("alt", '<span title="Alt key">âŒ¥</span>');
                    a = a.replace("opt", '<span title="Option key">âŒ¥</span>');
                    a = a.replace("ctrl", '<span title="Control key">âŒƒ</span>');
                    a = a.replace("cmd", '<span title="Command key">âŒ˜</span>');
                    a = a.replace("shift", '<span title="Shift key">â‡§</span>');
                    a = a.replace("delete", '<span title="Delete key">âŒ«</span>');
                    a = a.replace("escape", '<span title="Escape key">â›</span>');
                    a = a.toUpperCase();
                    a = a.split(b);
                    for (b = 0; b < a.length; b++) {
                        var e = a[b]; - 1 !== e.indexOf("|") ? f.push(p(e, "|", " | ")) : f.push("<span>" + e + "</span>")
                    }
                    return f.join(c)
                }, c = "", h = a.userAgent.mac ? "cmd" : "ctrl", q = a.userAgent.mac ? "opt" : "alt", d = 0; d < f.length; d++) l = f[d], "string" === typeof l ? (g = document.createElement("div"), g.className = "sk-header-break", g.innerHTML = l, b.appendChild(g)) : (c = p(l[1], ".", ""), g = document.createElement("div"), g.className = "cmd", g.innerHTML = c, b.appendChild(g), a.addTooltip(g, l[1].replace(".", " + ")), c = document.createElement("font"), c.style.color = "#666", c.innerHTML = " :  ", b.appendChild(c), c = document.createElement("span"), c.innerHTML = l[0], b.appendChild(c), l = document.createElement("br"), b.appendChild(l))
            }
        }
    };
    var b = function(b, f) {
        if (a.on[b]) a.on[b](f)
    };
    a.toolkit.callOverride = function(b, f) {
        if (a.tool && a.tool[b]) return a.tool[b](f), !0;
        var c = a.tool && a.tool.device,
            c = c && c.brush;
        if (!(c && (c.event && c.self) && c[b])) return !1;
        c[b](f);
        return !0
    };
    a.eventOverride = function(b, f) {
        if (b) {
            var c = f.keyCode,
                d = a.keyboard.pressed;
            if (-1 === b.indexOf("on")) {
                var g = b;
                b = "on" + b + "Key";
                f.name = g[0].toLowerCase() + g.substr(1);
                f.state = "keyup" === f.type ? "up" : d[c] ? "press" : "down"
            }
            if (a.toolkit.callOverride(b, f)) return d[c] = !0
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.location && (sketch.location = {});
(function(a) {
    a.location.getHash = function(h) {
        var d = "?" + window.location.hash.substr(1),
            d = a.util.parseUri(d).queryKey;
        a.location.hash = d;
        a.project.title = d.sketch || a.project.title;
        return h ? d[h] : d
    };
    a.location.getSearch = function() {
        var h = a.util.parseUri(window.location.search).queryKey,
            d;
        for (d in h) "" === h[d] && (h[d] = !0);
        return a.location.search = h
    };
    a.location.update = function() {
        a.location.search = a.location.getSearch();
        a.location.hash = a.location.getHash()
    };
    a.location.setHost = function(h) {
        var d = a.feature.fileSystem ? a.fs && a.fs.getRootPath() || "" : "",
            g = function(a) {
                return -1 === a.indexOf("://") && a ? c + a : a
            }, b = function(b, c, f) {
                for (var e in b) b[e].replace && (b[e] = b[e].replace(c, f));
                a.location.host = b.pathWeb;
                a.location.hostIO = b.hostIO;
                a.location.hostRTC = b.hostRTC;
                a.location.pathWeb = g(b.pathWeb);
                a.location.pathJS = g(b.pathJS);
                a.location.pathGet = g(b.pathGet || d);
                a.location.pathPost = g(b.pathPost || d)
            }, e = function(b) {
                b.feature && a.util.mergeObject(b.feature || {}, a.feature);
                a.location.host = b.pathWeb;
                a.location.hostIO = b.hostIO;
                a.location.hostRTC = b.hostRTC;
                a.location.pathWeb = g(b.pathWeb);
                a.location.pathJS = g(b.pathJS);
                a.location.pathGet = g(b.pathGet || d);
                a.location.pathPost = g(b.pathPost || d)
            };
        h = h || a.location.hosts || {};
        a.location.hosts = h;
        a.location.update();
        var f = window.location,
            c = f.protocol + "//",
            k = f.host;
        if (h[k]) return e(h[k]);
        for (var m in h) if (e = h[m], e.alias && -1 !== e.alias.indexOf(k)) return b(a.util.clone(e), m, k);
        return function() {
            a.feature.debugSetup && console.log("WARNING: Host is not set.");
            var b = f.href.split("#")[0].split("?")[0].split("/");
            b.pop();
            b = b.join("/") + "/";
            a.location.host = b;
            a.location.pathWeb = b;
            a.location.pathJS = b + "js/";
            a.location.pathGet = d;
            a.location.pathPost = d
        }()
    };
    a.location.setHash = function(h, d) {
        if ("string" === typeof h) {
            var g = a.location.getHash();
            g[h] = d;
            a.location.setHash(g)
        } else if (d) {
            var g = a.location.getHash(),
                b;
            for (b in h) g[b] = h[b];
            a.location.setHash(g)
        } else {
            g = [];
            h = h || a.location.getHash();
            for (b in h) {
                var e = h[b];
                void 0 !== e && (e ? g.push(b + "=" + e) : g.push(b))
            }
            g = "#" + g.join("&");
            window.location.hash !== g && (window.location.hash = g)
        }
    };
    a.location.createURL = function(h) {
        switch (h) {
            case "share":
                return "http://sketchpad.io/sketch/#sketch=" + a.configure.sync
        }
    };
    a.location.getRoomID = function() {
        if (a.server.enabled && a.server.enabled()) {
            var h = a.location.getHash("sketch");
            if (h) return h;
            if (h = window.location.pathname.substr(1)) return h.replace("()", "")
        }
    };
    a.location.getRandomID = function(a) {
        a || (a = 8);
        for (var d = ["a", "e", "i", "o", "u"], g = "bcdfghjklmnpqrstvwxyz".split(""), b = "", e = 0; e < a; e++) b = 0 == e % 2 ? b + d[4 * Math.random() >> 0] : b + g[20 * Math.random() >> 0];
        return b
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.supports && (sketch.supports = {});
(function(a) {
    var h = function(a, g) {
        if (a[g]) return a[g];
        g = g[0].toUpperCase() + g.substr(1);
        return a["webkit" + g] || a["moz" + g] || a["ms" + g] || a["o" + g]
    };
    a.supports.fn = {};
    a.supports.fn.init = function(d) {
        var g = a.util.Canvas(1, 1);
        a.supports.fn.detectExport(g, function() {
            a.supports.fn.fileSystem(g);
            a.supports.fn.detectCanvasFeatures(g);
            a.supports.fn.detectPixelRatioSupport();
            a.supports.fn.detectFeature();
            d()
        })
    };
    a.supports.fn.fileSystem = function() {
        a.supports.chooseEntry = a.util.exists("chrome.fileSystem.chooseEntry");
        a.supports.fileSystem = !a.userAgent.nodewebkit && !! h(window, "requestFileSystem")
    };
    a.supports.fn.detectPixelRatio = function(d) {
        a.canvas2d.backingStoreRatio = h(d, "backingStorePixelRatio") || 1;
        a.canvas2d.devicePixelRatio = window.devicePixelRatio || 1;
        return a.canvas2d.pixelRatio = a.canvas2d.devicePixelRatio / a.canvas2d.backingStoreRatio
    };
    a.supports.fn.detectPixelRatioSupport = function(d) {
        return a.canvas2d.pixelRatio = 1
    };
    a.supports.fn.detectCanvasFeatures = function(d) {
        var g = a.util.Canvas.getContext(d, 1, 1);
        a.style && (d = function(b, e) {
            a.supports[b] = {};
            for (var f = !1, c = a.supports[b], d = a.style[e], m = 1; m < d.length; m++) {
                var l = d[m];
                g.globalCompositeOperation = l;
                !0 === (c[l] = g.globalCompositeOperation === l) && (f = !0)
            }
            c.__enabled = f
        }, d("composite", "compositemodes"), d("blend", "blendmodes"), a.supports.imageSmoothing = "boolean" === typeof g.imageSmoothingEnabled)
    };
    a.supports.fn.detectExport = function(d, g) {
        var b = a.util.Canvas.getContext(d, 1, 1).canvas,
            e = 0,
            f = function() {
                !--e && g && g()
            }, c = function(c, d) {
                ++e;
                var g = b.toDataURL(d).split(";")[0].substr(5);
                a.supports.io[c] = g === d;
                window.setTimeout(f, 1)
            };
        a.supports.io = {};
        a.supports.io.__enabled = !0;
        c("jpeg", "image/jpeg");
        c("png", "image/png");
        c("webp", "image/webp");
        c("bmp", "image/bmp");
        (function(c, d) {
            try {
                ++e, b.toBlob(function(b) {
                    var c = new Image;
                    c.onload = function() {
                        a.supports.io.blob = !(0 === this.width && 0 === this.height);
                        f()
                    };
                    c.onerror = function() {
                        a.supports.io.blob = !1;
                        f()
                    };
                    c.src = URL.createObjectURL(b)
                })
            } catch (g) {
                a.supports.io.blob = !1, window.setTimeout(f, 1)
            }
        })()
    };
    a.supports.fn.detectFeature = function() {
        var d = a.feature;
        !1 === d.vector.record && (d.vector.edit = !1);
        !1 === d.vector.edit && (d.history.vector = !1);
        d.palette.composite = d.palette.composite && !1 !== a.supports.composite.__enabled;
        d.palette.blend = d.palette.blend && !1 !== a.supports.blend.__enabled
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(a) {
    a.render.clipped = !1;
    a.render.forOutput = !1;
    a.render.from = "";
    a.render.selected = !1;
    a.render.speed = 0;
    a.render.state = "preload";
    a.render.dirty = !1;
    a.render.dirtyCenterPoint = !1;
    a.render.dirtyControls = !1;
    a.render = function(b, c) {
        c && g.push(c);
        a.render.dirty = !0;
        a.render.from = b;
        "root.render.preload" === b && (a.render.state = "preload");
        return this
    };
    a.render.clean = function(b, c) {
        a.render.dirtyControls = !0;
        a.render(b, c);
        return this
    };
    a.render.output = function(b, c) {
        a.render.forOutput = !0;
        e();
        a.render.forOutput = !1;
        return this
    };
    var h = !1,
        d = function() {
            a.render.dirty && e();
            !1 !== h && requestAnimationFrame(d)
        };
    a.render.start = function() {
        h || (h = !0, d())
    };
    a.render.stop = function() {
        h = !1
    };
    var g = {
            callbacks: [],
            push: function(a) {
                "function" === typeof a && g.callbacks.push(a)
            },
            run: function() {
                a.render.dirtyControls && (a.render.dirtyControls = !1, a.detect.area[a.tool.type] ? a.area.renderControls(null, !0) : a.toolkit.callOverride("onRenderControls"));
                if (a.render.dirtyCenterPoint) {
                    var b = a.render.dirtyCenterPoint;
                    a.render.dirtyCenterPoint = !1;
                    a.detect.area[a.tool.type] ? a.area.drawCenterPoint(b.origin, b.bbox, b.useRotate, b.useScale) : a.toolkit.callOverride("onRenderCenterPoint")
                }
                for (a.__rendering = !1; g.callbacks.length;) g.callbacks.shift()()
            }
        }, b = {
            perf: null,
            gco: "source-over",
            useMultiRender: {
                "root.scene.reset": !0,
                "root.render.preload": !0,
                "root.render.resize": !0,
                "root.render.everything": !0
            }
        }, e = function() {
            a.__rendering = !0;
            a.render.dirty = !1;
            b.perf = b.perf || a.perf();
            if (a.feature.vector.edit || "preload" === a.render.state) {
                var c = a.ctx,
                    f = c.canvas.width,
                    e = c.canvas.height;
                a.render.clipped || (a.ctx.canvas.width = f, a.render.drawClipArea(c), c.clip());
                c.clearRect(0, 0, f, e);
                c.beginPath();
                c.rect(0, 0, f, e);
                c.clip();
                c.save();
                m()
            } else {
                f = a.render.from;
                c = a.scene.data;
                e = c.length;
                if (!b.useMultiRender[f] && e) {
                    f = isFinite(a.selection.idx) && "root.area.hide" !== f ? a.active : a.ctx;
                    for (e = 0; e < c.length; e++) {
                        var d = c[e];
                        !d.dirty && !d.dirtyTransform || d.error || (a.scene.updateTransform(d), a.render.action(f, d), a.render.dirtyControls = !0)
                    }
                    "source-over" !== a.tool.device.composite && a.active.drawImage(a.ctx.canvas,
                        0, 0)
                }
                g.run()
            }
        }, f = function(b, c) {
            c && (c.lineWidth || c.strokeStyle) && (b.lineWidth = (c.lineWidth || 1) / a.canvas2d.zoom, b.strokeStyle = c.strokeStyle || "#000", b.stroke())
        }, c = -1,
        k = 0,
        m = function() {
            var e = a.scene.data,
                d = e.length,
                h = "preload" === a.render.state,
                q = ++c - k,
                u = 0 === c % ((h ? 6 : 2048) + 2),
                v = q > d - 1,
                u = 0 !== c && u;
            h && (u || v) && a.loader.update(a.loader.thread, "rendering sketch...", 100 * (d && !v ? q / d : 100) >> 0);
            if (u)++k, setTimeout(m, 1);
            else if (v) {
                k = 0;
                c = -1;
                a.__rendering = !1;
                a.render.state = "loaded";
                q = a.ctx;
                q.restore();
                if (a.feature.canvas.clearWithBackground && a.render.cache.enabled && !a.render.forOutput) {
                    var d = a.canvas2d,
                        h = d.zoom * d.pixelRatio,
                        e = a.project.bounds,
                        v = e.width,
                        u = e.height,
                        s = a.project.scrollLeft,
                        x = a.project.scrollTop;
                    q.save();
                    q.translate(d.x, d.y);
                    q.scale(h, h);
                    q.globalAlpha = 1;
                    q.globalCompositeOperation = "destination-over";
                    q.translate(-s, - x);
                    q.rect(0, 0, v, u);
                    e.style.fillStyle = a.configure.backgroundRaw;
                    (d = e.style) && d.fillStyle && (q.fillStyle = d.fillStyle, q.fill());
                    q.globalCompositeOperation = "source-over";
                    f(q, e.style);
                    q.restore()
                }
                a.render.setBlendMode(null);
                g.run();
                b.perf && (a.render.speed = b.perf());
                b.perf = null;
                a.feature.debug && console.log("render", a.render.speed + "ms", a.render.from)
            } else {
                e = e[q];
                if (e.error) return m();
                if (d = e.toolkit) {
                    a.scene.updateTransform(e);
                    if (isFinite(e.visible)) {
                        if (!e.visible && !a.render.forOutput) return m()
                    } else if (!a.scene.isVisible(e)) return m();
                    if (a.render.selected && !a.render.selected[q]) return m();
                    if (a.selection.idx === q) {
                        if (!a.feature.useCanvasTextRender && "text" === e.type && a.__editing) return a.area.drawControls(a.active, e), m();
                        d.renderAction ? d.renderAction(e, !1, a.render.from, m) : a.render.action(d.ctx, e, m);
                        a.area.drawControls(a.active, e)
                    } else d.renderAction ? d.renderAction(e, !0, a.render.from, m) : a.render.action(d.ctx, e, m)
                } else {
                    a.feature.debug && console.log("toolkit was not loaded", q, e.id, e.type);
                    if (!a.toolkit.getToolkit(e.type)) return m();
                    k = 0;
                    c = -1;
                    a.__rendering = !1;
                    setTimeout(a.render.preload, 0)
                }
            }
        };
    a.render.action = function(b, c, f) {
        if (b && c) {
            var e = c.bbox,
                d = c.zIndex - k,
                g = a.selection.items;
            c.selected = g[d];
            c.hovered = a.hovered.items[d];
            if (a.render.cache.enabled && (!c.ctx || c.dirty || c.dirtyCacheForce) && (c.dirtyControl = !0, a.render.cache.add(c), !c.ctx || !c.ctx.canvas.width || !c.ctx.canvas.height)) {
                f && f();
                return
            }
            var m = a.canvas2d,
                h = m.pixelRatio,
                w = m.zoom * h;
            b.save();
            b.translate(m.x, m.y);
            b.scale(w, w);
            b.globalCompositeOperation = a.style.getComposite(c.composite);
            b.globalAlpha = a.detect.localAlpha[c.type] ? 1 : isFinite(c.opacity) ? c.opacity / 100 : 1;
            var A = e.viewBox[2] / e.width,
                m = e.scaleCache && e.scaleCache.x || 1,
                y = e.scaleCache && e.scaleCache.y || 1,
                z = m * (A / e.scale.x),
                A = y * (A / e.scale.y),
                B = 0,
                D = 0,
                E = !(a.render.cache.enabled && !0 !== c.useHighRes);
            if (!1 === E) {
                var G = c.placement.clone(),
                    B = a.render.cache.padding * z,
                    D = a.render.cache.padding * A;
                G.translate(-B, - D);
                G.scale(z / h, A / h);
                G.apply(b, !0);
                h = c.ctx.canvas;
                h.width && h.height && b.drawImage(h, 0, 0);
                B /= z;
                D /= A
            } else G = c.placement, h = c.bbox.padding || 0, G.apply(b, !0), b.translate(h, h), b.beginPath(), c.render(b, G, !1);
            (a.feature[c.type] || a.feature.tools).drawBoundingBox && (g[d] && !isFinite(a.selection.idx) && !a.render.forOutput) && (d = e.scale.x / m, g = e.scale.y / y, b.beginPath(), E && b.scale(z, A), b.translate(B, D), b.rect(0, 0, e.width * d, e.height * g), b.lineWidth = 0.5 / w / m, b.shadowOffsetX = 1, b.shadowOffsetY = 1, "dark" === a.configure.theme ? (b.shadowColor = "#000", b.strokeStyle = "#fff") : (b.shadowColor = "#fff", b.strokeStyle = "#000"), b.globalAlpha = 0.5, b.stroke());
            b.restore();
            f && f()
        } else a.feature.debug && console.log("missing argument in root.render.action(ctx, action, callback)", arguments)
    };
    a.render.drawClipArea = function(b) {
        a.render.clipped = !0;
        var c = a.project.clip,
            e = a.canvas2d,
            d = e.zoom,
            k = d * e.pixelRatio;
        b.beginPath();
        var g = a.project.scrollLeft - a.project.x,
            m = a.project.scrollTop - a.project.y;
        if (c.path) g = e.x - g * d, e = e.y - m * d, b.save(), b.translate(g, e), b.scale(k, k), a.vector.shape.VOBPath(b, c.path), b.restore();
        else {
            if (a.render.forOutput) e = g = 0, d = b.canvas.width, k = b.canvas.height;
            else var h = a.project.bounds,
                g = (c.x || 0) * k + e.x - g * d,
                e = (c.y || 0) * k + e.y - m * d,
                d = Math.min(h.width, c.width || Infinity) * k,
                k = Math.min(h.height, c.height || Infinity) * k;
            b.rect(g - 0.5, e - 0.5, d + 0.5, k + 0.5)
        }
        c.style && ((k = c.style) && k.fillStyle && (b.fillStyle = k.fillStyle, b.fill()), f(b, c.style))
    };
    a.render.Cache2d = function(a) {
        var b = this;
        this.data = {};
        this.recycle = [];
        this.padding = 10;
        this.enabled = a.feature.cache2D;
        this.clean = function(c) {
            var f = c.ctx;
            if (f) {
                var e = f.canvas;
                f.copies--;
                0 >= f.copies && (delete b.data[c.hash], a.feature.debugCache && document.body.removeChild(e))
            }
        };
        this.getContext = function(a) {
            this.data[a] ? (a = this.data[a], a.copies++) : (a = document.createElement("canvas"), a.className = "cache" + Math.round(16777215 * Math.random()),
                a = a.getContext("2d"), a.copies = 1);
            return a
        };
        this.add = function(c) {
            if (c) if (c.render) {
                var f = a.scene.createHash(c);
                if (b.data[f] && !c.dirtyCacheForce) delete c.dirty, c.ctx = b.data[f], "undefined" === typeof c.hash && (c.hash = f, c.ctx.copies++);
                else {
                    this.clean(c);
                    c.hash = f;
                    c.ctx = this.getContext(f);
                    b.data[f] = c.ctx;
                    var f = a.render.cache.padding,
                        e = c.ctx.canvas,
                        d = c.bbox,
                        k = d.scale.x,
                        g = d.scale.y,
                        m = a.canvas2d.pixelRatio,
                        h = (d.width * k + 2 * f) * m,
                        y = (d.height * g + 2 * f) * m;
                    a.feature.cache257 && a.detect.generativeColor[c.type] && (h = Math.max(257,
                        h), y = Math.max(257, y));
                    e.width = Math.min(8192, h);
                    e.height = Math.min(8192, y);
                    a.feature.debugCache && (document.body.appendChild(e), e.title = c.zIndex, e.onclick = function(a) {
                        return function() {
                            console.log(a)
                        }
                    }(c));
                    h = c.bbox.scale;
                    e = c.placement.clone();
                    e.matrix.x = 0;
                    e.matrix.y = 0;
                    e.scale(1 / h.x, 1 / h.y);
                    e.rotate(-d.rotate * a.util.DEG_RAD);
                    e.scale(h.x, h.y);
                    c.ctx.save();
                    c.ctx.imageSmoothingEnabled = a.detect.brush[c.type];
                    a.feature.debugCache && (d = c.bbox.width * k, g *= c.bbox.height, c.ctx.fillRect(0, 0, d + 20, g + 20), c.ctx.clearRect(10,
                        10, d, g));
                    f += (c.bbox.padding || 0) * k;
                    c.ctx.globalCompositeOperation = a.style.getComposite("clipart" === c.type ? "source-over" : c.composite);
                    c.ctx.scale(m, m);
                    c.ctx.translate(f, f);
                    c.render(c.ctx, e, !0);
                    c.ctx.restore();
                    delete c.dirty;
                    delete c.dirtyCacheForce
                }
            } else a.feature.debug && console.log('missing action.render on "' + c.type + '" action');
            else a.feature.debug && console.log("missing action")
        };
        return this
    };
    a.render.setBlendMode = function(c) {
        var f = a.tool.type;
        if (f) {
            if (!c) {
                var e = a.tool.device;
                if (e && e.brush && e.brush.composite) c = e.brush.composite;
                else if (e && e.composite) c = e.composite;
                else {
                    var d = a.configure.tools[f];
                    if (!d) return;
                    f = d.type
                }
            }
            switch (f) {
                case "crop":
                case "zoom":
                case "snapshot":
                case "select":
                case "text":
                case "clipart":
                case "image":
                    c = "source-over";
                    break;
                case "eraser":
                    c = "destination-out";
                    break;
                default:
                    if (c) break;
                    a.ui.blendSelectMenu ? (c = a.ui.blendSelectMenu.getValue(), "normal" === c && (c = "source-over"), d.composite = c) : c = d.composite
            }
            sk.detect.shape[f] && (c = "source-over");
            f = b.gco !== c;
            b.gco = c;
            var k = a.canvas2d.layers,
                e = k.layer0,
                d = k.draw,
                k = k.active;
            c && "source-over" !== c ? (e.style.display = "none", d.style.background = e.style.background, k.ctx.canvas.width = k.ctx.canvas.width, k.ctx.drawImage(e, 0, 0)) : f && (e.style.display = "block", d.style.background = "", k.ctx.canvas.width = k.ctx.canvas.width)
        }
    };
    a.render.preload = function(b) {
        function c(k, p) {
            delete k.dirtyResource;
            k.error ? a.feature.debug && console.log("action did not load properly", k) : p || !1 === k ? (g.push(p || "Action missing."), k.error = !0) : k.toolkit && k.toolkit.updateActionSize && (a.feature.vector.edit ? k.toolkit.updateActionSize(k) : "text" === k.toolkit.type && k.toolkit.updateActionSize(k));
            f && f(1 - (h - 1) / m);
            --h || (a.__rendering = !1, b.norender ? e && e() : d ? a.render("root.render.preload", e) : a.render("root.render.load", e), g.length && window.alertify && alertify.log(g[0]))
        }
        b = b || {};
        var f = b.onprogress || b.onProgress,
            e = b.onload || b.onLoad;
        if (a.__rendering) e && e();
        else {
            !e && (a.feature.history && a.feature.history.autoSelect) && (e = a.scene.checkForSingleSelection);
            var d = "preload" === a.render.state,
                k = a.scene.data;
            if (0 === k.length) a.render("root.render.preload.ignore"),
                e && e();
            else {
                var g = [],
                    m = k.length,
                    h = m;
                a.__rendering = !0;
                a.scene.sort();
                for (var A = 0; A < m; A++) {
                    var y = k[A];
                    y.error ? c(y) : y.render && !y.dirtyResource ? c(y) : (a.toolkit.updateToolkit(y), y.toolkit ? y.toolkit.loadResource({
                        action: y,
                        onload: c,
                        onprogress: function(a) {},
                        useLoader: !b.fromSocket
                    }) : c(y, "Missing '" + y.type + "' toolkit"))
                }
            }
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.style && (sketch.style = {});
sketch = function(a) {
    a.style.Fill = function(b) {
        b = b || a.configure.defaultFill;
        return h(this, b)
    };
    a.style.Stroke = function(b) {
        b = b || a.configure.defaultStroke;
        var c = h(this, b);
        return d(b, c)
    };
    var h = function(b, c) {
        b.type = c.type || "color";
        b.opacity = c.opacity || 1;
        b.noise = c.noise || !1;
        b.mode = c.mode || "linear";
        b.color = c.color || "#000000";
        b.gradient = c.gradient || "0,fffa6c0c,0.04,fff6300a,0.08,fff6300a,0.145,ffd11b7e,0.21,ffd11b7e,0.28,ff7425b1,0.35,ff7425b1,0.42,ff0a62da,0.49,ff0a62da,0.56,ff00c000,0.63,ff00c000,0.715,fff6ef2a,0.8,fff6ef2a,0.9,fffa6c0c,1,fffa6c0c";
        b.pattern = c.pattern || "data:image/gif;base64,R0lGODlhDgAOAID/ANDu/FOdvCwAAAAADgAOAAACHYwDh5fazqKcj05rar5q+w961diVi9g9jaaGkFEAADs=";
        b.__colors = void 0;
        b.__color = void 0;
        b.__pattern = void 0;
        b.__gradient = void 0;
        a.feature.palette[b.type] || (b.type = "color");
        return b
    }, d = function(b, c) {
        var f = a.style.stroke || {};
        c.lineWidth = isFinite(b.lineWidth) ? b.lineWidth : isFinite(f.lineWidth) ? f.lineWidth : 1;
        c.lineCap = b.lineCap || f.lineCap || "butt";
        c.lineJoin = b.lineJoin || f.lineJoin || "miter";
        c.lineWidth = isFinite(b.miterLimit) ? b.miterLimit : isFinite(f.miterLimit) ? f.miterLimit : 4;
        c.dashArray = b.dashArray || f.dashArray || "none";
        c.lineWidth = isFinite(b.dashOffset) ? b.dashOffset : isFinite(f.dashOffset) ? f.dashOffset : 0;
        return c
    };
    a.style.init = function() {
        a.style.stroke = new a.style.Stroke;
        a.style.fill = new a.style.Fill;
        a.style.loadDefault()
    };
    a.style.setParam = function(b, c, f) {
        "undefined" === typeof f ? (f = {}, f[b] = c, a.setDefaultConfigure(f), a.toolkit.setTool()) : (Array.isArray(f) && (f = a.scene.selection.fromObjects(f)), a.toolkit.setActionData({
            param: b,
            data: c,
            selection: f
        }))
    };
    a.style.setFont = function(b, c, f) {
        if ("object" === typeof b) {
            c = c || b.selection;
            f = f || b.textarea;
            delete b.selection;
            delete b.textarea;
            a.vector.text.supports[b.fontFamily] || a.toolkit.text.loadFont({
                fontFamily: b.fontFamily
            });
            if (f) {
                var e = a.scene.getSelected();
                e && "text" === e.type || a.scene.fromConfigure(a.configure.tools.text);
                a.vector.text.setFontStyle(b, f)
            }
            for (var d in b) a.toolkit.setActionData({
                tool: "text",
                param: d,
                data: b[d],
                selection: c
            })
        }
    };
    var g = {
        color: function(b) {
            if (0 === b.indexOf("#") || 0 === b.indexOf("hsl") || 0 === b.indexOf("hsla") || 0 === b.indexOf("rgb") || 0 === b.indexOf("rgba") || a.color.webcolors[b]) return !0
        },
        pattern: function(a) {
            if (0 === a.indexOf("#asset") || 0 === a.indexOf("data") || 0 === a.indexOf("./") || 0 === a.indexOf("http")) return !0
        },
        gradient: function(a) {
            return !0
        }
    };
    a.style.validate = function(a, b) {
        var c = a.toLowerCase();
        return b ? g[b](c) || !1 : g.color(c) ? "color" : g.pattern(c) ? "pattern" : g.gradient(c) ? "gradient" : !1
    };
    a.style.setFill = function(b) {
        "string" === typeof b && (b = {
            dna: b
        });
        b.paintMethod = "fill";
        b.useRender = !0;
        a.style.apply(b)
    };
    a.style.setStroke = function(b, c, f, e, d, g, h) {
        "string" === typeof b && (b = {
            dna: b
        }, b.lineWidth = isFinite(c) ? c : 1, b.lineCap = f || "butt", b.lineJoin = e || "miter", b.miterLimit = isFinite(d) ? d : 4, b.dashArray = g || "none", b.dashOffset = isFinite(h) ? h : 0);
        b.paintMethod = "stroke";
        b.useRender = !0;
        a.style.apply(b)
    };
    a.style.apply = function(b) {
        var f = b.dna || b.color || b.gradient || b.pattern || "#000",
            e = b.paintMethod || b.method || "fill",
            g = b.paintType || b.type || a.style.validate(f),
            h = "stroke" === e,
            q = b.useRender || !1,
            u = b.useRecord || null,
            v = b.useColorPicker || !1,
            s = b.selection || null,
            x = a.configure.tools[a.tool.type],
            w = x && x[e];
        w && (w.type = g, w[g] = f, h && d(b, w), a.style[e] = a.util.clone(w));
        var x = !0 === u || "up" === u || "update" === u,
            u = !0 === u || "down" === u,
            A = a.actions,
            s = s || a.selection.items,
            y = "__" + g,
            z = !1,
            B = [],
            D = [],
            E;
        for (E in s) if (s = (w = A.data[E]) && w[e]) {
            if (!s[y] || u) s[y] = s[g];
            s[y] === f && s.type === g ? w.dirtyControl = !0 : "clipart" === w.type ? (s[y] = f, z = !0) : (x && (s[g] = s[y], s[y] = f, z = {
                id: w.id
            }, z[e] = a.util.clone(s), B.push(z)), s.type = g, s[g] = f, h && d(b, s), z = {
                id: w.id
            },
                z[e] = a.util.clone(s), D.push(z), z = !0, w.dirty = !0, w.dirtyControl = !0, s = c(e, w), w.brush && (w = w.brush[e], w.type = g, w[g] = f, h && d(b, w), w.__colors = s))
        }
        a.toolkit.text && a.toolkit.text.updateCSSStyle(f);
        D.length && (B.length && a.history && a.history.store(B, D), a.dataChannel && a.feature.stream.sketchLive && a.dataChannel.send(["scene.update", D]));
        a.colorPicker.update && ("color" === g && v) && ("none" !== f && a.colorPicker.update(f), q = !1);
        a.tool.device && (v = a.tool.device, v.brush ? (w = v.brush[e], w.type = g, w[g] = f, h && d(b, w), c(e, v.brush)) : v[e] && (w = v[e], w.type = g, w[g] = f, h && d(b, w), c(e, v)));
        q && z && a.render("root.setStyle");
        a.palette && a.palette.setIndicator();
        a.tool.interval = 0
    };
    a.style.updateFromObject = function(b, c) {
        c = c || a.configure.tools[a.tool.type];
        var f = a.style[b],
            e = c[b];
        if (e && f) {
            switch (e.type) {
                case "color":
                    var d = e.color || c[b + "Style"] || f.color;
                    a.colorPicker.update && "none" !== d && a.colorPicker.update(d);
                    f.color = d;
                    break;
                case "gradient":
                    if (!e.gradient) break;
                    f.gradient = e.gradient;
                    break;
                case "pattern":
                    if (!e.pattern) break;
                    f.pattern = e.pattern;
                    a.style.loadPattern(e.pattern)
            }
            a.palette && a.palette.update(e.type)
        }
    };
    a.style.hexFromColor = function(b) {
        "string" === typeof b ? "hsla" === b.substr(0, 4) ? b = a.color.space(b, "W3>HSLA>RGBA>HEX24>W3") : "rgba" === b.substr(0, 4) ? b = a.color.space(b, "W3>RGBA>HEX24>W3") : "rgb" === b.substr(0, 3) ? b = a.color.space(b, "W3>RGB>HEX24>W3") : a.color.webcolors[b] && (b = a.color.webcolors[b]) : isFinite(b.R) ? b = a.color.space(b, "RGB>HEX24>W3") : isFinite(b.H) && (b = a.color.space(b, "HSLA>RGBA>HEX24>W3"));
        return b
    };
    a.style.blendmodes = "normal multiply screen overlay darken lighten color-dodge color-burn hard-light soft-light difference exclusion hue saturation color luminosity".split(" ");
    a.style.compositemodes = "source-over source-in source-out source-atop destination-over destination-in destination-out destination-atop lighter darker copy xor".split(" ");
    a.style.blendmodes_idx = a.util.array2index(a.style.blendmodes);
    a.style.isBlendMode = a.util.array2object(a.style.blendmodes);
    a.style.isBlendMode["source-over"] = !0;
    a.style.isCompositeMode = a.util.array2object(a.style.compositemodes);
    a.style.getBlendMode = function() {
        var b = a.scene.data[a.selection.idx];
        return b ? b.composite : a.ui.blendSelectMenu ? a.ui.blendSelectMenu.getValue() : "source-over"
    };
    a.style.setBlendMode = function(b) {
        if (a.ui.blendSelectMenu) {
            b = b || a.ui.blendSelectMenu.getValue();
            var c = a.tool.device;
            if (c = c && c.brush || c || a.tool.style) {
                var f = a.configure.tools[a.tool.type];
                "eraser" !== f.type && ("normal" === b && (b = "source-over"), f.composite = c.composite = b)
            }
        }
    };
    a.style.getComposite = function(a, c) {
        return "disco" === a ? 0 === c % 2 ? "lighter" : "source-over" : b[a] || a
    };
    var b = {
        erase: "destination-out"
    };
    a.style.renderSwatch = function(b, f, e, d, g, h) {
        if ("undefined" !== typeof f) {
            var u = h || f.offsetWidth || 19,
                v = a.canvas2d.pixelRatio;
            g = f.width = (g || f.offsetWidth || 19) * v;
            h = f.height = u * v;
            u = Math.max(g, h);
            if ("color" === e) f.style.background = d;
            else if (f.getContext) {
                var s = f.getContext("2d");
                f = s.createLinearGradient(0, 0, u, u);
                switch (e) {
                    case "color":
                        s.fillStyle = d;
                        s.fillRect(0, 0, g, h);
                        break;
                    case "gradient":
                        u = {};
                        u[b] = {};
                        u[b].type = e;
                        u[b][e] = d;
                        b = c(b, u);
                        for (e = 0; e < b.length; e += 2) f.addColorStop(b[e], b[e + 1]);
                        s.fillStyle = f;
                        s.fillRect(0, 0, g, h);
                        break;
                    case "pattern":
                        a.style.loadPattern(d, function(a) {
                            Math.min(3,
                                Math.max(1, a.width / g, a.height / h));
                            s.save();
                            s.rect(0, 0, g, h);
                            s.fillStyle = a;
                            s.fill();
                            s.restore()
                        })
                }
            } else "gradient" === e && (f.style.cssText = a.style.getGradientCSS(d, "left top"))
        }
    };
    (function() {
        var b = document.createElement("canvas"),
            c = b.getContext("2d");
        b.width = 2;
        b.height = 2;
        a.style.loadPattern = function(b, f) {
            var e = a.style.patternCtx[b];
            if (e) f && f(e, !1);
            else {
                b || (b = a.style.fill.pattern);
                var d = new Image;
                d.onerror = function() {
                    a.feature.debug && console.log("missing pattern", b);
                    f && f(!1)
                };
                d.onload = function() {
                    var e = c.createPattern(d, "repeat");
                    a.style.patternCtx[b] = e;
                    e.width = d.width;
                    e.height = d.height;
                    f && f(e, d)
                };
                d.src = b
            }
        }
    })();
    a.style.setGradientCSS = function(a, b, c) {
        if (b) {
            if ("none" === b) return a.background = "none";
            c = c || "left top";
            b = e(b, c);
            a.background = "linear-gradient(" + c + "," + b + ");";
            a.background = "-webkit-linear-gradient(" + c + "," + b + ");";
            a.background = "-ms-linear-gradient(" + c + "," + b + ");";
            a.background = "-moz-linear-gradient(" + c + "," + b + ");";
            a.background = "-o-linear-gradient(" + c + "," + b + ");"
        }
    };
    a.style.getGradientCSS = function(a,
                                      b) {
        if (a) {
            if ("none" === a) return "background: none";
            b = b || "left top";
            var c = e(a, b);
            return "    \tbackground: linear-gradient(" + b + "," + c + ");\t\tbackground: -webkit-linear-gradient(" + b + "," + c + ");\t\tbackground: -ms-linear-gradient(" + b + "," + c + ");\t\tbackground: -moz-linear-gradient(" + b + "," + c + ");\t\tbackground: -o-linear-gradient(" + b + "," + c + ");"
        }
    };
    var e = function(a, b) {
        for (var c = [], f = a.split(","), e = 0, d = f.length; e < d;) {
            var g = 100 * f[e],
                h = f[e + 1],
                s = parseInt(h.substr(2, 2), 16),
                x = parseInt(h.substr(4, 2), 16),
                w = parseInt(h.substr(6,
                    2), 16),
                h = parseInt(h.substr(0, 2), 16) / 255;
            c.push("rgba(" + s + "," + x + "," + w + "," + h + ") " + g + "%");
            e += 2
        }
        return c.join(", ")
    };
    a.style.getGradientStops = function(a) {
        if (a) {
            if ("none" === a) return "background: none";
            var b = [];
            a = a.split(",");
            for (var c = 0, f = a.length; c < f;) {
                var e = 100 * a[c],
                    d = a[c + 1],
                    g = parseInt(d.substr(2, 2), 16),
                    h = parseInt(d.substr(4, 2), 16),
                    s = parseInt(d.substr(6, 2), 16),
                    d = parseInt(d.substr(0, 2), 16) / 255;
                b.push({
                    color: "rgba(" + g + "," + h + "," + s + "," + d + ")",
                    offset: e / 100
                });
                c += 2
            }
            return b
        }
    };
    a.style.load = function(b, c) {
        var e = f("fill", b);
        "pattern" === e.type && e.pattern ? a.style.loadPattern(e.pattern, function(f) {
            f && (f = a.style.updateCache(b), c && c(f))
        }) : (e = a.style.updateCache(b), c && c(e))
    };
    var f = function(b, c) {
        if (c[b]) var f = c[b];
        else {
            f = a.configure.tools[c.type];
            if (!f[b]) return "";
            f = f[b]
        }
        var e = f.type;
        "string" !== typeof f[e] && (f[e] = a.style[b][e]);
        return f
    };
    a.style.updateCache = function(a) {
        a.fill && c("fill", a);
        a.stroke && c("stroke", a)
    };
    var c = function(b, c) {
        var e = f(b, c),
            d = e.noise;
        if ("none" === e[e.type]) var g = [0, 0];
        else switch (e.type) {
            case "color":
                if (!d) return e.__colors = [0, e.color];
                var h = parseInt("0xFF" + e.color),
                    g = [0, h, 1, h];
                break;
            case "gradient":
                for (var g = e.gradient.split(","), u = 0; u < g.length; u += 2) h = g[u + 1], "#" === h[0] && (h = h.substr(1)), 6 === h.length && (h = "ff" + h), 3 === h.length && (h = "ff" + h[0] + h[0] + h[1] + h[1] + h[2] + h[2]), g[u] = parseFloat(g[u]), g[u + 1] = parseInt("0x" + h, 16);
                break;
            case "pattern":
                if (!e.pattern) return;
                a.style.loadPattern(e.pattern);
                return e.__colors = [0, a.style.patternCtx[e.pattern]]
        }
        if (!d && !a.detect.generativeColor[c.type]) {
            e.__colors = [];
            for (d = 0; d < g.length; d += 2) e.__colors.push(g[d]),
                e.__colors.push(a.color.space(g[d + 1], "HEX32>RGBA>W3"));
            return e.__colors
        }
        h = d ? 10 : 0;
        u = d ? 20 : 0;
        d = d ? 10 : 0;
        if (a.color.gradient) return e.__colors = a.color.gradient.getColors({
            seed: c.seed,
            dna: g,
            length: 500,
            resolution: 1,
            blend: "Luminosity",
            H: h,
            S: u,
            L: d
        }), e.__colors;
        a.feature.debug && console.log("missing gradient.js");
        return e.__colors = [0, e.color]
    };
    a.style.createGradient = function(b, f, e, d, g, h, u) {
        var v = u[b];
        if (v) {
            var s = v.type,
                x = v.mode,
                w = v[s];
            if ("none" === w) return "none";
            if ("color" === s && "cycle" !== x) return w;
            if ("pattern" === s) return a.style.patternCtx[w];
            if ("erase" === u.composite) return "#000";
            if ("cycle" === x) return b = v.__colors, b[(2 * (u.time || 0) + 1) % b.length];
            "radial" === x ? (s = (e + g) / 2, x = (d + h) / 2, e = Math.sqrt(Math.pow(g - e, 2) + Math.pow(h - d, 2)) / 2, f = f.createRadialGradient(s, x, 0, s, x, e)) : f = f.createLinearGradient(e, d, g, h);
            b = v.__colors || (v.__colors = c(b, u));
            for (u = 0; u < b.length; u += 2) f.addColorStop(b[u], b[u + 1]);
            return f
        }
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.style && (sketch.style = {});
(function(a) {
    a.style.defaultColors = "#ffffff #e2e2e2 #c6c6c6 #aaaaaa #8d8d8d #717171 #555555 #383838 #1c1c1c #000000 #a8f1ff #aedbff #bcb8ff #e0a6ff #ffb4de #ffbcbc #ffd1b4 #ffeeaa #ffff9a #e4f9c1 #63e5ff #6ebeff #877fff #c661ff #ff79c2 #ff8888 #ffac79 #ffe067 #ffff49 #cef28f #2bd5ff #3aa1ff #5a51ff #ab29ff #ff48a6 #ff5b5b #ff8a47 #ffce2f #fffd07 #b6e565 #00c1f7 #1285ff #362cff #9000ff #f3228a #ff3737 #ff6c20 #ffba04 #fff200 #9dd241 #00a8e0 #006af5 #1b11ff #7400f4 #d7066f #ff1b1b #ff5103 #eea300 #ffdc00 #83b925 #008cc1 #004fcf #0800da #5800cb #b10053 #e90808 #f43900 #d08800 #d6b700 #689a10 #00668c #00369b #000094 #3a0087 #800037 #ac0000 #c42500 #9f6700 #ab9200 #4c7602".split(" ");
    a.style.defaultGradients = "0,ffff0000,0.25,ffffff00,0.5,ffffff00,0.75,ff00ff00,1,ff00ff00 0,ff000000,0.167,ff000000,0.333,ffff0000,0.5,ffff0000,0.667,ffffff00,0.833,ffffff00,1,ffffff00 0,ff9e0142,0.046,ff9e0142,0.091,ffd53e4f,0.136,ffd53e4f,0.182,fff46d43,0.227,fff46d43,0.273,fffdae61,0.318,fffdae61,0.364,fffee08b,0.409,fffee08b,0.455,ffffffbf,0.5,ffffffbf,0.546,ffe6f598,0.591,ffe6f598,0.636,ffabdda4,0.682,ffabdda4,0.727,ff66c2a5,0.773,ff66c2a5,0.818,ff3288bd,0.864,ff3288bd,0.909,ff5e4fa2,0.955,ff5e4fa2,1,ff5e4fa2 0,fffa6c0c,0.04,fff6300a,0.08,fff6300a,0.145,ffd11b7e,0.21,ffd11b7e,0.28,ff7425b1,0.35,ff7425b1,0.42,ff0a62da,0.49,ff0a62da,0.56,ff00c000,0.63,ff00c000,0.715,fff6ef2a,0.8,fff6ef2a,0.9,fffa6c0c,1,fffa6c0c 0,ff9c2224,0.09,ffc42d25,0.18,ffc42d25,0.255,ffe23f30,0.33,ffe23f30,0.415,ffef5d41,0.5,ffef5d41,0.55,fff38d4e,0.6,fff38d4e,0.67,fff59a3a,0.74,fff59a3a,0.815,fffabf58,0.89,fffabf58,0.945,fffccfa0,1,fffccfa0 0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e 0,ff607e80,0.25,ff9fd962,0.5,ff9fd962,0.75,fff3fa58,1,fff3fa58 0,ff000000,0.1458854,ff000000,0.16999999999999998,ff000000,0.1941146,ff2b0700,0.21807295,ff560e00,0.2420313,ff8d1e00,0.25648445000000003,ffc42f00,0.2709376,ffd84600,0.2988543,ffec5e00,0.326771,ffde4800,0.3423439,ffd13200,0.3579168,ffe65c11,0.36890635,fffb8623,0.37989589999999995,fffd6919,0.39893229999999996,ffff4d0f,0.41796869999999997,ffc8511f,0.42578119999999997,ff915530,0.43359369999999997,ffc8aa97,0.44140619999999997,ffffffff,0.44921869999999997,ffffffff,0.47153435,ffffffff,0.49384999999999996,ffcdf1ff,0.5277562499999999,ff9be3ff,0.5616625,ff5aa2f1,0.7015583,ff1a61e4,0.7015583,ff1736a4,0.7653604744791199,ff150b64,0.8291626999999999,ff0a0532,0.91458135,ff000000 0.06279181820714999,ff030101,0.1259619,ff0d000a,0.1884619,ff180013,0.25096189999999996,ff65024e,0.31346189999999996,ffb2048a,0.37596189999999996,ffb20356,0.43846189999999996,ffb20323,0.5009619,ffb20319,0.5634619,ffb2030f,0.6259619,ff8d0230,0.6902920499999999,ff680251,0.7546222,ffaf1e4b,0.8247415191252401,fff63b46,0.8750691,ffa71e45,0.95131794026088,ff590245 0,ffffbbd9,0.125,ffdac1df,0.25,ffb6c8e6,0.375,ffc7c9b6,0.55625,ffd9cb86,0.7375,ff819569,0.8609375,ff295f4d,0.984375,ff17423c,1,ff06252c 0,ff15aeeb,0.3333333,ff8157ba,0.50818891461434,ffed008a,0.6717635,fff47961,1,fffbf239 0,ff5b2600,0.5,ff8b5600,1,ffbb8600 0,ff395fa5,0.17,ff51485c,0.277,ff51485c,0.292,ffa47472,0.307,ffa47472,0.332,ff632d02,0.449,ff632d02,0.554,ff494d47,0.695,ff494d47,0.843,ff2e2426,1,ff2e2426 0,ff285f88,0.165,ff9eb9d4,0.33,ff9eb9d4,0.495,fff9947e,0.66,fff9947e,0.83,ffe45d61,1,ffe45d61 0,ff000022,0.175,ff191024,0.28333335,ff322027,0.3916667,ff4c322d,0.5000000499999999,ff664433,0.6083334,ff8a5d3d,0.71666675,ffae7747,0.8250001,ffce9056,1,ffeeaa66 0.125,ff5b49af,0.25,ffa92c77,0.375,fff81040,0.5,fffb5f36,0.58653845,ffffae2d,0.75,ff9f9044,0.797337275,ff40725b 0,ffdb2962,0.3300781,ffe98431,0.54206764604626,fff8df00,0.6728514999999999,ffa4ac33,0.9999998999999999,ff517a67 0,fffe4d01,0.245,fffe7701,0.49,ffffa101,0.745,ff92a470,1,ff26a8e0 0,ff4c36b3,0.15,ffa1207d,0.24734265,fff60a48,0.3446853,fffa7e3b,0.43132864374999996,fffff32e,0.5326573,ff87f874,0.6721152827415,ff0ffebb,0.8,ff26a0be,1,ff3d43c1 0,ffca0020,0.125,ffca0020,0.25,fff4a582,0.375,fff4a582,0.5,ff92c5de,0.625,ff92c5de,0.75,ff0571b0,0.875,ff0571b0,1,ff0571b0 0,ffff67d0,0.036,ffff3e6c,0.072,ffff3e6c,0.127,ffff579e,0.181,ffff579e,0.247,ffff3958,0.313,ffff3958,0.368,ffff3958,0.422,ffff3958,0.482,ffff3958,0.542,ffff3958,0.584,ffff4189,0.627,ffff4189,0.681,ffc41c57,0.735,ffc41c57,0.795,ffff4246,0.855,ffff4246,0.928,ffc2275e,1,ffc2275e 0,ffffff88,0.5,ffffff88,1,ffffff88 0,fff1e767,0.5,fff7ce56,1,fffeb645 0,ffffd65e,0.5,fffeca31,1,fffebf04 0,fff6e6b4,0.5,fff1bb65,1,ffed9017 0,fff6f8f9,0.25,ffedf1f3,0.5,ffe5ebee,0.5,ffdee4e8,0.5,ffd7dee3,0.75,ffe6eaee,1,fff5f7f9 0,ffffffff,0.25,fff9f9f9,0.5,fff3f3f3,0.5,fff0f0f0,0.5,ffededed,0.75,fff6f6f6,1,ffffffff 0,ffffffff,0.25,fff8f8f8,0.5,fff1f1f1,0.5,ffe9e9e9,0.5,ffe1e1e1,0.75,ffebebeb,1,fff6f6f6 0,ffffffff,0.5,fff2f2f2,1,ffe5e5e5 0,ffffffff,0.473029,fff6f6f6,1,ffededed 0,ff499bea,0.5,ff348be7,1,ff207ce5 0,ffdeefff,0.5,ffbbd6ee,1,ff98bede 0,ffa7cfdf,0.5,ff6591b4,1,ff23538a 0,ffb2e1ff,0.5,ff8ccbfd,1,ff66b6fc 0,ff93cede,0.410788,ff6eb9ce,1,ff49a5bf 0,ffa9e4f7,0.5,ff5cccef,1,ff0fb4e7 0,ff63b6db,0.5,ff49a9d5,1,ff309dcf 0,ffe9f6fd,0.5,ffdef2fc,1,ffd3eefb 0,ffd6f9ff,0.5,ffbaf0fc,1,ff9ee8fa 0,fff7fbfc,0.40249,ffd2eaf0,1,ffadd9e4 0,ffc5deea,0.307054,ff65a5ca,1,ff066dab 0,ffaebcbf,0.25,ff8e9999,0.5,ff6e7774,0.5,ff3c423f,0.5,ff0a0e0a,0.75,ff0a0b09,1,ff0a0809 0,ff959595,0.460581,ff4b4b4b,0.502075,ff010101,0.502075,ff272727,0.763485,ff4e4e4e,0.763485,ff343434,1,ff1b1b1b 0,ff7d7e7d,0.5,ff454645,1,ff0e0e0e 0,ff45484d,0.5,ff222426,1,ff000000 0,fffcfff4,0.40249,ffd7ded0,1,ffb3bead 0,fffcfff4,0.5,fff2f4e1,1,ffe9e9ce 0,ffe0f3fa,0.25,ffdcf1fb,0.5,ffd8f0fc,0.5,ffc8e9f9,0.5,ffb8e2f6,0.75,ffb7e0f9,1,ffb6dffd 0,ffb7deed,0.25,ff94d6ee,0.5,ff71ceef,0.5,ff49c1e8,0.5,ff21b4e2,0.75,ff6cc9e7,1,ffb7deed 0,fff3c5bd,0.25,ffed988a,0.5,ffe86c57,0.5,ffe94a2d,0.5,ffea2803,0.625,fff44701,0.75,ffff6600,0.75,ffe34400,1,ffc72200 0,fff85032,0.25,fff45f47,0.5,fff16f5c,0.5,fff34c34,0.5,fff6290c,0.709544,ffee3019,1,ffe73827 0,ffcc0000,0.5,ffcc0000,1,ffcc0000 0,ffff1a00,0.5,ffff1a00,1,ffff1a00 0,ffff3019,0.5,ffe71a0e,1,ffcf0404 0,fff2825b,0.25,ffeb6e43,0.5,ffe55b2b,0.5,ffea6638,1,fff07146 0,fffebbbb,0.452282,fffe8b8b,1,ffff5c5c 0,ffebe9f9,0.25,ffe1dcf4,0.5,ffd8d0ef,0.5,ffd3cbed,0.5,ffcec7ec,0.75,ffc7c3eb,1,ffc1bfea 0,fffcecfc,0.25,fffbc9ee,0.5,fffba6e1,0.5,fffc97dc,0.5,fffd89d7,0.75,fffe82d7,1,ffff7cd8 0,ffff0084,0.5,ffff0084,1,ffff0084 0,ffe570e7,0.46888,ffc65cc5,1,ffa849a3 0,fffb83fa,0.5,fff25ff3,1,ffe93cec 0,ffff5db1,0.5,fff72f96,1,ffef017c 0,ffffb76b,0.25,ffffaf54,0.5,ffffa73d,0.5,ffff911e,0.5,ffff7c00,0.75,ffff7d02,1,ffff7f04 0,ffff7400,0.5,ffff7400,1,ffff7400 0,ffffa84c,0.5,ffff912c,1,ffff7b0d 0,fffceabb,0.25,fffcdb84,0.5,fffccd4d,0.5,fffac126,0.5,fff8b500,0.75,fff9ca49,1,fffbdf93 0,fff9c667,0.5,fff8ae44,1,fff79621 0,ffffc578,0.5,fffdb14d,1,fffb9d23 0,fffac695,0.46888,fff4a963,1,ffef8d31 0,ffffaf4b,0.5,ffffa02a,1,ffff920a 0,ff73880a,0.5,ff73880a,1,ff73880a 0,ff627d4d,0.5,ff405c2a,1,ff1f3b08 0,ffa4b357,0.5,ff8c9e31,1,ff75890c 0,ffe4efc0,0.5,ffc7d699,1,ffabbd73 0,fffefefd,0.423237,ffd6deb9,1,ffaebf76 0,ffd2ff52,0.5,ffb1f34a,1,ff91e842 0,ffc3d9ff,0.414938,ffadc4ec,1,ff98b0d9 0,fff9fcf7,0.5,fff7faf3,1,fff5f9f0 0,fff3e2c7,0.25,ffdac097,0.5,ffc19e67,0.5,ffbb9559,0.5,ffb68d4c,0.75,ffcfb07f,1,ffe9d4b3 0,ffd4e4ef,0.5,ffadc9dd,1,ff86aecc 0,ffe2e2e2,0.25,ffdedede,0.5,ffdbdbdb,0.5,ffd6d6d6,0.5,ffd1d1d1,0.75,ffe7e7e7,1,fffefefe 0,ffeeeeee,0.5,ffeeeeee,1,ffeeeeee 0,ffd2dfed,0.261411,ffc8d7eb,0.506224,ffbed0ea,0.506224,ffb2c8e6,0.506224,ffa6c0e3,0.6182570000000001,ffb0c8e9,0.7510370000000001,ffbad0ef,0.7510370000000001,ff99b5db,1,ff799bc8 0,ffcfe7fa,0.5,ff99bddd,1,ff6393c1 0,ffb8c6df,0.5,ff92a7cb,1,ff6d88b7 0,ffb5bdc8,0.360996,ff6e7881,1,ff28343b 0,ffd8e0de,0.224066,ffb8c7c4,0.333333,ff99afab,0.333333,ff8da6a1,0.666667,ff829d98,0.666667,ff485553,1,ff0e0e0e 0,fff2f5f6,0.365145,ffdde6e9,1,ffc8d7dc 0,ffb0d4e3,0.5,ff9cc7d9,1,ff88bacf 0,ff606c88,0.5,ff4f5c79,1,ff3f4c6b 0,ffcedce7,0.5,ff93a3ac,1,ff596a72 0,ffeeeeee,0.5,ffdddddd,1,ffcccccc 0,ffb4df5b,0.5,ffb4df5b,1,ffb4df5b 0,ffe6f0a3,0.25,ffdceb6d,0.5,ffd2e638,0.5,ffcadf2e,0.5,ffc3d825,0.75,ffcfe434,1,ffdbf043 0,ff9dd53a,0.25,ff9fd544,0.5,ffa1d54f,0.5,ff90cb33,0.5,ff80c217,0.75,ff7ebf10,1,ff7cbc0a 0,ffb6e026,0.5,ffb0de27,1,ffabdc28 0,ff6bba70,0.5,ff6bba70,1,ff6bba70 0,ff8fc800,0.5,ff8fc800,1,ff8fc800 0,ffb4e391,0.25,ff8ad355,0.5,ff61c419,0.5,ff8ad355,1,ffb4e391 0,ffa9db80,0.5,ff9fd077,1,ff96c56f 0,fff8ffe8,0.327801,ffd7ef8a,1,ffb7df2d 0,ffc9de96,0.439834,ff81b065,1,ff398235 0,ffcdeb8e,0.5,ffb9da72,1,ffa5c956 0,ffb4ddb4,0.166667,ff83c783,0.333333,ff52b152,0.333333,ff299d29,0.666667,ff008a00,0.666667,ff005700,1,ff002400 0,fff0b7a1,0.25,ffbe7558,0.5,ff8c3310,0.5,ff802a08,0.5,ff752201,0.75,ff9a4827,1,ffbf6e4e 0,ffd5cea6,0.39834,ffc6bd8b,1,ffb7ad70 0,ffb3dced,0.25,ff6ecae9,0.5,ff29b8e5,0.5,ff72cce9,1,ffbce0ee 0,ffd0e4f7,0.236515,ff6dade6,0.502075,ff0a77d5,0.502075,ff4899df,1,ff87bcea 0,ff3f4c6b,0.5,ff3f4c6b,1,ff3f4c6b 0,ffa7c7dc,0.5,ff96bcd7,1,ff85b2d3 0,ffcedbe9,0.166667,ff97bad8,0.502075,ff6199c7,0.502075,ff4d8ec5,0.502075,ff3a84c3,0.5892120000000001,ff429ed9,0.7095440000000001,ff4bb8f0,0.7095440000000001,ff3886bd,1,ff26558b 0,ffe4f5fc,0.25,ffd1eefa,0.5,ffbfe8f9,0.5,ffafe0f4,0.5,ff9fd8ef,0.75,ff64c4ee,1,ff2ab0ed 0,ffebf1f6,0.25,ffcbe2f2,0.5,ffabd3ee,0.5,ff9acbec,0.5,ff89c3eb,0.75,ffafd7f3,1,ffd5ebfb 0,ff6db3f2,0.25,ff60abf0,0.5,ff54a3ee,0.5,ff4599ef,0.5,ff3690f0,0.75,ff2a7ce7,1,ff1e69de 0,ff3b679e,0.25,ff3377bb,0.5,ff2b88d9,0.5,ff2582d1,0.5,ff207cca,0.75,ff4e9ad9,1,ff7db9e8 0,ff4096ee,0.5,ff4096ee,1,ff4096ee 0,fffeffff,0.352697,ffcfebf7,1,ffa0d8ef 0,fff0f9ff,0.46888,ffc8eaff,1,ffa1dbff 0,ff87e0fd,0.40249,ff46c5ee,1,ff05abe0 0,ff4c4c4c,0.124481,ff595959,0.253112,ff666666,0.253112,ff494949,0.502075,ff2c2c2c,0.502075,ff161616,0.502075,ff000000,0.6016600000000001,ff151515,0.7593360000000001,ff2b2b2b,0.7593360000000001,ff1f1f1f,1,ff131313 0,fff5f6f6,0.207469,ffd6d8de,0.487552,ffb8bac6,0.487552,ffd6d8de,1,fff5f6f6 0,ffb8e1fc,0.095436,ffa4cdf0,0.253112,ff90bae4,0.253112,ff90bcea,0.502075,ff90bff0,0.502075,ff7db3ea,0.502075,ff6ba8e5,0.8333330000000001,ff94cdf1,1,ffbdf3fd 0,ffefc5ca,0.25,ffe08892,0.5,ffd24b5a,0.5,ffc63948,0.5,ffba2737,0.75,ffd55a68,1,fff18e99 0,ffa90329,0.439834,ff8b0121,1,ff6d0019 0,ffe5e696,0.5,ffdbdc7b,1,ffd1d360 0,ffeaefb5,0.5,ffe5ecaa,1,ffe1e9a0 0,ff49c0f0,0.5,ff3ab7e9,1,ff2cafe3 0,ff258dc8,0.5,ff258dc8,1,ff258dc8 0,ffeab92d,0.5,ffd8a81e,1,ffc79810 0,ff7abcff,0.439834,ff5da9f6,1,ff4096ee 0,ffcb60b3,0.25,ffc653aa,0.5,ffc146a1,0.5,ffb4238c,0.5,ffa80077,0.75,ffc11b8d,1,ffdb36a4 0,fff2f9fe,0.5,ffe4f4fd,1,ffd6f0fd 0,ffbfd255,0.25,ffa6c53f,0.5,ff8eb92a,0.5,ff80b115,0.5,ff72aa00,0.75,ff88ba16,1,ff9ecb2d 0,fffeffe8,0.5,ffeaedd3,1,ffd6dbbf 0,fffefcea,0.5,fff7eb90,1,fff1da36 0,fff2f6f8,0.25,ffe5ebef,0.5,ffd8e1e7,0.5,ffc6d3db,0.5,ffb5c6d0,0.75,ffcadae4,1,ffe0eff9 0,ffcb60b3,0.25,ffbc399b,0.5,ffad1283,0.5,ffc52c97,1,ffde47ac 0,fffebf01,0.5,fffebf01,1,fffebf01 0,ffe1ffff,0.06639,ffe1ffff,0.120332,ffe1ffff,0.120332,ffefffff,0.120332,fffdffff,0.302905,ffe2f6fd,0.5435679999999999,ffc8eefb,0.5435679999999999,ffbce3f8,1,ffb1d8f5 0,fffeccb1,0.25,fff7a071,0.5,fff17432,0.5,ffed641c,0.5,ffea5507,0.75,fff27532,1,fffb955e 0,fffeffff,0.5,ffe8f5fc,1,ffd2ebf9 0,ff88bfe8,0.5,ff7cb7e4,1,ff70b0e0 0,ff00b7ea,0.5,ff00aad6,1,ff009ec3 0,ff8989ba,0.5,ff8989ba,1,ff8989ba 0,ff4c4c4c,0.125,ff666666,0.253,ff666666,0.386,ff2c2c2c,0.502,ff000000,0.602,ff2b2b2b,0.759,ff2b2b2b,0.913,ff131313,1,ff131313 0,fff0f9ff,0.469,ffa1dbff,1,ffa1dbff 0,ff7abcff,0.44,ff4096ee,1,ff4096ee 0,ff00b7ea,0.5,ff009ec3,1,ff009ec3 0,fffeffff,0.353,ffa0d8ef,1,ffa0d8ef 0,ffb8e1fc,0.095,ff90bae4,0.253,ff90bae4,0.373,ff90bff0,0.502,ff6ba8e5,0.833,ffbdf3fd,1,ffbdf3fd 0,ff3b679e,0.25,ff2b88d9,0.5,ff207cca,0.75,ff7db9e8,1,ff7db9e8 0,ff6db3f2,0.25,ff54a3ee,0.5,ff3690f0,0.75,ff1e69de,1,ff1e69de 0,ffebf1f6,0.25,ffabd3ee,0.5,ff89c3eb,0.75,ffd5ebfb,1,ffd5ebfb 0,ffe4f5fc,0.25,ffbfe8f9,0.5,ff9fd8ef,0.75,ff2ab0ed,1,ff2ab0ed 0,ffd0e4f7,0.237,ff0a77d5,0.502,ff0a77d5,0.793,ff87bcea,1,ff87bcea 0,ffb3dced,0.25,ff29b8e5,0.5,ff29b8e5,0.75,ffbce0ee,1,ffbce0ee 0,ffb4ddb4,0.167,ff52b152,0.333,ff52b152,0.5,ff008a00,0.667,ff008a00,0.833,ff002400,1,ff002400 0,ffcdeb8e,0.5,ffa5c956,1,ffa5c956 0,ffc9de96,0.44,ff398235,1,ff398235 0,fff8ffe8,0.328,ffb7df2d,1,ffb7df2d 0,ffa9db80,0.5,ff96c56f,1,ff96c56f 0,ffb4e391,0.25,ff61c419,0.5,ff61c419,0.75,ffb4e391,1,ffb4e391 0,ff299a0b,0.5,ff299a0b,1,ff299a0b 0,ff006e2e,0.5,ff006e2e,1,ff006e2e 0,ffcdeb8b,0.5,ffcdeb8b,1,ffcdeb8b 0,ff8fc400,0.5,ff8fc400,1,ff8fc400 0,ffb6e026,0.5,ffabdc28,1,ffabdc28 0,ff9dd53a,0.25,ffa1d54f,0.5,ff80c217,0.75,ff7cbc0a,1,ff7cbc0a 0,ffe6f0a3,0.25,ffd2e638,0.5,ffc3d825,0.75,ffdbf043,1,ffdbf043 0,ffbfd255,0.25,ff8eb92a,0.5,ff72aa00,0.75,ff9ecb2d,1,ff9ecb2d 0,ffeeeeee,0.5,ffcccccc,1,ffcccccc 0,ffcedce7,0.5,ff596a72,1,ff596a72 0,ff606c88,0.5,ff3f4c6b,1,ff3f4c6b 0,ffb0d4e3,0.5,ff88bacf,1,ff88bacf 0,fff2f5f6,0.365,ffc8d7dc,1,ffc8d7dc 0,ffb8c6df,0.5,ff6d88b7,1,ff6d88b7 0,ffd2dfed,0.261,ffbed0ea,0.506,ffa6c0e3,0.618,ffbad0ef,0.751,ffbad0ef,0.876,ff799bc8,1,ff799bc8 0,ffe2e2e2,0.25,ffdbdbdb,0.5,ffd1d1d1,0.75,fffefefe,1,fffefefe 0,fff2f6f8,0.25,ffd8e1e7,0.5,ffb5c6d0,0.75,ffe0eff9,1,ffe0eff9 0,ffd4e4ef,0.5,ff86aecc,1,ff86aecc 0,fffefefd,0.423,ffaebf76,1,ffaebf76 0,ffe4efc0,0.5,ffabbd73,1,ffabbd73 0,ffa4b357,0.5,ff75890c,1,ff75890c 0,ff627d4d,0.5,ff1f3b08,1,ff1f3b08 0,ffffaf4b,0.5,ffff920a,1,ffff920a 0,fffac695,0.469,ffef8d31,1,ffef8d31 0,ffffc578,0.5,fffb9d23,1,fffb9d23 0,fff9c667,0.5,fff79621,1,fff79621 0,fffceabb,0.25,fffccd4d,0.5,fff8b500,0.75,fffbdf93,1,fffbdf93 0,ffff670f,0.5,ffff670f,1,ffff670f 0,ffff5db1,0.5,ffef017c,1,ffef017c 0,fffb83fa,0.5,ffe93cec,1,ffe93cec 0,ffe570e7,0.469,ffa849a3,1,ffa849a3 0,ffcb60b3,0.25,ffad1283,0.5,ffad1283,0.75,ffde47ac,1,ffde47ac 0,fffcecfc,0.25,fffba6e1,0.5,fffd89d7,0.75,ffff7cd8,1,ffff7cd8 0,ffebe9f9,0.25,ffd8d0ef,0.5,ffcec7ec,0.75,ffc1bfea,1,ffc1bfea 0,fffebbbb,0.452,ffff5c5c,1,ffff5c5c 0,fff2825b,0.25,ffe55b2b,0.5,ffe55b2b,0.75,fff07146,1,fff07146 0,fff85032,0.25,fff16f5c,0.5,fff6290c,0.71,ffe73827,1,ffe73827 0,fffeccb1,0.25,fff17432,0.5,ffea5507,0.75,fffb955e,1,fffb955e 0,ffefc5ca,0.25,ffd24b5a,0.5,ffba2737,0.75,fff18e99,1,fff18e99 0,fffeffe8,0.5,ffd6dbbf,1,ffd6dbbf 0,fffcfff4,0.403,ffb3bead,1,ffb3bead 0,ffe5e696,0.5,ffd1d360,1,ffd1d360 0,ff45484d,0.5,ff000000,1,ff000000 0,ff7d7e7d,0.5,ff0e0e0e,1,ff0e0e0e 0,ff959595,0.461,ff010101,0.502,ff010101,0.531,ff4e4e4e,0.764,ff4e4e4e,0.867,ff1b1b1b,1,ff1b1b1b 0,ffaebcbf,0.25,ff6e7774,0.5,ff0a0e0a,0.75,ff0a0809,1,ff0a0809 0,ffc5deea,0.307,ff066dab,1,ff066dab 0,fff7fbfc,0.403,ffadd9e4,1,ffadd9e4 0,ffd6f9ff,0.5,ff9ee8fa,1,ff9ee8fa 0,ffe9f6fd,0.5,ffd3eefb,1,ffd3eefb 0,ff63b6db,0.5,ff309dcf,1,ff309dcf 0,ff2c539e,0.5,ff2c539e,1,ff2c539e 0,ffa9e4f7,0.5,ff0fb4e7,1,ff0fb4e7 0,ff93cede,0.411,ff49a5bf,1,ff49a5bf 0,ffb2e1ff,0.5,ff66b6fc,1,ff66b6fc 0,ffa7cfdf,0.5,ff23538a,1,ff23538a 0,ff4f85bb,0.5,ff4f85bb,1,ff4f85bb 0,ffdeefff,0.5,ff98bede,1,ff98bede 0,fffeffff,0.5,ffd2ebf9,1,ffd2ebf9 0,ff356aa0,0.5,ff356aa0,1,ff356aa0 0,ffffffff,0.25,fff1f1f1,0.5,ffe1e1e1,0.75,fff6f6f6,1,fff6f6f6 0,fff6e6b4,0.5,ffed9017,1,ffed9017 0,ffeab92d,0.5,ffc79810,1,ffc79810 0,ffffd65e,0.5,fffebf04,1,fffebf04".split(" ");
    a.style.defaultPatterns = "./media/pattern/HybridGenesis/0-original.png ./media/pattern/HybridGenesis/1-original.png ./media/pattern/HybridGenesis/10-original.png ./media/pattern/HybridGenesis/11-original.png ./media/pattern/HybridGenesis/12-original.png ./media/pattern/HybridGenesis/13-original.png ./media/pattern/HybridGenesis/14-original.png ./media/pattern/HybridGenesis/15-original.png ./media/pattern/HybridGenesis/16-original.png ./media/pattern/HybridGenesis/17-original.png ./media/pattern/HybridGenesis/18-original.png ./media/pattern/HybridGenesis/19-original.png ./media/pattern/HybridGenesis/2-original.png ./media/pattern/HybridGenesis/20-original.png ./media/pattern/HybridGenesis/21-original.png ./media/pattern/HybridGenesis/22-original.png ./media/pattern/HybridGenesis/23-original.png ./media/pattern/HybridGenesis/24-original.png ./media/pattern/HybridGenesis/25-original.png ./media/pattern/HybridGenesis/26-original.png ./media/pattern/HybridGenesis/27-original.png ./media/pattern/HybridGenesis/28-original.png ./media/pattern/HybridGenesis/29-original.png ./media/pattern/HybridGenesis/3-original.png ./media/pattern/HybridGenesis/30-original.png ./media/pattern/HybridGenesis/31-original.png ./media/pattern/HybridGenesis/32-original.png ./media/pattern/HybridGenesis/33-original.png ./media/pattern/HybridGenesis/34-original.png ./media/pattern/HybridGenesis/35-original.png ./media/pattern/HybridGenesis/36-original.png ./media/pattern/HybridGenesis/37-original.png ./media/pattern/HybridGenesis/38-original.png ./media/pattern/HybridGenesis/39-original.png ./media/pattern/HybridGenesis/4-original.png ./media/pattern/HybridGenesis/40-original.png ./media/pattern/HybridGenesis/41-original.png ./media/pattern/HybridGenesis/42-original.png ./media/pattern/HybridGenesis/43-original.png ./media/pattern/HybridGenesis/44-original.png ./media/pattern/HybridGenesis/45-original.png ./media/pattern/HybridGenesis/46-original.png ./media/pattern/HybridGenesis/47-original.png ./media/pattern/HybridGenesis/48-original.png ./media/pattern/HybridGenesis/49-original.png ./media/pattern/HybridGenesis/5-original.png ./media/pattern/HybridGenesis/50-original.png ./media/pattern/HybridGenesis/51-original.png ./media/pattern/HybridGenesis/52-original.png ./media/pattern/HybridGenesis/53-original.png ./media/pattern/HybridGenesis/54-original.png ./media/pattern/HybridGenesis/55-original.png ./media/pattern/HybridGenesis/56-original.png ./media/pattern/HybridGenesis/57-original.png ./media/pattern/HybridGenesis/58-original.png ./media/pattern/HybridGenesis/59-original.png ./media/pattern/HybridGenesis/6-original.png ./media/pattern/HybridGenesis/60-original.png ./media/pattern/HybridGenesis/61-original.png ./media/pattern/HybridGenesis/62-original.png ./media/pattern/HybridGenesis/63-original.png ./media/pattern/HybridGenesis/64-original.png ./media/pattern/HybridGenesis/65-original.png ./media/pattern/HybridGenesis/66-original.png ./media/pattern/HybridGenesis/67-original.png ./media/pattern/HybridGenesis/68-original.png ./media/pattern/HybridGenesis/69-original.png ./media/pattern/HybridGenesis/7-original.png ./media/pattern/HybridGenesis/70-original.png ./media/pattern/HybridGenesis/71-original.png ./media/pattern/HybridGenesis/72-original.png ./media/pattern/HybridGenesis/73-original.png ./media/pattern/HybridGenesis/74-original.png ./media/pattern/HybridGenesis/75-original.png ./media/pattern/HybridGenesis/76-original.png ./media/pattern/HybridGenesis/77-original.png ./media/pattern/HybridGenesis/78-original.png ./media/pattern/HybridGenesis/79-original.png ./media/pattern/HybridGenesis/8-original.png ./media/pattern/HybridGenesis/80-original.png ./media/pattern/HybridGenesis/81-original.png ./media/pattern/HybridGenesis/82-original.png ./media/pattern/HybridGenesis/83-original.png ./media/pattern/HybridGenesis/84-original.png ./media/pattern/HybridGenesis/85-original.png ./media/pattern/HybridGenesis/86-original.png ./media/pattern/HybridGenesis/87-original.png ./media/pattern/HybridGenesis/88-original.png ./media/pattern/HybridGenesis/89-original.png ./media/pattern/HybridGenesis/9-original.png ./media/pattern/HybridGenesis/90-original.png ./media/pattern/HybridGenesis/91-original.png ./media/pattern/HybridGenesis/92-original.png ./media/pattern/HybridGenesis/93-original.png ./media/pattern/HybridGenesis/94-original.png ./media/pattern/HybridGenesis/95-original.png ./media/pattern/HybridGenesis/96-original.png ./media/pattern/HybridGenesis/97-original.png ./media/pattern/Squidfingers/0-original.png ./media/pattern/Squidfingers/1-original.png ./media/pattern/Squidfingers/10-original.png ./media/pattern/Squidfingers/100-original.png ./media/pattern/Squidfingers/101-original.png ./media/pattern/Squidfingers/102-original.png ./media/pattern/Squidfingers/103-original.png ./media/pattern/Squidfingers/104-original.png ./media/pattern/Squidfingers/105-original.png ./media/pattern/Squidfingers/106-original.png ./media/pattern/Squidfingers/107-original.png ./media/pattern/Squidfingers/108-original.png ./media/pattern/Squidfingers/109-original.png ./media/pattern/Squidfingers/11-original.png ./media/pattern/Squidfingers/110-original.png ./media/pattern/Squidfingers/111-original.png ./media/pattern/Squidfingers/112-original.png ./media/pattern/Squidfingers/113-original.png ./media/pattern/Squidfingers/114-original.png ./media/pattern/Squidfingers/115-original.png ./media/pattern/Squidfingers/116-original.png ./media/pattern/Squidfingers/117-original.png ./media/pattern/Squidfingers/118-original.png ./media/pattern/Squidfingers/119-original.png ./media/pattern/Squidfingers/12-original.png ./media/pattern/Squidfingers/120-original.png ./media/pattern/Squidfingers/121-original.png ./media/pattern/Squidfingers/122-original.png ./media/pattern/Squidfingers/123-original.png ./media/pattern/Squidfingers/124-original.png ./media/pattern/Squidfingers/125-original.png ./media/pattern/Squidfingers/126-original.png ./media/pattern/Squidfingers/127-original.png ./media/pattern/Squidfingers/128-original.png ./media/pattern/Squidfingers/129-original.png ./media/pattern/Squidfingers/13-original.png ./media/pattern/Squidfingers/130-original.png ./media/pattern/Squidfingers/131-original.png ./media/pattern/Squidfingers/132-original.png ./media/pattern/Squidfingers/133-original.png ./media/pattern/Squidfingers/134-original.png ./media/pattern/Squidfingers/135-original.png ./media/pattern/Squidfingers/136-original.png ./media/pattern/Squidfingers/137-original.png ./media/pattern/Squidfingers/138-original.png ./media/pattern/Squidfingers/139-original.png ./media/pattern/Squidfingers/14-original.png ./media/pattern/Squidfingers/140-original.png ./media/pattern/Squidfingers/141-original.png ./media/pattern/Squidfingers/142-original.png ./media/pattern/Squidfingers/143-original.png ./media/pattern/Squidfingers/144-original.png ./media/pattern/Squidfingers/145-original.png ./media/pattern/Squidfingers/146-original.png ./media/pattern/Squidfingers/147-original.png ./media/pattern/Squidfingers/148-original.png ./media/pattern/Squidfingers/149-original.png ./media/pattern/Squidfingers/15-original.png ./media/pattern/Squidfingers/150-original.png ./media/pattern/Squidfingers/151-original.png ./media/pattern/Squidfingers/152-original.png ./media/pattern/Squidfingers/153-original.png ./media/pattern/Squidfingers/154-original.png ./media/pattern/Squidfingers/155-original.png ./media/pattern/Squidfingers/156-original.png ./media/pattern/Squidfingers/157-original.png ./media/pattern/Squidfingers/158-original.png ./media/pattern/Squidfingers/159-original.png ./media/pattern/Squidfingers/16-original.png ./media/pattern/Squidfingers/17-original.png ./media/pattern/Squidfingers/18-original.png ./media/pattern/Squidfingers/19-original.png ./media/pattern/Squidfingers/2-original.png ./media/pattern/Squidfingers/20-original.png ./media/pattern/Squidfingers/21-original.png ./media/pattern/Squidfingers/22-original.png ./media/pattern/Squidfingers/23-original.png ./media/pattern/Squidfingers/24-original.png ./media/pattern/Squidfingers/25-original.png ./media/pattern/Squidfingers/26-original.png ./media/pattern/Squidfingers/27-original.png ./media/pattern/Squidfingers/28-original.png ./media/pattern/Squidfingers/29-original.png ./media/pattern/Squidfingers/3-original.png ./media/pattern/Squidfingers/30-original.png ./media/pattern/Squidfingers/31-original.png ./media/pattern/Squidfingers/32-original.png ./media/pattern/Squidfingers/33-original.png ./media/pattern/Squidfingers/34-original.png ./media/pattern/Squidfingers/35-original.png ./media/pattern/Squidfingers/36-original.png ./media/pattern/Squidfingers/37-original.png ./media/pattern/Squidfingers/38-original.png ./media/pattern/Squidfingers/39-original.png ./media/pattern/Squidfingers/4-original.png ./media/pattern/Squidfingers/40-original.png ./media/pattern/Squidfingers/41-original.png ./media/pattern/Squidfingers/42-original.png ./media/pattern/Squidfingers/43-original.png ./media/pattern/Squidfingers/44-original.png ./media/pattern/Squidfingers/45-original.png ./media/pattern/Squidfingers/46-original.png ./media/pattern/Squidfingers/47-original.png ./media/pattern/Squidfingers/48-original.png ./media/pattern/Squidfingers/49-original.png ./media/pattern/Squidfingers/5-original.png ./media/pattern/Squidfingers/50-original.png ./media/pattern/Squidfingers/51-original.png ./media/pattern/Squidfingers/52-original.png ./media/pattern/Squidfingers/53-original.png ./media/pattern/Squidfingers/54-original.png ./media/pattern/Squidfingers/55-original.png ./media/pattern/Squidfingers/56-original.png ./media/pattern/Squidfingers/57-original.png ./media/pattern/Squidfingers/58-original.png ./media/pattern/Squidfingers/59-original.png ./media/pattern/Squidfingers/6-original.png ./media/pattern/Squidfingers/60-original.png ./media/pattern/Squidfingers/61-original.png ./media/pattern/Squidfingers/62-original.png ./media/pattern/Squidfingers/63-original.png ./media/pattern/Squidfingers/64-original.png ./media/pattern/Squidfingers/65-original.png ./media/pattern/Squidfingers/66-original.png ./media/pattern/Squidfingers/67-original.png ./media/pattern/Squidfingers/68-original.png ./media/pattern/Squidfingers/69-original.png ./media/pattern/Squidfingers/7-original.png ./media/pattern/Squidfingers/70-original.png ./media/pattern/Squidfingers/71-original.png ./media/pattern/Squidfingers/72-original.png ./media/pattern/Squidfingers/73-original.png ./media/pattern/Squidfingers/74-original.png ./media/pattern/Squidfingers/75-original.png ./media/pattern/Squidfingers/76-original.png ./media/pattern/Squidfingers/77-original.png ./media/pattern/Squidfingers/78-original.png ./media/pattern/Squidfingers/79-original.png ./media/pattern/Squidfingers/8-original.png ./media/pattern/Squidfingers/80-original.png ./media/pattern/Squidfingers/81-original.png ./media/pattern/Squidfingers/82-original.png ./media/pattern/Squidfingers/83-original.png ./media/pattern/Squidfingers/84-original.png ./media/pattern/Squidfingers/85-original.png ./media/pattern/Squidfingers/86-original.png ./media/pattern/Squidfingers/87-original.png ./media/pattern/Squidfingers/88-original.png ./media/pattern/Squidfingers/89-original.png ./media/pattern/Squidfingers/9-original.png ./media/pattern/Squidfingers/90-original.png ./media/pattern/Squidfingers/91-original.png ./media/pattern/Squidfingers/92-original.png ./media/pattern/Squidfingers/93-original.png ./media/pattern/Squidfingers/94-original.png ./media/pattern/Squidfingers/95-original.png ./media/pattern/Squidfingers/96-original.png ./media/pattern/Squidfingers/97-original.png ./media/pattern/Squidfingers/98-original.png ./media/pattern/Squidfingers/99-original.png".split(" ");
    a.style.add = function(h, d, g) {
        "string" === typeof h && (h = [h]);
        var b = a.style[d + "Hash"],
            e = a.style[d + "Official"];
        d = a.style[d];
        if (h && h.length) for (var f = 0; f < h.length; f++) {
            var c = h[f];
            if (c) {
                var k = c.dna || c,
                    m = a.style.hashDNA(k);
                b[m] || (c.dna && (e[m] = !0), b[m] = !0, g ? d.unshift(k) : d.push(k))
            }
        }
    };
    a.style.addFromBlob = function(h, d) {
        a.convert.blobToText(h, function(g) {
            0 === g.indexOf("GIMP Gradient") ? a.style.add(Color.open.GGR(g).join(","), "gradient", !0) : 0 === g.indexOf("GIMP Palette") ? a.style.add(Color.open.GPL(g), "color", !0) : a.feature.debug && console.log("un-handled method", h);
            d && d()
        })
    };
    a.style.loadDefault = function() {
        !a.style.color && a.style.defaultColors && (a.style.reset("color"), a.style.add(a.style.defaultColors, "color"));
        !a.style.gradient && a.style.defaultGradients && (a.style.reset("gradient"), a.style.add(a.style.defaultGradients, "gradient"));
        !a.style.pattern && a.style.defaultPatterns && (a.style.reset("pattern"), a.style.add(a.style.defaultPatterns, "pattern"))
    };
    a.style.reset = function(h) {
        h ? (a.style[h + "Official"] = {}, a.style[h + "Hash"] = {}, a.style[h] = [], "pattern" === h && (a.style.patternCtx = {})) : (a.style.gradientOfficial = {}, a.style.gradientHash = {}, a.style.gradient = [], a.style.colorOfficial = {}, a.style.colorHash = {}, a.style.color = [], a.style.patternCtx = {}, a.style.patternOfficial = {}, a.style.patternHash = {}, a.style.pattern = [])
    };
    a.style.hashDNA = function(a) {
        if (a && a.toLowerCase) return a = a.toLowerCase().split("#").join(""), a = Math.abs(sketch.util.createHash(a)).toString(16).substr(0, 6), STRING.rpad(a, "0", 6)
    };
    a.style.generateColorBlock = function() {
        var a = {
                Cyan: [12, 6, 9.7],
                Azure: [33, 6.9, 9.2],
                Indigo: [62, 9, 8.6],
                Purple: [92, 6, 9],
                Pink: [150, 8, 9],
                Red: [180, 10, 9],
                Orange: [196, 7.7, 9.7],
                Orange3: [224, 6.2, 10],
                Yellow: [234, 4.7, 11],
                Green: [261, 11, 9.5]
            }, d = 0,
            g;
        for (g in a) d++;
        for (var b = 0, e, f = [], c = 1; 8 >= c; c++) for (g in a) {
            if (1 === c) e = sketch.color.space.HSL_RGB({
                H: 0,
                S: 0,
                L: 100 - 100 * (b / (d - 1))
            }), b++;
            else {
                n = c - 1;
                e = a[g];
                var k = Math.min(1, n / e[1]),
                    m = Math.min(1, 1 - n / e[2]);
                e = sketch.color.space.HSI_RGB({
                    H: (e[0] + 180) % 360,
                    S: 150 * k,
                    I: 250 * m
                })
            }
            f.push(sketch.color.space(e, "RGB>HEX24>W3"))
        }
        return f
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.lib && (sketch.lib = {});
(function(a) {
    (function() {
        for (var h = "template stamp text clipart image color gradient texture".split(" "), d = 0; d < h.length; d++) {
            var g = h[d];
            (a.lib[g] = a.lib[g] || {}).meta = {}
        }
    })();
    a.lib.setData = function(h, d) {
        if (d.data || d.official) {
            var g = a.lib[h],
                b = {};
            d.reset && (g.tree = d.data ? {} : g.defaultTree || {});
            new sketch.util.Queue({
                items: d,
                flatten: !0,
                oncomplete: function() {
                    for (var e in g.tree) b[e] || (b[e] = g.tree[e]);
                    g.tree = b;
                    a.lib.init(h);
                    a.ui.buildConfigure(null, !0)
                },
                next: function(e, f, c) {
                    if ("reset" === f) return this.next();
                    if ("defaultValue" === f) return g.defaultItem = e, this.next();
                    c = e;
                    c.data && (c = c.data);
                    for (var d = 0; d < c.length; d++) {
                        var m = c[d];
                        "string" === typeof m && (m = {
                            filepath: m,
                            name: STRING.basename(m),
                            category: e.category || "Unknown"
                        });
                        "undefined" === typeof m.name && (m.name = STRING.basename(m.filepath));
                        if ("undefined" === typeof m.id) {
                            var l = (new Date).getTime();
                            m.id = m.name.replace(this.rxAlphaNumeric, "") + l
                        }
                        l = m.category || e.category || "Unknown";
                        (b[l] || (b[l] = [])).push(m)
                    }
                    c = a.scene.copyRules(e, {});
                    g.meta[e.category || f] = c;
                    this.next()
                }
            })
        }
    };
    a.lib.setClipartDefaultValue = function(h) {
        var d = a.lib.clipart;
        if (h = h || d.defaultItem) h = 0 === h.indexOf("./") ? h : d.path + "/" + h, delete a.toolkit.media.style.render, a.toolkit.media.style.src = h, a.configure.tools.clipart.src = h
    };
    a.lib.setClipartData = function(h) {
        h && (a.lib.setData("clipart", h), a.lib.setClipartDefaultValue(h.defaultValue))
    };
    a.lib.setStampDefaultValue = function(h) {
        var d = a.lib.clipart;
        h = h || d.defaultItem;
        a.configure.tools.stamp.src = h
    };
    a.lib.setStampData = function(h) {
        h && (a.lib.setData("stamp", h), a.lib.setStampDefaultValue(h.defaultValue))
    };
    a.lib.setTextData = function(h) {
        h && (a.lib.setData("text", h), h.defaultValue && (a.configure.tools.text.fontFamily = h.defaultValue))
    };
    a.lib.setPaletteData = function(h) {
        var d = function(d) {
            var b = h[d];
            if (b) {
                var e = b.official,
                    f = b.data;
                !1 === b.enabled ? (a.feature.palette[d] = !1, dom.setCSS("." + d + "-indicator", "display", "none")) : (a.feature.palette[d] = !0, dom.setCSS("." + d + "-indicator", "display", ""));
                if (e || f) {
                    if (e) {
                        for (var c = [], k = 0; k < e.length; k++) c.push({
                            dna: e[k],
                            status: "official"
                        });
                        e = c.concat(f)
                    } else e = f;
                    !0 !== b.reset && (e = e.concat(a.style[d]));
                    if (!e.length) return;
                    a.style.reset(d);
                    a.style.add(e, d)
                }
                b.defaultValue && (a.style.fill[d] = b.defaultValue)
            }
        };
        d("color");
        d("gradient");
        d("pattern");
        a.palette.rebuild()
    };
    a.lib.init = function(h) {
        var d = a.lib[h];
        d.meta = d.meta || {};
        d.path = d.path || "";
        d.type = h;
        d.defaultTree = d.defaultTree || sketch.util.clone(d.tree);
        d.mediaDir = d.path.substr(0, d.path.lastIndexOf("/"));
        d.byId = {};
        d.byName = {};
        d.byPath = {};
        d.paths = [];
        d.getEntry = function(b) {
            var c = d.byPath[b];
            if (c) return c;
            b = a.assets.getItem(b);
            return d.byPath[b.src]
        };
        var g = function(a, b) {
            for (var e = d.tree[b], g = 0; g < e.length; g++) {
                var l = e[g],
                    p = l.filepath || "";
                l.type = h;
                l.filename = STRING.basename(p);
                0 === p.indexOf(".") ? (l.thumbnail = p.replace("/media/", "/media/thumb/").replace(".svg", ".png"), l.filepath = p) : "text" === h ? (l.thumbnail = d.mediaDir + "/thumb/font/" + l.name + ".png", l.filepath = p) : (l.thumbnail = d.mediaDir + "/thumb/" + h + "/" + p.replace(".svg", ".png"), l.filepath = d.path + "/" + p);
                l.folder = b;
                l.id && (d.byId[l.id] = l);
                d.byName[l.name] = l;
                d.byPath[l.filepath] = l;
                d.paths.push(l)
            }
        }, b = function(a, b, e) {
            switch (e) {
                default: return d.tree[b].sort(function(a, b) {
                    return a.name.localeCompare(b.name)
                })
            }
        }, e;
        for (e in d.tree) b(h, e), g(h, e)
    };
    a.lib.setTemplateData = function(h) {
        h && a.lib.setData("template", sketch.util.clone(h))
    };
    a.lib.template.open = function(h, d, g) {
        h = h || a.lib.template.defaultItem;
        g = "boolean" === typeof g ? g : !0;
        var b = a.lib.template.byId[h] || a.lib.template.byName[h];
        if (!b) return console.log("missing template");
        g && a.reset();
        var e = 1,
            f = function() {
                b.alert && (a.feature.alert = b.alert);
                var f = 0;
                if (b.clip) {
                    var g = new sketch.vector.BBox(c.path),
                        l = g.x2 - g.x1,
                        g = g.y2 - g.y1,
                        p = a.util.getMetrics(a.$(".icon-powernib")),
                        f = p.height - (p.padding[1] + p.padding[3]) / 2,
                        p = a.project.getViewport();
                    e = Math.min(p.width / l, (p.height - f) / g) - 0.05;
                    a.setClip(b.clip, e)
                }
                a.project.setSize(l * e, g * e);
                b.background && a.setBackground(b.background);
                var h = a.tool.type,
                    l = sketch.util.clone(b.data);
                a.scene.add({
                    data: l,
                    scale: e,
                    onload: function() {
                        a.toolkit.setTool(h);
                        a.scene.deselectAll();
                        a.orient.reset().render();
                        a.orient.setPan(0,
                            f / 2);
                        a.lib.setClipartDefaultValue();
                        d && d(e)
                    }
                })
            };
        if (b.clip) {
            var c = b.clip;
            "string" === typeof c.path ? (c.path = sketch.vector.SVGPath.toVOBPath(path), f()) : "string" === typeof c.src ? new a.vector.SVG({
                src: c.src,
                onload: function(a) {
                    c.path = a.vob.childNodes[0].data;
                    f()
                }
            }) : c.path && f()
        } else f()
    };
    a.setClip = function(h, d) {
        h.path ? a.setClipPath(h, d) : a.setClipRect(h, d)
    };
    a.setClipRect = function(h, d) {
        a.project.clip = h
    };
    a.setClipPath = function(h, d) {
        var g = new sketch.vector.Transform;
        g.scale(d, d);
        g.flatten(h.path);
        a.project.clip = {};
        a.project.clip.path = h.path;
        a.project.clip.style = h.style
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.lib && (sketch.lib = {});
sketch = function(a) {
    sketch.util.mergeObject({
        defaultCategory: "tutorial",
        path: "./media/template",
        thumbnail: {
            _width: 44,
            _height: 44,
            columns: 4,
            rows: 4,
            padding: 4
        },
        tree: {
            yourFiles: [],
            tutorial: [{
                name: "sketch",
                id: "tutorial-0",
                category: "tutorial",
                filepath: "tutorial/sketchpad/manifest.json",
                background: "notebook",
                data: [{
                    type: "text",
                    content: "Welcome to Sketchpad!",
                    placeholder: "enter text here...",
                    fillStyle: "#001D54",
                    fontStyle: "italic",
                    fontSize: 48,
                    fontWeight: "bold",
                    fontFamily: "Mystery Quest",
                    textDecoration: "underline",
                    textTransform: "none",
                    letterSpacing: 0,
                    bbox: {
                        x: 120,
                        y: 100,
                        rotate: -15
                    }
                }, {
                    zIndex: 1,
                    bbox: {
                        x: 322,
                        y: 218,
                        width: 125,
                        height: 134,
                        padding: 10,
                        units: "objectBoundingBox",
                        viewBox: [0, 0, 125, 134],
                        scale: {
                            x: 1,
                            y: 1
                        },
                        rotate: 0
                    },
                    finger: "0:A",
                    type: "streamer",
                    data: [{
                        cmd: "M",
                        beginPath: !0,
                        interval: 76,
                        x: 1,
                        y: 28
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 29
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 34
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 41
                    }, {
                        cmd: "L",
                        x: 2,
                        y: 51
                    }, {
                        cmd: "L",
                        x: 5,
                        y: 58
                    }, {
                        cmd: "L",
                        x: 10,
                        y: 70
                    }, {
                        cmd: "L",
                        x: 17,
                        y: 80
                    }, {
                        cmd: "L",
                        x: 25,
                        y: 91
                    }, {
                        cmd: "L",
                        x: 30,
                        y: 96
                    }, {
                        cmd: "L",
                        x: 37,
                        y: 102
                    }, {
                        cmd: "L",
                        x: 43,
                        y: 105
                    }, {
                        cmd: "L",
                        x: 47,
                        y: 107
                    }, {
                        cmd: "L",
                        x: 53,
                        y: 110
                    }, {
                        cmd: "L",
                        x: 59,
                        y: 111
                    }, {
                        cmd: "L",
                        x: 66,
                        y: 113
                    }, {
                        cmd: "L",
                        x: 72,
                        y: 114
                    }, {
                        cmd: "L",
                        x: 77,
                        y: 114
                    }, {
                        cmd: "L",
                        x: 82,
                        y: 113
                    }, {
                        cmd: "L",
                        x: 86,
                        y: 107
                    }, {
                        cmd: "L",
                        x: 90,
                        y: 97
                    }, {
                        cmd: "L",
                        x: 92,
                        y: 91
                    }, {
                        cmd: "L",
                        x: 96,
                        y: 79
                    }, {
                        cmd: "L",
                        x: 98,
                        y: 71
                    }, {
                        cmd: "L",
                        x: 100,
                        y: 61
                    }, {
                        cmd: "L",
                        x: 102,
                        y: 54
                    }, {
                        cmd: "L",
                        x: 104,
                        y: 41
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 33
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 23
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 16
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 12
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 10
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 8
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 7
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 6
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 5
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 3
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 1
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 0
                    }, {
                        cmd: "z",
                        x: 105,
                        y: 0
                    }],
                    interval: 76,
                    seed: 477099919,
                    composite: "source-over",
                    opacity: 100,
                    spacing: {
                        min: 1,
                        max: 50
                    },
                    fill: {
                        type: "color",
                        color: "#e53939",
                        noise: !1,
                        mode: "linear",
                        gradient: "0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e"
                    },
                    dataHash: -13677187454
                }, {
                    zIndex: 2,
                    bbox: {
                        x: 357,
                        y: 196,
                        width: 20,
                        height: 73,
                        padding: 10,
                        units: "objectBoundingBox",
                        viewBox: [0, 0, 20, 73],
                        scale: {
                            x: 1,
                            y: 1
                        },
                        rotate: 0
                    },
                    finger: "0:A",
                    type: "streamer",
                    data: [{
                        cmd: "M",
                        beginPath: !0,
                        interval: 116,
                        x: 0,
                        y: 0
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 1
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 11
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 26
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 38
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 42
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 47
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 53
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 52
                    }, {
                        cmd: "z",
                        x: 0,
                        y: 52
                    }],
                    interval: 116,
                    seed: 781402420,
                    composite: "source-over",
                    opacity: 100,
                    spacing: {
                        min: 1,
                        max: 50
                    },
                    fill: {
                        type: "color",
                        color: "#e53939",
                        noise: !1,
                        mode: "linear",
                        gradient: "0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e"
                    },
                    dataHash: -18402486422
                }, {
                    zIndex: 3,
                    bbox: {
                        x: 387,
                        y: 196,
                        width: 20,
                        height: 74,
                        padding: 10,
                        units: "objectBoundingBox",
                        viewBox: [0, 0, 20, 74],
                        scale: {
                            x: 1,
                            y: 1
                        },
                        rotate: 0
                    },
                    finger: "0:A",
                    type: "streamer",
                    data: [{
                        cmd: "M",
                        beginPath: !0,
                        interval: 125,
                        x: 0,
                        y: 0
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 1
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 8
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 19
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 30
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 39
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 47
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 52
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 54
                    }, {
                        cmd: "z",
                        x: 0,
                        y: 54
                    }],
                    interval: 125,
                    seed: 170050474,
                    composite: "source-over",
                    opacity: 100,
                    spacing: {
                        min: 1,
                        max: 50
                    },
                    fill: {
                        type: "color",
                        color: "#e53939",
                        noise: !1,
                        mode: "linear",
                        gradient: "0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e"
                    },
                    dataHash: -3065061597
                }]
            }]
        }
    }, a.lib.template);
    a.lib.init("template");
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch.Selection = function(a) {
    a.render && (this.render = a.render.clean);
    this.remove = function(h) {
        a.scene.removeSelection(this.items, h);
        return this
    };
    this.idx = this.id = void 0;
    this.length = 0;
    this.items = {};
    this.select = function(h) {
        var d = a.scene.data[h];
        if (!d) return this;
        this.items[h] || (this.items[h] = !0, ++this.length);
        1 === this.length ? (this.id = d.id, this.idx = h) : this.idx = this.id = void 0;
        return this
    };
    this.setData = function(a) {
        this.length = 0;
        for (var d in a) this.select(d);
        return this
    };
    this.deselect = function(a) {
        this.items[a] && (delete this.items[a], --this.length);
        return this
    };
    this.reset = this.deselectAll = function() {
        this.idx = this.id = void 0;
        this.items = {};
        this.length = 0;
        return this
    };
    this.getLength = function() {
        var a = 0,
            d = this.items,
            g;
        for (g in d) a++;
        return a
    };
    this.toObjects = function(h, d) {
        h = h || this.items;
        var g = [],
            b;
        for (b in h) g.push(a.scene.data[b]);
        return d ? a.scene.clone(g) : g
    };
    this.fromObjects = function(a) {
        for (var d = {}, g = 0, b = a.length; g < b; g++) d[a[g].zIndex] = !0;
        return d
    };
    this.transform = new Transform(a);
    this.rotate = function(a, d) {
        return this.transform({
                rotate: a
            },
            d)
    };
    this.scale = function(a, d, g) {
        return this.transform({
            scale: {
                x: a,
                y: d
            }
        }, g)
    };
    this.move = this.translate = function(a, d, g) {
        return this.transform({
            translate: {
                x: a,
                y: d
            }
        }, g)
    };
    return this
};
var Transform = function(a) {
    var h, d, g, b, e, f, c;
    return function(k, m, l) {
        a.PERF = a.perf();
        var p = k.rotate,
            r = k.scale,
            q = k.translate,
            u = isFinite(p),
            v = "undefined" !== typeof r,
            s = "undefined" !== typeof q,
            x = a.scene,
            w = x.data,
            A = k.abs || k.absolute,
            y = "move" === m || !m,
            z = "record" === m || "up" === m || !m;
        "cache" !== m && "down" !== m && m || (c = f = e = b = g = d = h = void 0, h = 0, d = k.origin || x.getBoundingOrigin({
            fromSelection: !0,
            fromHovered: !0
        }), u && (g = 0), v && (e = b = 1), s && (c = f = 0));
        if (y) {
            if (u) {
                if (0 === p && !v && !s) return;
                g += p
            }
            if (v) {
                if (1 === r.x && 1 === r.y && !u && !s) return;
                isFinite(r) && (r = {
                    x: r,
                    y: r
                });
                isFinite(r.y) || isFinite(r.x) ? isFinite(r.y) ? isFinite(r.x) || (r.x = r.y) : r.y = r.x : (r.x = 1, r.y = 1);
                b *= r.x;
                e *= r.y
            }
            if (s) {
                if (0 === q.x && 0 === q.y && !u && !v) return;
                f += q.x;
                c += q.y
            }
        }
        if (Array.isArray(k.items)) {
            m = {};
            for (var B = 0; B < k.items.length; B++) {
                var D = a.scene.dataById[k.items[B]];
                D && (m[D.zIndex] = !0)
            }
            k.items = m
        }
        m = [];
        var B = d,
            D = k.items || this.items,
            E;
        for (E in D) {
            D = w[E];
            k = D.bbox;
            var G = a.feature[D.type] || a.feature.tools;
            if (p && y) if (!1 === (D.rotatable || G.rotatable)) D.dirtyControl = !0;
            else {
                if (A) k.rotate = p;
                else {
                    var J = B.x - k.width / 2 * k.scale.x,
                        C = B.y - k.height / 2 * k.scale.y,
                        O = p * a.util.DEG_RAD,
                        N = Math.cos(O) * (k.x - J) - Math.sin(O) * (k.y - C) + J,
                        J = Math.sin(O) * (k.x - J) + Math.cos(O) * (k.y - C) + C;
                    k.x = N;
                    k.y = J;
                    k.rotate += p
                }
                D.dirtyTransform = !0;
                D.dirtyControl = !0;
                D.visible = void 0;
                h = !0
            }
            r && (k.scaleCache = k.scaleCache || {
                x: 1,
                y: 1
            }, y && (!1 === (D.scalable || G.scalable) ? D.dirtyControl = !0 : (A ? (k.scale.x = r.x, k.scale.y = r.y) : (N = (B.y - k.y) * r.y, k.x = B.x - (B.x - k.x) * r.x, k.y = B.y - N, k.scale.x *= r.x, k.scale.y *= r.y, k.scaleCache.x *= r.x, k.scaleCache.y *= r.y),
                D.dirtyTransform = !0, D.dirtyControl = !0, D.visible = void 0, x.constrain(D), h = !0)), z && (D.dirty = !0, delete k.scaleCache));
            q && y && (!1 === (D.rotatable || G.rotatable) ? D.dirtyControl = !0 : (A ? (k.x = q.x, k.y = q.y) : (k.x += q.x, k.y += q.y), D.dirtyTransform = !0, D.dirtyControl = !0, D.visible = void 0, x.constrain(D), h = !0));
            h && (z && (r && (D.dirty = !0), D.dirtyControl = !0), m.push(D.id))
        }
        if (!1 === h) return this;
        l = a.dataChannel && a.feature.stream.sketchLive && !l;
        a.history && z && (z = {
            cmd: "transform"
        }, z.origin = B, u && (z.rotate = g), v && (z.scale = {
            x: b,
            y: e
        }),
            s && (z.translate = {
                x: f,
                y: c
            }), a.history.store(z, m), a.on.transform && a.on.transform(z, m), a.on.rotate && u && a.on.rotate(z, m), a.on.scale && v && a.on.scale(z, m), a.on.move && s && a.on.move(z, m));
        l && (z = {}, z.items = m, u && (z.rotate = g), v && (z.scale = {
            x: b,
            y: e
        }), s && (z.translate = {
            x: f,
            y: c
        }), a.dataChannel.send(["scene.transform", z]));
        a.area && a.area.updateBBox();
        this.render("root.scene.transform");
        return this
    }
};
sketch.Scene = function(a) {
    var h = this;
    a.render && (this.render = a.render.clean);
    this.push = function(a) {
        this.data.push(a);
        this.dataById[a.id] = a
    };
    this.setData = function(a) {
        this.data = [];
        this.dataById = {};
        for (var b = 0; b < a.length; b++) this.push(a[b])
    };
    this.add = a.place;
    this.addObject = function(b, c, f) {
        c = c || {};
        if (!1 === this.ensureMaxCopies(b)) return h.deselectAll(), this;
        b = a.util.mergeObject(b, {
            id: this.createId(null, f),
            zIndex: this.data.length,
            bbox: {
                rotate: 0,
                scale: {
                    x: 1,
                    y: 1
                }
            }
        });
        f = b.bbox;
        "undefined" === typeof f.viewBox && (f.viewBox = [0, 0, f.width, f.height]);
        c.canvasCtx && (b.canvasCtx = c.canvasCtx);
        c.canvas && (b.canvas = c.canvas);
        this.copyRules(c, b);
        this.ensureStickyIndex(b);
        this.push(b);
        this.sort();
        this.reindex();
        f = this.getById(b.id).zIndex;
        this.selection.id = b.id;
        this.selection.idx = f;
        this.selection.items[f] = !0;
        this.selection.length++;
        this.updateSelectionInfo();
        a.toolkit.updateToolkit(b);
        c.src && c.src !== b.src ? (b.src = c.src, a.assets.add({
            type: b.type,
            src: c.src,
            onload: function(c) {
                b.src = c;
                a.toolkit.loadResource(b, function(a) {
                    h.fireOnActionAdd(a)
                });
                if (a.peer && a.peer.sendFile) {
                    var f = a.assets.getAsBlob(c);
                    a.peer.sendFile(f, c)
                }
            }
        })) : a.toolkit.loadResource(b, function(a) {
            h.fireOnActionAdd(a)
        });
        return b
    };
    this.removeById = function(a, b) {
        var c = this.getById(a);
        c && this.removeByIndex(c.zIndex, b);
        return this
    };
    this.remove = this.removeByIndex = function(b, c) {
        c = !1 !== c;
        switch (typeof b) {
            case "undefined":
                return this;
            case "number":
                var f = {};
                f[b] = !0;
                b = f;
                break;
            default:
                b = a.util.clone(b)
        }
        for (var f = {}, e = [], d = [], g = this.selection.items, k = this.data.length, l = 0; l < k; l++) {
            var m = this.data[l];
            b[l] ? (d.push(this.clone(m)), a.render.cache.clean(m)) : (e.push(m), f[m.id] = m);
            g[m.zIndex] && (delete g[m.zIndex], this.selection.length--)
        }
        c && (this.fireOnActionRemove(b), a.history && a.history.store(d, "remove"));
        this.data = e;
        this.dataById = f;
        this.reindex();
        this.updateSelectionInfo();
        return this
    };
    this.removeByName = function(a, b) {
        var c = this.getByName(a);
        c.length && (c = this.selection.fromObjects(c), this.removeByIndex(c, b));
        return this
    };
    this.removeSelection = function(a, b) {
        a = a || this.selection.items;
        this.removeByIndex(a,
            b);
        this.deselectAll();
        return this
    };
    this.removeAll = function(a) {
        var b = this.selection.fromObjects(this.data);
        this.removeByIndex(b, a);
        this.deselectAll();
        return this
    };
    this.clear = function(b) {
        b = !1 !== b;
        a.active.canvas.width = a.active.canvas.width;
        a.ctx.clearRect(0, 0, a.ctx.canvas.width, a.ctx.canvas.height);
        this.removeAll(b);
        return this
    };
    this.reset = function(b) {
        this.deselectAll();
        this.data = [];
        this.dataById = {};
        a.history && a.history.resetActionHistory();
        a.render && a.render("root.scene.reset");
        if (b || a.fromServer) return this;
        a.dataChannel && (a.feature.stream.sketch && !b) && a.dataChannel.send(["scene.reset"]);
        return this
    };
    this.deselectById = function(a) {
        (a = this.getById(a)) && this.deselectByIndex(a.zIndex);
        return this
    };
    this.deselect = this.deselectByIndex = function(a, b) {
        "undefined" === typeof a && (a = this.selection.idx);
        if ("object" === typeof a) for (var c = 0; c < a.length; c++) this.deselect(a[c], !0);
        else {
            this.selection.items[a] && (delete this.selection.items[a], this.selection.length--);
            if (a === this.selection.idx) {
                if (1 === this.selection.length) return this;
                this.selection.id = void 0;
                this.selection.idx = void 0;
                this.controls = []
            }
            b || this.fireOnDeselect()
        }
        return this
    };
    this.deselectByName = function(a) {
        a = this.getByName(a);
        a.length && (a = this.selection.fromObjects(a), this.deselectByIndex(a));
        return this
    };
    this.deselectAll = function() {
        var b = a.util.clone(this.selection.items);
        a.area && a.area.hide();
        this.selection.reset();
        this.controls = [];
        this.fireOnDeselect(b);
        return this
    };
    this.selectById = function(a, b) {
        var c = this.getById(a);
        c && this.selectByIndex(c.zIndex, b);
        return this
    };
    this.select = this.selectByIndex = function(b, c, f) {
        c = !1 !== c;
        if (!a.feature.vector.edit) return this;
        if ("object" === typeof b) if (c && this.deselectAll(), b.length) if (1 === b.length) this.selectByIndex(b[0], c, !0);
        else for (var e = 0; e < b.length; e++) this.selectByIndex(b[e], !1, !0);
        else for (e in b) this.selectByIndex(e, !1, !0);
        else if (this.data[b]) {
            e = this.data[b];
            if (!1 === e.selectable) return this;
            e.dirtyControl = !0;
            if (c) {
                c = e.toolkit;
                a.tool.type !== e.type && (this.toolkit && (this.toolkit.disable(), delete this.toolkit), "text" === e.type && c && (this.toolkit = c, this.toolkit.enable()));
                if (1 === this.selection.getLength() && this.selection.items[b]) return this.selection.id = e.id, this.selection.idx = b, this.selection.length = 1, this;
                this.deselectAll();
                this.selection.id = e.id;
                this.selection.idx = b;
                this.selection.items[b] = !0;
                this.selection.length = 1;
                this.toConfigure(e);
                a.style && e.fill && (b = e.fill, c = b.type, a.style.apply({
                    paintMethod: "fill",
                    paintType: c,
                    dna: b[c],
                    useColorPicker: !0
                }));
                a.ui.blendSelectMenu && (a.ui.blendSelectMenu.selectedIndex = a.style.blendmodes_idx[e.composite] || 0);
                this.fireOnSelect();
                a.ui.setToolMenu && a.ui.setToolMenu(e.type, !0);
                return this
            }
            if (this.selection.items[b]) return this;
            this.selection.items[b] = !0;
            this.selection.length++;
            if (1 === this.selection.length) return this;
            this.selection.id = void 0;
            this.selection.idx = void 0;
            this.controls = [];
            f || this.fireOnSelect()
        }
        return this
    };
    this.selectByName = function(a, b) {
        var c = this.getByName(a);
        c.length ? (c = this.selection.fromObjects(c), this.selectByIndex(c, b)) : b && this.deselectAll();
        return this
    };
    this.selectAll = function() {
        d();
        return this
    };
    this.selectInverse = function() {
        d(!0);
        return this
    };
    var d = function(b) {
        if (a.feature.vector.edit) {
            var c = h.selection.items,
                f = 0,
                e = h.data,
                d = e.length;
            h.selection.id = void 0;
            h.selection.idx = void 0;
            h.controls = [];
            for (var g = 0; g < d; g++)!1 !== e[g].selectable && (b && c[g] ? delete c[g] : (c[g] = !0, f++));
            h.checkForSingleSelection();
            h.selection.length = f;
            h.fireOnSelect()
        }
    };
    this.getById = function(a) {
        for (var b = this.data, c = 0; c < b.length; c++) if (b[c].id === a) return b[c]
    };
    this.getByIndex = function(a) {
        return this.data[a]
    };
    this.getByName = function(a) {
        for (var b = [], c = this.data, f = 0; f < c.length; f++) {
            var e = c[f];
            "undefined" !== typeof e.name && e.name === a && b.push(e)
        }
        return b
    };
    this.getLast = function() {
        return this.data[this.data.length - 1]
    };
    this.getFocused = function() {
        return this.data[this.selection.idx]
    };
    this.getOneSelected = function() {
        if (isFinite(this.selection.idx)) return this.data[this.selection.idx];
        for (var a in this.selection.items) return this.data[a]
    };
    this.getHovered = function() {
        var a = this.hovered.items,
            b;
        for (b in a) break;
        return this.data[b]
    };
    this.getSelection = function(a, b) {
        return this.selection.toObjects(a, b)
    };
    this.find = function(a, b) {
        b = b || {};
        var c = this.data,
            f = b.selection || this.selection.items,
            e = null,
            d = [],
            g;
        for (g in f) if (e = c[g]) {
            var f = !0,
                k;
            for (k in a) e[k] !== a[k] && (f = !1);
            f && d.push(e)
        }
        return d
    };
    this.traverse = function(b, c, f) {
        var e = this.data;
        if ("function" === typeof b) a.util.each(e, b);
        else {
            f = f || this.selection.items;
            for (var d in f)(f = e[d]) && (f[b] = c)
        }
    };
    this.setDirtyCache = function(a) {
        a = a || this.selection.items;
        for (var b in a) if (a = this.data[b]) a.dirtyCacheForce = !0
    };
    this.setDirtyControl = function(a) {
        a = a || this.selection.items;
        for (var b in a) if (a = this.data[b]) a.dirtyControl = !0
    };
    this.setDirtyTransform = function(a) {
        a = a || this.selection.items;
        for (var b in a) if (a = this.data[b]) a.dirtyTransform = !0
    };
    this.getDataAsAbsolute = function(a) {
        for (var b = [], c = this.data, f = c.length, e = 0; e < f; e++) b.push(this.getActionDataAsAbsolute(c[e]));
        return a ? JSON.stringify(b) : b
    };
    this.getActionDataAsAbsolute = function(b, c) {
        var f = new a.vector.Transform,
            e = b.bbox,
            d = e.x,
            g = e.y,
            k = e.scale.x,
            l = e.scale.y,
            m = e.rotate * a.util.DEG_RAD,
            h = e.width / 2 * k,
            e = e.height / 2 * l,
            z = a.area && a.area.padding || 0,
            B = z * k,
            D = z * l,
            E = b.diameter || 0,
            z = z + z / 2 * (k - 1),
            z = z - E / 2 * (k - 1);
        f.translate(d, g);
        f.translate(h, e);
        m && f.rotate(m);
        f.translate(-h + B - z, - e + D - z);
        f.scale(k, l);
        d = [
            []
        ];
        g = 0;
        if (k = b.data) for (l = k.length, m = 0; m < l; m++) k = b.data[m], h = f.point2d(k.x, k.y), d[g] || (d[g] = []), d[g].push({
            x: h.x,
            y: h.y
        }), "z" === k.cmd && ++g;
        return c ? JSON.stringify(d) : d
    };
    this.getBoundingBox = function(b) {
        b = b || {};
        var c = b.clampToLayer || !1,
            f = b.selection || this.selection.items,
            e = !! b.selection || b.fromSelection || !1,
            d = b.hovered || this.hovered.items,
            g = !! b.hovered || b.fromHovered || !1;
        b = Infinity;
        var k = -Infinity,
            l = Infinity,
            m = -Infinity;
        e || g || (e = !0, f = this.data);
        for (var h = 0; h < this.data.length; h++) {
            var z = this.data[h];
            if (z.trx) {
                var B = z.zIndex,
                    D = d[B];
                if (f[B] && e || D && g) {
                    var E = z.trx,
                        z = z.bbox,
                        D = z.width,
                        G = z.height,
                        z = E.point2d(0, 0),
                        B = E.point2d(D, 0),
                        D = E.point2d(D, G),
                        J = E.point2d(0, G),
                        E = Math.min(z.x, B.x, D.x, J.x) - 1,
                        G = Math.min(z.y, B.y, D.y, J.y) - 1,
                        C = Math.max(z.x, B.x, D.x, J.x) + 2,
                        z = Math.max(z.y, B.y, D.y,
                            J.y) + 2;
                    E < b && (b = E);
                    G < l && (l = G);
                    C > k && (k = C);
                    z > m && (m = z)
                }
            }
        }
        c ? (b = Math.max(0, b), l = Math.max(0, l), c = a.canvas2d.layers.layer0, D = Math.min(c.width - b, k - b), G = Math.min(c.height - l, m - l)) : (D = k - b, G = m - l);
        return {
            x: isFinite(b) ? b : 0,
            y: isFinite(l) ? l : 0,
            width: isFinite(D) ? D : 0,
            height: isFinite(G) ? G : 0,
            units: "objectBoundingBox",
            scale: {
                x: 1,
                y: 1
            }
        }
    };
    this.getBoundingOrigin = function(b) {
        b = b.units ? b : this.getBoundingBox(b);
        var c = a.canvas2d.pixelRatio;
        return "objectBoundingBox" === b.units ? {
            x: (b.x + b.width / 2 * b.scale.x) * c,
            y: (b.y + b.height / 2 * b.scale.y) * c
        } : {
            x: b.x * c,
            y: b.y * c
        }
    };
    this.getPointInCanvas = function(b) {
        var c = a.canvas2d,
            f = c.container,
            e = c.zoom,
            d = e * c.pixelRatio;
        return {
            x: (b.x - a.project.scrollLeft + f.scrollLeft) / e - 1 * c.x / d,
            y: (b.y - a.project.scrollTop + f.scrollTop) / e - 1 * c.y / d
        }
    };
    this.getPointInAction = function(b, c) {
        var f = a.area.padding,
            e = b.bbox,
            d = e.width,
            g = e.height,
            k = e.x,
            l = e.y,
            m = 0,
            h = 0,
            z = 1 / e.scale.x,
            B = 1 / e.scale.y;
        b.placement && b.placement.clone && (l = b.placement.point2d(0, 0), k = l.x, l = l.y);
        "button" !== b.type && (m = f * z, h = f * B);
        var d = d + 2 * m,
            g = g + 2 * h,
            f = e.rotate * a.util.DEG_RAD,
            D = a.vector.Transform.__default.reset();
        D.translate(k + m, l + h);
        f && D.rotate(-f);
        D.translate(-k * z, - l * B);
        D.scale(z, B);
        m = D.point2d(c.x, c.y);
        m.x -= e.left || 0;
        m.y -= e.top || 0;
        m.bbox_x = k;
        m.bbox_y = l;
        m.bbox_width = d;
        m.bbox_height = g;
        return m
    };
    this.fromConfigure = function(a) {
        if (a && a.constructor && !a.childNodes && !a.getImageData) {
            var b = new a.constructor;
            if ("undefined" !== typeof a.value) return a.value;
            for (var c in a) if ("clamp" !== c) {
                var f = a[c];
                b[c] = "object" !== typeof f ? f : f && "undefined" !== typeof f.value ? f.value : this.fromConfigure(f)
            }
            return b
        }
    };
    this.getConfigure = function(b) {
        var c = this.clone(a.configure.tools[b.type]);
        return this.toConfigure(b, c)
    };
    this.toConfigure = function(b, c) {
        c = c || a.configure.tools[b.type];
        for (var f in b) {
            var e = c[f];
            if (e) {
                var d = b[f];
                if ("fill" === f) c[f] = a.util.clone(b[f]);
                else if ("string" === typeof d) c[f] = b[f];
                else switch (e.type) {
                        case "clamp":
                            "number" === typeof d ? e.value = d : d && "undefined" !== typeof d.min && (e.min = d.min, e.max = d.max)
                    }
            }
        }
        return c
    };
    this.detectVisible = function() {
        for (var a = this.data, b = a.length, c = 0; c < b; c++) this.isVisible(a[c])
    };
    this.isVisible = function(b) {
        var c, f, e, d;
        b.dirtyTransform && this.updateTransform(b);
        d = a.canvas2d;
        c = b.bbox;
        var g = c.width,
            k = c.height,
            l = b.trx;
        if (!l || !l.point2d) return !0;
        f = a.project.scrollLeft;
        c = a.project.scrollTop;
        l = l.clone();
        l.matrix.x += f;
        l.matrix.y += c;
        var m = l.point2d(0, 0),
            h = l.point2d(g, 0),
            g = l.point2d(g, k),
            k = l.point2d(0, k),
            z = d.zoom,
            l = (Math.min(m.x, h.x, g.x, k.x) - a.project.x) * z,
            B = (Math.min(m.y, h.y, g.y, k.y) - a.project.y) * z,
            D = Math.max(m.x, h.x, g.x, k.x) * z,
            m = Math.max(m.y, h.y, g.y, k.y) * z,
            E = d.x,
            h = d.y,
            g = d.width,
            k = d.height;
        e = a.area.padding;
        d = a.project.bounds;
        var G = d.width * z + 2 * e,
            J = d.height * z + 2 * e;
        d = -(2 * e) + Math.max(0, f * z - E);
        e = -(2 * e) + Math.max(0, c * z - h);
        f = Math.min(G, g + Math.abs(E)) + f * z;
        c = Math.min(J, k + Math.abs(h)) + c * z;
        b.visible = l < f && D > d && B < c && m > e;
        return b.visible
    };
    this.updateTransform = function(b) {
        var c = b.bbox;
        b.data && !b.dataHash && (b.dataHash = h.createHash(b.data));
        if (b.useStretchToEdge) {
            var f = a.project.width,
                e = a.project.height;
            if (c.width !== f || c.height !== e) c.width = f, c.height = e, c.x = 0, c.y = 0, b.dirtyCacheForce = !0
        }
        if (b.dirtyTransform || b.dirty || !b.placement) {
            b.dirtyControl = !0;
            b.dirtyTransform = !1;
            var d = a.canvas2d,
                e = d.zoom / d.pixelRatio,
                g = a.project.scrollLeft,
                k = a.project.scrollTop,
                l = c.x - 0 - g,
                e = c.y - 0 - k,
                d = c.scale.x,
                m = c.scale.y,
                y = c.rotate * a.util.DEG_RAD;
            b.placement = a.scene.placement({
                trx: b.placement,
                bbox: c,
                pt0: {
                    x: l,
                    y: e
                },
                pt1: {
                    x: l + c.width,
                    y: e
                },
                rotate: c.rotate * a.util.DEG_RAD,
                scale: c.scale,
                doRotate: !0,
                doScale: !0,
                doLockRatio: !0
            });
            e = 1;
            l = b.trx || new a.vector.Transform;
            c = b.bbox;
            d = c.scale.x;
            m = c.scale.y;
            y = c.rotate * a.util.DEG_RAD;
            g = c.x - g;
            k = c.y - k;
            f = c.width * e * d;
            e = c.height * e * m;
            c = f / 2;
            e /= 2;
            l.reset();
            l.translate(g, k);
            l.translate(c, e);
            y && l.rotate(y);
            l.translate(-c, - e);
            l.scale(d, m);
            b.trx = l
        }
    };
    this.constrain = function(b) {
        var c = a.project.bounds,
            f = c.width,
            c = c.height,
            e = b.bbox;
        if ((b.useConstrain || b.useConstrainX || b.useConstrainY) && b.trx) {
            var d = b.trx,
                g = e.width,
                k = e.height;
            if ("objectBoundingBox" === b.bbox.units) var l = d.point2d(0, 0),
                m = d.point2d(g, 0),
                h = d.point2d(g, k),
                z = d.point2d(0, k),
                k = Math.min(l.x, m.x, h.x, z.x),
                d = Math.min(l.y, m.y, h.y, z.y),
                g = Math.max(l.x, m.x,
                    h.x, z.x),
                m = Math.max(l.y, m.y, h.y, z.y);
            else l = e, g = l.x, m = l.y, k = l.x, d = l.y;
            var l = e.x,
                h = e.y,
                z = l - k,
                B = h - d,
                k = f - Math.max(0, g - k) + z,
                d = c - Math.max(0, m - d) + B;
            b.useConstrain ? (e.x = Math.max(z, Math.min(k, l)), e.y = Math.max(B, Math.min(d, h)), b.dirtyTransform = !0) : b.useConstrainX ? (e.x = Math.max(z, Math.min(k, l)), e.y = h, b.dirtyTransform = !0) : b.useConstrainY && (e.x = l, e.y = Math.max(B, Math.min(d, h)), b.dirtyTransform = !0)
        }
        if (b.useAlignX) if (b.dirtyTransform = !0, "right" === b.useAlignX) {
            var D = e.width * e.scale.x;
            e.x = f - D
        } else e.x = "left" === b.useAlignX ? 0 : (f - D) / 2;
        b.useAlignY && (b.dirtyTransform = !0, "bottom" === b.useAlignY ? (f = e.height * e.scale.y, e.y = c - f) : "top" === b.useAlignY ? e.y = 0 : (f = e.height * e.scale.y, e.y = (c - f) / 2));
        b.dirtyTransform && this.updateTransform(b)
    };
    this.fireOnActionRemove = function(b) {
        a.on.remove && (b = this.selection.toObjects(b), a.on.remove(b))
    };
    this.fireOnActionAdd = function(b) {
        a.on.add && a.on.add(b)
    };
    this.fireOnHover = function(b) {
        a.on.hover && h.hoverID !== b.id && (h.hoverID = b.id, a.on.hover(b))
    };
    this.fireOnSelect = function() {
        this.updateSelectionInfo();
        if (a.on.select) {
            var b = this.selection.toObjects();
            b.length && a.on.select(b)
        }
    };
    this.fireOnDeselect = function(b) {
        this.updateSelectionInfo();
        a.on.deselect && (b = this.selection.toObjects(b), a.on.deselect(b))
    };
    this.updateSelectionInfo = function() {
        if ("undefined" === typeof document) return this;
        var a = document.querySelector(".sk-selection-count");
        a && (a.innerHTML = this.selection.length ? "<p>" + this.selection.length + " items selected.</p>" : "<p>Use the Select tool to Move, Rotate, Scale, Delete, and reorganize the layers of your design.<br><br>");
        return this
    };
    this.checkForSingleSelection = function() {
        if (!a.feature.vector.edit) return this;
        var b = 0,
            c = h.selection.items,
            f;
        for (f in c) b++;
        if (0 === b) return a.ui.buildConfigure && a.ui.buildConfigure(), this;
        if (1 < b) {
            h.selection.id = void 0;
            h.selection.idx = void 0;
            h.controls = [];
            if (a.ui.buildConfigure) {
                var e, b = !0,
                    d;
                for (d in c) if (c = h.data[d].type, e = e || c, e !== c) {
                    b = !1;
                    a.ui.buildConfigure();
                    break
                }
                b && a.ui.buildConfigure(e)
            }
            return this
        }
        h.selectByIndex(parseInt(f));
        e = h.data[h.selection.idx];
        if (!e) return a.feature.debug && console.log(h.selection.idx, c, h.data), this;
        a.ui.buildConfigure && a.ui.buildConfigure(e.type);
        "text" === e.type && a.toolkit.text.textarea && (a.toolkit.text.textarea.innerHTML = e.content, a.toolkit.text.textarea.style.color = e.fillStyle, e.toolkit.updateActionSize());
        return e
    };
    var g = /[^a-zA-Z]/g,
        b = /[^0-9]/g,
        e = function(a, b) {
            return a.zIndex > b.zIndex ? 1 : -1
        }, f = function(a, b) {
            return a.id > b.id ? 1 : -1
        }, c = function(a, c) {
            var f = a.name || "",
                e = c.name || "",
                d = f.replace(g, ""),
                k = e.replace(g, "");
            return d === k ? (d = parseInt(f.replace(b, ""), 10), k = parseInt(e.replace(b, ""), 10), d === k ? 0 : d > k ? 1 : -1) : d > k ? 1 : -1
        };
    this.sort = function(a) {
        switch (a) {
            case "name":
                this.data.sort(c);
                break;
            case "id":
                this.data.sort(f);
                break;
            default:
                this.data.sort(e)
        }
    };
    this.reindex = function() {
        for (var a = this.data, b = this.selection.items, c = [], f = 0, e; f < a.length; f++) if (e = a[f]) b[e.zIndex] && (delete b[e.zIndex], c.push(f), this.selection.length--), e.zIndex = f;
        for (f = 0; f < c.length; f++) b[c[f]] = !0, this.selection.length++;
        this.hovered.reset();
        this.updateSelectionInfo()
    };
    this.createId = function(b,
                             c) {
        var f = this.data;
        if (c) {
            for (var e = a.util.INFINITY_MINUS_8bit, d = 0; d < f.length; d++) {
                var g = f[d].id;
                g > e && (e = f[d].id)
            }
            return e + 1
        }
        if (b && (e = typeof b, ("string" === e || "number" === e) && !this.getById(b))) return b;
        for (d = e = 0; d < f.length; d++) g = f[d].id, !(g > a.util.INFINITY_MINUS_8bit) && g > e && (e = f[d].id);
        return e + 1
    };
    var k = a.util.array2object(["id", "zIndex", "clamp", "data"]);
    this.createHash = function(b, c) {
        for (var f = "", e = [b], d = a.detect.localAlpha; e.length;) {
            b = e.shift();
            for (var g in b) {
                var m = b[g];
                if (null !== m && void 0 !== m && !l[g] && !k[g]) if ("fill" === g || "stroke" === g) f += m[m.type].substr(0, 256);
                else if ("opacity" === g) d[b.type] && (f += g + ":" + m);
                else if ("scale" !== g || b.type) "src" === g ? f += m.substr(0, 256) : "bbox" === g ? (f += "width:" + b.bbox.width, f += "height:" + b.bbox.height, f += "padding:" + b.bbox.padding, b.bbox.scale && (m = b.bbox.scale, f += "scale:" + m.x + "," + m.y)) : "string" === typeof m ? f += g + ":" + m.substr(0, 256) : "object" !== typeof m ? f += g + ":" + m : m.childNodes || m.getImageData || m && e.push(m)
            }
        }
        e = 5381;
        d = 0;
        for (g = f.length; d < g; d++) e = (e << 5) + e + f.charCodeAt(d);
        return e
    };
    this.clone = function(a, b) {
        if (!a || !a.constructor || "object" !== typeof a) return a;
        if (!a.childNodes && !a.getImageData) {
            var c = new a.constructor,
                f;
            for (f in a) l[f] || (c[f] = a[f] && "object" === typeof a[f] ? this.clone(a[f]) : a[f]);
            return b ? JSON.stringify(c) : c
        }
    };
    this.getJSON = this.stringify = function(a) {
        a = a || h.data;
        return JSON.stringify(h.clone(a))
    };
    this.api = {
        rules: {
            movable: !1,
            rotatable: !1,
            scalable: !1,
            selectable: !1,
            useMaxCopies: 0,
            useAlignX: "",
            useAlignY: "",
            useMinWidth: 0,
            useMinHeight: 0,
            useMaxWidth: Infinity,
            useMaxHeight: Infinity,
            useConstrain: !0,
            useConstrainX: !0,
            useConstrainY: !0,
            useStretchToEdge: !0,
            useStickToFront: !0,
            useStickToBack: !0,
            useControlNE: !1,
            useControlNW: !1,
            useControlSE: !1,
            useControlSW: !1,
            useHighRes: !0
        }
    };
    this.copyAttributes = function(a, b, c) {
        for (var f in a) "undefined" !== typeof b[f] && (c[f] = b[f]);
        return c
    };
    this.copyRules = function(a, b) {
        return this.copyAttributes(this.api.rules, a, b)
    };
    this.ensureStickyIndex = function(b) {
        b.useStickToBack && (b.zIndex = -1);
        b = a.util.INFINITY_MINUS_8bit;
        for (var c = 0; c < this.data.length; c++) {
            var f = this.data[c];
            f.useStickToFront && (f.zIndex = b++)
        }
    };
    var m = function(b) {
        if (!alertify.log_visible()) {
            b = b.useMaxCopies;
            var c = 1 < b ? "copies" : "copy",
                f = a.language.translate("useMaxCopies-alert");
            alertify.log(f.split("{maxCopies}").join(b).split("{plural}").join(c))
        }
    };
    this.ensureMaxCopies = function(b) {
        if ("string" !== typeof b.src) return !0;
        var c = this.data,
            f = {}, e = b.src,
            d = b.type,
            g;
        if (a.lib[d] && (g = a.lib[d].getEntry(e))) {
            var d = a.lib[d],
                k = g.folder;
            if ((g = d.meta[k]) && g.useMaxCopies) {
                for (var l = d.tree[k], d = 0; d < l.length; d++) for (var k = l[d].filepath, h = 0; h < c.length; h++) {
                    var y = c[h];
                    if ("undefined" !== typeof y.src && y.id !== b.id && (e = y.src, e !== k && (e = (e = a.assets.getItem(y.src, y.type)) && e.src || y.src), e === k && (f[e] || (f[e] = 0), e = ++f[e], e >= g.useMaxCopies))) return b.useMaxCopies = g.useMaxCopies, m(b), !1
                }
                return !0
            }
        }
        k = e;
        for (d = 0; d < c.length; d++) if (y = c[d], "undefined" !== typeof y.src && (y.id !== b.id && (b.useMaxCopies || y.useMaxCopies)) && (e = (g = a.lib[y.type].getEntry(y.src)) && g.src || y.src, a.assets.isEqual(e, k) && (f[e] || (f[e] = 0), e = ++f[e], e >= y.useMaxCopies))) return m(b), !1;
        return !0
    };
    var l = a.util.array2object("callback hash render renderCache scaleCache breaks brush element canvas canvasCtx dirty dirtyCache dirtyTransform dirtyControl dirtyResource selected hovered visible placement placementRelative ctx trx svg toolkit __pattern __gradient __color __colors __textMetrics".split(" "));
    this.data = [];
    this.dataById = {};
    this.copies = [];
    this.controls = [];
    this.selection = new a.Selection(a);
    this.hovered = new a.Selection(a);
    return this
};
"undefined" !== typeof module && module.exports && (module.exports = sketch.Scene);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.area && (sketch.area = {});
"undefined" === typeof sketch.events && (sketch.events = {});
(function(a) {
    a.area.contextEvent = function(b) {
        eventjs.cancel(b);
        a.area.hideArea();
        a.render("root.area.contextMenu");
        var e = eventjs.proxy.getCoord(b);
        b = eventjs.proxy.getBoundingBox(b.target);
        contextmenu.show(a.ui.menuSelect, e.x - b.scrollBodyLeft + 5, e.y - b.scrollBodyTop + 5, !0)
    };
    a.area.deleteEvent = function(b) {
        var e = b.target,
            f = function() {
                eventjs.remove(e, "mouseup", f);
                if ((a.scene.controls[1] || {}).hovered) {
                    a.area.hide();
                    a.selection.remove();
                    var b = 0,
                        d = setInterval(function() {
                            a.active.save();
                            a.active.globalAlpha = 0.25;
                            a.active.globalCompositeOperation = "destination-out";
                            a.active.fillRect(0, 0, a.active.canvas.width, a.active.canvas.width);
                            a.active.restore();
                            10 < ++b && (clearInterval(d), a.render("root.deleteAction"))
                        }, 25)
                }
            };
        eventjs.cancel(b);
        eventjs.add(e, "mouseup", f)
    };
    a.area.moveEvent = function(b) {
        var e = a.canvas2d.zoom;
        eventjs.proxy.drag({
            event: b,
            target: a.active.canvas,
            position: "absolute",
            listener: function(b, c) {
                eventjs.cancel(b);
                window.contextmenu && contextmenu.visible && (c.pause(), c.state = "up");
                a.toolkit.select.isMoving = "up" !== c.state;
                switch (c.state) {
                    case "down":
                        a.selection.move(0, 0, "cache");
                        break;
                    case "move":
                        a.selection.move((c.x - (c.px || 0)) / e, (c.y - (c.py || 0)) / e, "move");
                        break;
                    case "up":
                        a.selection.move(0, 0, "record")
                }
                c.px = c.x;
                c.py = c.y
            }
        })
    };
    a.area.scaleEvent = function(b) {
        a.events.resize(b, !1, !0)
    };
    a.area.rotateEvent = function(b) {
        a.events.resize(b, !0, !1)
    };
    a.area.rotateScaleEvent = function(b) {
        a.events.resize(b, !0, !0)
    };
    a.events.resize = function(b, e, f) {
        a.area.hideArea();
        a.render("root.events.resize");
        var c = a.scene.getFocused() || a.scene.getHovered();
        if (c) {
            var d = a.canvas2d,
                g = c.bbox,
                l = a.util.clone(g),
                h = null,
                r = null,
                q = null,
                u = {};
            a.util.clone(g.scale);
            var v, s, x = {}, w = eventjs.shiftKey,
                A = eventjs.altKey,
                y = a.feature.canvas.useGroupBoundingBox || A ? a.scene.getBoundingOrigin({
                    fromSelection: !0
                }) : a.scene.getBoundingOrigin(g),
                z = "objectBoundingBox" === g.units,
                B, D;
            return eventjs.proxy.drag({
                position: "relative",
                event: b,
                target: a.active.canvas,
                listener: function(b, A) {
                    eventjs.cancel(b);
                    window.contextmenu && contextmenu.visible && (A.pause(), A.state = "up");
                    B = "down" === A.state;
                    D = "up" === A.state;
                    a.toolkit.select.isMoving = !D;
                    if (!a.__rendering || D) {
                        var J = d.zoom / d.pixelRatio,
                            C = (J - 1) / J,
                            O = a.project.scrollTop * C;
                        A.x = A.x / J + a.project.scrollLeft * C;
                        A.y = A.y / J + O;
                        A.x -= 1 * d.x / d.zoom;
                        A.y -= 1 * d.y / d.zoom;
                        B ? a.area.activeControl = a.area.hoverControl : D && (a.area.activeControl = "");
                        C = y.x - A.x;
                        J = y.y - A.y;
                        if (0 !== C || 0 !== J) {
                            if (!1 === e || !1 === c.rotatable) g.rotate = l.rotate;
                            else {
                                var O = -Math.atan2(C, J) * a.util.RAD_DEG,
                                    N = 0;
                                w && (O -= O % 5, N = c.bbox.rotate % 5);
                                null === h && (h = O);
                                null === r && (r = O);
                                q = O - r - N;
                                r = O
                            }!1 === f || !1 === c.scalable ? (v = g.scale.x, s = g.scale.y) : (C = Math.sqrt(C * C + J * J), J = Math.sqrt(C * C + J * J), C = J = Math.max(C, J), isFinite(u.x) || (u.x = C, u.y = J), C = C / u.x * l.scale.x, J = J / u.y * l.scale.y, isFinite(v) || (v = C, s = J), x.x = C / v, x.y = J / s, v = C, s = J);
                            a.selection.transform({
                                origin: y,
                                rotate: q,
                                scale: x
                            }, A.state);
                            z && (a.render.dirtyCenterPoint = {
                                origin: y,
                                bbox: c.bbox,
                                useRotate: e,
                                useScale: f
                            })
                        }
                    }
                }
            })
        }
    };
    a.area.drawCenterPoint = function(b, e, f, c) {
        var d = a.canvas2d,
            g = d.pixelRatio,
            l = d.zoom,
            h = d.x - a.project.scrollLeft * l,
            r = d.y - a.project.scrollTop * l,
            q = b.x * l,
            u = b.y * l;
        b = e.rotate;
        l = e.scale;
        d = a.active;
        d.save();
        d.beginPath();
        d.globalAlpha = 0.65;
        d.shadowOffsetX = 1;
        d.shadowOffsetY = 1;
        d.shadowColor = "#aaa";
        d.shadowBlur = 0;
        d.translate(q, u);
        d.translate(h, r);
        d.font = "13px helvetica, arial";
        f ? (e = (Math.round(b) + 360) % 360, d.fillText(e + String.fromCharCode(176), 10, 5)) : c && (f = e.height * l.y, d.fillText(Math.round(e.width * l.x) + "x" + Math.round(f), 10, 5));
        g *= 7, d.rotate(b * a.util.DEG_RAD), d.moveTo(0, - g), d.lineTo(0, g), d.moveTo(-g, 0), d.lineTo(g, 0), d.strokeStyle = "#000", d.stroke();
        d.restore()
    };
    a.area.updateBBox = function() {
        var b = a.scene.getFocused();
        "undefined" !== typeof b && (a.scene.constrain(b), "text" === b.type ? a.toolkit.text.updateCSSTransform(b) : b.brush && (b.brush.bbox = b.bbox))
    };
    a.area.renderControls = function(b, e) {
        if (isFinite(b)) {
            var f = {};
            f[b] = !0;
            b = f
        } else b = {};
        e && (a.active.canvas.width = a.active.canvas.width);
        var f = a.selection.items,
            f = e || f !== JSON.stringify(f),
            c = 1 === a.selection.length;
        a.scene.controls = [];
        for (var d in a.scene.data) {
            d = parseInt(d);
            var g = a.scene.data[d];
            f && (g.dirtyControl = !0);
            isFinite(a.selection.idx);
            var l = a.selection.idx === d;
            a.hovered.items[d] && !c || c && l ? a.area.drawControls(a.active, g) : (b[d] || l) && a.area.drawControls(a.active, g, !0)
        }
    };
    a.area.drawControls = function(b, e, f) {
        if (e && e.dirtyControl && e.placement && e.placement.apply) {
            delete e.dirtyControl;
            var c = e.brush,
                d = a.selection.idx === e.zIndex;
            if (c && c.drawControl) b = c.drawControl(e), d && (a.scene.controls = b);
            else {
                var c = e.placement,
                    g = e.bbox,
                    l, p, r = 1;
                "text" === e.type ? (l = g.width, p = g.height) : (r = g.viewBox[2] / g.width, l = g.viewBox[2],
                    p = r * g.height);
                var q = a.canvas2d,
                    r = q.pixelRatio,
                    u = q.zoom * r,
                    v = g.scale.x,
                    s = g.scale.y,
                    x = a.feature[e.type] || a.feature.tools;
                if (x.drawBoundingBox) {
                    var w = 0,
                        A = 0;
                    b.save();
                    b.translate(q.x, q.y);
                    b.scale(u, u);
                    c.apply(b, !0);
                    b.beginPath();
                    b.rect(-w, - A, l + 2 * w, p + 2 * A);
                    b.restore();
                    b.save();
                    d ? (b.strokeStyle = "#0080C2", b.lineWidth = (d ? 2 : 1) * r) : (b.shadowOffsetX = 1, b.shadowOffsetY = 1, b.shadowBlur = 0, "light" === a.configure.theme ? (b.shadowColor = "#fff", b.strokeStyle = "rgba(0,0,0,1)") : (b.shadowColor = "#000", b.strokeStyle = "rgba(255,255,255,1)"),
                        b.lineWidth = (d ? 1 : 0.5) * r);
                    b.stroke();
                    b.restore()
                }
                if (!f) {
                    d = !1 !== e.useControlNW && (x.controls.nw || e.useControlNW);
                    f = !1 !== e.useControlSW && (x.controls.sw || e.useControlSW);
                    var q = !1 !== e.useControlSE && (x.controls.se || e.useControlSE),
                        x = !1 !== e.useControlNE && (x.controls.ne || e.useControlNE),
                        y = a.theme.getControls(),
                        c = e.placement.clone(),
                        w = y.padding / 2 / v,
                        A = y.padding / 2 / s,
                        z = 0.5 / v,
                        B = 0.5 / s,
                        D = c.point2d(-z + w, - B + A),
                        E = c.point2d(l - w, p - A);
                    p = c.point2d(-z + w, p - A);
                    l = c.point2d(l - w, - B + A);
                    w = {
                        x: 1,
                        y: 1
                    };
                    a.scene.controls = [];
                    if (y.anchor) {
                        var A = y.anchor,
                            B = A.padding,
                            z = 1 * A.padding * r / u,
                            G = "";
                        a.selection.items[e.zIndex] && (G = A["title." + e.type + ":selected"] || A["title:selected"]);
                        "" === G && (G = A["title." + e.type] || A.title || "");
                        a.scene.controls.push({
                            id: "anchor",
                            actionId: e.id,
                            type: "button",
                            cursor: A.cursor,
                            title: a.language.translate(G),
                            event: A.command,
                            padding: A.padding,
                            bbox: {
                                units: g.units,
                                x: D.x,
                                y: D.y,
                                left: 1.5 * -B,
                                top: 1.5 * -B,
                                width: v * g.width + z,
                                height: s * g.height + z,
                                rotate: g.rotate,
                                scale: w
                            }
                        })
                    }
                    d && y.nw && (A = y.nw, B = A.padding || y.padding, z = 1 * (B + A.width) * r / u, h(b, c,
                        g, {
                            direction: "nw",
                            x: D.x,
                            y: D.y,
                            left: -z / 2,
                            top: -z / 2,
                            bbox: {
                                units: g.units,
                                x: D.x,
                                y: D.y,
                                left: -(z + B) / 2,
                                top: -(z + B) / 2,
                                width: z,
                                height: z,
                                rotate: g.rotate,
                                scale: w
                            }
                        }));
                    f && (A = y.sw, B = A.padding || y.padding, z = 1 * (B + A.width) * r / u, h(b, c, g, {
                        direction: "sw",
                        x: p.x,
                        y: p.y,
                        left: -z / 2,
                        top: -z / 2 + B,
                        bbox: {
                            units: g.units,
                            x: p.x,
                            y: p.y,
                            left: -(z + B) / 2,
                            top: -(z - B) / 2,
                            width: z,
                            height: z,
                            rotate: g.rotate,
                            scale: w
                        }
                    }));
                    q && (A = y.se, B = A.padding || y.padding, z = 1 * (B + A.width) * r / u, h(b, c, g, {
                        direction: "se",
                        x: E.x,
                        y: E.y,
                        left: -z / 2 + B,
                        top: -z / 2 + B,
                        bbox: {
                            units: g.units,
                            x: E.x,
                            y: E.y,
                            left: -(z - B) / 2,
                            top: -(z - B) / 2,
                            width: z,
                            height: z,
                            rotate: g.rotate,
                            scale: w
                        }
                    }));
                    x && (A = y.ne, B = A.padding || y.padding, z = 1 * (B + A.width) * r / u, h(b, c, g, {
                        direction: "ne",
                        x: l.x,
                        y: l.y,
                        left: -z / 2 + B,
                        top: -z / 2,
                        bbox: {
                            units: g.units,
                            x: l.x,
                            y: l.y,
                            left: -(z - B) / 2,
                            top: -(z + B) / 2,
                            width: z,
                            height: z,
                            rotate: g.rotate,
                            scale: w
                        }
                    }))
                }
            }
        }
    };
    var h = function(b, e, f, c) {
        var d = c.direction,
            g;
        g = a.area.hoverControl === d || a.area.activeControl === d ? "hover" : "normal";
        var l;
        l = a.theme.getControls();
        if (l = l[d + "-" + g] || l[d]) {
            var h = l.command || {};
            a.scene.controls.push({
                id: d,
                title: a.language.translate(l.title),
                type: "button",
                cursor: "pointer",
                hovered: "hover" === g,
                event: h,
                bbox: c.bbox
            });
            d = a.canvas2d;
            g = d.zoom * d.pixelRatio;
            b.save();
            b.beginPath();
            b.translate(d.x, d.y);
            b.scale(g, g);
            e.reset();
            e.translate(c.x, c.y);
            e.rotate(f.rotate * a.util.DEG_RAD);
            e.translate(c.left || 0, c.top || 0);
            e.apply(b, !0);
            e = l.width / l.viewBox[2];
            l.render({
                ctx: b,
                matrix: {
                    a: e,
                    b: 0,
                    c: 0,
                    d: e,
                    x: 0,
                    y: 0
                }
            });
            a.feature.debugMouse && (b.fillStyle = "rgba(255,255,0,1)", b.fillRect(0, 0, c.bbox.width, c.bbox.height));
            b.restore()
        }
    }, d = {}, g = String.fromCharCode(65279);
    a.area.exitGenesis = function(b) {
        if (a.area.inGenesis || b) if (a.area.inGenesis = !1, b = a.scene.getFocused()) {
            if ("text" !== b.type || b.content) {
                var e = b.svg,
                    f = a.scene.clone(b);
                f.id = a.scene.createId();
                f.dirty = !0;
                f.render = b.render;
                a.scene.removeByIndex(b.zIndex, !1);
                if (b = a.scene.addObject(f)) e && (b.svg = e), a.render("root.area.hide"), a.history && !a.area.inGenesisChannel && a.history.store("add", [a.scene.clone(b)]);
                a.area.inGenesisChannel = !1;
                return b
            }
            e = textkit.cleanText(textkit.textarea.innerHTML);
            e !== g && (b.content = e, textkit.updateActionSize(b));
            a.scene.removeByIndex(a.selection.idx, !1);
            a.scene.deselectAll();
            d = {}
        }
    };
    a.area.hide = function() {
        var b = a.scene.getFocused();
        a.__editing = !1;
        var e = a.toolkit.text;
        if (e && b && "text" === b.type) {
            e.textarea || e.createTextarea();
            var f = e.cleanText(e.textarea.innerHTML);
            a.area.hideArea();
            f !== g && (b.content = f, e.updateActionSize(b));
            if (b.content.trim()) b.dirty = !0;
            else if (a.area.inGenesis) {
                a.scene.removeByIndex(a.selection.idx, !1);
                a.scene.deselectAll();
                a.area.inGenesis = !1;
                d = {};
                return
            }
        } else a.area.hideArea();
        if (a.area.inGenesis) {
            if (a.area.inGenesis = !1, b) {
                e = a.scene.clone(b);
                e.id = a.scene.createId();
                e.dirty = !0;
                e.render = b.render;
                var c;
                b.svg && (c = b.svg);
                a.scene.removeByIndex(b.zIndex, !1);
                a.scene.addObject(e);
                c && (b.svg = c);
                a.scene.deselectAll();
                a.render("root.area.hide");
                a.history && !a.area.inGenesisChannel && (c = [a.scene.clone(e)], a.history.store("add", c));
                a.area.inGenesisChannel = !1
            }
        } else "undefined" !== typeof d.id && ("text" === d.type && e) && ((c = a.scene.getById(d.id)) && (d.content !== c.content && a.history) && (b = [{
            id: c.id,
            content: d.content
        }], c = [{
            id: c.id,
            content: c.content
        }], a.history.store(b, c)), e.createTextarea(), d = {})
    };
    a.area.show = function(b) {
        b = b || a.scene.getOneSelected();
        if ("undefined" !== typeof b) {
            d = a.scene.clone(b);
            var e = a.toolkit.text;
            "text" === b.type && e ? (a.__editing = !0, e.textarea || e.createTextarea(), e.textarea.innerHTML = b.content ? b.content : g, e.blur = b.blur || 0, e.container.style.opacity = 1, e.container.style.display = "block", b.dirtyControl = !0, a.render("root.area.show")) : a.area.hideArea()
        }
    };
    a.area.hideArea = function() {
        a.__editing = !1;
        var b = String.fromCharCode(65279),
            e = a.toolkit.text;
        e.textarea && (e.textarea.innerHTML = b, e.textarea.blur());
        e.container && (e.container.style.opacity = 0, e.container.style.display = "none")
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(a) {
    var h = a.Scene.prototype;
    h.sendForwards = function(d) {
        d = d || {};
        var g = a.detect.refreshPixelData,
            b = d.toFront || !1,
            e = d.selection || this.selection.items;
        d = d.record || !1;
        var f = this.data,
            c = f.length,
            k;
        for (k in e) if (parseInt(k) === c - 1) return;
        k = [];
        var m = [];
        if (b) {
            for (var b = [], l = [], h = [], r = 0; r < c; r++) {
                var q = f[r];
                q.useStickToFront ? h.push(q) : q.useStickToBack ? l.push(q) : e[r] ? b.push(q) : l.push(q)
            }
            l = l.concat(b);
            l = l.concat(h);
            console.log(h, b, f.length);
            e = this.clone(b);
            this.data = l;
            this.reindex();
            r = 0;
            for (c = b.length; r < c; r++) q = b[r], g[q.type] && (q.dirtyCacheForce = !0), d && (k.push({
                id: q.id,
                zIndex: e[r].zIndex
            }), m.push({
                id: q.id,
                zIndex: q.zIndex
            }))
        } else {
            for (r = c; r--;) e[r] && r !== c - 1 && (q = f[r], q.useStickToBack || (g[q.type] && (q.dirtyCacheForce = !0), f.splice(r, 0, f.splice(r + 1, 1)[0]), d && (k.push({
                id: f[r].id,
                zIndex: r
            }), m.push({
                id: f[r].id,
                zIndex: r + 1
            }))));
            this.reindex()
        }
        this.checkForSingleSelection();
        a.history && d && a.history.store(k, m);
        return this
    };
    h.sendBackwards = function(d) {
        d = d || {};
        var g = a.detect.refreshPixelData,
            b = d.toBack || !1,
            e = d.selection || this.selection.items;
        d = d.record || !1;
        for (var f = this.data, c = f.length, k = 0, m = 0; m < c && f[m].useStickToBack; m++) k++;
        for (var l in e) if (parseInt(l) === k) return;
        l = [];
        k = [];
        if (b) {
            for (var b = [], h = [], r = [], m = 0; m < c; m++) {
                var q = f[m];
                q.useStickToFront ? r.push(q) : e[m] || q.useStickToBack ? b.push(q) : h.push(q)
            }
            e = this.clone(b);
            b = b.concat(h);
            this.data = b = b.concat(r);
            this.reindex();
            m = 0;
            for (c = e.length; m < c; m++) q = b[m], g[q.type] && (q.dirtyCacheForce = !0), d && (l.push({
                id: q.id,
                zIndex: e[m].zIndex
            }), k.push({
                id: q.id,
                zIndex: q.zIndex
            }))
        } else {
            for (m = 0; m < c; m++) e[m] && 0 !== m && (q = f[m], q.useStickToFront || (g[q.type] && (q.dirtyCacheForce = !0), f.splice(m, 0, f.splice(m - 1, 1)[0]), d && (l.push({
                id: f[m].id,
                zIndex: m
            }), k.push({
                id: f[m].id,
                zIndex: m - 1
            }))));
            this.reindex()
        }
        this.checkForSingleSelection();
        a.history && d && a.history.store(l, k)
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(a) {
    a.Scene.prototype.placement = function(h) {
        var d = h.trx && h.trx.reset ? h.trx.reset() : new a.vector.Transform,
            g = h.bbox,
            b = h.pt0,
            e = h.pt1,
            f = e.x,
            c = e.y,
            e = b.x,
            b = b.y,
            k = f - e || 0.001,
            m = c - b || 0.001,
            l = !h.doRotate && 0 > k,
            p = !h.doRotate && 0 > m,
            r = 0 > k ? 1 : -1,
            q = 0 > m ? 1 : -1,
            u = l ? -1 : 1,
            v = p ? -1 : 1,
            s = "undefined" === typeof h.rotate ? -Math.atan2(e - f, b - c) : h.rotate,
            x = g.viewBox[2],
            c = g.viewBox[3],
            w = k / x || 0,
            f = m / c || 0;
        h.doLockRatio && (w = Math.max(Math.abs(f), Math.abs(w)), f = w * q, w *= r);
        0 < m && (f *= -1);
        0 < k && (w *= -1);
        h.doRotate && (k = g.width / 2 * g.scale.x,
            m = g.height / 2 * g.scale.y, "objectBoundingBox" === g.units ? (d.translate(e + k, b + m), d.rotate(s), d.translate(-e - k, - b - m)) : (d.translate(e, b), d.rotate(s), d.translate(-e, - b)), l && (e += -x * w), p && (b += -c * f));
        h.doScale && (h.doCenter ? (g = u * w * x / 2, l = v * f * c / 2) : l = g = 0, d.translate(e - g, b - l), d.scale(w * u, f * v));
        h.scale && d.scale(h.scale.x, h.scale.y);
        return d
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(a) {
    var h = a.Scene.prototype,
        d = 0,
        g = {}, b = h.clipboard = {
            loadCopies: function() {
                a.getItem("copies", function(b) {
                    b && (a.scene.copies = JSON.parse(b))
                });
                a.getItem("copies-paths", function(a) {
                    try {
                        g = JSON.parse(a)
                    } catch (b) {}
                })
            },
            addFocusEvent: function() {
                eventjs.add(window, "focus", b.loadCopies);
                b.loadCopies()
            }
        };
    h.cut = function(b) {
        a.setItem("useNativePaste", !1);
        b = b || this.selection.items;
        for (var c = this.data, d = [], g = c.length; g--;) if (b[g]) {
            var l = c[g];
            d.push(l);
            c.splice(g, 1);
            a.render.cache.clean(l)
        }
        d.length && (this.reindex(),
            this.copies = this.clone(d), e(), this.deselectAll(), b = this.clone(d).reverse(), a.history && a.history.store(b, "remove"));
        a.on.cut && a.on.cut(this.copies);
        return this
    };
    h.copy = function(b) {
        a.setItem("useNativePaste", !1);
        b = b || this.selection.items;
        for (var c = this.data, d = [], g = c.length; g--;) b[g] && d.push(c[g]);
        d.length && (this.copies = this.clone(d), e(), a.on.copy && a.on.copy(this.copies));
        return this
    };
    h.paste = function(b) {
        if (this.copies && this.copies.length) {
            this.deselectAll();
            for (var c = this, e = this.data, d = this.copies,
                     l = d.length, h = function() {
                    --l || (c.reindex(), 1 === d.length ? c.checkForSingleSelection() : c.render("root.scene.paste"), c.fireOnSelect(), b && b())
                }, r = function(b) {
                    var c = a.assets.data[b.src];
                    c && c.clone && "clipart" === b.type && !1 === a.feature.cacheSVG ? c.clone(function(c) {
                        a.assets.add(c.toDataURL(), function(a) {
                            b.src = a;
                            q(b)
                        })
                    }, !0) : q(b)
                }, q = function(b) {
                    e.push(b);
                    c.selectByIndex(e.length - 1, !1);
                    a.toolkit.updateToolkit(b);
                    b.toolkit.loadResource({
                        action: b,
                        onload: h,
                        useLoader: !1
                    })
                }, u = l; u--;) {
                var v = this.clone(d[u]);
                this.getById(v.id) && (d[u].id = v.id = this.createId());
                var s = v.src;
                "string" === typeof s && 0 === s.indexOf("#") && !a.assets.data[s] && g[s] ? a.assets.add({
                    type: v.type,
                    data: g[s],
                    onerror: h,
                    onload: function(a, b) {
                        v.src = a;
                        r(v)
                    }
                }) : r(v)
            }
            a.history && (u = this.clone(d), a.history.store("add", u));
            a.on.paste && a.on.paste(this.copies);
            return this
        }
    };
    h.onCutNative = function(b) {
        eventjs.cancel(b);
        a.exec("layer-cut");
        var c = a.scene.stringify(a.scene.copies);
        b.clipboardData ? (b.clipboardData.clearData(), b.clipboardData.setData("application/json", c)) : window.clipboardData && (window.clipboardData.clearData(), window.clipboardData.setData("text", c))
    };
    h.onCopyNative = function(b) {
        eventjs.cancel(b);
        a.exec("layer-copy");
        var c = a.scene.stringify(a.scene.copies);
        b.clipboardData ? (b.clipboardData.clearData(), b.clipboardData.setData("application/json", c)) : window.clipboardData && (window.clipboardData.clearData(), window.clipboardData.setData("text", c))
    };
    h.onPasteNative = function(b) {
        if (!a.__rendering && !a.detect.editing()) {
            eventjs.cancel(b);
            var c = a.scene;
            b = b.clipboardData.items;
            var e = [],
                g = 0,
                l = 0;
            if (b) for (var h = function() {
                --l || (g !== d && (a.setItem("useNativePaste", !0), d = g), a.getItem("useNativePaste", function(b) {
                    if ("true" === b) {
                        if (g) {
                            for (b = 0; b < e.length; b++) a.addMedia(e[b], null, function() {
                                a.exec("select")
                            });
                            a.on.paste && a.on.paste(c.copies)
                        }
                    } else a.exec("layer-paste")
                }))
            }, r = 0; r < b.length; r++) {
                ++l;
                var q = b[r];
                switch (q.type) {
                    case "application/json":
                        q.getAsString(function(b) {
                            try {
                                b = JSON.parse(b), c.copies = b, a.exec("layer-paste")
                            } catch (f) {
                                console.log(f)
                            }
                        });
                        break;
                    case "text/html":
                        q.getAsString(function(b) {
                            a.feature.debug && console.log(b);
                            0 === b.indexOf("blob:") ? setTimeout(h, 1) : -1 !== b.indexOf("blob:http%3A//") ? setTimeout(h, 1) : a.convert.htmlToCanvas({
                                html: b,
                                onerror: h,
                                onload: function(a) {
                                    g += b.length;
                                    e.push(a);
                                    h()
                                }
                            })
                        });
                        break;
                    default:
                        if (-1 === q.type.indexOf("image")) {
                            setTimeout(h, 1);
                            break
                        }
                        q = q.getAsFile();
                        e.push(q);
                        g += q.size;
                        setTimeout(h, 1)
                }
            }
        }
    };
    h.duplicate = function(a) {
        a = a || this.selection.items;
        this.copies = [];
        this.copy(a).paste();
        return this
    };
    var e = function() {
        var b = a.scene.copies;
        g = {};
        a.setItem("copies", JSON.stringify(b));
        a.setItem("copies-paths",
            JSON.stringify({}));
        a.save.assets({
            toBlobURL: !0,
            actions: b,
            callback: function(b) {
                a.setItem("copies-paths", JSON.stringify(b))
            }
        })
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.area && (sketch.area = {});
"undefined" === typeof sketch.theme && (sketch.theme = {});
(function(a) {
    var h = function(a, b) {
        for (var f in a) "undefined" === typeof b[f] && (b[f] = a[f])
    };
    a.area.buttons = {};
    a.area.padding = 0;
    a.theme.init = function() {
        var b = f(),
            e = b.controls;
        new a.util.Queue({
            items: e,
            flatten: !0,
            oncomplete: function() {
                a.area.buttons.mouse = b.mouse;
                a.area.buttons.touch = b.touch;
                d("mouse", e);
                d("touch", e)
            },
            next: function(b, c, f) {
                if (!b.src) return this.next();
                var d = this;
                if ("svg" !== (a.vector.SVG.isSVG(b.src) ? "svg" : b.type) && b.src) return dom.loadImage({
                    src: b.src,
                    onload: function() {
                        e[c] = b;
                        e[c].image = this;
                        d.next()
                    },
                    onerror: this.next
                });
                new a.vector.SVG({
                    skipRender: !0,
                    src: b.src,
                    onload: function(a) {
                        a = e[c] = a;
                        h(b, a);
                        d.next()
                    }
                })
            }
        })
    };
    a.theme.getControls = function() {
        var b = a.area.buttons,
            b = eventjs.isTouch ? b.touch : b.mouse;
        b.anchor && isFinite(b.anchor.padding) ? a.area.padding = b.anchor.padding : a.area.padding = b.padding || 0;
        return b
    };
    var d = function(b, f) {
        var e = a.area.buttons[b],
            d;
        for (d in f) {
            var h = d.split("-"),
                r = h.shift(),
                h = h.shift();
            e[d] = g(r, h, f[d], e.width, e.height)
        }
    }, g = function(b, f, e, d, g) {
        var r = {};
        h(e, r);
        r.width = d;
        r.height = g;
        r.viewBox = [0, 0, d, g];
        r.type = b;
        r.render = function(b) {
            var c = b.ctx;
            c.save();
            "svg" === e.type ? (c.scale(d / e.vob.width, g / e.vob.height), e.render(b)) : "undefined" !== typeof r.image ? c.drawImage(r.image, 0, 0) : ("hover" === f ? (c.strokeStyle = "rgba(255,255,255,0.5)", c.fillStyle = "#0080C2") : (c.strokeStyle = "rgba(255,255,255,0.5)", c.fillStyle = "rgba(30,30,30,1)"), c.beginPath(), c.lineWidth = 1 / a.canvas2d.zoom, b = 1 * d / a.canvas2d.zoom, c.rect(0.5, 0.5, b, b), c.fill(), c.stroke());
            c.restore()
        };
        return r
    }, b = {
        anchor: !0,
        n: !0,
        ne: !0,
        e: !0,
        se: !0,
        s: !0,
        sw: !0,
        w: !0,
        nw: !0
    }, e = function(a) {
        a = a || {};
        a.padding = isFinite(a.padding) ? a.padding : 0;
        a.width = isFinite(a.width) ? a.width : 16;
        a.height = isFinite(a.height) ? a.height : 16;
        return a
    }, f = function(c) {
        var f = a.feature.tools,
            d = {}, g = d.controls = {};
        d.mouse = e(f.controls.mouse);
        d.touch = e(f.controls.touch);
        var h = function(b, c, f) {
            var e = f[c] || f.normal || {}, d;
            for (d in f) "normal" !== d && "hover" !== d && "undefined" === typeof e[d] && (e[d] = f[d]);
            if (0 === a.util.count(e)) return {};
            f = e.command;
            !0 === f ? e.command = a.area.rotateScaleEvent : "string" === typeof f && (e.command = a.area[f + "Event"]);
            "normal" === c ? g[b] = e : g[b + "-" + c] = e
        }, r = function(a, b) {
            g[a] = {
                command: b
            };
            g[a + "-hover"] = {
                command: b
            }
        };
        for (c in b) {
            var q = f.controls[c];
            "undefined" !== typeof q && ("string" === typeof q ? r(c, a.area[q]) : "boolean" === typeof q ? !1 !== q && r(c, a.area.rotateScaleEvent) : (h(c, "normal", q), h(c, "hover", q)))
        }
        return d
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.setup && (sketch.setup = {});
"undefined" === typeof sketch.toolkit && (sketch.toolkit = {});
sketch = function(a) {
    a.setTool = function(d, b, e) {
        "select" !== d && a.scene.deselectAll();
        a.ui.setToolMenu && d !== a.ui.buildConfigure.type && (a.ui.setToolMenu(d), a.ui.buildConfigure(d, !0));
        a.toolkit.setTool(d, b);
        a.feature.vector.edit && ("select" === d && a.scene.setDirtyControl(), a.render("root.exec('" + d + "');"))
    };
    a.toolkit.setTool = function(d, b) {
        d = d || a.tool.type;
        b = b || {};
        "function" === typeof b && (b = {
            callback: b
        });
        var e = a.configure.tools[d];
        if ("undefined" === typeof e) a.feature.debug && console.log("missing configure", arguments);
        else {
            var f = a.toolkit[e.toolkit];
            if ("undefined" === typeof f) a.feature.debug && console.log("missing toolkit", arguments);
            else {
                for (var c in b) e[c] = b[c];
                a.tool.reset && a.tool.reset();
                a.tool.disable && a.tool.disable();
                c = a.tool.type;
                f.type = d;
                f.lastType = c || d;
                a[b.tid || "tool"] = f;
                a.feature.cursorCSS && a.ui.setCursor();
                a.feature.style.lockToGlobal && a.style && (a.style.fill && (e.fill = sketch.util.clone(a.style.fill)), a.style.stroke && (e.stroke = sketch.util.clone(a.style.stroke)), a.style.setBlendMode(null));
                a.render.dirtyControls = !0;
                c = function() {
                    f.enable();
                    a.on.setTool && a.on.setTool(d);
                    b.callback && b.callback()
                };
                f.style ? (e.src && (f.style.src = e.src), f.style.type = e.type, f.loadResource({
                    action: f.style,
                    onload: c
                })) : f.changeDevice ? f.changeDevice(e, d, c) : c()
            }
        }
    };
    a.toolkit.genMouseId = function(d, b) {
        var e = "",
            f = "";
        d && (e = window.rtc && rtc._me && rtc._me.index, f = a.socket && a.socket.user && a.socket.user.id, e = (isFinite(e) ? e : f || 0) + ":");
        f = b.identifier;
        f = Infinity === f ? "A" : f;
        return e + ("Infinity" === f ? "A" : f)
    };
    a.detect = function(d, b) {
        var e = a.detect[d];
        return e && e[b] || !1
    };
    a.detect.add = function(d, b) {
        var e = a.detect[d] || (a.detect[d] = {});
        if ("string" === typeof b) e[b] = !0;
        else for (; b.length;) e[b.pop()] = !0
    };
    a.detect.editing = function() {
        var a = document.activeElement;
        if (!a) return !1;
        var b = document.activeElement.nodeName;
        return "INPUT" === b || "TEXTAREA" === b || "true" === a.contentEditable ? !0 : !1
    };
    a.detect.add("brush", []);
    a.detect.add("shape", []);
    a.detect.add("media", []);
    a.detect.add("refreshPixelData", ["floodfill"]);
    a.detect.add("area", "select svg clipart media image text".split(" "));
    a.detect.add("shapeConstrain", "triangle circle square roundSquare imperfectSquare imperfectCircle regularPolygon gear star burst radialBurst spiral supershape".split(" "));
    a.detect.add("noConfigure", ["move", "vectorfill"]);
    a.detect.add("localAlpha", "oil pastel stamp chrome fur hair shader sketchy web spirograph spraypaint".split(" "));
    a.detect.add("generativeColor", "spraypaint calligraphy crayon streamer chrome fur hair shader sketchy web spirograph".split(" "));
    a.detect.add("catmullRomSpline", ["eraser", "paintbrush", "pencil"]);
    a.detect.add("stampResource", ["stamp", "spraypaint"]);
    a.detect.add("srcRequired", ["stamp", "spraypaint", "image", "clipart"]);
    a.setDefaultConfigure = function(d) {
        var b = a.configure.tools[a.tool.type],
            e;
        for (e in d) {
            var f = d[e];
            if ("undefined" !== typeof b[e]) {
                var c = b[e];
                "number" === typeof f ? "undefined" !== typeof c.max ? (c.min = f, c.max = f) : c.value = f : (c.min = f.min, c.max = f.max)
            }
        }
    };
    a.toolkit.init = function(d) {
        d.rendering = !1;
        d.device = {};
        d.deviceProxy = {};
        d.deviceLastRecord = null;
        d.gestures = 0;
        d.interval = 0;
        d.timeSent = null;
        d.setColor = function(b) {
            a.style.apply.call(d, "color", b)
        };
        d.setGradient = function(b) {
            a.style.apply.call(d, "gradient", b)
        };
        d.setStyle = function(b) {
            if (b.color || b.gradient) {
                var e = b.color ? "color" : "gradient";
                a.style.apply.call(d, e, b[e]);
                delete b.color;
                delete b.gradient
            }
            var e = d.device,
                f;
            for (f in b) {
                var c = typeof e[f],
                    k = typeof b[f];
                "undefined" !== c && c === k && (e[f] = b[f])
            }
        };
        d.place = a.place = function(b, e, f, c) {
            if ("undefined" !== typeof b) if (e = e || b.callback || function() {}, f = f || b.onerror || function() {}, b.length || b.data && !b.type) {
                var k = b.data || b;
                e = b.onload || e;
                f = b.onerror || f;
                if (isFinite(b.scale)) for (var m = b.scale, l = 0; l < k.length; l++) {
                    var h = k[l];
                    "undefined" === typeof h || h.useStretchToEdge || (h.bbox || (h.bbox = {
                        x: 0,
                        y: 0
                    }), h.bbox.x *= m, h.bbox.y *= m, "text" === h.type ? h.fontSize *= m : (h.bbox.scale || (h.bbox.scale = {
                        x: 1,
                        y: 1
                    }), h.bbox.scale.x *= m, h.bbox.scale.y *= m))
                }
                var r = new sketch.util.Queue({
                    items: k,
                    flatten: !0,
                    callback: function() {
                        e && e()
                    },
                    next: function(a) {
                        r = this;
                        d.place(a, function(a) {
                            r.next()
                        }, function(a) {
                            r.next()
                        }, c)
                    }
                })
            } else {
                if (!a.toolkit.hasTool(b.type)) return f();
                a.render.dirtyControls = !0;
                var q = a.configure.tools[b.type];
                if (!0 !== c) {
                    if ("media" === q.toolkit && b.src) return a.assets ? a.assets.add({
                        type: b.type,
                        src: b.src,
                        onload: function(c, d) {
                            var g = a.toolkit.media;
                            g.style.src = q.src = b.src = c;
                            g.style.render = null;
                            a.place(b, e, f, !0)
                        }
                    }) : console.log("missing 'sketch.assets'");
                    if ("text" === q.toolkit && b.fontFamily && (!a.vector.text.supports[q.fontFamily] || q.fontFamily !== b.fontFamily)) return a.toolkit.text.loadFont({
                        fontFamily: b.fontFamily,
                        onload: function() {
                            q.fontFamily = b.fontFamily;
                            a.place(b, e, f, !0)
                        }
                    })
                }
                if (b.type && b.type !== d.type) {
                    var u = b.fromSocket ? "tool-socket" : "tool";
                    return a.toolkit.setTool(b.type, {
                        tid: u,
                        callback: function() {
                            a[u].place(b, e, f, c)
                        }
                    })
                }
                k = a.detect.shape[d.type] ? new d.record : d.record;
                for (m in b) switch (m) {
                    case "style":
                        d.setStyle(b.style);
                        break;
                    case "color":
                        d.setColor(b.color);
                        break;
                    case "gradient":
                        d.setGradient(b.gradient)
                }
                h = a.toolkit.getCenterPoint();
                if (b.bbox) {
                    l = b.bbox;
                    if (m = l.scale) isFinite(m) && (m = {
                        x: m,
                        y: m
                    }), l.scale = m;
                    isFinite(l.rotate) && (l.rotate = l.rotate)
                } else b.bbox = {}, b.bbox.scale = {
                    x: 1,
                    y: 1
                }, b.bbox.rotate = 0;
                b.bbox.scale || (b.bbox.scale = {
                    x: 1,
                    y: 1
                });
                m = b.points || b.data ? b.points || b.data : [h];
                h = m[0];
                h.cmd = "M";
                if (1 === m.length) {
                    var l = b.width,
                        v = b.height;
                    if (l && v) {
                        var s = a.canvas2d.zoom;
                        m.push({
                            cmd: "L",
                            x: h.x + l * s / 2,
                            y: h.y + v * s / 2
                        })
                    } else if (d.style && d.style.bbox.viewBox) {
                        var s = a.canvas2d.layers.layer0,
                            l = s.width,
                            v = s.height,
                            s = d.style.bbox.viewBox,
                            x = s[2],
                            w = s[3],
                            A = x - s[0],
                            y = w - s[1],
                            s = A / y;
                        x > w ? (l = Math.min(l / 4, A), v = l / A * y, A = b.bbox.scale.x || 1, 1 !== A && (A = l / 2 * (A - 1), h.x -= A, h.y -= 1 / s * A)) : (v = Math.min(v / 4, y), l = v / y * A, A = b.bbox.scale.y || 1, 1 !== A && (A = v / 2 * (A - 1), h.x -= s * A, h.y -= A));
                        m.push({
                            cmd: "L",
                            x: h.x + l / 2,
                            y: h.y + v / 2
                        })
                    } else if ("text" === d.type) {
                        s = a.scene.fromConfigure(a.configure.tools.text);
                        sketch.util.mergeObject(b, s);
                        A = a.vector.text.getFontStyle(s);
                        v = a.vector.text.textTransform(b.content, s.textTransform).split("\n");
                        y = l || 0;
                        for (l = x = 0; l < v.length; l++) w = a.vector.text.format(v[l], s), w = a.vector.text.measureText(w, A), w.width > y && (y = w.width), x += w.height;
                        l = sketch.util.clone(h);
                        h.x -= y / 2 + 5;
                        h.y -= x / 2;
                        l.x += y / 2 + 5;
                        l.y += x / 2;
                        l.cmd = "L";
                        m.push(l)
                    } else if ("floodfill" === d.type) m.push(h);
                    else return e && e(), console.log("missing viewbox")
                }
                2 === m.length && m.push({
                    cmd: "z",
                    x: m[1].x,
                    y: m[1].y
                });
                d.device.brush && (h = a.toolkit[d.device.toolkit], h.deviceProxy.place = h.getDevice(b.type));
                b.fillStyle && (a.configure.tools[b.type].fill.color = b.fillStyle);
                for (var h = function() {
                    z()
                }, z = function() {
                    var b = a.area.exitGenesis(!0) || a.scene.getOneSelected();
                    b && a.scene.constrain(b);
                    b && "text" === b.type && a.scene.deselectAll();
                    a.dataChannel && (a.feature.stream.sketch && b && "image" === b.type) && a.dataChannel.send(["scene.update", [{
                        id: b.id,
                        bbox: b.bbox
                    }]]);
                    e && e(b)
                }, l = 0; l < m.length; l++) switch (s = m[l], A = s.cmd || s.state, "undefined" === typeof A && (A = 0 === l ? "M" : l === m.length - 1 ? "z" : "L"), A) {
                    case "down":
                    case "M":
                        k(null, {
                            action: b,
                            identifier: "place",
                            x: s.x,
                            y: s.y,
                            start: m[0],
                            state: "down"
                        }, h);
                        break;
                    case "move":
                    case "L":
                        k(null, {
                            action: b,
                            identifier: "place",
                            x: s.x,
                            y: s.y,
                            bbox: b.bbox,
                            start: m[0],
                            state: "move"
                        });
                        break;
                    case "up":
                    case "z":
                        k(null, {
                            action: b,
                            identifier: "place",
                            x: s.x,
                            y: s.y,
                            bbox: b.bbox,
                            start: m[0],
                            state: "up"
                        }, z)
                }
            }
        };
        return d
    };
    a.toolkit.setToolConfigure = function(d, b, e) {
        var f = d[b];
        if (!f) a.feature.debug && console.log("missing tool: " + b);
        else if ("eraser" !== d.type || "composite" !== b) {
            if ("string" === typeof f) d[b] = e;
            else if (d = f.format, b = "undefined" !== typeof f.max, "undefined" !== typeof f.min && b) if (e.length) {
                b = e[0] && isFinite(e[0].value) ? e[0].value : 0;
                var c = e[1] && isFinite(e[1].value) ? e[1].value : 0;
                1 === e.length ? f.min = f.max = h(d, b) : 2 === e.length && (f.min = h(d, b), f.max = h(d, c))
            } else f.min = h(d, e.min), f.max = h(d, e.max);
            else e.length ? (e = isFinite(e[0].value) ? e[0].value : 0, f.value = h(d, e)) : f.value = h(d, e.value);
            return f
        }
    };
    var h = function(a, b) {
        switch (a) {
            case "int":
                return Math.round(b);
            default:
                return b
        }
    }, d = function(d, b, e) {
        d = glfx.filters[d];
        b = d.paramIndex[b];
        var f = a.video.shader2;
        if (f && f.activeFilter) {
            e = e.value;
            var c = f.activeFilter.data;
            switch (d.param[b].format.replace(")", "").split("(")[0]) {
                case "int":
                    e = Math.round(e)
            }
            c[b] !== e && (f.activeFilter.data[b] = e, glfx.animationId || glfx.render());
            a.histogram && a.histogram.enabled && a.histogram.createAnalyze()
        }
    };
    a.toolkit.setActionData = function(g) {
        var b = g.tool || "*",
            e = "*" === b,
            f = g.param,
            c = g.selection || a.selection && a.selection.items,
            k = g.cacheObject || {}, m = a.feature.tools.image.filter,
            l = !k.state || "start" === k.state,
            h = !k.state || "end" === k.state,
            r = a.configure.tools[b];
        if (g.thumbs && !e) {
            if (g = a.toolkit.setToolConfigure(r, f, g.thumbs), !g) return
        } else g = g.data, "object" === typeof g && g.length && (g = {
            min: g[0],
            max: g[1]
        }), "number" === typeof g && (g = {
            value: g
        }), !e && r && a.toolkit.setToolConfigure(r, f, g);
        var q = [],
            u = [],
            v = e || a.detect.localAlpha[b],
            r = 0;
        if (!e && 0 === b.indexOf("gl_")) return d(b.substr(3), f, g);
        if (a.actions && a.scene.data) {
            for (var s in c) {
                var x = a.scene.data[s];
                if (x) {
                    c = x.type;
                    if (!m && (c = "image" === x.type ? "clipart" : x.type, !e && c !== b)) continue;
                    l && (k["data" + x.id] = sketch.util.clone(x[f]));
                    x[f] = "undefined" !== typeof g.max ? sketch.util.clone(g) : isFinite(g.value) ? g.value : g;
                    x.toolkit && (x.dirty = !0, x.toolkit.updateActionSize(x));
                    if (h) {
                        var c = {
                            id: x.id
                        }, w = {
                            id: x.id
                        };
                        c[f] = k["data" + x.id];
                        w[f] = x[f];
                        q.push(c);
                        u.push(w)
                    }
                    r++
                }
            }
            q.length && u.length && a.history && a.history.store(q, u);
            h && "undefined" === typeof x && (!e && (b = a.toolkit.getToolkit(b)) && ("undefined" !== typeof g.max ? b.device && (b.device[f] = sketch.util.clone(g)) : b.device && (b.device[f] = g.value)), a.toolkit.setTool(a.tool.type, {
                useLoader: !1
            }));
            a.feature.bruteForce ? (a.render.dirtyControls = !0, a.render("root.toolkit.realtime")) : (1 < r && (v = !0), window.clearTimeout(k.interval), k.interval = setTimeout(function() {
                if (!v || v && h) a.render.dirtyControls = !0, a.render("root.toolkit.end")
            }, 75))
        }
    };
    a.toolkit.setActionType = function(d, b) {
        if (!a.feature.vector.edit) return a.exec(b);
        var e = sk.util.count(d);
        if (0 === e) a.exec(b.replace(" ", "_"));
        else {
            var f = [],
                c = [],
                k = a.actions,
                m = k.fromConfigure(a.configure.tools[b]),
                l;
            for (l in d) {
                var h = k.data[l];
                if (h) {
                    if (a.detect.shape[h.type]) {
                        if (!a.detect.shape[b]) continue
                    } else if (a.detect.brush[h.type]) {
                        if (!a.detect.brush[b]) continue
                    } else continue;
                    var r = {
                        id: h.id,
                        type: b
                    };
                    f.push({
                        id: h.id,
                        type: h.type
                    });
                    c.push(r);
                    h.type = b;
                    "undefined" === typeof m.spacing && delete h.spacing;
                    h.toolkit && (delete m.fill,
                        delete h.diameter, h.toolkit.cloneAttributes(m, h), h.toolkit.loadResource({
                        action: h,
                        onload: function() {
                            h.dirty = !0;
                            h.toolkit.updateActionSize(h);
                            !--e && (f.length && c.length) && (a.history && a.history.store(f, c), a.render.dirtyControls = !0, a.render("root.ui.configure"), a.ui.setToolMenu(b, !0), a.ui.buildConfigureOptions(b))
                        }
                    }))
                }
            }
        }
    };
    a.toolkit.getDimensionConstraint = function(d, b, e) {
        var f = !1;
        d = d || a.scene.getOneSelected() || {};
        var c = a.feature[d.type] || a.feature.tools[d.type] || a.feature.tools,
            k = d.useMinWidth || c.minWidth,
            m = d.useMinHeight || c.minHeight,
            l = d.useMaxWidth || c.maxWidth,
            h = d.useMaxHeight || c.maxHeight;
        c.constrainToCanvas && (c = a.ctx.canvas, c = Math.min(c.height, c.width) / a.canvas2d.pixelRatio, h = Math.min(c, h), l = Math.min(c, l));
        d = d.bbox;
        var c = d.width,
            r = d.height;
        if (b) return b.x * d.width < k && (f = !0, b.x = k / d.width, b.y = b.x), b.y * d.height < m && (f = !0, b.y = m / d.height, b.x = b.y), b.x * d.width > l && (f = !0, b.x = l / d.width, b.y = b.x), b.y * d.height > h && (f = !0, b.y = h / d.height, b.x = b.y), {
            constrained: f,
            x: b.x,
            y: b.y
        };
        r < m && (r = m);
        r > h && (r = h);
        r !== d.height && e && (f = !0, c = r / d.height * d.width);
        c < k && (c = k);
        c > l && (c = l);
        c !== d.width && e && (f = !0, r = c / d.width * d.height);
        return {
            constrained: f,
            width: c,
            height: r
        }
    };
    a.toolkit.getCenterPoint = function() {
        var d = a.canvas2d;
        return {
            x: d.width / 2 + a.project.scrollLeft - 1,
            y: d.height / 2 + a.project.scrollTop - 1
        }
    };
    a.toolkit.loadTools = function() {
        var d = a.configure.tools,
            b;
        for (b in d) {
            var e = d[b].toolkit,
                f = !a.util.exists("sketch.toolkit.__init." + e),
                c = void 0 !== a.toolkit[e];
            a.toolkit.__init[e + "." + b] ? a.detect.add(e, b) : a.vector.shape[b] ? a.detect.add(e, b) : -1 === b.indexOf(".") && ("media" === e && a.toolkit.media) && (0 === b.indexOf("gl_") ? window.glfx && a.detect.add(e, b) : a.detect.add(e, b));
            f || c || (a.detect.add(e, b), f = {}, c = a.canvas2d.layers, f.active = c.active, f.draw = c.draw, f.cache = c.cache, f.layer0 = c.layer0, f.type = e, a.detect.area[e] && (c = a.feature[e] || a.feature.tools[e] || a.feature.tools, f.minWidth = c.minWidth, f.minHeight = c.minHeight, f.maxWidth = c.maxWidth, f.maxHeight = c.maxHeight, f.defaultWidth = c.defaultWidth, f.defaultHeight = c.defaultHeight), f = new a.toolkit.__init[e](f),
                a.toolkit[e] = f, f.construct && f.construct())
        }
    };
    a.toolkit.loadResource = function(d, b) {
        var e = d.toolkit || a.toolkit.updateToolkit(d.type);
        e && e.loadResource({
            action: d,
            onload: b
        })
    };
    a.toolkit.register = function(d, b) {
        if ("object" === typeof d && d.length) for (; d.length;) a.toolkit.register(d.shift(), b);
        else a.toolkit.__init[d] || (a.toolkit.__init[d] = b), a.configure.tools[d] || (a.configure.tools[d] = {
            toolkit: d,
            type: d
        })
    };
    a.toolkit.updateToolkit = function(d) {
        var b = d.type;
        if (a.detect.shape[b]) return d.toolkit = a.toolkit.shape;
        if (a.detect.brush[b]) return d.toolkit = a.toolkit.brush;
        if (a.detect.media[b]) return d.toolkit = a.toolkit.media;
        if (a.toolkit[b]) return d.toolkit = a.toolkit[b];
        console.log("missing toolkit:", b)
    };
    a.toolkit.getToolkit = function(d) {
        if (a.detect.shape[d]) return a.toolkit.shape;
        if (a.detect.brush[d]) return a.toolkit.brush;
        if (a.detect.media[d]) return a.toolkit.media;
        if (a.toolkit[d]) return a.toolkit[d];
        console.log("missing toolkit:", d)
    };
    a.toolkit.hasTool = function(d) {
        return (d = a.configure.tools[d]) ? !! a.toolkit[d.toolkit] : !1
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.toolkit && (sketch.toolkit = {});
(function(a) {
    a.toolkit.setMedia = function(b) {
        var c = b.type,
            e = b.src,
            d = b.onload;
        !1 === a.feature.vector.edit && "text" !== a.tool.type && a.scene.deselectAll();
        var g = a.selection.items,
            h = "select" === a.tool.type,
            r = a.scene.data[a.selection.idx],
            r = a.configure.tools,
            q = [],
            u = [];
        switch (c) {
            case "text":
                var v = b.fontFamily || b.name;
                a.toolkit.text.style.fontFamily = v;
                r[c].fontFamily = v;
                for (var s in g)(r = a.scene.data[s]) && "text" === r.type && (q.push({
                    id: r.id,
                    fontFamily: r.fontFamily
                }), u.push({
                    id: r.id,
                    fontFamily: v
                }), r.fontFamily = v,
                    r.dirtyResource = !0);
                break;
            case "image":
            case "clipart":
            case "stamp":
                for (s in "stamp" === c ? (e = e.replace("thumb", "live"), r[c].src = e) : (e = e.replace(".png", ".svg").replace("-preview", ""), r[c].src = e, r = a.toolkit.media, r.style.src = e, r.style.render = void 0), g) if (r = a.scene.data[s], "image" === r.type && "clipart" === c ? r.type = "clipart" : "clipart" === r.type && "image" === c && (r.type = "image"), r && r.type === c) if (g = r.src, r.src = e, !1 === a.scene.ensureMaxCopies(r)) r.src = g;
                else {
                    var g = {
                        id: r.id,
                        src: g
                    }, x = {
                        id: r.id,
                        src: e
                    }, w = a.lib[r.type].getEntry(r.src);
                    if (w) for (v in a.scene.api.rules) "undefined" === typeof w[v] ? "undefined" !== typeof r[v] && (g[v] = r[v], x[v] = "", delete r[v]) : (g[v] = r[v], x[v] = w[v], r[v] = w[v]);
                    q.push(g);
                    u.push(x);
                    r.dirtyResource = !0;
                    r.dirty = !0
                }
        }
        q.length && u.length ? (a.selection.length && (a.active.canvas.width = a.active.canvas.width), a.history && a.history.store(q, u), a.render.preload({
            onload: d
        })) : a.toolkit.setTool(c, function() {
            h ? a.toolkit.setTool("select") : a.ui.setToolMenu && a.ui.setToolMenu(a.tool.type);
            if (b.onload) b.onload()
        })
    };
    a.addMedia = function(f,
                          c, g) {
        var m = !! f.openAsNew;
        f = f.file || f;
        c = c || a.toolkit.getCenterPoint();
        if (f.toDataURL) return f.toBlob(function(b) {
            a.addMedia(b, c, g)
        });
        var l = {
            data: {},
            add: function(a) {
                l.data[a] = !0
            },
            run: function(b) {
                a.loader.stop();
                var c = l.data;
                c.clipart && c.stamp && delete c.clipart;
                for (var f in l.data) l.callbacks[f]();
                l.callbacks.callback(b)
            },
            callbacks: {
                callback: function(a) {
                    f.callback && f.callback();
                    g && g(a)
                },
                text: function() {
                    a.ui.setToolMenu && (a.ui.setToolMenu("text"), a.ui.buildConfigure("text", !0));
                    a.toolkit.setTool("text")
                },
                stamp: function() {
                    a.ui.setToolMenu && (a.ui.setToolMenu("stamp"), a.ui.buildConfigure("stamp", !0));
                    a.toolkit.setTool("stamp")
                },
                clipart: function() {
                    a.configure.tools.clipart.opacity.value = 100;
                    a.toolkit.setTool("clipart");
                    a.exec("select")
                },
                image: function() {
                    a.configure.tools.clipart.opacity.value = 100;
                    a.toolkit.setTool("clipart");
                    a.exec("select")
                },
                color: function() {
                    a.palette.update("color", !0);
                    sk.windows.open("sk-palette")
                },
                gradient: function() {
                    a.palette.update("gradient", !0);
                    sk.windows.open("sk-palette")
                },
                pattern: function() {
                    a.palette.update("pattern", !0);
                    sk.windows.open("sk-palette")
                }
            }
        }, p, r;
        f.slice && "string" === typeof f.type && (f.lastModifiedDate ? r = STRING.extension(f.name) : (p = URL.createObjectURL(f), r = (f.type || "image/png").split("/").pop()));
        switch (r) {
            case "zip":
                return d(f, l);
            case "json":
                return a.open.json(f, a.on.sketchReady, a.on.sketchReady);
            case "sketch":
                return a.open.zip(f);
            case "woff":
                return console.log("woff", f), l.run();
            case "pat":
                return console.log("pat", f), l.run();
            case "abr":
                return l.add("stamp"),
                    h("ABR", f, l.run);
            case "gbr":
                return l.add("stamp"), h("GBR", f, l.run);
            case "ggr":
                return l.add("gradient"), a.style.addFromBlob(f, l.run);
            case "gpl":
                return l.add("color"), a.style.addFromBlob(f, l.run);
            case "pdf":
                return b(f, c, l.run, !0, m);
            case "psd":
                return e(f, c, l.run, !0, m)
        }
        p = p || f.src || f;
        if ("string" !== typeof p) return console.log("unrecognized", f);
        r = r || STRING.extension(p);
        if ("{" === p.substr(0, 1)) a.open.json(p, a.on.sketchReady, a.on.sketchReady);
        else {
            var q = "function" === typeof a.toolkit.__init.media,
                u = function(b) {
                    m && "image" === r ? a.exec("new-prompt", function() {
                        a.open.image({
                            src: b,
                            openAsNew: m,
                            callback: function() {
                                l.run()
                            }
                        })
                    }) : m && "clipart" === r ? a.exec("new-prompt", function() {
                        a.open.svg({
                            src: b,
                            openAsNew: m,
                            callback: function() {
                                l.run()
                            }
                        })
                    }) : a.scene.add({
                        type: r,
                        src: b,
                        width: f.width,
                        height: f.height,
                        points: [c]
                    }, function(a) {
                        l.run(a)
                    })
                };
            0 === p.indexOf("<svg") && (p = '<?xml version="1.0" encoding="UTF-8"?>' + p);
            0 === p.indexOf("<?xml") && (p = "data:image/svg+xml;base64," + btoa(p), r = "svg");
            "svg" === r ? q ? (l.add("clipart"), r = "clipart", g ? a.assets.addClipart(p,
                u) : u(p)) : a.open.svg(p) : q && (l.add("image"), r = "image", g ? a.assets.addImage(f, u) : u(p))
        }
    };
    var h = function(b, c, e) {
        var d = a.convert["blobTo" + b];
        if (d) {
            var g = "decoding ." + b;
            a.loader.decode = a.loader.decode || a.loader.add(g);
            a.loader.files = a.loader.files || a.loader.add("...");
            d(c, function(b, c, f, d) {
                a.loader.update(a.loader.decode, g, Math.max(0, f - 1) >> 0);
                a.loader.update(a.loader.files, c.name || "untitled");
                a.assets.addStamp(b, function(b, c) {
                    100 === f ? (a.loader.update(a.loader.decode, g, 99), e && e()) : d && d()
                })
            })
        } else a.feature.debug && console.log("missing .abr support"), e && e()
    }, d = function(b, c) {
        a.io.zip.getEntries(b, function(e) {
            if (e.some(function(a, b, c) {
                return "sketch.json" === a.filename
            })) a.io.zip.open(b);
            else {
                var d = a.loader.add("opening zip..."),
                    g = a.loader.add("...");
                a.io.zip.decode({
                    entries: e,
                    oncomplete: function() {
                        a.loader.stop();
                        c.run()
                    },
                    onchange: function(e) {
                        var k = e.blob,
                            q = e.filename,
                            u = e.next,
                            v = STRING.extension(q),
                            v = "undefined" === k.type ? v : k.type;
                        a.loader.update(d, "opening zip...", e.percent);
                        a.loader.update(g, STRING.basename(q));
                        switch (v) {
                            case "application/json":
                                "sketch.json" === q ? (a.loader.stop(), a.io.zip.open(b)) : u();
                                break;
                            case "image/jpeg":
                            case "image/gif":
                            case "image/png":
                            case "jpeg":
                            case "png":
                            case "gif":
                                c.add("clipart");
                                a.assets.addImage(k, u);
                                break;
                            case "image/svg+xml":
                            case "svg":
                                c.add("clipart");
                                a.assets.addClipart(k, u);
                                break;
                            case "abr":
                                c.add("stamp");
                                h("ABR", k, u);
                                break;
                            case "gbr":
                                c.add("stamp");
                                h("GBR", k, u);
                                break;
                            case "ggr":
                                c.add("gradient");
                                a.style.addFromBlob(k, u);
                                break;
                            case "gpl":
                                c.add("color");
                                a.style.addFromBlob(k,
                                    u);
                                break;
                            default:
                                u()
                        }
                    },
                    onprogress: function(b, c, f) {
                        a.loader.update(d, "opening zip...", b);
                        a.loader.update(g, STRING.basename(f))
                    }
                })
            }
        })
    }, g = function(b, c, e, d) {
        a.ui.confirm({
            message: "clear-confirm",
            callback: function(a) {
                a && b(c, e, d)
            },
            labels: {
                ok: "Open Project",
                cancel: "Cancel"
            }
        })
    }, b = function(f, c, e, d, l) {
        if (d && l) return g(b, f, c, e);
        var h = a.loader.add("opening pdf...");
        f = URL.createObjectURL(f);
        PDFJS.getDocument(f).then(function(b) {
            var f = [],
                d = 0,
                g = 0,
                m = new a.util.Queue({
                    range: {
                        from: 1,
                        to: b.numPages
                    },
                    callback: function() {
                        a.loader.update(h,
                            null, 100);
                        if (l) {
                            a.exec("new");
                            var b = a.area.padding / 2;
                            a.project.setSize(g, d);
                            a.project.pages = {};
                            a.project.pages.data = [];
                            a.project.pages.current = 0;
                            a.project.pages.length = f.length;
                            var m = 0;
                            new sketch.util.Queue({
                                items: f,
                                flatten: !0,
                                callback: function() {
                                    a.exec("select");
                                    a.exec("zoom-reset");
                                    a.scene.selectByIndex(s, !1)
                                },
                                next: function(c, e, d) {
                                    c = f[d];
                                    a.project.pages.data[d] = {
                                        src: c.src,
                                        width: c.width,
                                        height: c.height
                                    };
                                    a.scene.add({
                                        type: "image",
                                        src: c.src,
                                        width: c.width,
                                        height: c.height,
                                        points: [{
                                            x: a.canvas2d.x + c.width / 2 + b,
                                            y: a.canvas2d.y + m + (c.height / 2 + b)
                                        }]
                                    }, this.next);
                                    m += c.height
                                }
                            })
                        } else {
                            var r = f.length - 1;
                            c = c || a.toolkit.getCenterPoint();
                            c.x -= 10 * r;
                            c.y -= 10 * r;
                            var s = {}, z = new a.util.Queue({
                                items: f,
                                flatten: !0,
                                callback: function() {
                                    a.exec("select");
                                    a.scene.selectByIndex(s, !1);
                                    a.render("helpers.addPDF");
                                    e && e()
                                },
                                next: function(b, f, e) {
                                    z = this;
                                    a.scene.add({
                                        type: "image",
                                        src: b.src,
                                        points: [{
                                            x: c.x + 10 * e,
                                            y: c.y + 10 * e
                                        }]
                                    }, function(a) {
                                        s[a.zIndex] = !0;
                                        z.next()
                                    })
                                }
                            })
                        }
                    },
                    next: function(c) {
                        m = this;
                        b.getPage(c).then(function(e) {
                            var k = e.getViewport(2),
                                l = a.util.Canvas(k.width, k.height);
                            e.render({
                                canvasContext: l.ctx,
                                viewport: k,
                                callback: function() {
                                    g = Math.max(l.width, g);
                                    d += l.height;
                                    l.toBlobURL(function(e) {
                                        a.loader.update(h, null, 100 * (c / b.numPages) >> 0);
                                        f.push({
                                            src: e,
                                            width: l.width,
                                            height: l.height
                                        });
                                        m.next()
                                    })
                                }
                            }).then(function() {})
                        })
                    }
                })
        })
    }, e = function(b, c, e, d, g) {
        e = new FileReader;
        e.onload = function(b) {
            b = new Uint8Array(b.target.result);
            b = new PSD.Parser(b);
            b.parse();
            a.addMedia(b.imageData.createCanvas(b.header, b.colorModeData), c)
        };
        e.readAsArrayBuffer(b)
    };
    a.toolkit.addBackground = function(b, c) {
        "string" === typeof b && (b = {
            src: b,
            name: b,
            type: b
        });
        var e = function(c, e, d, k) {
                c = {
                    type: e,
                    src: c,
                    name: "background",
                    useStickToBack: !0,
                    selectable: !1
                };
                d / k < g / h ? (c.useConstrainX = !0, c.useAlignY = "top", c.bbox = {}, c.bbox.width = g, c.bbox.height = k / d * g) : (c.useConstrainY = !0, c.useAlignX = "left", c.bbox = {}, c.bbox.width = d / k * h, c.bbox.height = h);
                c.bbox.owidth = c.bbox.width;
                c.bbox.oheight = c.bbox.height;
                c.bbox.x = (g - c.bbox.width) / 2;
                c.bbox.y = (h - c.bbox.height) / 2;
                c.fill = {
                    gradient: "",
                    color: b.color || "rgba(0,0,0,1)",
                    type: "color"
                };
                a.scene.removeByName("background");
                d = a.scene.addObject(c);
                a.feature.vector.edit && a.history && (k = [a.scene.clone(d)], a.history.store("add", k));
                return d
            }, d = a.tool.type,
            g = a.canvas2d.width,
            h = a.canvas2d.height;
        b.type && -1 !== b.type.indexOf("svg") ? (a.toolkit.setTool("clipart"), a.tool.style.src = "#" + b.name, a.tool.loadResource({
            action: a.tool.style,
            onload: function() {
                e(a.tool.style.src, "clipart", a.tool.style.bbox.width, a.tool.style.bbox.height);
                c && c(action)
            }
        })) : a.convert.fileToCanvas(b, null, function(b, f) {
            var g = "blob:" === f.src.substr(0, 5) ? b.toDataURL() : f.src,
                l = b.width,
                h = b.height,
                g = "#" + f.name;
            a.configure.tools.image.src = g;
            a.toolkit.setTool("image");
            var p = e(g, "image", l, h);
            p.toolkit.loadResource({
                action: p,
                onload: function() {
                    a.toolkit.setTool(d);
                    a.render("root.toolkit.addBackground");
                    c && c(p)
                }
            })
        })
    };
    a.toolkit.addBackgroundColor = function(b) {
        var c = a.tool.type;
        a.style && (a.style.fill.color = b);
        a.toolkit.setTool("rectangle");
        b = a.canvas2d.container;
        a.scene.add({
            type: "rectangle",
            points: [{
                x: b.offsetWidth / 2,
                y: b.offsetHeight / 2
            }, {
                x: b.offsetWidth / 2,
                y: 0
            }]
        });
        b = a.scene.data[a.scene.data.length - 1];
        b.zIndex = -1;
        b.useConstrain = !0;
        b.useStickToBack = !0;
        b.useStretchToEdge = !0;
        a.toolkit.setTool(c);
        a.scene.sort();
        a.render("root.toolkit.addBackgroundColor")
    };
    a.toolkit.addFromDrag = function(b) {
        -1 !== String(b).indexOf("Event") && (b = {
            target: this,
            src: this.src
        });
        var c = b.target,
            e = b.event,
            d = b.src || c.getAttribute("data-src") || c.src,
            g = b.type || c.getAttribute("data-type") || "clipart";
        a.assets.add(d);
        var h = c.cloneNode(!0);
        "[object HTMLCanvasElement]" === h.toString() && h.getContext("2d").drawImage(c, 0, 0);
        var r = (c.offsetWidth - parseInt(c.width)) / 2;
        h.id = "addFromDrag";
        h.style.position = "absolute";
        h.style.opacity = 1;
        h.style.zIndex = 1E6;
        h.style.display = "block";
        h.style.border = "1px solid transparent";
        h.style.margin = r + "px";
        var r = sk.util.getMetrics(c),
            q = r.padding,
            u = q[0] + q[1],
            v = q[2] + q[3],
            s = r.border,
            x = q[0] + s[0],
            w = q[2] + s[2],
            A = r.width,
            y = r.height;
        h.style.width = A - u + "px";
        h.style.height = y - v + "px";
        return eventjs.proxy.drag({
            position: "move",
            target: c,
            event: e,
            listener: function(e,
                               k) {
                var r;
                if (!a.toolkit.media) return console.log("Missing 'sketch.toolkit.media'");
                r = eventjs.proxy.getCoord(e);
                if ("down" === k.state) {
                    r = eventjs.proxy.getCoord(e);
                    var q = eventjs.proxy.getBoundingBox(k.target);
                    k.offset = {};
                    k.offset.x = q.width / 2 - (r.x - k.x);
                    k.offset.y = q.height / 2 - (r.y - k.y);
                    eventjs.prevent(e)
                }
                var s = k.bbox.scrollBodyTop,
                    J = k.bbox.scrollBodyLeft;
                h.style.left = k.x + J + x - 1 + "px";
                h.style.top = k.y + s + w - 1 + "px";
                if (!h.addedToDOM) {
                    var C = Math.abs(k.x - k.start.x),
                        O = Math.abs(k.y - k.start.y);
                    if (C > A / 2 || O > y / 2) h.addedToDOM = !0, document.body.appendChild(h)
                }
                if ("up" === k.state) {
                    C = r.x - J;
                    O = r.y - s;
                    h.style.display = "none";
                    if ((q = document.elementFromPoint(C, O)) && "active" === q.id) {
                        a.scene.deselectAll();
                        a.render("root.toolkit.addFromDrag");
                        C = a.toolkit.media;
                        C.style.useMinWidth = 1;
                        C.style.useMaxWidth = 2E3;
                        var q = eventjs.proxy.getBoundingBox(a.canvas2d.container),
                            C = r.x - q.x1 - q.scrollBodyLeft + k.offset.x + J,
                            O = r.y - q.y1 - q.scrollBodyTop + k.offset.y + s,
                            N = a.tool.type,
                            q = eventjs.proxy.getBoundingBox(c);
                        r = [{
                            x: C,
                            y: O
                        }, {
                            x: C + (q.width - u) / 2,
                            y: O + (q.height - v) / 2
                        }];
                        a.scene.add({
                            type: g,
                            src: d,
                            points: r,
                            callback: function(c) {
                                a.tool.type !== N && a.toolkit.setTool(N);
                                if (b.ondrop) b.ondrop(c);
                                a.on.select && a.on.select([c])
                            }
                        })
                    } else a.toolkit.exportDrop(d, C, O);
                    h.addedToDOM && document.body.removeChild(h)
                }
            }
        })
    };
    a.toolkit.exportDrop = function(b, c, e) {
        if (!1 !== a.feature.exportDrop) {
            var d = a.scene.getFocused();
            0 < c && 0 < e && c < window.innerWidth && e < window.innerHeight || a.assets.add({
                src: b,
                type: d ? d.type : a.tool.type,
                onload: function(c, e) {
                    var d = (STRING.basename(b) || "").split(".").shift();
                    e.vob ? a.download.blob(new Blob([e.stringify()], {
                        type: "image/svg+xml"
                    }), d + ".svg") : e.toBlob && e.toBlob(function(b) {
                        a.download.blob(b, d + ".png")
                    })
                }
            })
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function(a) {
    a.Camera = function(a) {
        var d = this,
            g = function(b, c) {
                b = b || {};
                if (sketch.util.exists("gapi.hangout.getLocalParticipantId")) {
                    var e = gapi.hangout.getLocalParticipantId(),
                        f = gapi.hangout.layout.createParticipantVideoFeed(e),
                        e = gapi.hangout.layout.getVideoCanvas();
                    e.setVideoFeed(f);
                    console.log(e)
                }
                var f = b.video || a.rtc.getFocusVideo(),
                    e = document.createElement("canvas"),
                    d = e.getContext("2d");
                e.width = 640;
                e.height = 480;
                d.drawImage(f, 0, 0);
                c && c(e)
            }, b = function() {
                c.className = "fadein";
                setTimeout(function() {
                    c.className = "fadeout";
                    setTimeout(function() {
                        c.style.display = "none";
                        a.loader.update(a.loader.camera, "taking photo...", 100)
                    }, 200);
                    g({
                        video: k
                    }, function(b) {
                        a.area.inGenesisChannel = !0;
                        a.reset.configure("image");
                        a.scene.deselectAll();
                        a.scene.add({
                            fromSocket: p,
                            type: "image",
                            filters: a.rtc.videos.you.element.gl.filters,
                            src: b
                        }, function() {
                            a.feature.stream.videoAtop ? a.rtc.arrange() : a.rtc.pause(k.id);
                            if (p) {
                                var b = a.scene.getFocused();
                                a.scene.deselect(b.zIndex);
                                a.toolkit.setTool(r)
                            } else a.exec("select"), a.ui.buildConfigure(a.tool.type, !0);
                            e && e();
                            d.capturing = !1
                        })
                    })
                }, 100)
            }, e, f = function(f, g, v, s, x, w) {
                k = a.rtc.getFocusVideo(v);
                if (!k) return console.log("missing base stream");
                k.filterId = s = s || k.filterId || 0;
                a.loader.camera = a.loader.camera || a.loader.add("taking photo...");
                d.capturing = !0;
                e = x;
                m = f || a.canvas2d.width;
                l = g || a.canvas2d.height;
                r = a.tool.type || "select";
                p = w;
                a.dataChannel && !p && a.dataChannel.send(["take-snapshot", m, l, v, s]);
                c.style.display = "block";
                setTimeout(b, 1)
            }, c = document.createElement("div");
        c.id = "snapshot";
        c.style.display = "none";
        document.body.appendChild(c);
        var k, m, l, p, r;
        this.capturing = !1;
        this.capture = function() {
            f.call(arguments)
        };
        return this
    };
    return a
}(sketch);
(function(a) {
    a.toolkit.register("crop", function(h) {
        var d = this,
            g = 0,
            b = 0,
            e = 0,
            f = 0,
            c = 0,
            k = 0,
            m = null,
            l = null,
            p = null;
        this.type = "crop";
        this.active = h.active.ctx;
        this.cache = h.cache.ctx;
        this.ctx = h.layer0.ctx;
        this.params = {
            aspect: "portrait",
            constrain: !0,
            ratio: {
                width: 377,
                height: 197,
                units: "px",
                res: 72
            }
        };
        this.construct = function() {
            a.history.registerFunction({
                type: "crop",
                fn: function(b, c, e, f, g) {
                    a.project.setData(e ? c[0] : c[1]);
                    e ? (m = c[2], l = c[3], x(d.active, m, l, {
                        state: "update"
                    })) : d.unset()
                }
            });
            a.history.registerFunction({
                type: "crop-draw",
                fn: function(b, c, e, f, g) {
                    b = e ? c[0] : c[1];
                    m = b.start;
                    l = b.end;
                    a.project.setScroll(b.scrollLeft, b.scrollTop);
                    a.orient.reset();
                    a.orient.setZoom(b.zoom || 1);
                    x(d.active, b.start, b.end, {
                        state: "update"
                    })
                }
            })
        };
        this.enable = function() {
            d.__mouse = eventjs.add({
                target: d.active.canvas,
                dbltap: d.onDblTap,
                drag: d.onDrag,
                mousemove: d.onCursor
            });
            d.__key = eventjs.add({
                target: window,
                keydown: a.keyboard.keydown,
                keyup: a.keyboard.keyup
            })
        };
        this.disable = function() {
            r(this.__mouse);
            r(this.__key);
            this.unset()
        };
        var r = function(a) {
            for (var b in a) {
                var c = a[b].remove;
                c && c()
            }
        };
        this.unset = function() {
            d.active.canvas.width = d.active.canvas.width;
            m = l = {
                x: 0,
                y: 0
            }
        };
        this.onDrag = function(b, c) {
            d.isMoving = !("up" === c.state || "update" === c.state);
            d.event = c;
            var e = a.util.clone(c.start);
            u(e, {
                x: c.x,
                y: c.y,
                state: c.state
            }, c.state, b)
        };
        this.onDblTap = function(a) {
            setTimeout(function() {
                d.apply()
            }, 0)
        };
        this.onCursor = function(a) {};
        this.onResize = function(b) {
            if (m && l) {
                var e = a.canvas2d.zoom;
                b = c - (a.canvas2d.x + a.project.x * e);
                e = k - (a.canvas2d.y + a.project.y * e);
                m.y -= e;
                m.x -= b;
                l.y -= e;
                l.x -= b;
                x(d.active, m, l, {
                    state: "move"
                })
            }
        };
        this.onRenderControls = function(a) {
            m && l && (m.x === l.x && m.y === l.y || x(d.active, m, l, {
                state: "move"
            }))
        };
        this.onDownKey = this.onUpKey = this.onLeftKey = this.onRightKey = function(a) {
            var b = eventjs.shiftKey ? 10 : 1;
            switch (a.name) {
                case "down":
                    q(0, 1 * b, a.state);
                    break;
                case "up":
                    q(0, - 1 * b, a.state);
                    break;
                case "left":
                    q(-1 * b, 0, a.state);
                    break;
                case "right":
                    q(1 * b, 0, a.state)
            }
            return !0
        };
        this.onAKey = function(b) {
            if (eventjs.metaKey) {
                var c = a.canvas2d.zoom;
                b = a.canvas2d.x + a.project.x * c;
                c = a.canvas2d.y + a.project.y * c;
                d.rect(b, c, b + a.project.bounds.width, c + a.project.bounds.height);
                return !0
            }
        };
        this.onEnterKey = function(a) {
            if ("up" !== a.state) return !0;
            d.apply();
            return !0
        };
        this.onEscapeKey = function(a) {
            if ("up" !== a.state) return !0;
            d.rect(0, 0, 0, 0);
            return !0
        };
        this.update = function(a) {
            if (isFinite(m.x) && isFinite(l.x)) {
                var b = d.params;
                "boolean" === typeof a.constrain && b.constrain !== a.constrain && (b.constrain = a.constrain);
                "string" === typeof a.aspect && b.aspect !== a.aspect && (b.aspect = a.aspect);
                "object" === typeof a.ratio && b.ratio !== a.ratio && (b.ratio = a.ratio);
                !0 === b.constrain && (d.updateAspectRatio(m, l), d.updateTransform(m, l));
                u(m, l, "update")
            }
        };
        this.apply = function(b, c, e, f) {
            isFinite(b) && isFinite(c) && d.rect(b, c, e, f);
            b = m;
            c = l;
            if (b && c && 0 !== b.x - c.x && 0 !== b.y - c.y) {
                e = a.project.getData();
                var g = a.canvas2d;
                f = g.zoom;
                var k = g.x,
                    h = g.y,
                    g = k + a.project.x * f,
                    p = h + a.project.y * f,
                    r = Math.max(b.x, c.x) / f,
                    q = Math.max(b.y, c.y) / f,
                    s = Math.min(b.x, c.x) / f,
                    v = Math.min(b.y, c.y) / f,
                    k = r - k - (s - k),
                    h = q - h - (v - h);
                a.project.units = "px";
                a.project.x += s - g / f;
                a.project.y += v - p / f;
                a.orient.reset();
                a.project.setSize(k, h);
                a.orient.reset();
                a.orient.setZoom(e.zoom);
                a.history && (f = a.project.getData(), a.history.store("crop", [e, f, b, c]));
                d.unset()
            }
        };
        this.rect = function(a, b, c, e) {
            isFinite(a) && (this.__rect = {
                start: {
                    x: a,
                    y: b
                },
                x: a + c,
                y: b + e
            });
            this.__rect.state = "update";
            this.onDrag({}, this.__rect)
        };
        var q = function(a, b, c) {
            m && l && ("up" === c ? u(m, l, "update") : (m.x += a, m.y += b, l.x += a, l.y += b, u(m, l, c)))
        }, u = function(c, k, h, r) {
            if (!c || !k) return s("");
            var q = a.active,
                v = "down" === h || "update" === h;
            h = "up" === h || "update" === h;
            var u = c.x !== k.x || c.y !== k.y;
            !v && m && l || (m = m || {
                x: 0,
                y: 0
            }, l = l || {
                x: 0,
                y: 0
            });
            v && (self.__from = a.project.getData(), self.__from.start = a.util.clone(m), self.__from.end = a.util.clone(l));
            if (r) var w = a.project.scrollLeft,
                C = a.project.scrollTop;
            else C = w = 0;
            var O = a.canvas2d.zoom,
                N = a.project.bounds.width * O,
                L = a.project.bounds.height * O,
                Q = a.canvas2d.x + a.project.x * O,
                K = a.canvas2d.y + a.project.y * O,
                F = Q + N,
                aa = K + L;
            c.x -= w * (1 - O);
            c.y -= C * (1 - O);
            k.x -= w * (1 - O);
            k.y -= C * (1 - O);
            var O = a.util.clone(k),
                U = l.x - m.x,
                Z = l.y - m.y;
            v && (a.tool.coord = a.util.clone(k), g = k.x - m.x, b = k.y - m.y, e = w, f = C, q.beginPath(), q.rect(m.x, m.y, U, Z), p = q.isPointInPath(O.x, O.y) ? "move" : "crop");
            w -= e;
            C -= f;
            "move" !== p && (U += w, Z += C);
            s(p);
            switch (p) {
                case "north":
                    c.x = m.x;
                    c.y = l.y;
                    k.x = l.x;
                    k.y -= b;
                    c.y < k.y && (m.y = l.y, b = g = 0, s("south"));
                    break;
                case "north-east":
                    c.x = m.x;
                    c.y = l.y;
                    k.x = k.x - g + U;
                    k.y -= b;
                    c.y < k.y ? (m.y = l.y, l.x -= U, b = g = 0, s("south-east")) : c.x > k.x && (l.x = m.x, b = g = 0, s("north-west"));
                    break;
                case "east":
                    c.x = m.x;
                    c.y = m.y;
                    k.x = Math.min(F, k.x - g + U);
                    k.y = l.y;
                    c.x > k.x && (l.x = m.x, b = g = 0, s("west"));
                    break;
                case "south-east":
                    c.x = m.x;
                    c.y = m.y;
                    k.x = Math.min(F, k.x - g + U);
                    k.y = Math.min(aa, k.y - b + Z);
                    c.x > k.x && c.y > k.y ? s("north-west") : c.y > k.y ? (l.y = m.y, l.x -= U, b = g = 0, s("north-east")) : c.x > k.x ? (l.x = m.x, l.y -= Z, b = g = 0, s("south-west")) : s("south-east");
                    break;
                case "south":
                    c.x = m.x;
                    c.y = m.y;
                    k.x = l.x;
                    k.y = Math.min(aa, k.y - b + Z);
                    c.y > k.y && (l.y = m.y, b = g = 0, s("north"));
                    break;
                case "south-west":
                    c.x = l.x;
                    c.y = m.y;
                    k.x = Math.max(Q, k.x - g);
                    k.y = Math.min(aa, k.y - b + Z);
                    c.y > k.y ? (l.y = m.y, b = g = 0, s("north-west")) : c.x < k.x && (m.x = l.x, l.y -= Z, b = g = 0, s("south-east"));
                    break;
                case "west":
                    c.x = l.x;
                    c.y = m.y;
                    k.x = Math.max(Q, k.x - g);
                    k.y = l.y;
                    c.x < k.x && (m.x = l.x, b = g = 0, s("east"));
                    break;
                case "north-west":
                    c.x = l.x;
                    c.y = l.y;
                    k.x = Math.max(Q, k.x - g);
                    k.y = Math.max(K, k.y - b);
                    c.y < k.y ? (m.y = l.y, b = g = 0, s("south-west")) : c.x < k.x && (m.x = l.x, b = g = 0, s("north-east"));
                    break;
                case "move":
                    var T = Math.max(Q, k.x - g),
                        P = Math.max(K, k.y - b),
                        T = T - Math.max(Q, T + U - N) + Q,
                        P = P - Math.max(K, P + Z - L) + K;
                    c.x = T + w;
                    c.y = P + C;
                    k.x = U + T + w;
                    k.y = Z + P + C;
                    break;
                default:
                    k.x += w, k.y += C
            }
            U = d.params;
            (U.constrain || eventjs.shiftKey) && r && u && (r = k.x - c.x || 1, u = k.y - c.y || 1, Z = U.constrain ? U.ratio : {
                width: L,
                height: N
            }, U = "portrait" === U.aspect ? {
                x: Z.height / Z.width,
                y: Z.width / Z.height
            } : {
                x: Z.width / Z.height,
                y: Z.height / Z.width
            }, Math.abs(r) * U.x > Math.abs(u) ? k.y = c.y + u / Math.abs(u) * Math.abs(r) * U.x : k.x = c.x + r / Math.abs(r) * Math.abs(u) * U.y, k.x > c.x ? 0 > k.y - K ? k.x = c.x - (K - Math.max(c.y, k.y)) * U.y : k.y - K > L && (k.x = c.x + (aa - Math.min(c.y, k.y)) * U.y) : 0 > k.y - K ? k.x = c.x + (K - Math.max(c.y, k.y)) * U.y : k.y - K > L && (k.x = c.x - (aa - Math.min(c.y, k.y)) * U.y), k.y > c.y ? 0 > k.x - Q ? k.y = c.y - (Q - Math.max(c.x, k.x)) * U.x : k.x - Q > N && (k.y = c.y + (F - Math.min(c.x,
                k.x)) * U.x) : 0 > k.x - Q ? k.y = c.y + (Q - Math.max(c.x, k.x)) * U.x : k.x - Q > N && (k.y = c.y - (F - Math.min(c.x, k.x)) * U.x), k.x = Math.round(k.x), k.y = Math.round(k.y));
            k.x < c.x && (c.x ^= k.x, k.x ^= c.x, c.x ^= k.x);
            k.y < c.y && (c.y ^= k.y, k.y ^= c.y, c.y ^= k.y);
            c = {
                x: c.x < Q ? Q : c.x > F ? F : c.x,
                y: c.y < K ? K : c.y > aa ? aa : c.y
            };
            k = {
                x: k.x < Q ? Q : k.x > F ? F : k.x,
                y: k.y < K ? K : k.y > aa ? aa : k.y
            };
            x(q, c, k, O);
            if (h || v || "crop" === p) if (m = c, l = k, a.history && h && self.__from) {
                c = a.project.getData();
                c.start = a.util.clone(m);
                c.end = a.util.clone(l);
                k = [self.__from, c];
                var Y;
                try {
                    Y = JSON.parse(a.history.getLastAction()[1])[1],
                        Y = Y.start && Y.end ? Y : ""
                } catch (da) {
                    Y = ""
                }
                q = eventjs.proxy.hasDistance;
                (Y && q(Y.start, Y.end) || q(c.start, c.end)) && JSON.stringify(Y) !== JSON.stringify(c) && a.history.store("crop-draw", k)
            }
            h && s("")
        }, v = {
            "south-east": "se",
            south: "s",
            north: "n",
            east: "e",
            west: "w",
            "south-west": "sw",
            "north-east": "ne",
            "north-west": "nw"
        }, s = function(b) {
            a.active.canvas.style.cursor = b ? v[b] + "-resize" : "default"
        }, x = function(b, e, f, g) {
            if (e && f) {
                var l = "up" === g.state || "update" === g.state,
                    m = a.canvas2d.zoom,
                    h = a.project.bounds.width * m,
                    p = a.project.bounds.height * m,
                    r = a.project.scrollLeft,
                    q = a.project.scrollTop,
                    s = a.canvas2d.x + (a.project.x + r) * m,
                    v = a.canvas2d.y + (a.project.y + q) * m;
                c = s;
                k = v;
                var u = 0 === e.x - f.x || 0 === e.y - f.y;
                if (u && l) return d.unset();
                b.save();
                b.translate(-r * m, - q * m);
                b.globalCompositeOperation = "copy";
                b.fillStyle = "rgba(0, 0, 0, 0.75)";
                b.fillRect(s - 1, v - 1, h + 2, p + 2);
                if (!u) {
                    m = f.x - e.x;
                    h = f.y - e.y;
                    p = e.x + 0.5;
                    r = f.x - 0.5;
                    q = e.y + 0.5;
                    f = f.y - 0.5;
                    b.beginPath();
                    b.globalCompositeOperation = "destination-out";
                    b.fillStyle = "rgba(0, 0, 0, 1)";
                    b.rect(p, q, m, h);
                    b.fill();
                    26 < Math.abs(p - r) && 16 < Math.abs(q - f) && (s = ((r + p) / 2 >> 0) + 0.5, w(b, g, s - 4, q, 8, 8, "north"), w(b, g, s - 4, f - 8, 8, 8, "south"));
                    26 < Math.abs(q - f) && 16 < Math.abs(p - r) && (s = ((f + q) / 2 >> 0) + 0.5, w(b, g, r - 8, s - 4, 8, 8, "east"), w(b, g, p, s - 4, 8, 8, "west"));
                    16 < Math.abs(p - r) && 16 < Math.abs(q - f) && (w(b, g, p, q, 8, 8, "north-west"), w(b, g, r - 8, q, 8, 8, "north-east"), w(b, g, p, f - 8, 8, 8, "south-west"), w(b, g, r - 8, f - 8, 8, 8, "south-east"));
                    b.save();
                    b.rect(e.x + 0.5, e.y + 0.5, m, h);
                    b.clip();
                    b.lineWidth = 1;
                    b.strokeStyle = "rgba(0, 0, 0, 0.25)";
                    b.shadowColor = "rgba(255, 255, 255, 1)";
                    b.shadowOffsetX = 1;
                    b.shadowOffsetY = 1;
                    b.shadowBlur = 0;
                    if (!1 === l) {
                        l = Math.round(m / 2);
                        f = Math.round(h / 2);
                        b.beginPath();
                        for (g = 0; 3 >= g; g++) b.moveTo(g * m / 3 + e.x, e.y), b.lineTo(g * m / 3 + e.x, e.y + h);
                        for (g = 0; 3 >= g; g++) b.moveTo(e.x, g * h / 3 + e.y), b.lineTo(e.x + m, g * h / 3 + e.y);
                        b.stroke();
                        b.beginPath();
                        b.strokeStyle = "rgba(255, 255, 255, 0.5)";
                        b.shadowColor = "rgba(0, 0, 0, 0.25)";
                        b.moveTo(e.x + l - 7.5, e.y + f + 0.5);
                        b.lineTo(e.x + l + 8.5, e.y + f + 0.5);
                        b.moveTo(e.x + l + 0.5, e.y + f - 7.5);
                        b.lineTo(e.x + l + 0.5, e.y + f + 8.5);
                        b.stroke()
                    }
                    b.restore()
                }
                b.restore()
            }
        }, w = function(b,
                        c, e, f, d, g, k) {
            var l = a.canvas2d.zoom,
                m = a.project.scrollLeft,
                h = a.project.scrollTop;
            b.beginPath();
            b.globalCompositeOperation = "source-over";
            b.fillStyle = "rgba(100, 100, 100, 0.8)";
            b.strokeStyle = "rgba(255, 255, 255, 0.5)";
            b.rect(e, f, d, g);
            b.fill();
            b.stroke();
            var r = c || a.tool.coord,
                m = r.x - m * l,
                l = r.y - h * l;
            b.beginPath();
            b.rect(e - 5, f - 5, d + 10, g + 10);
            b.isPointInPath(m, l) && "down" === c.state && (p = k)
        };
        this.updateAspectRatio = function(a, b) {
            var c = Math.abs(a.x - b.x),
                e = Math.abs(a.y - b.y);
            (c > e ? "landscape" : "portrait") !== d.params.aspect && (d.updateCenter(a, b, {
                x: 0.5 * c,
                y: 0.5 * e
            }), d.updateClamp(a, b))
        };
        this.updateClamp = function(b, c) {
            var e = c.x - b.x,
                f = c.y - b.y,
                g = f / e,
                k = a.project.width,
                l = a.project.height,
                m = 0 > b.y,
                h = c.y > l,
                p = c.x > k,
                r = 0 > b.x;
            if (m || h) m && (f += b.y, b.y = 0), h && (f += l - c.y - 1, c.y = l), e = f / g;
            if (p || r) r && (e += b.x, b.x = 0), p && (e += k - c.x - 1, c.x = k), f = e * g;
            d.updateCenter(b, c, {
                x: e / 2,
                y: f / 2
            })
        };
        this.updateTransform = function(a, b) {
            var c = d.params,
                e = Math.abs(b.x - a.x),
                f = Math.abs(b.y - a.y),
                c = c.ratio,
                f = f / e,
                c = c.width / c.height;
            if (1 > f && 1 < c || 1 < f && 1 > c) c = 1 / c;
            e = Math.sqrt(1 / c * f * e * e);
            d.updateCenter(a, b, {
                x: e / 2,
                y: c * e / 2
            });
            d.updateClamp(a, b)
        };
        this.updateCenter = function(a, b, c) {
            var e = 0.5 * (b.x - a.x) + a.x,
                f = 0.5 * (b.y - a.y) + a.y;
            a.x = Math.round(e - c.x);
            a.y = Math.round(f - c.y);
            b.x = Math.round(e + c.x);
            b.y = Math.round(f + c.y)
        };
        return this
    })
})(sketch);
(function(a) {
    a.toolkit.register("eyeDropper", function(h) {
        var d = this;
        this.type = "eyeDropper";
        this.enabled = !1;
        var g = document.querySelector("#toolbar .center");
        document.createElement("div").style.cssText = "height: 100%; float: left; line-height: 36px; margin: 0 0 0 10px;";
        this.enable = function() {
            !0 !== d.enabled && (d.enabled = !0, d.onDblTap = eventjs.proxy.dbltap({
                target: window,
                fingers: 1,
                listener: d.mouse
            }), d.onDrag = eventjs.proxy.drag({
                position: "relative",
                target: window,
                fingers: 1,
                listener: d.mouse
            }), a.toolkit.select && a.tool !== a.toolkit.select && a.toolkit.select.enable({
                mouse: !1,
                key: !0
            }), g = document.querySelector("#toolbar .menu"))
        };
        this.disable = function() {
            !1 !== d.enabled && (d.enabled = !1, d.onDrag.remove(), d.onDblTap.remove(), a.toolkit.select && a.tool !== a.toolkit.select && a.toolkit.select.disable({
                mouse: !1,
                key: !0
            }))
        };
        this.mouse = function(b, e) {
            eventjs.prevent(b);
            if ("drag" !== e.gesture) {
                var f = eventjs.proxy.getCoord(b),
                    c = eventjs.proxy.getBoundingBox(a.active.canvas);
                e.x = f.x + (c.scrollLeft - c.x1);
                e.y = f.y + (c.scrollTop - c.y1)
            }
            if (sketch.__enabled) c = a.ctx.getImageData(e.x, e.y, 2, 2).data;
            else {
                var f = a.rtc.getFocusVideo().gl.ctx,
                    d = f.canvas.width,
                    c = f.canvas.height,
                    m = parseInt(f.canvas.style.width || d),
                    l = parseInt(f.canvas.style.height || c),
                    h = parseInt(f.canvas.style.left || 0),
                    r = parseInt(f.canvas.style.top || 0),
                    d = (e.x - h) * (d / m) >> 0,
                    l = (l - (e.y - r)) * (c / l) >> 0,
                    c = new Uint8Array(16);
                f.readPixels(d, l, 2, 2, f.RGBA, f.UNSIGNED_BYTE, c)
            }
            f = {};
            for (l = 0; l < c.length; l++) r = l % 4, f[r] = void 0 === f[r] ? c[l] : (f[r] + c[l]) / 2;
            "down" === e.state && (g.style.webkitTransitionDuration = 0);
            c = sketch.color.space(f, "RGBA>W3");
            g.style.background = c;
            if (255 === f[3]) {
                if ("up" === e.state || "dbltap" === e.gesture) g.style.webkitTransitionDuration = "250ms", c = sketch.color.space(f, "RGBA>W3"), a.tool.setColor(c);
                "dbltap" === e.gesture && a.exec(a.tool.lastType)
            }
        };
        return a.toolkit.init(this)
    })
})(sketch);
(function(a) {
    a.toolkit.register("laserPointer", function(d) {
        var g = this;
        this.type = "laserPointer";
        this.vibrate = navigator.vibrate || h;
        this.vibrating = !1;
        this.users = {};
        this.enable = function() {
            g.onDrag = eventjs.add(window, "drag", this.mouse);
            a.toolkit.select && a.tool !== a.toolkit.select && a.toolkit.select.enable({
                mouse: !1,
                key: !0
            })
        };
        this.disable = function() {
            g.onDrag && g.onDrag.remove();
            a.toolkit.select && a.tool !== a.toolkit.select && a.toolkit.select.disable({
                mouse: !1,
                key: !0
            })
        };
        this.mouse = function(b, e, f) {
            f = f || a.style.fill.color;
            b && ("down" === e.state ? eventjs.prevent(b) : eventjs.stop(b));
            var c = a.toolkit.genMouseId(b, e),
                d = c.split(":")[0],
                m = g.users[d];
            m || (m = g.users[d] = {});
            m[c] = {
                state: e.state,
                x: e.x,
                y: e.y,
                identifier: c,
                color: f
            };
            a.dataChannel && (a.feature.stream.sketchLive && b) && (m = g.users[d][c], a.dataChannel.send(["laserPointer", m.state + "," + m.x + "," + m.y + "," + m.identifier, a.style.fill.color]));
            if ("up" === e.state && (m = g.users[d])) {
                delete m[c];
                for (var l in m) break;
                l || delete g.users[l]
            }
            e = rtc && rtc._me && rtc._me.index || 0;
            l = g.users;
            b = l[e];
            f = a.active;
            f.canvas.width = f.canvas.width;
            for (d in l) for (c in m = l[d], m) {
                var h = m[c];
                f.save();
                f.beginPath();
                f.lineWidth = 1;
                f.shadowColor = h.color;
                f.shadowBlur = 15;
                f.shadowOffsetX = 0;
                f.shadowOffsetY = 0;
                f.arc(h.x, h.y, 6, 0, 2 * Math.PI, !0);
                f.fillStyle = h.color;
                f.strokeStyle = "rgba(255,255,255,0.5)";
                f.fill();
                f.stroke();
                f.restore();
                f.beginPath();
                f.arc(h.x, h.y, 7, 0, 2 * Math.PI, !0);
                f.strokeStyle = "rgba(0,0,0,0.5)";
                f.stroke();
                if (parseInt(d) !== e && !g.vibrating) {
                    f.beginPath();
                    for (var r in b) {
                        var q = b[r];
                        f.arc(q.x, q.y, 10, 0, 2 * Math.PI, !0)
                    }
                    f.isPointInPath(h.x,
                        h.y) && (g.vibrate(250), g.vibrating = !0, setTimeout(function() {
                        g.vibrating = !1
                    }, 500))
                }
            }
        };
        return a.toolkit.init(this)
    });
    var h = function(a) {
        console.log("vibrate:", a)
    }
})(sketch);
(function(a) {
    a.toolkit.register("zoom", function(h) {
        var d = this;
        this.type = "zoom";
        this.enable = function() {
            dom.setClass("#sk-orientation", "sk-menu-opened", !0);
            a.active.canvas.width = a.active.canvas.width;
            a.orient.enable();
            d.onGesture = eventjs.add({
                fingers: 2,
                target: window,
                type: "gesture",
                listener: this.gesture
            });
            a.toolkit.select.enable({
                key: !0,
                mouse: !1,
                cursor: !1
            })
        };
        this.disable = function() {
            dom.setClass("#sk-orientation", "sk-menu-opened", !1);
            a.orient.disable();
            d.onGesture && d.onGesture.remove();
            a.toolkit.select.disable()
        };
        this.gesture = function(d, b) {
            var e = a.orient.events;
            "start" === b.state ? (e.drag && e.drag.enabled && e.drag.remove(), b.startScale = a.canvas2d.zoom, b.__x = b.x, b.__y = b.y) : "end" === b.state && e.drag && e.drag.add();
            var e = a.orient,
                f = eventjs.proxy.getBoundingBox(e.canvas),
                c = a.canvas2d.pixelRatio,
                k = a.canvas2d.zoom;
            e.mouse.x = b.x * c - f.x1;
            e.mouse.y = b.y * c - f.y1;
            e.offset.x += (b.x - b.__x) / k;
            e.offset.y += (b.y - b.__y) / k;
            sketch.orient.setZoom(b.startScale * b.scale);
            b.__x = b.x;
            b.__y = b.y
        };
        return a.toolkit.init(this)
    })
})(sketch);
(function(a) {
    a.toolkit.register("select", function(h) {
        var d = this;
        this.type = this.id = "select";
        this.rect = {};
        this.isMoving = !1;
        this.points = {};
        this.copied = {};
        this.enabled = !1;
        this.events = {};
        this.usePreventSelection = !1;
        this.ctx = h.layer0.ctx;
        this.active = h.active.ctx;
        this.cache = h.cache.ctx;
        this.enable = function(b) {
            if (!d.enabled) {
                b = b || {};
                d.usePreventSelection = b.cancelSelection || !1;
                d.search = b.search || "";
                "boolean" !== typeof b.mouse && (b.mouse = !0);
                "boolean" !== typeof b.key && (b.key = !0);
                "boolean" !== typeof b.cursor && (b.cursor = !0);
                if (b.mouse) {
                    var c = this.active.canvas;
                    d.events = eventjs.add({
                        fingers: 1,
                        target: c,
                        longpress: {
                            timeout: 950,
                            driftDeviance: eventjs.isTouch ? 5 : 1,
                            listener: this.contextMenu
                        },
                        gesture: {
                            fingers: 2,
                            target: c,
                            listener: function(b, c) {
                                var e = c.scale,
                                    f = c.rotation,
                                    d = a.scene.data[a.selection.idx];
                                d && (d.bbox.scale.x = e, d.bbox.scale.y = e, d.bbox.rotate = f, d.dirty = !0, a.render("gesture"))
                            }
                        },
                        drag: this.mouseEvent,
                        contextmenu: this.contextMenu,
                        mousemove: b.cursor ? this.cursorEvent : void 0
                    })
                }
                b.key && (eventjs.add(window, "keydown", a.keyboard.keydown),
                    eventjs.add(window, "keyup", a.keyboard.keyup));
                d.enabled = !0;
                return d
            }
        };
        this.disable = function(b) {
            if (d.enabled) {
                b || (b = {});
                "undefined" === typeof b.mouse && (b.mouse = !0);
                "undefined" === typeof b.key && (b.key = !0);
                "undefined" === typeof b.cursor && (b.cursor = !0);
                if (b.mouse) for (var c in d.events) d.events[c].remove && d.events[c].remove();
                b.key && (eventjs.remove(window, "keydown", a.keyboard.keydown), eventjs.remove(window, "keyup", a.keyboard.keyup));
                a.setTooltip("");
                d.enabled = !1
            }
        };
        this.findInRect = function(b, c, e, f, d, h) {
            f = a.canvas2d;
            var u = f.zoom,
                v = f.pixelRatio,
                s = u / v,
                x = f.container,
                w = f.layers;
            c = w.active;
            var A = c.ctx,
                w = w.draw.ctx,
                y = (a.project.scrollLeft + x.scrollLeft) / s,
                x = (a.project.scrollTop + x.scrollTop) / s,
                y = y + 1 * f.x / u,
                x = x + 1 * f.y / u,
                s = {
                    x: (Math.min(b.x1, b.x2) - y) / v,
                    y: (Math.min(b.y1, b.y2) - x) / v
                };
            b = {
                x: (Math.max(b.x1, b.x2) - y) / v,
                y: (Math.max(b.y1, b.y2) - x) / v
            };
            var y = {
                    x: b.x,
                    y: s.y
                }, x = {
                    x: s.x,
                    y: b.y
                }, z = (b.x - s.x) / v,
                B = (b.y - s.y) / v,
                D = (new Date).getTime();
            A.clearRect(0, 0, c.width, c.height);
            A.fillStyle = "rgba(0,0,255,1)";
            a.hovered.reset();
            w.rect(s.x + 0.5, s.y + 0.5, z, B);
            z = 0;
            B = a.area.padding;
            c = a.scene.data;
            for (var E = {}, G = a.selection.length, J = c.length; J--;) {
                var C = c[J];
                if (!1 !== C.selectable) {
                    var O = C.placement;
                    if (O && O.point2d) {
                        var N = C.bbox;
                        if ("text" === C.type) var L = 1,
                            Q = N.width,
                            K = N.height;
                        else L = N.viewBox[2] / N.width, Q = N.viewBox[2], K = L * N.height;
                        var F = -B / N.scale.x * L,
                            L = -B / N.scale.y * L,
                            Q = Q - 2 * F,
                            K = K - 2 * L,
                            aa = O.point2d(F, L),
                            U = O.point2d(F + Q, L),
                            Z = O.point2d(F + Q, L + K),
                            T = O.point2d(F, L + K);
                        if (aa.x > s.x && aa.x < b.x && aa.y > s.y && aa.y < b.y || U.x > s.x && U.x < b.x && U.y > s.y && U.y < b.y || Z.x > s.x && Z.x < b.x && Z.y > s.y && Z.y < b.y || T.x > s.x && T.x < b.x && T.y > s.y && T.y < b.y || g(aa, U, s, b) || g(Z, T, s, b) || g(U, Z, s, b) || g(aa, T, s, b) || g(aa, U, y, x) || g(Z, T, y, x) || g(U, Z, y, x) || g(aa, T, y, x)) if ((a.feature[C.type] || a.feature.tools).usePointInPath && !h) for (N = C.data, F = 0; F < N.length; F++) {
                            if (L = O.point2d(N[F].x, N[F].y), w.isPointInPath(L.x, L.y)) {
                                if (e && G) {
                                    if (!a.selection.items[J]) continue;
                                    z++;
                                    E[J] = !1
                                } else z++, E[J] = !0;
                                a.render.action(C.ctx, C);
                                break
                            }
                        } else {
                            if (e && G) {
                                if (!a.selection.items[J]) continue;
                                aa = "rgba(0,0,0,0.20)";
                                U = "rgba(255,255,255,0.20)";
                                z++;
                                E[J] = !1
                            } else aa = "rgba(255,255,255,0.20)", U = "rgba(0,0,0,0.20)", z++, E[J] = !0, C.dirtyControl = !0;
                            d && (A.save(), A.beginPath(), A.translate(f.x, f.y), A.scale(1 / v * u, 1 / v * u), O.apply(A, !0), A.rect(F, L, Q, K), A.fillStyle = aa, A.lineWidth = 1 / N.scale.x / u, A.strokeStyle = U, A.stroke(), A.fill(), A.restore())
                        }
                    }
                }
            }
            a.feature.debug && console.log("select-time", D - (new Date).getTime());
            if (z) return E
        };
        var g = function(a, b, c, e) {
            return (e.y - a.y) * (c.x - a.x) > (c.y - a.y) * (e.x - a.x) !== (e.y - b.y) * (c.x - b.x) > (c.y - b.y) * (e.x - b.x) && (c.y - a.y) * (b.x - a.x) > (b.y - a.y) * (c.x - a.x) !== (e.y - a.y) * (b.x - a.x) > (b.y - a.y) * (e.x - a.x)
        }, b = {
            selectable: !0
        };
        this.findSingleAction = function(c, e, f, g, h) {
            e = e || c.actions || a.scene.data;
            f = f || c.pointerUp || !1;
            g = g || c.searchParam || b;
            h = h || c.searchType || d.search || "";
            var q = "select" === a.tool.id,
                u = a.feature.vector.edit,
                v = eventjs.metaKey;
            c = a.scene.getPointInCanvas(c);
            for (var s = a.area.padding, x = a.render.cache.padding, w = a.selection.items, A = 1 < a.selection.length, y = !1, z, B, D = e.length; D--;) {
                var E = e[D],
                    G = E.bbox;
                if (!(!G || g.findable && !0 !== E.findable || g.selectable && !1 === E.selectable)) {
                    var J = "button" === E.type;
                    if (J) {
                        if (v && "anchor" === E.id) continue
                    } else {
                        if (!u) continue;
                        if (h && E.toolkit && E.toolkit.id !== h) continue;
                        if (!y && !v && A) {
                            if (y = a.scene.getHovered()) {
                                var C = a.scene.getPointInAction(y, c),
                                    O = C.bbox_x,
                                    N = C.bbox_y,
                                    L = C.bbox_width,
                                    Q = C.bbox_height;
                                if (C.x > O && C.y > N && C.x < O + L && C.y < N + Q) return y.zIndex
                            }
                            y = !0
                        }
                    }
                    C = a.scene.getPointInAction(E, c);
                    O = C.bbox_x;
                    N = C.bbox_y;
                    L = C.bbox_width;
                    Q = C.bbox_height;
                    if (C.x > O && C.y > N && C.x < O + L && C.y < N + Q) {
                        var K = a.feature[E.type] || a.feature.tools;
                        if (J) if (!1 === f && "anchor" === E.id && q) continue;
                        else return D;
                        else {
                            if (f && w[E.zIndex]) return D;
                            if ((!A || v) && (K.usePointInPath || K.usePointInImageData) && E.ctx) {
                                if (E = E.ctx, O = ((C.x - O) * G.scale.x >> 0) - s + x, C = ((C.y - N) * G.scale.y >> 0) - s + x, K.usePointInPath && E.isPointInPath(O, C) || K.usePointInImageData && 8 < E.getImageData(O, C, 1, 1).data[3]) return D
                            } else if (K.usePointNearest && !v) return D
                        }
                        K.usePointInBoundingBox && !v && (G = L * G.scale.x * Q * G.scale.y, void 0 === B || B >= G) && (z = D, B = G)
                    }
                }
            }
            return z
        };
        this.findMultipleActions = function(b, c) {
            if (!1 !== a.feature.vector.edit) {
                if (c.start.x === c.x && c.start.y === c.y) if ("up" === c.state) d.isSelecting = !1;
                else return;
                b || (b = d.tmp.event);
                c || (c = d.tmp.self);
                d.tmp.event = b;
                d.tmp.self = c;
                var e = "down" === c.state,
                    g = "up" === c.state,
                    h = a.canvas2d,
                    q = h.zoom / h.pixelRatio,
                    u = d.rect;
                e || !d.isSelecting ? (d.isSelecting = !g, eventjs.cancel(b), u.x1 = u.x2 = c.x / q, u.y1 = u.y2 = c.y / q) : (eventjs.prevent(b), g ? d.isSelecting = !1 : (u.x2 = c.x / q, u.y2 = c.y / q));
                isFinite(a.selection.idx) && (a.area.hide(), a.render("findMultipleActions"));
                var v = h.container,
                    h = h.layers.active.ctx,
                    s = (a.project.scrollLeft + v.scrollLeft) / q,
                    x = (a.project.scrollTop + v.scrollTop) / q,
                    v = Math.min(u.x1, u.x2) - s,
                    w = Math.min(u.y1, u.y2) - x,
                    s = Math.max(u.x1, u.x2) - s,
                    x = Math.max(u.y1, u.y2) - x,
                    s = s - v,
                    x = x - w;
                e && a.setTooltip("");
                var e = eventjs.metaKey,
                    A = eventjs.shiftKey,
                    e = d.findInRect(u, a.scene.data, e, A, !0, !1);
                if (g) {
                    a.selection.idx = void 0;
                    a.hovered.reset();
                    a.on.hover && a.on.hover();
                    var g = [],
                        h = [],
                        y;
                    for (y in e) e[y] ? g.push(y) : h.push(y);
                    g.length && a.scene.selectByIndex(g, !1);
                    h.length && a.scene.deselect(h);
                    u.x1 === c.x / q && u.y1 === c.y / q && (e = eventjs.metaKey, A = eventjs.shiftKey, q = d.getCoord(b), q = d.findSingleAction(q, a.scene.data, !1), f(q, e, A));
                    a.scene.checkForSingleSelection();
                    a.scene.fireOnSelect();
                    a.render.clean("root.select.findMultipleActions")
                } else a.selection.idx = void 0, a.on.hover && a.on.hover(), h.save(), h.globalCompositeOperation = "destination-over", eventjs.metaKey && a.selection.length ? (h.fillStyle = "rgba(255,50,100,0.20)", h.strokeStyle = "rgba(255,50,100,1)") : (h.fillStyle = "rgba(0,240,100,0.20)", h.strokeStyle = "rgba(0,240,100,1)"),
                    h.beginPath(), h.scale(a.canvas2d.zoom, a.canvas2d.zoom), h.rect(v + 0.5, w + 0.5, s, x), h.lineWidth = 1 / a.canvas2d.zoom, h.stroke(), h.fill(), h.restore()
            }
        };
        this.tmp = {};
        this.cursorEvent = function(b) {
            var c = d.active,
                e = c.canvas;
            if (d.isMoving || d.isSelecting || "eyeDropper" === a.colorPicker.state) a.setTooltip("");
            else {
                c.clearRect(0, 0, e.width, e.height);
                var f = 0;
                d.usePreventSelection ? c = a.util.clone(a.scene.controls) : (c = a.scene.data.concat(a.scene.controls), f = a.scene.data.length);
                var g = d.getCoord(b);
                b = d.findSingleAction(g,
                    c, !1);
                c = a.scene.data[b];
                e = 0 > b - f;
                f = Math.max(0, b - f);
                f = a.scene.controls[f] || {};
                a.tool.coord = g;
                var h = g = "",
                    u = a.feature.vector.edit,
                    v = "select" === a.tool.id,
                    s = a.selection,
                    x = 1 === s.length,
                    w = a.hovered,
                    s = x ? s.idx : w.idx,
                    A = "undefined" !== typeof b || isFinite(s);
                A || x ? e ? (g = f.title, h = f.cursor, a.area.hoverControl = "", s = c.zIndex, A = !! w.items[s], u && (A || (w.reset(), w.select(s), a.on.hover && a.on.hover(c)), a.area.renderControls(b, v))) : (g = f.title || f.id, h = f.cursor || "", a.area.hoverControl = f.id, A = !! w.items[s], u && (!A && isFinite(s) && (w.reset(), w.select(s), a.on.hover && a.on.hover(a.scene.data[s])), a.area.renderControls(null, v))) : (a.area.hoverControl = "", u && w.length && (w.reset(), a.on.hover && a.on.hover(), a.area.renderControls(null, v)));
                g ? a.setTooltip(a.language.translate(g), h) : a.setTooltip("", h);
                a.ui.setCursor(h)
            }
        };
        this.contextMenu = function(b) {
            if (window.contextmenu && (eventjs.cancel(b), "contextmenu" === b.type || !eventjs.isMouse)) {
                var c, e = a.selection.length;
                a.ui.menuSelectMultiple && 1 < e ? c = "menuSelectMultiple" : a.ui.menuSelect && e ? c = "menuSelect" : a.ui.menuSelectDefault && (c = "menuSelectDefault");
                c && (d.events.drag && d.events.drag.cancel(), d.events.gesture && d.events.gesture.cancel(), b = eventjs.proxy.getCoord(b), contextmenu.show(a.ui[c], b.x + 5, b.y + 5, !0))
            }
        };
        this.isMoving = this.isModified = this.isSelecting = !1;
        this.mouseEvent = function(b, g, l) {
            eventjs.prevent(b);
            if (2 !== g.fingers && "eyeDropper" !== a.colorPicker.state) {
                var h = a.scene,
                    r = a.selection.length,
                    q = "down" === g.state,
                    u = "up" === g.state,
                    v = eventjs.metaKey,
                    s = eventjs.shiftKey;
                if (q || u) {
                    q && (d.isModified = !1);
                    if (d.usePreventSelection) var x = a.util.clone(h.controls),
                        w = 0;
                    else x = h.data.concat(h.controls), w = h.data.length;
                    var A = d.getCoord(b),
                        x = d.findSingleAction(A, x, u)
                }
                var y = "undefined" !== typeof x,
                    z = g.start.x !== g.x || g.start.y !== g.y;
                if (h.controls[x - w]) {
                    var B = h.controls[x - w];
                    if ("anchor" === B.id && a.selection.length) if (u) {
                        d.isMoving = !1;
                        x = d.findSingleAction(A, h.data, !1);
                        A = h.data[x];
                        if (a.selection.idx === x) {
                            if (d.isModified) return;
                            !1 === a.__editing && "text" === A.type ? (a.area.show(A), a.toolkit.text.updateCSS(), a.toolkit.text.focus(), a.toolkit.text.selectAll()) : (a.scene.deselectAll(), a.ui.buildConfigure(), a.render.clean("root.select.moveEvent"));
                            return
                        }
                        if (!s && !v && A) {
                            c(x, !0);
                            a.render.clean("root.select.moveEvent");
                            return
                        }
                    } else d.isMoving = !0;
                    else {
                        if (u) return;
                        if (B.event) {
                            h = a.hovered.idx;
                            (!1 === isFinite(h) || h !== a.selection.idx) && (A = a.scene.getHovered()) && a.selection.select(A.zIndex);
                            d.isMoving = !1;
                            B.event(b);
                            g.pause();
                            return
                        }
                    }
                } else if (u && (A = h.data[x]) && (a.feature[A.type] || a.feature.tools).usePointInPath) {
                    d.isMoving = !1;
                    a.render("root.select.mouseEvent.usePointInPath.pointUp");
                    return
                }
                if (!l) if (!u || !d.isMoving || z || d.isModified || s || v) {
                    l = a.toolkit.text && a.toolkit.text.dragging;
                    !q || (y || !r || s || v || l) || (a.scene.deselectAll(), a.render.clean("root.select.mouseEvent.cancelSelection.b"));
                    if (q && a.selection.items[x] && !v || d.isMoving) return e(b, g);
                    if (!y || s || v) {
                        if ("select" === a.tool.id && q) return g.proxy(d.findMultipleActions);
                        if (a.tool.record) return sketch.scene.deselectAll(), g.proxy(function(b, c) {
                            d.isMoving = "up" !== c.state;
                            a.tool.record(b, c)
                        })
                    }
                    if (0 > x - w) if (eventjs.stop(b), (s || v) && a.feature.vector.edit) f(x,
                        v, s), h.checkForSingleSelection(), h.fireOnSelect(), a.render.clean("root.select.moveActions");
                    else return c(x), d.isModified = !0, e(b, g)
                } else eventjs.cancel(b), d.isMoving = !1, c(x)
            }
        };
        var e = function(b, c) {
            a.area.moveEvent(b);
            return c.proxy(function(a, b) {
                d.isMoving = "up" !== b.state;
                d.isMoving || b.start.x === b.x && b.start.y === b.y && d.mouseEvent(a, b, !0)
            })
        }, f = function(b, c, e) {
            "undefined" !== typeof b && (c && a.selection.items[b] ? a.scene.deselect(b) : a.scene.selectByIndex(b, !1))
        }, c = function(b, c) {
            var e = a.scene.data[b];
            if (e && e.toolkit) {
                var f = e.toolkit;
                a.scene.selectByIndex(b);
                a.scene.checkForSingleSelection();
                f.updateBBox && (f.updateBBox(), setTimeout(function() {
                    a.toolkit.text.textarea.blur();
                    a.toolkit.text.textarea.focus()
                }, 10));
                a.style && a.style.updateFromObject("fill", e);
                c && a.ui.buildConfigure && a.ui.buildConfigure(e.type)
            }
        };
        this.getCoord = function(a) {
            var b = eventjs.proxy.getCoord(a),
                c = eventjs.proxy.getBoundingBox(d.active.canvas);
            b.x += c.scrollLeft - c.x1;
            b.y += c.scrollTop - c.y1;
            b.state = a.type;
            return b
        };
        return a.toolkit.init(this)
    });
    a.getCoord = function(h) {
        var d = eventjs.proxy.getCoord(h),
            g = eventjs.proxy.getBoundingBox(a.active.canvas);
        d.x += g.scrollLeft - g.x1;
        d.y += g.scrollTop - g.y1;
        d.state = h.type;
        return d
    };
    a.getElementsInRect = function(a, d, g) {};
    a.getObjectFromPoint = function(h, d, g) {
        var b;
        if (isFinite(h)) b = h, h = d, d = g || {};
        else if (isFinite(h.x)) b = h.x, h = h.y, d = d || {};
        else return;
        return a.toolkit.select.findSingleAction({
            x: b || 0,
            y: h || 0,
            actions: d.actions || a.scene.data,
            pointerUp: d.pointerUp || !1,
            searchParam: d.searchParam || null,
            searchType: d.searchType || null
        })
    }
})(sketch);
(function(a) {
    a.toolkit.register("snapshot", function(h) {
        this.ctx = h.layer0.ctx;
        this.active = h.active.ctx;
        this.cache = h.cache.ctx;
        this.enable = function() {
            eventjs.add(this.active.canvas, "drag", this.mouse);
            a.canvas2d.container.style.cursor = "move";
            a.tool !== a.toolkit.select && a.toolkit.select.enable({
                mouse: !1
            })
        };
        this.disable = function() {
            eventjs.remove(this.active.canvas, "drag", this.mouse);
            a.canvas2d.container.style.cursor = "default";
            a.tool !== a.toolkit.select && a.toolkit.select.disable({
                mouse: !1
            })
        };
        this.mouse = function(d,
                              g) {
            var b = a.active,
                e = Math.abs(g.x - g.start.x),
                f = Math.abs(g.y - g.start.y),
                c = Math.min(g.start.x, g.x),
                k = Math.min(g.start.y, g.y),
                m = Math.round(e / 2),
                l = Math.round(f / 2),
                h = m % 42 + c,
                r = l % 42 + k;
            b.save();
            b.canvas.width = b.canvas.width;
            b.canvas.style.display = "block";
            b.shadowOffsetX = 1;
            b.shadowOffsetY = 1;
            b.shadowBlur = 1;
            b.beginPath();
            b.fillStyle = "rgba(0,0,0,0.5)";
            b.fillRect(0, 0, b.canvas.width, b.canvas.height);
            b.clearRect(c + 0.5, k + 0.5, e, f);
            b.restore();
            b.save();
            b.rect(c + 0.5, k + 0.5, e, f);
            b.clip();
            b.beginPath();
            b.lineWidth = 1;
            b.strokeStyle = "#333";
            b.strokeRect(c + 0.5, k + 0.5, e, f);
            b.strokeStyle = "rgba(0, 0, 0, 0.25)";
            b.shadowColor = "rgba(255, 255, 255, 0.25)";
            for (var q = 0.5; q < e; q += 42) c + m + 0.5 !== q + h && (b.moveTo(q + h, k), b.lineTo(q + h, k + f));
            for (q = 0.5; q < f; q += 42) k + l + 0.5 !== q + r && (b.moveTo(c, q + r), b.lineTo(c + e, q + r));
            b.stroke();
            b.beginPath();
            b.strokeStyle = "rgba(0, 0, 0, 0.65)";
            b.shadowColor = "rgba(255, 255, 255, 0.15)";
            b.moveTo(c, k + l + 0.5);
            b.lineTo(c + e, k + l + 0.5);
            b.moveTo(c + m + 0.5, k);
            b.lineTo(c + m + 0.5, k + f);
            b.stroke();
            b.beginPath();
            b.strokeStyle = "rgba(255, 255, 255, 0.5)";
            b.shadowColor = "rgba(255, 255, 255, 0)";
            b.moveTo(c + m - 7.5, k + l + 0.5);
            b.lineTo(c + m + 8.5, k + l + 0.5);
            b.moveTo(c + m + 0.5, k + l - 7.5);
            b.lineTo(c + m + 0.5, k + l + 8.5);
            b.stroke();
            b.restore();
            "up" === g.state && (b.canvas.width = b.canvas.width, g.x === g.start.x && g.y === g.start.y ? window.alertify && alertify.log("Nothing was selected.") : (b = a.canvas2d.zoom, m = a.canvas2d.y + (a.project.y + a.project.scrollTop) * b, c = (c - (a.canvas2d.x + (a.project.x + a.project.scrollLeft) * b)) / b, a.download.image(c, (k - m) / b, e / b, f / b)), a.exec("select"))
        };
        return this
    })
})(sketch);
(function(a) {
    a.toolkit.register("brush", function(h) {
        function d() {
            if (!1 === b.dragging) b.rendering = !1;
            else {
                var f = b.deviceLastRecord,
                    f = f && f.brush;
                if ("undefined" === typeof f) requestAnimationFrame(d), console.log("brush missing:", b.device, b.device.brush);
                else if (f && (f.dirty || f.speed)) {
                    f.ctx = b.ctx;
                    f.active = b.draw;
                    f.cache = b.cache;
                    var c, g = b.batches;
                    c = a.canvas2d;
                    c = c.zoom * c.pixelRatio;
                    var m = f.prepare();
                    m.save();
                    m.scale(c, c);
                    e(m, g);
                    m.restore();
                    f.postprocess && f.postprocess();
                    b.rendering = !0;
                    requestAnimationFrame(d);
                    if (f.speed) for (var l in b.intervals) if (c = g[l]) if (m = b.intervals[l], !(0 < c.length)) {
                        var h = {
                            cmd: "L",
                            x: m.x,
                            y: m.y
                        };
                        a.dataChannel && a.dataChannel.send(["brush", f.type, "move," + m.x + "," + m.y + "," + l]);
                        c.push(h);
                        c.path.push(h)
                    }
                } else requestAnimationFrame(d)
            }
        }
        function g(a, c, d) {
            var g = this.brush;
            if ("undefined" === typeof g) console.log("brush missing:", g, this);
            else {
                this.dirty && b.cloneAttributes(this, g);
                var l = g.interval || this.interval;
                g.ctx = a;
                g.active = b.draw;
                g.cache = b.cache;
                g.isGhost = !1;
                g.isRecording = !1;
                g.interval = l;
                var h = {};
                h[this.finger] = this.data;
                h[this.finger].interval = l;
                !1 !== d && (d = this.bbox, c.matrix.x = d.viewBox[0] * d.scale.x, c.matrix.y = d.viewBox[1] * d.scale.y, c.apply(a, !0));
                a = g.prepare();
                e(a, h, g, this);
                g.interval = l;
                g.postprocess && g.postprocess()
            }
        }
        var b = this;
        this.id = "brush";
        this.type = h.type || "brush";
        this.draw = h.draw.ctx;
        this.active = h.active.ctx;
        this.cache = h.cache.ctx;
        this.ctx = h.layer0.ctx;
        this.batches = {};
        this.position = {};
        this.intervals = {};
        this.enabled = !1;
        this.enable = function() {
            var e = this.device && this.device.brush;
            e && e.enable && e.enable();
            !0 !== this.enabled && (this.enabled = !0, this.enableGhost(), this.onDrag = eventjs.proxy.drag({
                target: b.active.canvas,
                listener: this.record
            }), a.toolkit.select && a.tool !== a.toolkit.select && a.toolkit.select.enable({
                mouse: !1
            }))
        };
        this.disable = function() {
            var b = this.device && this.device.brush;
            b && b.disable && b.disable();
            !1 !== this.enabled && (this.enabled = !1, this.disableGhost(), this.onDrag && this.onDrag.remove(), a.toolkit.select && a.tool !== a.toolkit.select && a.toolkit.select.disable({
                mouse: !1
            }))
        };
        this.ghostEnabled = !1;
        this.enableGhost = function() {
            !b.ghostEnabled && eventjs.isMouse && (b.ghostEnabled = !0, eventjs.add(b.active.canvas, "mouseout", b.ghost), eventjs.add(b.active.canvas, "mousemove", b.ghost))
        };
        this.disableGhost = function() {
            b.ghostEnabled && (b.ghostEnabled = !1, eventjs.remove(b.active.canvas, "mouseout", b.ghost), eventjs.remove(b.active.canvas, "mousemove", b.ghost))
        };
        this.loadResource = function(e) {
            var c = e.action,
                d = e.onload;
            if (c) if ("string" === typeof c && (c = {
                type: c
            }), e = a.configure.tools[c.type]) {
                c.dirty = !0;
                c.render = g;
                var m = b.cloneAttributes(c, sketch.util.clone(e));
                a.style.updateCache(m);
                m.ctx = b.ctx;
                m.callback = function(b, e) {
                    b.type = m.type;
                    var f = c.brush = b;
                    f.action = c;
                    f.seed = f.seed || a.util.Random.seed();
                    f.fill = m.fill || a.style.fill;
                    f.stroke = m.stroke || a.style.stroke;
                    f.composite = m.composite || "source-over";
                    f.opacity = isFinite(m.opacity) ? m.opacity : 100;
                    f.prepare = f.prepare || function() {
                        this.useTrackGradient = "color" !== this.fill.type;
                        this.useBlendMode = "source-over" !== this.composite;
                        if (this.isRecording) {
                            if (this.useTrackGradient) {
                                this.useCache = !0;
                                var b = this.cache;
                                b.clearRect(0, 0, b.canvas.width, b.canvas.height)
                            } else this.useCache = !1, b = this.active, b.clearRect(0, 0, b.canvas.width, b.canvas.height), this.useBlendMode && b.drawImage(a.ctx.canvas, 0, 0);
                            return this.renderTo = b
                        }
                        this.useCache = !1;
                        this.useTrackGradient && this.cache.clearRect(0, 0, this.cache.canvas.width, this.cache.canvas.height);
                        return this.renderTo = this.ctx
                    };
                    e && (e = "â€œ" + name + "â€ " + b.type + " unavailable.");
                    d && d(c, e)
                };
                if (a.toolkit.__init["brush." + m.type]) return new a.toolkit.__init["brush." + m.type](m);
                e = m.type + " unavailable.";
                d && d(c, e)
            } else d && d(c)
        };
        this.changeDevice = function(e, c, d) {
            c = c || b.type;
            e = e || a.configure.tools[c];
            this.device = sketch.util.clone(e);
            this.loadResource({
                action: this.device,
                onload: d
            })
        };
        this.changeColor = function(a) {
            this.device && this.device.brush && (this.device.brush.fill.color = a, this.device.brush.fill.type = "color", this.device.brush.fill.__colors = [0, a])
        };
        this.getDevice = function(b, c) {
            var e = sketch.util.clone(a.configure.tools[b]);
            this.loadResource({
                action: e,
                onload: c
            });
            return e
        };
        this.attributes = {
            seed: "number",
            useStretchToEdge: "boolean",
            composite: "string",
            movement: "string",
            spread: "number",
            lineWidth: "number",
            diameter: "number",
            increment: "number",
            radius: "number",
            outerRadius: "number",
            innerRadius: "number",
            distance: "number",
            tolerance: "number",
            blur: "number",
            src: "string",
            opacity: "number",
            bbox: "object",
            spacing: "object",
            rotate: "object",
            translate: "object",
            scale: "object",
            fill: "style",
            stroke: "style"
        };
        this.cloneAttributes = function(b, c) {
            if (b && c) {
                var e = this.attributes,
                    d;
                for (d in e) {
                    var g = e[d],
                        h = b[d],
                        r = c[d];
                    "undefined" !== typeof h && ("style" === g ? r && r.color === h.color && r.gradient === h.gradient && r.type === h.type || (c[d] = sketch.util.clone(h)) : "object" === g ? r && r.min === h.min && r.max === h.max || (c[d] = sketch.util.clone(h)) : r !== h && (c[d] = "undefined" === typeof h.value ? h : h.value))
                }
                return c
            }
            a.feature.debug && console.log("brush.cloneAttributes", arguments)
        };
        this.getOffset = function(b, c) {
            var e = sketch.configure.tools[b.type],
                d = e.diameter && b.diameter || 0,
                d = e.diameter && b.diameter ? isFinite(b.diameter) ? b.diameter : b.diameter.value : 0;
            if ("spirograph" === b.type) var g = b.distance || 0,
                d = d + 2 * (Math.abs((b.outerRadius || 0) - (b.innerRadius || 0)) + g);
            else "streamer" === b.type && (d = 20);
            var g = e.scale && b.scale && b.scale.max || 1,
                h = e.translate && b.translate && b.translate.max || 0,
                h = 2 * Math.sqrt(h * h + h * h);
            return (2 * (e.blur && b.blur || 0) + d + (e.lineWidth && b.lineWidth || 0)) * g + h + (a.area && a.area.padding || 0)
        };
        this.updateActionSize = function(e) {
            if (e.brush && e.type === e.brush.type) {
                var c = e.bbox,
                    d = !! c && c.scale.x || 1,
                    g = b.getOffset(e, c),
                    l = g / 2;
                if (a.detect.refreshPixelData[e.type]) var h = a.area.padding,
                    g = -h,
                    l = g / 2,
                    r = {
                        x1: -h,
                        y1: -h,
                        x2: a.canvas2d.width,
                        y2: a.canvas2d.height
                    };
                else r = a.detect.catmullRomSpline[e.type] ? new sketch.vector.BBox(a.vector.catmullRomSplineData({
                    path: e.data,
                    tension: 0
                })) : new sketch.vector.BBox(e.data);
                if (c) var q = (c.padding || 0) - l,
                    h = c.x + q * d,
                    u = c.y + q * d,
                    q = 0;
                else q = l, h = r.x1, u = r.y1;
                var v = r.x2 - r.x1 + g,
                    s = r.y2 - r.y1 + g,
                    q = {
                        x: h - q * d,
                        y: u - q * d,
                        width: v,
                        height: s,
                        padding: l,
                        units: "objectBoundingBox",
                        viewBox: [0, 0, v, s]
                    };
                if (e.firstRecord && "undefined" === typeof c) {
                    delete e.firstRecord;
                    h = r.x1 + l * d - g / 2;
                    u = r.y1 + l * d - g / 2;
                    e = e.data;
                    for (c = 0; c < e.length; c++) d = e[c], d.x -= h, d.y -= u;
                    return q
                }
                q.scale = c.scale;
                q.rotate = c.rotate;
                return e.bbox = q
            }
            b.loadResource({
                action: e,
                onload: b.updateActionSize
            })
        };
        this.ghost = function(e) {
            if (e && b.device && b.device.brush && "eyeDropper" !== a.colorPicker.state) {
                var c = b.device.brush;
                if ("mouseout" === e.type) delete c.px, delete c.py, delete c.event;
                else {
                    c.event = e;
                    var d = eventjs.proxy.getCoord(e),
                        g = eventjs.proxy.getBoundingBox(a.canvas2d.container);
                    e = a.canvas2d;
                    var l = e.zoom;
                    e = e.zoom * e.pixelRatio;
                    e = (d.x - g.x1 - g.scrollLeft) / l;
                    d = (d.y - g.y1 - g.scrollBodyTop - a.project.scrollTop) / l;
                    if (c.ghostDistance && isFinite(c.px)) {
                        var l = c.px - e,
                            h = c.py - d,
                            r = Math.sqrt(l * l + h * h),
                            g = c.ghostDistance;
                        r > g && (l = Math.atan2(h, l), c.x = e, c.y = d, c.px = e + Math.cos(l) * g, c.py = d + Math.sin(l) * g)
                    } else c.x = e, c.y = d, c.px = e, c.py = d;
                    c.finger = c.finger || "0:A";
                    c.interval = c.interval || 0;
                    c.seed = c.seed || 1234567;
                    c.ctx = b.ctx;
                    c.active = b.active;
                    c.cache = b.cache;
                    c.isGhost = !0;
                    c.isRecording = !0;
                    c.path = [{
                        cmd: "M",
                        x: c.px,
                        y: c.py
                    }, {
                        cmd: "L",
                        x: c.x,
                        y: c.y
                    }];
                    e = a.canvas2d;
                    e = e.zoom * e.pixelRatio;
                    d = c.prepare();
                    d.save();
                    d.scale(e, e);
                    c.render ? c.render() : (d.globalAlpha = c.opacity / 100, d.globalCompositeOperation = a.style.getComposite(c.composite), c.drawStart && c.drawStart(), c.draw && c.draw(null), c.drawEnd && c.drawEnd());
                    d.restore()
                }
            }
        };
        this.record = function(e, c, k) {
            if ("eyeDropper" !== a.colorPicker.state) {
                var m = a.toolkit.genMouseId(e, c),
                    l = e ? b.device : b.deviceProxy[m];
                if (l && l.brush) {
                    b.deviceLastRecordId = m;
                    b.deviceLastRecord = l;
                    var h = l.type,
                        r = l.brush,
                        q = b.batches[m],
                        u = r.state = c.state,
                        v = "down" === u,
                        s = "up" === u,
                        x = "move" === u,
                        u = !! e,
                        w = a.canvas2d,
                        A = w.zoom,
                        y = w.zoom * w.pixelRatio,
                        z = a.project.scrollLeft,
                        B = a.project.scrollTop,
                        D = (c.x - z) / A,
                        A = (c.y - B) / A;
                    if (eventjs.shiftKey && (c.start.x !== c.x || c.start.y !== c.y)) if (c.lockY) D = c.start.x;
                    else if (c.lockX) A = c.start.y;
                    else {
                        var E = Math.abs(c.start.x - c.x),
                            G = Math.abs(c.start.y - c.y);
                        E > G ? (D = c.start.x, c.lockX = !0) : (A = c.start.y, c.lockY = !0)
                    }
                    s && (delete c.lockX, delete c.lockY);
                    eventjs.supports.touch ? (r.px = D, r.py = A) : r.px -= z;
                    if (v || s) {
                        if (r.onDoubleTap && s && !r.cancelListener && q) {
                            if (2 < q.length && r.current) {
                                var G = q[q.length - 1],
                                    J = r.current,
                                    E = Math.abs(J.x - G.x),
                                    J = Math.abs(J.y - G.y),
                                    E = Math.sqrt(E * E + J * J);
                                if (500 > (new Date).getTime() - r.timestamp && 25 > E) return r.onDoubleTap()
                            }
                            r.timestamp = (new Date).getTime();
                            r.current = q[q.length - 1]
                        }
                        if (r.addLineSegment && (q || (r.clickCount = 0), v && r.clickCount++, q)) {
                            var E = Math.abs(D - q[0].x),
                                J = Math.abs(A - q[0].y),
                                G = new sketch.vector.BBox(q),
                                C = G.x2 - G.x1,
                                G = G.y2 - G.y1,
                                G = Math.sqrt(C * C + G * G),
                                E = Math.sqrt(E * E + J * J);
                            10 < G && 1 < q.length && (v = !1, x = !0);
                            if (10 < E || 10 > G && 1 === r.clickCount) v = !1, s = r.cancelListener || !1, x = !0
                        }
                    }!q || v ? (q = b.batches[m] = [], q.path = [], q.interval = c.interval || b.interval || 0, r.seed = c.seed || r.seed, r.event = e, r.self = c, e && eventjs.prevent(e)) : e && eventjs.cancel(e);
                    v ? (b.disableGhost(), b.dragging = !0, a.style.updateCache(r), 1 === c.fingers && (b.cache.canvas.width = b.ctx.canvas.width, b.cache.canvas.height = b.ctx.canvas.height, b.active.canvas.width = b.ctx.canvas.width, b.active.canvas.height = b.ctx.canvas.height), u && isFinite(r.px) && isFinite(r.py) ? (e = {
                        cmd: "M",
                        beginPath: !0,
                        interval: q.interval,
                        x: r.px + z,
                        y: r.py
                    }, delete r.px, delete r.py) : e = {
                        cmd: "M",
                        beginPath: !0,
                        interval: q.interval,
                        x: D,
                        y: A
                    }, u && (a.dataChannel && a.feature.stream.sketchLive) && (x = c.state + "," + e.x + "," + e.y + "," + m, a.dataChannel.send(["brush", h, x, l.brush.fill, r.seed, r.interval || b.interval || 0]), a.feature.debug && console.log(x)), !0 === r.click ? q[0] = e : (q.push(e), q.path.push(e)), r.ghostDistance && (e = {}, e.x = D, e.y = A, e.cmd = "L", q.push(e), q.path.push(e), u && (a.dataChannel && a.feature.stream.sketchLive) && (x = "move," + e.x + "," + e.y + "," + m, a.dataChannel.send(["brush", h, x]), a.feature.debug && console.log(x)))) : (e = x ? {
                        cmd: "L",
                        x: D,
                        y: A
                    } : {
                        cmd: "z",
                        x: D,
                        y: A
                    }, u && (a.dataChannel && a.feature.stream.sketchLive) && (x = c.state + "," + e.x + "," + e.y + "," + m, a.dataChannel.send(["brush", h, x]), a.feature.debug && console.log(x)), r.lineRecord ? (D = s ? Math.min(q.length, 2) : 1, q[D] = e, q.path[D] = e) : !0 === r.click ? "z" !== e.cmd && (q[0] = e) : (q.push(e), q.path.push(e)));
                    r.dirty = !0;
                    r.isGhost = !1;
                    r.isRecording = !0;
                    D = a.feature.vector.edit;
                    e = c.action && c.action.bbox;
                    if (s) {
                        if (r.cancelPointerUp) return b.reset(m);
                        if (r.onPointerUp) return b.reset(m), r.onPointerUp();
                        var q = 0,
                            O;
                        for (O in b.batches) q++;
                        1 === q && (b.dragging = !1);
                        u && (b.gestures--, b.interval = r.interval || 0, 1 === c.fingers && b.enableGhost());
                        if (u || k) {
                            var q = b.batches[m],
                                N = a.detect.refreshPixelData[r.type] || "source-over" !== l.composite,
                                l = a.scene.fromConfigure(a.configure.tools[h]),
                                l = b.cloneAttributes(r, l);
                            l.data = a.vector.clean && "stamp" !== r.type ? a.vector.clean(new a.vector.Polygon, q.path) : sketch.util.clone(q.path);
                            l.brush = r;
                            l.firstRecord = !0;
                            e && sketch.util.mergeObject(c.action.bbox,
                                l.bbox = {});
                            G = b.updateActionSize(l);
                            G.x += 0 + z - 1 * w.x / y;
                            G.y += 0 + B - 1 * w.y / y;
                            var L;
                            a.feature.vector.record && (e = l.data, h = b.cloneAttributes(r, {
                                finger: m,
                                type: h,
                                data: e,
                                interval: e[0].interval,
                                bbox: G
                            }), c.action && (a.scene.copyAttributes(b.attributes, c.action, h), a.scene.copyRules(c.action, h)), L = a.scene.addObject(h), D || N || (L.render = g, L.dirty = !1));
                            r.seed = a.util.Random.seed()
                        }
                        b.reset(m);
                        if (u || k) {
                            var Q = function() {
                                a.history && a.history.store("add", [a.scene.clone(L)]);
                                k && k()
                            };
                            if (D) a.scene.deselectAll(), a.scene.updateTransform(L),
                                a.scene.sort(), b.loadResource({
                                action: L,
                                onload: function() {
                                    if (c.action) return Q();
                                    a.render("root.toolkit.brush");
                                    Q()
                                }
                            });
                            else {
                                if (N || "place" === c.identifier) r.cmd = "z", r.render(r);
                                a.ctx.globalAlpha = 1;
                                a.ctx.globalCompositeOperation = "source-over";
                                a.ctx.drawImage(a.canvas2d.layers.draw, 0, 0);
                                a.scene.deselectAll();
                                Q()
                            }
                        }
                        b.draw.canvas.width = b.draw.canvas.width
                    } else !1 === b.rendering && v && (b.rendering = !0, d())
                }
            }
        };
        this.reset = function(a) {
            a || (b.draw.canvas.width = b.draw.canvas.width);
            var c = b.deviceLastRecord,
                e = b.deviceLastRecordId;
            (a = a || e) && c && (c = c.brush, delete b.batches[a], delete b.intervals[a], delete b.position[a + "x"], delete b.position[a + "y"], delete c.cancelListener, delete c.cancelPointerUp, delete c.timestamp, delete c.current, delete c.event, delete c.self)
        };
        var e = function(e, c, d, g) {
            for (var l in c) {
                g || (d = (b.deviceProxy[l] || b.device).brush);
                var h = d.opacity / 100,
                    r = a.style.getComposite(d.composite),
                    q = d.isRecording,
                    u = d.isGhost,
                    v = "disco" === d.composite,
                    s = a.detect.localAlpha[d.type],
                    x = "undefined" !== typeof d.draw;
                d.dirty = !1;
                var w = c[l];
                if (0 !== w.length && (w.interval = w.interval || 0, d.path = w.path || w, d.finger = l, e = d.renderTo, q || d.ctx)) {
                    e.save();
                    if (d.render) q = w[w.length - 1], d.cmd = q && q.cmd, d.render(g || d), d.interval = w.interval;
                    else for (e.globalAlpha = s ? h : 1, e.globalCompositeOperation = r, h = 0, r = w.length; h < r; h++) {
                        if (q || u) var s = w.shift(),
                            A = s.x,
                            y = s.y;
                        else s = w[h], A = s.x, y = s.y;
                        d.x = A;
                        d.y = y;
                        if ("M" === s.cmd) {
                            var z = b.position[l + "x"] = A,
                                B = b.position[l + "y"] = y,
                                D = z,
                                E = B;
                            w.increment = 0;
                            d.cmd = s.cmd;
                            d.px = D;
                            d.py = E;
                            q && b.gestures++;
                            d.drawStart && (d.interval = ++w.interval,
                                d.drawStart())
                        } else {
                            if ("z" === s.cmd) {
                                d.drawEnd && (d.cmd = s.cmd, d.interval = ++w.interval, d.drawEnd());
                                break
                            }
                            z = b.position[l + "x"];
                            B = b.position[l + "y"];
                            D = z;
                            E = B;
                            d.px = D;
                            d.py = E
                        }
                        d.speed && (b.intervals[l] = s);
                        if (x) {
                            var G = d.spacing.min,
                                J = d.spacing.max,
                                C = A - z,
                                O = y - B,
                                N = Math.sqrt(C * C + O * O) + 1;
                            if (!(N < G && "M" !== s.cmd)) {
                                G = C / N || 0;
                                O = O / N || 0;
                                C = J || 1;
                                for (J = J < N - 1 ? J : N - 1; J < N; J += C) A = z + G * J, y = B + O * J, v && (e.globalCompositeOperation = 0 === w.interval % 2 ? "lighter" : "source-over"), d.x = A, d.y = y, d.px = D, d.py = E, d.cmd = s.cmd, d.interval = ++w.interval, d.draw(w.increment),
                                    D = A, E = y;
                                b.position[l + "x"] = A;
                                b.position[l + "y"] = y;
                                w.increment++
                            }
                        }
                    }
                    e.restore()
                }
            }
        };
        return a.toolkit.init(this)
    });
    "undefined" === typeof a.vector && (a.vector = {});
    a.vector.catmullRomSplineData = function(a) {
        var d = sketch.util.clone(a.path),
            g = 1 - (a.tension || 0),
            b = d.length - 2;
        d.splice(0, 0, d[0]);
        d.push(d[d.length - 1]);
        d.push(d[d.length - 1]);
        if (0 >= b) return a.path;
        a = [];
        for (var e = 0; e < b; e++) {
            var f = d[e],
                c = d[e + 1],
                k = d[e + 2],
                m = d[e + 3];
            0 === e && a.push({
                beginPath: !0,
                interval: c.interval,
                cmd: "M",
                x: c.x,
                y: c.y
            });
            a.push({
                cmd: "C",
                x1: c.x + (g * k.x - g * f.x) / 6,
                y1: c.y + (g * k.y - g * f.y) / 6,
                x2: k.x + (g * c.x - g * m.x) / 6,
                y2: k.y + (g * c.y - g * m.y) / 6,
                x: k.x,
                y: k.y
            })
        }
        return a
    };
    a.vector.catmullRomSpline = function(a) {
        var d = sketch.util.clone(a.path),
            g = 1 - (a.tension || 0),
            b = a.ctx,
            e = d.length - 2;
        d.splice(0, 0, d[0]);
        d.push(d[d.length - 1]);
        d.push(d[d.length - 1]);
        if (0 >= e) {
            var f = d[0],
                c = d[1];
            b.moveTo(f.x, f.y);
            b.lineTo(c.x + 0.1, c.y + 0.1)
        } else {
            for (var k = 0; k < e; k++) {
                var f = d[k],
                    c = d[k + 1],
                    m = d[k + 2],
                    l = d[k + 3];
                0 === k && (b.beginPath(), b.moveTo(c.x, c.y));
                b.bezierCurveTo(c.x + (g * m.x - g * f.x) / 6, c.y + (g * m.y - g * f.y) / 6, m.x + (g * c.x - g * l.x) / 6, m.y + (g * c.y - g * l.y) / 6, m.x, m.y)
            }
            if (a.offsetPath) {
                a = 17 * Math.cos(0.5);
                for (var p = 17 * Math.sin(0.5), k = e; 0 < k; k--) f = d[k], c = d[k + 1], m = d[k + 2], l = d[k + 3], 0 === k && (b.beginPath(), b.moveTo(c.x + a, c.y + a)), b.bezierCurveTo(c.x + (g * m.x - g * f.x) / 6 + a, c.y + (g * m.y - g * f.y) / 6 + p, m.x + (g * c.x - g * l.x) / 6 + a, m.y + (g * c.y - g * l.y) / 6 + p, m.x + a, m.y + p)
            }
        }
    }
})(sketch);
(function(a) {
    a.toolkit.register("brush.arrow", function(h) {
        this.construct = function(a) {
            this.diameter = isFinite(a.diameter) ? a.diameter : 30;
            this.ghostDistance = isFinite(a.ghostDistance) ? a.ghostDistance : 10;
            this.lineRecord = !0;
            a.callback(this);
            return this
        };
        this.prepare = function() {
            this.useTrackGradient = "color" !== this.fill.type;
            this.useBlendMode = "source-over" !== this.composite;
            if (this.isRecording) {
                if (this.useTrackGradient) {
                    this.useCache = !0;
                    var d = this.cache;
                    d.clearRect(0, 0, d.canvas.width, d.canvas.height)
                } else this.useCache = !1, d = this.active, d.clearRect(0, 0, d.canvas.width, d.canvas.height), this.useBlendMode && d.drawImage(a.ctx.canvas, 0, 0);
                return this.renderTo = d
            }
            this.useCache = !1;
            this.useTrackGradient && this.cache.clearRect(0, 0, this.cache.canvas.width, this.cache.canvas.height);
            return this.renderTo = this.ctx
        };
        this.postprocess = function() {
            this.state && "up" !== this.state || this.active.clearRect(0, 0, this.active.canvas.width, this.active.canvas.height)
        };
        this.render = function(d) {
            var g = this.path.length;
            d = this.renderTo;
            var b = this.fill.__colors,
                e = b[1 % b.length],
                b = this.diameter,
                f = this.useTrackGradient;
            d.save();
            d.beginPath();
            if (this.isRecording) {
                var c = 1;
                d.globalAlpha = this.opacity / 100;
                d.globalCompositeOperation = a.style.getComposite(this.composite)
            } else c = this.bbox.scale.x, d.globalAlpha = 1;
            d.lineCap = "miter";
            d.miterLimit = 20;
            d.lineWidth = b / 4;
            d.strokeStyle = e;
            d.fillStyle = e;
            var k = this.path[0],
                g = this.path[g - 1],
                e = k.x,
                k = k.y,
                m = g.x,
                l = g.y,
                h = Math.PI / 8;
            d.beginPath();
            d.moveTo(e, k);
            d.lineTo(e + (m - e), k + (l - k));
            d.stroke();
            var r = Math.atan2(l - k, m - e),
                g = b,
                q = m + Math.cos(r) * b / 2,
                u = l + Math.sin(r) * b / 2,
                v = r + Math.PI + h,
                s = q + Math.cos(v) * g,
                v = u + Math.sin(v) * g,
                r = r + Math.PI - h,
                h = q + Math.cos(r) * g,
                g = u + Math.sin(r) * g;
            d.save();
            d.beginPath();
            d.moveTo(s, v);
            d.lineTo(q, u);
            d.lineTo(h, g);
            d.quadraticCurveTo((s + q + h) / 3, (v + u + g) / 3, s, v);
            d.closePath();
            d.fill();
            d.restore();
            f && (a.toolkit.trackGradient(d, this, 0, 0, c, {
                x1: Math.min(e, m) - b / 2,
                y1: Math.min(k, l) - b / 2,
                x2: Math.max(e, m) + b / 2 + a.area.padding,
                y2: Math.max(k, l) + b / 2 + a.area.padding
            }), a.toolkit.drawFromCache(this));
            d.restore()
        };
        return this.construct(h)
    })
})(sketch);
(function(a) {
    a.toolkit.prepareBrush = function() {
        this.useBlendMode = "source-over" !== this.composite;
        if (this.isRecording) {
            if (this.useBlendMode) {
                var h = this.renderTo = this.active;
                if (this.isGhost || "down" === this.state) h.clearRect(0, 0, h.canvas.width, h.canvas.height), h.drawImage(a.ctx.canvas, 0, 0);
                this.useCache = !0;
                h = this.cache
            } else this.useCache = !1, h = this.active;
            return this.renderTo = h
        }
        this.useCache = !1;
        return this.renderTo = this.ctx
    };
    a.toolkit.register("brush.chrome", function(h) {
        this.construct = function(a) {
            this.type = "chrome";
            this.lineWidth = a.lineWidth || 1;
            this.spread = a.spread || 30;
            this.spacing = a.spacing || [0, 0];
            a.callback(this)
        };
        this.prepare = a.toolkit.prepareBrush;
        this.draw = function(d) {
            var g = this.renderTo,
                b = this.path,
                e = this.fill.__colors,
                f = 100 * this.spread;
            d = null === d ? b.length : d;
            if (0 !== d) {
                var c = b[d - 1],
                    k = b[d - 2] || c;
                if (k) {
                    var m;
                    g.beginPath();
                    g.globalAlpha = this.opacity / 100;
                    g.globalCompositeOperation = a.style.getComposite(this.composite);
                    g.lineCap = "round";
                    g.lineWidth = this.lineWidth;
                    g.moveTo(k.x, k.y);
                    g.lineTo(c.x, c.y);
                    g.strokeStyle = e[(2 * this.interval + 1) % e.length];
                    g.stroke();
                    for (var l = Math.max(0, d - 100); l < d; l++) c = b[l].x - b[d - 1].x, k = b[l].y - b[d - 1].y, m = c * c + k * k, m < f && (g.beginPath(), g.moveTo(b[d - 1].x + 0.2 * c, b[d - 1].y + 0.2 * k), g.lineTo(b[l].x - 0.2 * c, b[l].y - 0.2 * k), g.strokeStyle = e[(2 * this.interval + 1) % e.length], g.stroke());
                    this.useCache && a.toolkit.drawFromCache(this, 1)
                }
            }
        };
        this.construct(h)
    });
    a.toolkit.register("brush.shader", function(h) {
        this.construct = function(a) {
            this.type = "shader";
            this.lineWidth = a.lineWidth || 1;
            this.spread = a.spread || 30;
            this.spacing = a.spacing || [0, 0];
            a.callback(this)
        };
        this.prepare = a.toolkit.prepareBrush;
        this.draw = function(d) {
            var g = this.renderTo,
                b = this.path,
                e = this.fill.__colors,
                f = 100 * this.spread;
            d = null === d ? b.length : d;
            var c, k;
            g.lineCap = "round";
            g.lineWidth = this.lineWidth;
            for (var m = 0; m < d; m++) c = b[m].x - b[d - 1].x, k = b[m].y - b[d - 1].y, c = c * c + k * k, c < f && (g.beginPath(), g.globalAlpha = 0.1 * (1 - c / f) * this.opacity / 100, g.moveTo(b[d - 1].x, b[d - 1].y), g.lineTo(b[m].x, b[m].y), g.strokeStyle = e[(2 * this.interval + 1) % e.length], g.stroke());
            this.useCache && a.toolkit.drawFromCache(this,
                1)
        };
        this.construct(h)
    });
    a.toolkit.register("brush.sketchy", function(h) {
        this.construct = function(a) {
            this.type = "sketchy";
            this.lineWidth = a.lineWidth || 1;
            this.spread = a.spread || 30;
            this.spacing = a.spacing || [0, 0];
            a.callback(this)
        };
        this.prepare = a.toolkit.prepareBrush;
        this.drawStart = function() {
            this.rand = new sketch.util.Random(this.seed || 1)
        };
        this.draw = function(d) {
            if (this.rand) {
                var g = this.renderTo,
                    b = this.path,
                    e = this.fill.__colors,
                    f = 100 * this.spread;
                d = null === d ? b.length : d;
                if (0 !== d) {
                    var c = b[d - 1],
                        k = b[d - 2] || c;
                    if (k) {
                        var m;
                        g.beginPath();
                        g.lineCap = "round";
                        g.lineWidth = this.lineWidth;
                        g.globalAlpha = this.opacity / 100;
                        g.moveTo(k.x, k.y);
                        g.lineTo(c.x, c.y);
                        g.strokeStyle = e[(2 * this.interval + 1) % e.length];
                        g.stroke();
                        for (var l = 0; l < d; l++) c = b[l].x - b[d - 1].x, k = b[l].y - b[d - 1].y, m = c * c + k * k, m < f && this.rand.toDouble() > m / f / 2 && (g.beginPath(), g.moveTo(b[d - 1].x + 0.3 * c, b[d - 1].y + 0.3 * k), g.lineTo(b[l].x - 0.3 * c, b[l].y - 0.3 * k), g.strokeStyle = e[(2 * this.interval + 1) % e.length], g.stroke());
                        this.useCache && a.toolkit.drawFromCache(this, 1)
                    }
                }
            }
        };
        this.construct(h)
    });
    a.toolkit.register("brush.web", function(h) {
        this.construct = function(a) {
            this.type = "web";
            this.lineWidth = a.lineWidth || 1;
            this.spread = a.spread || 30;
            this.spacing = a.spacing || [0, 0];
            a.callback(this)
        };
        this.prepare = a.toolkit.prepareBrush;
        this.drawStart = function() {
            this.rand = new sketch.util.Random(this.seed || 1)
        };
        this.draw = function(d) {
            if (this.rand) {
                var g = this.renderTo,
                    b = this.path,
                    e = this.fill.__colors,
                    f = 100 * this.spread;
                d = null === d ? b.length : d;
                if (0 !== d) {
                    var c = b[d - 1],
                        k = b[d - 2] || c;
                    if (k) {
                        var m;
                        g.beginPath();
                        g.globalAlpha = this.opacity / 100;
                        g.lineCap = "round";
                        g.lineWidth = this.lineWidth;
                        g.moveTo(k.x, k.y);
                        g.lineTo(c.x, c.y);
                        g.strokeStyle = e[(2 * this.interval + 1) % e.length];
                        g.stroke();
                        for (c = 0; c < d; c++) k = b[c].x - b[d - 1].x, m = b[c].y - b[d - 1].y, k = k * k + m * m, k < f && 0.15 > this.rand.toDouble() && (g.beginPath(), g.moveTo(b[d - 1].x, b[d - 1].y), g.lineTo(b[c].x, b[c].y), g.strokeStyle = e[(2 * this.interval + 1) % e.length], g.stroke());
                        this.useCache && a.toolkit.drawFromCache(this, 1)
                    }
                }
            }
        };
        this.construct(h)
    });
    a.toolkit.register("brush.fur", function(h) {
        this.construct = function(a) {
            this.type = "fur";
            this.lineWidth = a.lineWidth || 1;
            this.diameter = a.diameter || 30;
            this.spacing = a.spacing || [0, 0];
            a.callback(this)
        };
        this.prepare = a.toolkit.prepareBrush;
        this.drawStart = function() {
            this.rand = new sketch.util.Random(this.seed || 1)
        };
        this.draw = function(d) {
            if (this.rand) {
                var g = this.renderTo,
                    b = this.path,
                    e = this.fill.__colors,
                    f = this.diameter / 100;
                d = null === d ? b.length : d;
                if (0 !== d) {
                    var c = b[d - 1],
                        k = b[d - 2] || c;
                    if (k) {
                        var m, l;
                        g.beginPath();
                        g.globalAlpha = this.opacity / 100;
                        g.moveTo(k.x, k.y);
                        g.lineTo(c.x,
                            c.y);
                        g.lineCap = "round";
                        g.lineWidth = this.lineWidth;
                        g.strokeStyle = e[(2 * this.interval + 1) % e.length];
                        g.stroke();
                        for (var h = 0; h < d; h++) k = b[h].x - b[d - 1].x, m = b[h].y - b[d - 1].y, l = k * k + m * m, 2E3 > l && 0.15 > this.rand.toDouble() && (g.beginPath(), g.moveTo(c.x + k * f, c.y + m * f), g.lineTo(c.x - k * f, c.y - m * f), g.strokeStyle = e[(2 * this.interval + 1) % e.length], g.stroke());
                        this.useCache && a.toolkit.drawFromCache(this, 1)
                    }
                }
            }
        };
        this.construct(h)
    });
    a.toolkit.register("brush.hair", function(h) {
        var d = this;
        this.construct = function(a) {
            this.type = "hair";
            this.lineWidth = a.lineWidth || 1;
            this.diameter = a.diameter || 30;
            this.spacing = a.spacing || [0, 10];
            this.lookback = a.lookback || 10;
            a.callback(this)
        };
        this.prepare = a.toolkit.prepareBrush;
        this.drawStart = function() {
            this.rand = new sketch.util.Random(this.seed || 1)
        };
        this.draw = function() {
            if (this.rand) {
                var g = this.renderTo,
                    b = this.path,
                    e = this.fill.__colors,
                    f = this.diameter / 2,
                    c = this.diameter,
                    k = b.length,
                    m = b[k - 1];
                if (b[k - 2] || m) {
                    g.lineCap = "round";
                    g.lineWidth = this.lineWidth;
                    for (m = 1; m < k; m++) if (!(b.length - this.lookback > m)) {
                        var l = b[m];
                        g.beginPath();
                        g.moveTo(this.px, this.py);
                        g.bezierCurveTo(l.x - d.rand.doubleRange(0, c), l.y - d.rand.doubleRange(0, c), l.x, l.y, l.x, l.y);
                        g.bezierCurveTo(l.x + d.rand.doubleRange(0, f), l.y, l.x, l.y - d.rand.doubleRange(0, f), l.x + d.rand.doubleRange(-c, c), l.y + d.rand.doubleRange(-f, f));
                        g.strokeStyle = e[(2 * this.interval + 1) % e.length];
                        g.stroke()
                    }
                    this.useCache && a.toolkit.drawFromCache(this, 1)
                }
            }
        };
        this.construct(h)
    })
})(sketch);
(function(a) {
    a.toolkit.register(["brush.oil", "brush.pastel"], function(d) {
        var g = this,
            b, e, f, c, k = {};
        this.construct = function(b) {
            this.opacity = b.opacity || 100;
            this.rotate = b.rotate || {
                min: 0,
                max: 0
            };
            this.diameter = b.diameter || 30;
            this.bristles = b.bristles || 30;
            var c = this.diameter / 3;
            this.spacing = b.spacing || {
                min: c,
                max: c
            };
            this.blend = b.blend || 0.97;
            this.fill = b.fill || a.style.fill;
            b.callback(this)
        };
        this.drawStart = function() {
            var d = this.ctx;
            this.interval = this.interval || 0;
            this.rand = new sketch.util.Random(this.seed || 1);
            k[this.finger] = h(this);
            var g = d.canvas,
                p = this.bbox || {
                    x: 0,
                    y: 0
                };
            b = d.getImageData(0, 0, g.width, g.height);
            e = a.ctx.getImageData(p.x, p.y, g.width, g.height);
            f = b.data;
            c = e.data
        };
        this.drawEnd = function() {
            delete k[this.finger]
        };
        this.draw = function() {
            if (k[this.finger]) for (var b = this.blend, e = 1 - b, d = k[this.finger], h = d.length, q = this.ctx.canvas.width, u = this.ctx.canvas.height, v = this.rotate.min, s = this.rotate.max, v = 0 === v && 0 === s ? 0 : (s - v) * this.rand.toDouble() + v, s = this.px >> 0, x = this.py >> 0, w = 0; w < h; w++) {
                var A = d[w],
                    y = A.color;
                if (v) var z = Math.cos(v) * A.x - Math.sin(v) * A.y >> 0,
                    B = Math.sin(v) * A.x + Math.cos(v) * A.y >> 0;
                else z = A.x, B = A.y;
                this.isRecording || (z += this.diameter / 2 + 2 * a.area.padding, B += this.diameter / 2 + 2 * a.area.padding);
                A = 4 * ((x + B) * q + (s + z));
                if (!(0 > s + z || s + z > q - 1 || 0 > x + B || x + B > u - 1)) if (f[A + 3]) {
                    var z = c[A + 0],
                        B = c[A + 1],
                        D = c[A + 2],
                        E = c[A + 3];
                    isFinite(z) || (z = f[A + 0]);
                    isFinite(B) || (B = f[A + 1]);
                    isFinite(D) || (D = f[A + 2]);
                    E < f[A + 3] && (E = f[A + 3]);
                    var G = y.r = y.r * b + z * e,
                        J = y.g = y.g * b + B * e,
                        C = y.b = y.b * b + D * e,
                        y = y.a * g.opacity / 100;
                    f[A + 0] = c[A + 0] = (G * y + z * (255 - y)) / 255;
                    f[A + 1] = c[A + 1] = (J * y + B * (255 - y)) / 255;
                    f[A + 2] = c[A + 2] = (C * y + D * (255 - y)) / 255;
                    y = y / 255 * E + y;
                    y > E && (f[A + 3] = y)
                } else f[A + 0] = y.r, f[A + 1] = y.g, f[A + 2] = y.b, f[A + 3] = y.a
            }
        };
        this.postprocess = function(a) {
            this.ctx.putImageData(b, 0, 0)
        };
        this.construct(d)
    });
    var h = function(a) {
        var g = [],
            b = {}, e = a.diameter * a.bristles,
            f = a.diameter / 2 >> 0,
            c = a.fill.__colors,
            k = c[(2 * ++a.interval + 1) % c.length];
        a.brushColor = k.substr(5, k.length - 6).split(",").map(function(a) {
            return parseInt(a)
        });
        a.brushColor[3] *= 255;
        for (var m = 0; m < e; m++) {
            a.fill.noise && (k = c[(2 * ++a.interval + 1) % c.length], a.brushColor = k.substr(5, k.length - 6).split(",").map(function(a) {
                return parseInt(a)
            }), a.brushColor[3] *= 255);
            var l = a.rand.toDouble() * f,
                k = 1.5 - l / f,
                h = 2 * a.rand.toDouble() * Math.PI,
                r = Math.sin(h) * l + f + 0.5 >> 0,
                l = Math.cos(h) * l + f + 0.5 >> 0,
                h = r + "" + l;
            "undefined" === typeof b[h] && (b[h] = !0, g.push({
                x: r - f,
                y: l - f,
                color: {
                    r: a.brushColor[0],
                    g: a.brushColor[1],
                    b: a.brushColor[2],
                    a: 255 * k
                }
            }))
        }
        return g
    }
})(sketch);
(function(a) {
    a.toolkit.register("brush.spirograph", function(h) {
        var d = !0,
            g = 0,
            b = 1,
            e, f, c = 0;
        this.construct = function(a) {
            this.lineWidth = a.lineWidth || 1;
            this.distance = a.distance || 30;
            this.spacing = a.spacing || [0, 10];
            this.contract = a.contract || 0;
            this.increment = a.increment || 1;
            this.outerRadius = a.outerRadius || 10.2;
            this.innerRadius = a.innerRadius || 3.2;
            this.speed = Math.round(a.speed || 100);
            a.callback(this)
        };
        this.prepare = function() {
            this.useGlobalAlpha = !a.detect.localAlpha.stamp;
            if (this.isRecording && this.useGlobalAlpha && !this.isGhost) return this.renderTo = this.cache;
            if (this.isGhost || this.isRecording) {
                var b = this.renderTo = this.active;
                this.isGhost && (b.clearRect(0, 0, b.canvas.width, b.canvas.height), b.drawImage(a.ctx.canvas, 0, 0));
                return b
            }
            return this.renderTo = this.ctx
        };
        this.drawStart = function() {
            g = c = 0;
            b = this.increment;
            f = e = void 0
        };
        this.draw = function() {
            var a = this.isRecording ? this.active : this.ctx,
                m = this.fill.__colors,
                l = this.innerRadius,
                h = this.outerRadius;
            0 === this.contract && (c = this.distance);
            a.globalAlpha = this.opacity / 100;
            a.lineWidth = this.lineWidth;
            for (var r = this.speed; r--;) {
                if (c > this.distance || 0 > c) d = !d;
                d ? (g -= b, c -= this.contract) : (g += b, c += this.contract);
                var q = (h - l) / l * g,
                    u = (h - l) * Math.cos(g) + c * Math.cos(q),
                    q = (h - l) * Math.sin(g) - c * Math.sin(q),
                    u = u + this.x,
                    q = q + this.y;
                if (e) {
                    a.beginPath();
                    a.moveTo(e, f);
                    a.lineTo(u, q);
                    var v = m.length,
                        v = m[Math.abs((2 * this.interval + 1) % (2 * v) - v)];
                    a.strokeStyle = v;
                    a.stroke()
                }
                e = u;
                f = q
            }
        };
        this.construct(h)
    })
})(sketch);
(function(a) {
    var h = {}, d;
    a.toolkit.register("brush.spraypaint", function(g) {
        var b = this,
            e = 2 * Math.PI,
            f = 0.5 * Math.PI,
            c = [],
            k = 0,
            m = 2,
            l = {}, p = void 0;
        this.create = function(b, c) {
            var e = b.diameter,
                d = document.createElement("canvas"),
                f = d.getContext("2d"),
                g = a.canvas2d.pixelRatio;
            d.width = b.image.width = e * g;
            d.height = b.image.height = e * g;
            f.drawImage(b.image, 0, 0, e, e);
            return f
        };
        this.bitmap = {};
        this.onerror = function() {
            b.image.loaded = !0;
            b.image.error = !0;
            g.callback(b, "404")
        };
        this.onload = function() {
            b.image.loaded = !0;
            g.callback(b)
        };
        this.construct = function(a) {
            this.rand = new sketch.util.Random(this.seed || 1);
            this.spacing = a.spacing || [0, 0];
            this.diameter = a.diameter || 50;
            this.dripDistance = a.drip_distance || 30;
            this.speed = Math.round( !! a.speed && a.speed.value || 20);
            this.src = a.src || "./media/stamp/Basic/1-live.png", h[this.src] ? h[this.src].loaded ? (this.image = h[this.src], a.callback(b)) : (this.image = h[this.src], eventjs.add(this.image, "error", this.onerror), eventjs.add(this.image, "load", this.onload)) : (this.src.split("/"), this.src.split("/"), this.image = new Image, eventjs.add(this.image, "error", this.onerror), eventjs.add(this.image, "load", this.onload), this.image.src = this.src, h[this.src] = this.image);
            this.enable()
        };
        this.disable = function() {
            b.active = !1;
            d && d.remove()
        };
        this.enable = function() {
            b.active = !0;
            d || (d = eventjs.add(window, "deviceorientation", b.deviceOrientation, !1))
        };
        this.dripInterval = function() {
            if (!a.feature.vector.edit) {
                for (var e = 0; e < c.length; e++) {
                    var d = c[e];
                    d.update();
                    d.gamma < d.threshold && d.beta < d.threshold || (c.splice(e, 1), --e)
                }
                b.active && b.animating && requestAnimationFrame(b.dripInterval)
            }
        };
        this.deviceOrientation = function(a) {
            if ("undefined" !== typeof window.orientation) {
                var b = window.orientation / 180;
                0.5 === b ? (b = -(a.gamma / 90), a = a.beta / 90) : -0.5 === b ? (b = a.gamma / 90, a = -(a.beta / 90)) : 1 === b ? (b = -(a.beta / 90), a = -(a.gamma / 90)) : (b = a.beta / 90, a = a.gamma / 90);
                k = 5 * a;
                m = 5 * b
            } else m = 3 * (a.beta / 90) + 1.5, k = 5 * (a.gamma / 90)
        };
        this.drawStart = function() {
            this.rand = new sketch.util.Random(this.seed || 1);
            this.bitmap = this.create(this, g);
            l[this.finger] = {
                interval: this.interval + 1,
                scale: 0,
                scaleRatio: 1,
                stepOneVal: 0,
                dripFrameCount: 0,
                prevDist: 0,
                dripPoint: {
                    x: this.x,
                    y: this.y
                },
                prevPoint: {
                    x: this.x,
                    y: this.y
                }
            }
        };
        this.prepare = function() {
            if (this.isGhost || this.isRecording) {
                var b = this.renderTo = this.active;
                if (this.isGhost || "down" === this.state) b.clearRect(0, 0, b.canvas.width, b.canvas.height), b.drawImage(a.ctx.canvas, 0, 0);
                return b
            }
            return this.renderTo = this.ctx
        };
        this.drawEnd = function() {
            delete l[this.finger];
            for (var a in l) break;
            "undefined" === typeof a && (this.animating = !1, cancelAnimationFrame(this.dripInterval), c = [])
        };
        this.draw = function() {
            var b = this.finger,
                d = this.bitmap;
            if ((d.canvas.width || d.canvas.height) && (b = l[b]) && b.dripPoint) {
                var g = this.fill.__colors,
                    k = g.length,
                    g = g[Math.abs((2 * this.interval + k + 1) % (2 * k) - k)];
                if (p !== g && g || b.interval === this.interval) k = d.canvas, d.globalCompositeOperation = "source-in", d.fillStyle = g || a.style.fill.color, d.fillRect(0, 0, k.width, k.height), p = g;
                2 < this.path.length && !this.animating && (this.animating = !0, requestAnimationFrame(this.dripInterval));
                g = this.x - b.prevPoint.x;
                k = this.y - b.prevPoint.y;
                b.prevDist = Math.sqrt(g * g + k * k);
                b.prevPoint = {
                    x: this.x,
                    y: this.y
                };
                g = this.x - b.dripPoint.x;
                k = this.y - b.dripPoint.y;
                20 > Math.sqrt(g * g + k * k) ? 15 === ++b.dripFrameCount && this.dripDistance && (b.dripFrameCount = 0, c.push(new r({
                    x: this.x,
                    y: this.y
                }))) : (b.dripFrameCount = 0, b.dripPoint = {
                    x: this.x,
                    y: this.y
                });
                g = Math.max((30 - b.prevDist) / 30, 0);
                g = Math.max(1E-5, b.scaleRatio * b.scale * g);
                g /= a.canvas2d.pixelRatio;
                b.stepOneVal < f && (b.scale = Math.sin(b.stepOneVal), b.stepOneVal += 0.1);
                var b = 0.5 * this.diameter,
                    k = 0.5 * this.diameter,
                    m = b * g,
                    h = k * g,
                    A = this.isRecording || this.isGhost ? this.active : this.ctx;
                A.save();
                A.translate(this.x - m, this.y - h);
                A.scale(g, g);
                A.translate(b, k);
                A.rotate(this.rand.toDouble() * e);
                A.translate(-b, - k);
                A.globalAlpha = this.opacity / 100;
                A.drawImage(d.canvas, 0, 0);
                A.restore()
            }
        };
        var r = function(c) {
            var d = b.isGhost ? b.active : b.ctx,
                f = "disco" === b.composite,
                g = a.style.getComposite(b.composite),
                l = b.interval,
                h = b.opacity,
                r = 1,
                y = b.diameter,
                z = 0.05 * b.rand.toDouble() * y + 1,
                B = 5 * (z / y),
                D = b.rand.toDouble() * z,
                E = 0;
            this.color = p;
            this.threshold = y * b.rand.toDouble();
            this.update = function() {
                r -= 0.005;
                0.5 > r && (r = 0.5);
                var a = Math.max(1E-5, r * B),
                    p = y / 2,
                    z = p * a,
                    O = y / 2 * a;
                d.save();
                d.globalAlpha = b.opacity / 100;
                d.globalCompositeOperation = f ? 0 === l++ % 2 ? "lighter" : "source-over" : g;
                d.translate(c.x - z + D, c.y - O + E);
                d.scale(a, a);
                d.globalAlpha = h / 100;
                d.beginPath();
                d.fillStyle = this.color;
                d.arc(p, y, p, 0, e, !0);
                d.fill();
                d.restore();
                D += 2 * b.rand.toDouble() - 1 + k;
                E += m;
                this.beta++;
                this.gamma++
            };
            this.beta = this.gamma = 0
        };
        this.construct(g)
    })
})(sketch);
(function(a) {
    a.toolkit.register("brush.streamer", function(h) {
        var d = {}, g = function(b, e, f, c, g) {
            if (d[e]) {
                var m = 0.2 * d[e].thickness,
                    l = d[e].cos,
                    h = d[e].sin,
                    r = d[e].color;
                b.beginPath();
                b.strokeStyle = r;
                b.arc(f, c, m, 0, 2 * Math.PI, !0);
                b.moveTo(d[e].x + l, d[e].y + h);
                b.lineTo(f + 0.2 * l, c + 0.2 * h);
                b.lineTo(f - 0.2 * l, c - 0.2 * h);
                b.lineTo(d[e].x - l, d[e].y - h);
                b.lineTo(d[e].x + l, d[e].y + h);
                a.toolkit.applyStyle(b, g, 1, 0, 0, !0, !1);
                b.stroke()
            }
        };
        this.construct = function(a) {
            this.spacing = a.spacing || [0, 0];
            a.callback(this)
        };
        this.prepare = function() {
            this.useTrackGradient = "color" !== this.fill.type;
            this.useBlendMode = "source-over" !== this.composite;
            if (this.isRecording) {
                if (this.useBlendMode || 100 !== this.opacity) {
                    var b = this.renderTo = this.active;
                    "down" === this.state && this.useBlendMode && (b.clearRect(0, 0, b.canvas.width, b.canvas.height), b.drawImage(a.ctx.canvas, 0, 0));
                    this.useCache = !0;
                    b = this.cache
                } else this.useCache = !1, b = this.active;
                return this.renderTo = b
            }
            this.useCache = !1;
            return this.renderTo = this.ctx
        };
        this.drawStart = function() {
            var a = this.finger;
            this.fill.mode = "cycle";
            d[a] = {};
            d[a].x = this.x;
            d[a].y = this.y;
            d[a].px = this.x;
            d[a].py = this.y;
            d[a].vectorx = 0;
            d[a].vectory = 0;
            d[a].cos = 0;
            d[a].sin = 0;
            d[a].time = (new Date).getTime();
            d[a].thickness = 0;
            d[a].rotation = Math.PI / 2;
            d[a].color = "#000"
        };
        this.draw = function() {
            var b = this.finger;
            if ("undefined" !== typeof d[b]) {
                var e = this.useCache,
                    f = this.fill.__colors,
                    c = f.length,
                    f = f[Math.abs((2 * this.interval + 1) % (2 * c) - c)],
                    c = this.renderTo,
                    k = this.x - d[b].px,
                    m = this.y - d[b].py,
                    l = (new Date).getTime();
                if (5 < Math.abs(k) || 5 < Math.abs(m)) {
                    d[b].color = f;
                    0 > k * d[b].vectorx + m * d[b].vectory && (g(c, b, this.px, this.py, this), d[b].x = d[b].px = this.px, d[b].y = d[b].py = this.py, d[b].rotation += Math.PI, d[b].thickness *= 0.2);
                    d[b].x += 0.42 * (this.x - d[b].x);
                    d[b].y += 0.42 * (this.y - d[b].y);
                    var h = d[b].x - d[b].px,
                        r = d[b].y - d[b].py,
                        q = Math.sqrt(h * h + r * r),
                        h = 0 !== q ? Math.PI / 2 + Math.atan2(r, h) : 0,
                        r = d[b].thickness + 0.42 * (0.25 + 0.12 * q - d[b].thickness),
                        u = Math.sin(d[b].rotation),
                        v = Math.cos(d[b].rotation),
                        s = Math.sin(h),
                        x = Math.cos(h),
                        w = d[b].thickness * u,
                        A = d[b].thickness * v,
                        s = r * s,
                        x = r * x,
                        u = 0.33 * q * u,
                        y = -0.33 * q * v,
                        q = d[b].px + A + u,
                        v = d[b].py + w + y,
                        u = d[b].px - A + u,
                        y = d[b].py - w + y;
                    c.beginPath();
                    c.strokeStyle = f;
                    c.moveTo(d[b].px + A, d[b].py + w);
                    c.quadraticCurveTo(q, v, d[b].x + x, d[b].y + s);
                    c.lineTo(d[b].x - x, d[b].y - s);
                    c.quadraticCurveTo(u, y, d[b].px - A, d[b].py - w);
                    c.lineTo(d[b].px + A, d[b].py + w);
                    a.toolkit.applyStyle(c, this, 1, 0, 0, !0, !1);
                    c.stroke();
                    d[b].px = d[b].x;
                    d[b].py = d[b].y;
                    d[b].rotation = h;
                    d[b].thickness = r;
                    d[b].vectorx = k;
                    d[b].vectory = m;
                    d[b].cos = x;
                    d[b].sin = s;
                    d[b].time = l;
                    e && a.toolkit.drawFromCache(this)
                }
            }
        };
        this.drawEnd = function() {
            var a = this.finger;
            "undefined" !== typeof d[a] && (g(this.ctx, a, this.x, this.y, this), delete d[a])
        };
        this.construct(h)
    })
})(sketch);
(function(a) {
    a.toolkit.register("brush.textbrush", function(h) {
        var d = 0,
            g = 0;
        this.construct = function(a) {
            this.fontFamily = a.fontFamily || "Georgia";
            this.fontSize = a.fontSizeFloor || {
                min: 10,
                max: 100
            };
            this.content = a.content && a.content.value || "";
            this.spacing = a.spacing || [0, 10];
            a.callback(this)
        };
        this.prepare = a.toolkit.prepareBrush;
        this.drawStart = function() {
            d = this.x;
            g = this.y
        };
        this.draw = function() {
            var a = this.ctx,
                e = this.fill.__colors,
                f = this.x - d,
                c = this.y - g;
            this.isRecording || (f += 7, c += 7);
            var k = Math.sqrt(f * f + c * c);
            a.save();
            a.font = Math.max(this.fontSize.min, k / 2) + "px " + this.fontFamily;
            a.fillStyle = e[(2 * this.interval + 1) % e.length];
            var e = this.content[this.interval % this.content.length],
                m = a.measureText(e).width;
            k > m && (f = Math.atan2(c, f), a.translate(d, g), a.rotate(f), a.fillText(e, 0, 0), d += Math.cos(f) * m, g += Math.sin(f) * m);
            a.restore()
        };
        this.construct(h)
    })
})(sketch);
(function(a) {
    a.toolkit.register("brush.calligraphy", function(h) {
        this.construct = function(a) {
            this.diameter = isFinite(a.diameter) ? a.diameter : 30;
            this.spacing = a.spacing || [0, 0];
            a.callback(this)
        };
        this.prepare = function() {
            if (this.isRecording || this.isGhost) {
                this.useCache = !0;
                var a = this.cache;
                this.isGhost && a.clearRect(0, 0, a.canvas.width, a.canvas.height)
            } else this.useCache = !1, a = this.ctx;
            return this.renderTo = a
        };
        this.draw = function() {
            var d = this.fill.__colors.length;
            Math.abs((2 * this.interval + 1) % (2 * d) - d);
            var d = this.diameter,
                g = this.isRecording || this.isGhost,
                b = g ? this.cache : this.ctx;
            b.save();
            b.globalCompositeOperation = "source-over";
            b.beginPath();
            b.lineCap = "round";
            b.translate(-d / 2, 0);
            b.moveTo(this.px, this.py);
            b.lineTo(this.px + d, this.py - d / 2);
            b.lineTo(this.x + d, this.y - d / 2);
            b.lineTo(this.x, this.y);
            b.closePath();
            a.toolkit.applyStyle(b, this, 1, 0, 0, !0, !0);
            g && a.toolkit.drawFromCache(this);
            b.restore()
        };
        this.construct(h)
    });
    a.toolkit.register("brush.pencil", function(h) {
        this.construct = function(a) {
            this.diameter = isFinite(a.diameter) ? a.diameter : 30;
            this.spacing = a.spacing || [0, 0];
            this.useSmooth = !0;
            a.callback(this);
            return this
        };
        this.prepare = function() {
            this.useTrackGradient = "gradient" === this.fill.type;
            this.useBlendMode = "source-over" !== this.composite;
            if (this.isRecording) {
                if (this.useTrackGradient) {
                    this.useCache = !0;
                    var d = this.cache;
                    d.clearRect(0, 0, d.canvas.width, d.canvas.height)
                } else this.useCache = !1, d = this.active, d.clearRect(0, 0, d.canvas.width, d.canvas.height), this.useBlendMode && d.drawImage(a.ctx.canvas, 0, 0);
                return this.renderTo = d
            }
            this.useCache = !1;
            return this.renderTo = this.ctx
        };
        this.render = function(d) {
            d = this.path.length;
            var g = this.diameter,
                b = this.useCache,
                e = this.renderTo;
            e.save();
            e.beginPath();
            this.isRecording ? (e.globalAlpha = this.opacity / 100, e.globalCompositeOperation = a.style.getComposite(this.composite)) : e.globalAlpha = 1;
            if (this.isRecording && !this.useSmooth) for (var f = 0; f < d; f++) {
                var c = this.path[f];
                "M" === c.cmd ? (e.moveTo(c.x, c.y), e.lineTo(c.x + 0.1, c.y + 0.1)) : e.lineTo(c.x, c.y)
            } else a.vector.catmullRomSpline({
                path: this.path,
                tension: 0,
                ctx: e
            });
            e.lineCap = "round";
            e.lineJoin = "round";
            e.lineWidth = g;
            a.toolkit.applyStyle(e, this, 1, 0, 0, !1, !0);
            b && a.toolkit.drawFromCache(this);
            e.restore()
        };
        return this.construct(h)
    });
    a.toolkit.register(["brush.eraser", "brush.paintbrush"], function(h) {
        this.bitmap = {};
        this.construct = function(a) {
            this.diameter = isFinite(a.diameter) ? a.diameter : 30;
            this.blur = isFinite(a.blur) ? a.blur : 10;
            this.spacing = a.spacing || [0, 0];
            this.useSmooth = !0;
            a.callback(this);
            return this
        };
        this.prepare = function() {
            "eraser" === this.type && (this.fill.type = "color");
            this.useTrackGradient = "color" !== this.fill.type;
            this.useBlendMode = "source-over" !== this.composite;
            if (this.isRecording) {
                if (this.useTrackGradient && this.useBlendMode) {
                    this.useCache = !0;
                    var d = this.cache;
                    d.clearRect(0, 0, d.canvas.width, d.canvas.height)
                } else this.useCache = !1, d = this.active, d.clearRect(0, 0, d.canvas.width, d.canvas.height), this.useBlendMode && d.drawImage(a.ctx.canvas, 0, 0);
                return this.renderTo = d
            }
            this.useCache = !1;
            return this.renderTo = this.ctx
        };
        this.render = function(d) {
            var g = this.isRecording,
                b = "eraser" === this.type,
                e = this.path.length,
                f = this.useTrackGradient,
                c = this.useCache,
                k = this.renderTo,
                m = this.fill.__colors,
                m = b ? a.configure.backgroundRaw : m[1 % m.length],
                l = this.diameter,
                h = this.blur,
                r = 0,
                q = 0,
                u = a.canvas2d,
                v = u.pixelRatio;
            b && !g && (k.globalCompositeOperation = "source-over");
            d && d.bbox ? (b = d.bbox.scale.x, h && (q = d.bbox.width + (2.5 + a.area.padding) / b, q = q * v + a.render.cache.padding)) : (b = u.zoom, h && (d = window.innerHeight, u = window.innerWidth, q = u / b + l / 2, r = d / b + l / 2, r > q ? (r = 0, u - this.x > u / 2 && (q *= -1), q *= v) : (q = 0, d - this.y > d / 2 && (r *= -1), r *= v)));
            k.save();
            k.beginPath();
            k.globalAlpha = g ? this.opacity / 100 : 1;
            if (g && !this.useSmooth) for (g = 0; g < e; g++) v = this.path[g], "M" === v.cmd ? (k.moveTo(v.x, v.y), k.lineTo(v.x + 0.1, v.y + 0.1)) : k.lineTo(v.x, v.y);
            else h && k.translate(-q / v, - r / v), a.vector.catmullRomSpline({
                path: this.path,
                tension: 0,
                ctx: k
            });
            h ? (k.strokeStyle = "#000", k.shadowOffsetX = q * b, k.shadowOffsetY = r * b, k.shadowBlur = h * b, k.shadowColor = m.indexOf ? m : "#000") : k.strokeStyle = m;
            k.lineCap = "round";
            k.lineJoin = "round";
            k.lineWidth = l;
            k.stroke();
            f && a.toolkit.trackGradient(k, this, q, r, b);
            c && a.toolkit.drawFromCache(this);
            k.restore()
        };
        return this.construct(h)
    });
    a.toolkit.drawFromCache = function(h, d) {
        h.active.save();
        h.active.globalAlpha = 1;
        h.active.globalCompositeOperation = "copy";
        h.active.drawImage(h.ctx.canvas, 0, 0);
        h.active.globalAlpha = d || h.opacity / 100;
        h.active.globalCompositeOperation = a.style.getComposite(h.composite);
        h.active.drawImage(h.cache.canvas, 0, 0);
        h.active.restore()
    };
    a.toolkit.applyStyle = function(h, d, g, b, e, f, c) {
        h.save();
        if (d.bbox) var k = -d.bbox.x,
            m = -d.bbox.y;
        else var m = d.offset || 0,
            l = sketch.canvas2d,
            k = 1 * l.x / l.zoom + m / 2,
            m = 1 * l.y / l.zoom + m / 2;
        h.translate(k, m);
        c && (c = d.stroke, c.__colors && (c.lineWidth || d.diameter) && (c = d.fill.__colors, k = c.length, m = 2 * d.interval + 1, h.strokeStyle = c[Math.abs(m % (2 * k) - k)], h.stroke()));
        f && (c = d.fill.__colors, k = c.length, m = 2 * d.interval + 1, h.fillStyle = c[Math.abs(m % (2 * k) - k)], h.fill());
        h.restore();
        "gradient" === d.fill.type && "cycle" !== d.fill.mode && a.toolkit.trackGradient(h, d, b, e, g)
    };
    a.toolkit.trackGradient = function(h, d, g, b, e, f) {
        var c = d.blur || 0,
            k = (d.diameter || 0) + c,
            m = k / 2;
        if (d.bbox) f = a.render.cache.enabled ? {
            x1: -d.bbox.padding || 0,
            y1: -d.bbox.padding || 0,
            x2: d.bbox.width / d.bbox.scale.x,
            y2: d.bbox.height / d.bbox.scale.y
        } : {
            x1: d.bbox.x,
            y1: d.bbox.y,
            x2: d.bbox.x + d.bbox.width,
            y2: d.bbox.y + d.bbox.height
        };
        else if (d.isRecording && !f) {
            var l = d.path,
                p = l.length;
            2 >= p && delete d._bbox;
            f = d._bbox || {
                x1: Infinity,
                y1: Infinity,
                x2: -Infinity,
                y2: -Infinity
            };
            var r = m,
                c = m + c + a.area.padding,
                l = l[p - 1];
            l.x < f.x1 + r && (f.x1 = l.x - r);
            l.y < f.y1 + r && (f.y1 = l.y - r);
            l.x > f.x2 - c && (f.x2 = l.x + c);
            l.y > f.y2 - c && (f.y2 = l.y + c);
            d._bbox = f
        }
        h.save();
        h.beginPath();
        h.shadowBlur = 0;
        h.globalAlpha = 1;
        h.globalCompositeOperation = "source-atop";
        h.translate(g, b);
        g = f.x1;
        b = f.x2;
        r = f.y1;
        f = f.y2;
        d.isRecording ? (h.fillStyle = a.style.createGradient("fill", h, g, r, b, f, d), h.fillRect(g - m, r - m, b - g + k, f - r + k)) : (l = a.render.cache.padding, k += l, m = k / 2 + l, h.fillStyle = a.style.createGradient("fill", h, g * e + l - m, r * e + l - m, b * e + l - m, f * e + l - m, d), h.fillRect(g - m, r - m, b + 2 * k, f + 2 * k));
        h.restore()
    };
    return a
})(sketch);
(function(a) {
    a.toolkit.register(["brush.crayon", "brush.stamp"], function(h) {
        var d = this;
        this.bitmap = {};
        this.getStampResource = function(d, b, e) {
            a.assets.getItem(d) ? b(a.assets.getItem(d)) : a.assets.add({
                type: "image",
                src: d,
                onload: function(a, c) {
                    b(c)
                },
                onerror: e
            })
        };
        this.construct = function() {
            this.rand = new sketch.util.Random(this.seed || 1);
            this.diameter = h.diameter || 20;
            this.speed = h.speed || void 0;
            this.rotate = h.rotate || {
                min: 0,
                max: 0
            };
            this.scale = h.scale || {
                min: 1,
                max: 1
            };
            this.translate = h.translate || {
                min: 0,
                max: 0
            };
            this.spacing = h.spacing || {
                min: this.diameter / 3,
                max: this.diameter / 3
            };
            this.pollock = h.pollock || !1;
            this.src = h.src || void 0;
            this.image = new Image;
            this.src ? this.getStampResource(this.src, function(g) {
                a.removeColorFromCanvas && a.removeColorFromCanvas(g);
                d.image = g;
                d.image.loaded = !0;
                d.image.error = !1;
                h.callback(d)
            }, function() {
                d.image.loaded = !0;
                d.image.error = !0;
                h.callback(d, "404")
            }) : h.callback(d);
            return this
        };
        this.prepare = function() {
            this.useGlobalAlpha = !a.detect.localAlpha.stamp;
            if (this.isRecording && this.useGlobalAlpha && !this.isGhost) return this.renderTo = this.cache;
            if (this.isGhost || this.isRecording) {
                var d = this.renderTo = this.active;
                if (this.isGhost || "down" === this.state) d.clearRect(0, 0, d.canvas.width, d.canvas.height), "source-over" !== this.composite && d.drawImage(a.ctx.canvas, 0, 0);
                return d
            }
            return this.renderTo = this.ctx
        };
        this.drawStart = function() {
            this.scaleX = d.bbox && d.bbox.scale.x || 1;
            "crayon" === this.type && (this.fill.mode = "cycle", this.spacing = {
                min: this.diameter / 3,
                max: this.diameter / 3
            });
            var a = this.finger;
            this.rand = new sketch.util.Random(this.seed || 1);
            this.rr = this.rand.toDouble();
            this.sr = this.rand.toDouble();
            this.bitmap[a] = this.create();
            this.isRecording && this.useGlobalAlpha && (a = this.cache, a.canvas.width = this.ctx.canvas.width, a.canvas.height = this.ctx.canvas.height)
        };
        this.draw = function() {
            var a = this.renderTo,
                b = this.ratio,
                e = this.finger;
            if (this.bitmap[e]) {
                var e = this.bitmap[e],
                    d = e.canvas.width,
                    c = e.canvas.height,
                    k = d / 2,
                    m = c / 2;
                if (k && m) {
                    var l = this.translate.min || 1E-5,
                        h = this.translate.max || 1E-5;
                    if (0 === l && 0 === h) var r = 0,
                        l = 0;
                    else r = (h - l) * this.rand.toDouble() + l, l = (h - l) * this.rand.toDouble() + l;
                    var h = this.scale.min,
                        q = this.scale.max,
                        b = 1 === h && 1 === q ? b || 1E-5 : ((q - h) * this.rand.toDouble() + h) * b || 1E-5,
                        h = 0,
                        u = this.rotate.min,
                        q = this.rotate.max;
                    0 !== u && 0 !== q && (u <= q ? h = (q - u) * this.rand.toDouble() + u : (h = u - q, u = (360 - h) * this.rand.toDouble(), h = u > q ? u + h : u));
                    this.pollock || a.save();
                    "cycle" === this.fill.mode && (q = this.fill.__colors, u = q.length, q = q[Math.abs((2 * this.interval + 1) % (2 * u) - u)], q !== e.fillStyle && (e.fillStyle = q, e.fillRect(0, 0, d, c)));
                    a.translate(this.x - k * b, this.y - m * b);
                    1 !== b && a.scale(b, b);
                    0 !== h && (a.translate(k, m), a.rotate(h * sketch.util.DEG_RAD), a.translate(-k, - m));
                    this.useGlobalAlpha || (a.globalAlpha = this.opacity / 100);
                    a.translate(1 * r / b, 1 * l / b);
                    a.drawImage(e.canvas, 0, 0);
                    this.decorate && (a.beginPath(), a.fillStyle = e.fillStyle, sketch.vector.shape.star(a, 0, 0, 10, 5, 2), a.fill());
                    this.pollock || a.restore();
                    this.isRecording && this.useGlobalAlpha && (this.active.save(), this.active.globalAlpha = this.opacity / 100, this.active.globalCompositeOperation = "copy", this.active.drawImage(a.canvas, 0, 0), this.active.restore())
                }
            }
        };
        this.drawEnd = function() {
            delete this.bitmap[this.finger]
        };
        this.create = function() {
            var d = this.finger,
                b = Math.round(this.scale.max * this.diameter);
            if (!d || !b) return console.log("stamp error", d, b);
            if (this.bitmap[d]) var e = this.bitmap[d],
                f = e.canvas;
            else f = document.createElement("canvas"), e = f.getContext("2d");
            if (this.src) {
                if (this.image.error) return e;
                var c = this.image.width,
                    k = this.image.height;
                c > b && (k *= b / c, c = b);
                k > b && (c *= b / k, k = b);
                var m = Math.sqrt(c * c + k * k);
                m > b && (b /= m, c *= b, k *= b);
                f.width = c;
                f.height = k;
                e.drawImage(this.image,
                    0, 0, c, k)
            } else {
                for (var c = f.width = b, k = f.height = b, f = e.getImageData(0, 0, c, k), b = f.data, m = 25 * this.diameter, l = this.diameter / 2, h = 0; h < m; h++) {
                    var r = this.rand.toDouble() * l,
                        q = 1.5 - r / l,
                        u = 2 * this.rand.toDouble() * Math.PI,
                        v = Math.sin(u) * r + l + 0.5 >> 0,
                        r = Math.cos(u) * r + l + 0.5 >> 0;
                    v >= c || 0 >= v || r >= k || 0 >= r || (b[4 * (r * c + v) + 3] = 255 * q)
                }
                e.putImageData(f, 0, 0)
            }
            e.globalCompositeOperation = "none" === this.fill[this.fill.type] ? "source-atop" : "source-in";
            e.fillStyle = a.style.createGradient("fill", e, 0, 0, c, k, this);
            e.fillRect(0, 0, c, k);
            m = Math.sqrt(c * c + k * k);
            this.ratio = 1 / (m / this.diameter);
            return this.bitmap[d] = e
        };
        return this.construct()
    });
    a.removeColorFromCanvas = function(a) {
        var d, g, b;
        if (a.colorRemoved) {
            a.colorRemoved = !0;
            var e = a.getContext("2d");
            a = e.getImageData(0, 0, a.width, a.height);
            for (var f = a.data, c = f.length, k = 0; k < c; k += 4) {
                var m = f[k],
                    l = f[k + 1],
                    p = f[k + 2],
                    r = f[k + 3];
                b = Math.max(0, 0 < m ? 0 : m);
                g = Math.max(0, 0 < l ? 0 : l);
                d = Math.max(0, 0 < p ? 0 : p);
                f[k] = 0;
                f[k + 1] = 0;
                f[k + 2] = 0;
                g -= l;
                d -= p;
                b = 0.33 * Math.abs(b - m) + 0.33 * Math.abs(g) + 0.33 * Math.abs(d);
                f[k + 3] = r - b
            }
            e.putImageData(a, 0,
                0)
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.lib && (sketch.lib = {});
sketch = function(a) {
    a.lib.stamp = {
        defaultCategory: "Butterflies",
        path: "./media/stamp",
        thumbnail: {
            _width: 44,
            _height: 44,
            columns: 4,
            rows: 4,
            padding: 4
        },
        tree: {
            yourFiles: [],
            "Water Colors": [{
                name: "0-live",
                filepath: "Water Colors/0-live.png",
                category: "Water Colors"
            }, {
                name: "1-live",
                filepath: "Water Colors/1-live.png",
                category: "Water Colors"
            }, {
                name: "10-live",
                filepath: "Water Colors/10-live.png",
                category: "Water Colors"
            }, {
                name: "11-live",
                filepath: "Water Colors/11-live.png",
                category: "Water Colors"
            }, {
                name: "12-live",
                filepath: "Water Colors/12-live.png",
                category: "Water Colors"
            }, {
                name: "13-live",
                filepath: "Water Colors/13-live.png",
                category: "Water Colors"
            }, {
                name: "14-live",
                filepath: "Water Colors/14-live.png",
                category: "Water Colors"
            }, {
                name: "15-live",
                filepath: "Water Colors/15-live.png",
                category: "Water Colors"
            }, {
                name: "16-live",
                filepath: "Water Colors/16-live.png",
                category: "Water Colors"
            }, {
                name: "2-live",
                filepath: "Water Colors/2-live.png",
                category: "Water Colors"
            }, {
                name: "3-live",
                filepath: "Water Colors/3-live.png",
                category: "Water Colors"
            }, {
                name: "4-live",
                filepath: "Water Colors/4-live.png",
                category: "Water Colors"
            }, {
                name: "5-live",
                filepath: "Water Colors/5-live.png",
                category: "Water Colors"
            }, {
                name: "6-live",
                filepath: "Water Colors/6-live.png",
                category: "Water Colors"
            }, {
                name: "7-live",
                filepath: "Water Colors/7-live.png",
                category: "Water Colors"
            }, {
                name: "8-live",
                filepath: "Water Colors/8-live.png",
                category: "Water Colors"
            }, {
                name: "9-live",
                filepath: "Water Colors/9-live.png",
                category: "Water Colors"
            }],
            Typogrunge: [{
                name: "0-live",
                filepath: "Typogrunge/0-live.png",
                category: "Typogrunge"
            }, {
                name: "1-live",
                filepath: "Typogrunge/1-live.png",
                category: "Typogrunge"
            }, {
                name: "10-live",
                filepath: "Typogrunge/10-live.png",
                category: "Typogrunge"
            }, {
                name: "11-live",
                filepath: "Typogrunge/11-live.png",
                category: "Typogrunge"
            }, {
                name: "12-live",
                filepath: "Typogrunge/12-live.png",
                category: "Typogrunge"
            }, {
                name: "13-live",
                filepath: "Typogrunge/13-live.png",
                category: "Typogrunge"
            }, {
                name: "14-live",
                filepath: "Typogrunge/14-live.png",
                category: "Typogrunge"
            }, {
                name: "15-live",
                filepath: "Typogrunge/15-live.png",
                category: "Typogrunge"
            }, {
                name: "16-live",
                filepath: "Typogrunge/16-live.png",
                category: "Typogrunge"
            }, {
                name: "17-live",
                filepath: "Typogrunge/17-live.png",
                category: "Typogrunge"
            }, {
                name: "18-live",
                filepath: "Typogrunge/18-live.png",
                category: "Typogrunge"
            }, {
                name: "19-live",
                filepath: "Typogrunge/19-live.png",
                category: "Typogrunge"
            }, {
                name: "2-live",
                filepath: "Typogrunge/2-live.png",
                category: "Typogrunge"
            }, {
                name: "20-live",
                filepath: "Typogrunge/20-live.png",
                category: "Typogrunge"
            }, {
                name: "21-live",
                filepath: "Typogrunge/21-live.png",
                category: "Typogrunge"
            }, {
                name: "22-live",
                filepath: "Typogrunge/22-live.png",
                category: "Typogrunge"
            }, {
                name: "23-live",
                filepath: "Typogrunge/23-live.png",
                category: "Typogrunge"
            }, {
                name: "3-live",
                filepath: "Typogrunge/3-live.png",
                category: "Typogrunge"
            }, {
                name: "4-live",
                filepath: "Typogrunge/4-live.png",
                category: "Typogrunge"
            }, {
                name: "5-live",
                filepath: "Typogrunge/5-live.png",
                category: "Typogrunge"
            }, {
                name: "6-live",
                filepath: "Typogrunge/6-live.png",
                category: "Typogrunge"
            }, {
                name: "7-live",
                filepath: "Typogrunge/7-live.png",
                category: "Typogrunge"
            }, {
                name: "8-live",
                filepath: "Typogrunge/8-live.png",
                category: "Typogrunge"
            }, {
                name: "9-live",
                filepath: "Typogrunge/9-live.png",
                category: "Typogrunge"
            }],
            Tizzape: [{
                name: "0-live",
                filepath: "Tizzape/0-live.png",
                category: "Tizzape"
            }, {
                name: "1-live",
                filepath: "Tizzape/1-live.png",
                category: "Tizzape"
            }, {
                name: "10-live",
                filepath: "Tizzape/10-live.png",
                category: "Tizzape"
            }, {
                name: "11-live",
                filepath: "Tizzape/11-live.png",
                category: "Tizzape"
            }, {
                name: "12-live",
                filepath: "Tizzape/12-live.png",
                category: "Tizzape"
            }, {
                name: "13-live",
                filepath: "Tizzape/13-live.png",
                category: "Tizzape"
            }, {
                name: "14-live",
                filepath: "Tizzape/14-live.png",
                category: "Tizzape"
            }, {
                name: "15-live",
                filepath: "Tizzape/15-live.png",
                category: "Tizzape"
            }, {
                name: "16-live",
                filepath: "Tizzape/16-live.png",
                category: "Tizzape"
            }, {
                name: "17-live",
                filepath: "Tizzape/17-live.png",
                category: "Tizzape"
            }, {
                name: "18-live",
                filepath: "Tizzape/18-live.png",
                category: "Tizzape"
            }, {
                name: "19-live",
                filepath: "Tizzape/19-live.png",
                category: "Tizzape"
            }, {
                name: "2-live",
                filepath: "Tizzape/2-live.png",
                category: "Tizzape"
            }, {
                name: "3-live",
                filepath: "Tizzape/3-live.png",
                category: "Tizzape"
            }, {
                name: "4-live",
                filepath: "Tizzape/4-live.png",
                category: "Tizzape"
            }, {
                name: "5-live",
                filepath: "Tizzape/5-live.png",
                category: "Tizzape"
            }, {
                name: "6-live",
                filepath: "Tizzape/6-live.png",
                category: "Tizzape"
            }, {
                name: "7-live",
                filepath: "Tizzape/7-live.png",
                category: "Tizzape"
            }, {
                name: "8-live",
                filepath: "Tizzape/8-live.png",
                category: "Tizzape"
            }, {
                name: "9-live",
                filepath: "Tizzape/9-live.png",
                category: "Tizzape"
            }],
            "Simple Smudges": [{
                name: "0-live",
                filepath: "Simple Smudges/0-live.png",
                category: "Simple Smudges"
            }, {
                name: "1-live",
                filepath: "Simple Smudges/1-live.png",
                category: "Simple Smudges"
            }, {
                name: "10-live",
                filepath: "Simple Smudges/10-live.png",
                category: "Simple Smudges"
            }, {
                name: "11-live",
                filepath: "Simple Smudges/11-live.png",
                category: "Simple Smudges"
            }, {
                name: "12-live",
                filepath: "Simple Smudges/12-live.png",
                category: "Simple Smudges"
            }, {
                name: "13-live",
                filepath: "Simple Smudges/13-live.png",
                category: "Simple Smudges"
            }, {
                name: "2-live",
                filepath: "Simple Smudges/2-live.png",
                category: "Simple Smudges"
            }, {
                name: "3-live",
                filepath: "Simple Smudges/3-live.png",
                category: "Simple Smudges"
            }, {
                name: "4-live",
                filepath: "Simple Smudges/4-live.png",
                category: "Simple Smudges"
            }, {
                name: "5-live",
                filepath: "Simple Smudges/5-live.png",
                category: "Simple Smudges"
            }, {
                name: "6-live",
                filepath: "Simple Smudges/6-live.png",
                category: "Simple Smudges"
            }, {
                name: "7-live",
                filepath: "Simple Smudges/7-live.png",
                category: "Simple Smudges"
            }, {
                name: "8-live",
                filepath: "Simple Smudges/8-live.png",
                category: "Simple Smudges"
            }, {
                name: "9-live",
                filepath: "Simple Smudges/9-live.png",
                category: "Simple Smudges"
            }],
            Retro: [{
                name: "0-live",
                filepath: "Retro/0-live.png",
                category: "Retro"
            }, {
                name: "1-live",
                filepath: "Retro/1-live.png",
                category: "Retro"
            }, {
                name: "10-live",
                filepath: "Retro/10-live.png",
                category: "Retro"
            }, {
                name: "11-live",
                filepath: "Retro/11-live.png",
                category: "Retro"
            }, {
                name: "12-live",
                filepath: "Retro/12-live.png",
                category: "Retro"
            }, {
                name: "13-live",
                filepath: "Retro/13-live.png",
                category: "Retro"
            }, {
                name: "14-live",
                filepath: "Retro/14-live.png",
                category: "Retro"
            }, {
                name: "15-live",
                filepath: "Retro/15-live.png",
                category: "Retro"
            }, {
                name: "16-live",
                filepath: "Retro/16-live.png",
                category: "Retro"
            }, {
                name: "17-live",
                filepath: "Retro/17-live.png",
                category: "Retro"
            }, {
                name: "18-live",
                filepath: "Retro/18-live.png",
                category: "Retro"
            }, {
                name: "19-live",
                filepath: "Retro/19-live.png",
                category: "Retro"
            }, {
                name: "2-live",
                filepath: "Retro/2-live.png",
                category: "Retro"
            }, {
                name: "20-live",
                filepath: "Retro/20-live.png",
                category: "Retro"
            }, {
                name: "21-live",
                filepath: "Retro/21-live.png",
                category: "Retro"
            }, {
                name: "22-live",
                filepath: "Retro/22-live.png",
                category: "Retro"
            }, {
                name: "23-live",
                filepath: "Retro/23-live.png",
                category: "Retro"
            }, {
                name: "24-live",
                filepath: "Retro/24-live.png",
                category: "Retro"
            }, {
                name: "25-live",
                filepath: "Retro/25-live.png",
                category: "Retro"
            }, {
                name: "26-live",
                filepath: "Retro/26-live.png",
                category: "Retro"
            }, {
                name: "27-live",
                filepath: "Retro/27-live.png",
                category: "Retro"
            }, {
                name: "28-live",
                filepath: "Retro/28-live.png",
                category: "Retro"
            }, {
                name: "29-live",
                filepath: "Retro/29-live.png",
                category: "Retro"
            }, {
                name: "3-live",
                filepath: "Retro/3-live.png",
                category: "Retro"
            }, {
                name: "4-live",
                filepath: "Retro/4-live.png",
                category: "Retro"
            }, {
                name: "5-live",
                filepath: "Retro/5-live.png",
                category: "Retro"
            }, {
                name: "6-live",
                filepath: "Retro/6-live.png",
                category: "Retro"
            }, {
                name: "7-live",
                filepath: "Retro/7-live.png",
                category: "Retro"
            }, {
                name: "8-live",
                filepath: "Retro/8-live.png",
                category: "Retro"
            }, {
                name: "9-live",
                filepath: "Retro/9-live.png",
                category: "Retro"
            }],
            Leafs: [{
                name: "0-live",
                filepath: "Leafs/0-live.png",
                category: "Leafs"
            }, {
                name: "1-live",
                filepath: "Leafs/1-live.png",
                category: "Leafs"
            }, {
                name: "10-live",
                filepath: "Leafs/10-live.png",
                category: "Leafs"
            }, {
                name: "11-live",
                filepath: "Leafs/11-live.png",
                category: "Leafs"
            }, {
                name: "12-live",
                filepath: "Leafs/12-live.png",
                category: "Leafs"
            }, {
                name: "13-live",
                filepath: "Leafs/13-live.png",
                category: "Leafs"
            }, {
                name: "14-live",
                filepath: "Leafs/14-live.png",
                category: "Leafs"
            }, {
                name: "15-live",
                filepath: "Leafs/15-live.png",
                category: "Leafs"
            }, {
                name: "16-live",
                filepath: "Leafs/16-live.png",
                category: "Leafs"
            }, {
                name: "17-live",
                filepath: "Leafs/17-live.png",
                category: "Leafs"
            }, {
                name: "18-live",
                filepath: "Leafs/18-live.png",
                category: "Leafs"
            }, {
                name: "19-live",
                filepath: "Leafs/19-live.png",
                category: "Leafs"
            }, {
                name: "2-live",
                filepath: "Leafs/2-live.png",
                category: "Leafs"
            }, {
                name: "20-live",
                filepath: "Leafs/20-live.png",
                category: "Leafs"
            }, {
                name: "21-live",
                filepath: "Leafs/21-live.png",
                category: "Leafs"
            }, {
                name: "22-live",
                filepath: "Leafs/22-live.png",
                category: "Leafs"
            }, {
                name: "23-live",
                filepath: "Leafs/23-live.png",
                category: "Leafs"
            }, {
                name: "24-live",
                filepath: "Leafs/24-live.png",
                category: "Leafs"
            }, {
                name: "25-live",
                filepath: "Leafs/25-live.png",
                category: "Leafs"
            }, {
                name: "26-live",
                filepath: "Leafs/26-live.png",
                category: "Leafs"
            }, {
                name: "27-live",
                filepath: "Leafs/27-live.png",
                category: "Leafs"
            }, {
                name: "28-live",
                filepath: "Leafs/28-live.png",
                category: "Leafs"
            }, {
                name: "29-live",
                filepath: "Leafs/29-live.png",
                category: "Leafs"
            }, {
                name: "3-live",
                filepath: "Leafs/3-live.png",
                category: "Leafs"
            }, {
                name: "30-live",
                filepath: "Leafs/30-live.png",
                category: "Leafs"
            }, {
                name: "31-live",
                filepath: "Leafs/31-live.png",
                category: "Leafs"
            }, {
                name: "32-live",
                filepath: "Leafs/32-live.png",
                category: "Leafs"
            }, {
                name: "33-live",
                filepath: "Leafs/33-live.png",
                category: "Leafs"
            }, {
                name: "34-live",
                filepath: "Leafs/34-live.png",
                category: "Leafs"
            }, {
                name: "35-live",
                filepath: "Leafs/35-live.png",
                category: "Leafs"
            }, {
                name: "36-live",
                filepath: "Leafs/36-live.png",
                category: "Leafs"
            }, {
                name: "37-live",
                filepath: "Leafs/37-live.png",
                category: "Leafs"
            }, {
                name: "38-live",
                filepath: "Leafs/38-live.png",
                category: "Leafs"
            }, {
                name: "39-live",
                filepath: "Leafs/39-live.png",
                category: "Leafs"
            }, {
                name: "4-live",
                filepath: "Leafs/4-live.png",
                category: "Leafs"
            }, {
                name: "40-live",
                filepath: "Leafs/40-live.png",
                category: "Leafs"
            }, {
                name: "41-live",
                filepath: "Leafs/41-live.png",
                category: "Leafs"
            }, {
                name: "42-live",
                filepath: "Leafs/42-live.png",
                category: "Leafs"
            }, {
                name: "43-live",
                filepath: "Leafs/43-live.png",
                category: "Leafs"
            }, {
                name: "44-live",
                filepath: "Leafs/44-live.png",
                category: "Leafs"
            }, {
                name: "45-live",
                filepath: "Leafs/45-live.png",
                category: "Leafs"
            }, {
                name: "46-live",
                filepath: "Leafs/46-live.png",
                category: "Leafs"
            }, {
                name: "47-live",
                filepath: "Leafs/47-live.png",
                category: "Leafs"
            }, {
                name: "48-live",
                filepath: "Leafs/48-live.png",
                category: "Leafs"
            }, {
                name: "49-live",
                filepath: "Leafs/49-live.png",
                category: "Leafs"
            }, {
                name: "5-live",
                filepath: "Leafs/5-live.png",
                category: "Leafs"
            }, {
                name: "6-live",
                filepath: "Leafs/6-live.png",
                category: "Leafs"
            }, {
                name: "7-live",
                filepath: "Leafs/7-live.png",
                category: "Leafs"
            }, {
                name: "8-live",
                filepath: "Leafs/8-live.png",
                category: "Leafs"
            }, {
                name: "9-live",
                filepath: "Leafs/9-live.png",
                category: "Leafs"
            }],
            Footprints: [{
                name: "0-live",
                filepath: "Footprints/0-live.png",
                category: "Footprints"
            }, {
                name: "1-live",
                filepath: "Footprints/1-live.png",
                category: "Footprints"
            }, {
                name: "10-live",
                filepath: "Footprints/10-live.png",
                category: "Footprints"
            }, {
                name: "11-live",
                filepath: "Footprints/11-live.png",
                category: "Footprints"
            }, {
                name: "12-live",
                filepath: "Footprints/12-live.png",
                category: "Footprints"
            }, {
                name: "13-live",
                filepath: "Footprints/13-live.png",
                category: "Footprints"
            }, {
                name: "14-live",
                filepath: "Footprints/14-live.png",
                category: "Footprints"
            }, {
                name: "15-live",
                filepath: "Footprints/15-live.png",
                category: "Footprints"
            }, {
                name: "16-live",
                filepath: "Footprints/16-live.png",
                category: "Footprints"
            }, {
                name: "17-live",
                filepath: "Footprints/17-live.png",
                category: "Footprints"
            }, {
                name: "2-live",
                filepath: "Footprints/2-live.png",
                category: "Footprints"
            }, {
                name: "3-live",
                filepath: "Footprints/3-live.png",
                category: "Footprints"
            }, {
                name: "4-live",
                filepath: "Footprints/4-live.png",
                category: "Footprints"
            }, {
                name: "5-live",
                filepath: "Footprints/5-live.png",
                category: "Footprints"
            }, {
                name: "6-live",
                filepath: "Footprints/6-live.png",
                category: "Footprints"
            }, {
                name: "7-live",
                filepath: "Footprints/7-live.png",
                category: "Footprints"
            }, {
                name: "8-live",
                filepath: "Footprints/8-live.png",
                category: "Footprints"
            }, {
                name: "9-live",
                filepath: "Footprints/9-live.png",
                category: "Footprints"
            }],
            Flowers: [{
                name: "0-live",
                filepath: "Flowers/0-live.png",
                category: "Flowers"
            }, {
                name: "1-live",
                filepath: "Flowers/1-live.png",
                category: "Flowers"
            }, {
                name: "10-live",
                filepath: "Flowers/10-live.png",
                category: "Flowers"
            }, {
                name: "11-live",
                filepath: "Flowers/11-live.png",
                category: "Flowers"
            }, {
                name: "12-live",
                filepath: "Flowers/12-live.png",
                category: "Flowers"
            }, {
                name: "13-live",
                filepath: "Flowers/13-live.png",
                category: "Flowers"
            }, {
                name: "14-live",
                filepath: "Flowers/14-live.png",
                category: "Flowers"
            }, {
                name: "15-live",
                filepath: "Flowers/15-live.png",
                category: "Flowers"
            }, {
                name: "16-live",
                filepath: "Flowers/16-live.png",
                category: "Flowers"
            }, {
                name: "17-live",
                filepath: "Flowers/17-live.png",
                category: "Flowers"
            }, {
                name: "18-live",
                filepath: "Flowers/18-live.png",
                category: "Flowers"
            }, {
                name: "19-live",
                filepath: "Flowers/19-live.png",
                category: "Flowers"
            }, {
                name: "2-live",
                filepath: "Flowers/2-live.png",
                category: "Flowers"
            }, {
                name: "20-live",
                filepath: "Flowers/20-live.png",
                category: "Flowers"
            }, {
                name: "21-live",
                filepath: "Flowers/21-live.png",
                category: "Flowers"
            }, {
                name: "22-live",
                filepath: "Flowers/22-live.png",
                category: "Flowers"
            }, {
                name: "23-live",
                filepath: "Flowers/23-live.png",
                category: "Flowers"
            }, {
                name: "24-live",
                filepath: "Flowers/24-live.png",
                category: "Flowers"
            }, {
                name: "25-live",
                filepath: "Flowers/25-live.png",
                category: "Flowers"
            }, {
                name: "26-live",
                filepath: "Flowers/26-live.png",
                category: "Flowers"
            }, {
                name: "27-live",
                filepath: "Flowers/27-live.png",
                category: "Flowers"
            }, {
                name: "3-live",
                filepath: "Flowers/3-live.png",
                category: "Flowers"
            }, {
                name: "4-live",
                filepath: "Flowers/4-live.png",
                category: "Flowers"
            }, {
                name: "5-live",
                filepath: "Flowers/5-live.png",
                category: "Flowers"
            }, {
                name: "6-live",
                filepath: "Flowers/6-live.png",
                category: "Flowers"
            }, {
                name: "7-live",
                filepath: "Flowers/7-live.png",
                category: "Flowers"
            }, {
                name: "8-live",
                filepath: "Flowers/8-live.png",
                category: "Flowers"
            }, {
                name: "9-live",
                filepath: "Flowers/9-live.png",
                category: "Flowers"
            }],
            Doodles: [{
                name: "0-live",
                filepath: "Doodles/0-live.png",
                category: "Doodles"
            }, {
                name: "1-live",
                filepath: "Doodles/1-live.png",
                category: "Doodles"
            }, {
                name: "10-live",
                filepath: "Doodles/10-live.png",
                category: "Doodles"
            }, {
                name: "2-live",
                filepath: "Doodles/2-live.png",
                category: "Doodles"
            }, {
                name: "3-live",
                filepath: "Doodles/3-live.png",
                category: "Doodles"
            }, {
                name: "4-live",
                filepath: "Doodles/4-live.png",
                category: "Doodles"
            }, {
                name: "5-live",
                filepath: "Doodles/5-live.png",
                category: "Doodles"
            }, {
                name: "6-live",
                filepath: "Doodles/6-live.png",
                category: "Doodles"
            }, {
                name: "7-live",
                filepath: "Doodles/7-live.png",
                category: "Doodles"
            }, {
                name: "8-live",
                filepath: "Doodles/8-live.png",
                category: "Doodles"
            }, {
                name: "9-live",
                filepath: "Doodles/9-live.png",
                category: "Doodles"
            }],
            Butterflies: [{
                name: "0-live",
                filepath: "Butterflies/0-live.png",
                category: "Butterflies"
            }, {
                name: "1-live",
                filepath: "Butterflies/1-live.png",
                category: "Butterflies"
            }, {
                name: "10-live",
                filepath: "Butterflies/10-live.png",
                category: "Butterflies"
            }, {
                name: "11-live",
                filepath: "Butterflies/11-live.png",
                category: "Butterflies"
            }, {
                name: "12-live",
                filepath: "Butterflies/12-live.png",
                category: "Butterflies"
            }, {
                name: "13-live",
                filepath: "Butterflies/13-live.png",
                category: "Butterflies"
            }, {
                name: "14-live",
                filepath: "Butterflies/14-live.png",
                category: "Butterflies"
            }, {
                name: "15-live",
                filepath: "Butterflies/15-live.png",
                category: "Butterflies"
            }, {
                name: "16-live",
                filepath: "Butterflies/16-live.png",
                category: "Butterflies"
            }, {
                name: "17-live",
                filepath: "Butterflies/17-live.png",
                category: "Butterflies"
            }, {
                name: "18-live",
                filepath: "Butterflies/18-live.png",
                category: "Butterflies"
            }, {
                name: "19-live",
                filepath: "Butterflies/19-live.png",
                category: "Butterflies"
            }, {
                name: "2-live",
                filepath: "Butterflies/2-live.png",
                category: "Butterflies"
            }, {
                name: "20-live",
                filepath: "Butterflies/20-live.png",
                category: "Butterflies"
            }, {
                name: "21-live",
                filepath: "Butterflies/21-live.png",
                category: "Butterflies"
            }, {
                name: "22-live",
                filepath: "Butterflies/22-live.png",
                category: "Butterflies"
            }, {
                name: "23-live",
                filepath: "Butterflies/23-live.png",
                category: "Butterflies"
            }, {
                name: "24-live",
                filepath: "Butterflies/24-live.png",
                category: "Butterflies"
            }, {
                name: "25-live",
                filepath: "Butterflies/25-live.png",
                category: "Butterflies"
            }, {
                name: "26-live",
                filepath: "Butterflies/26-live.png",
                category: "Butterflies"
            }, {
                name: "3-live",
                filepath: "Butterflies/3-live.png",
                category: "Butterflies"
            }, {
                name: "4-live",
                filepath: "Butterflies/4-live.png",
                category: "Butterflies"
            }, {
                name: "5-live",
                filepath: "Butterflies/5-live.png",
                category: "Butterflies"
            }, {
                name: "6-live",
                filepath: "Butterflies/6-live.png",
                category: "Butterflies"
            }, {
                name: "7-live",
                filepath: "Butterflies/7-live.png",
                category: "Butterflies"
            }, {
                name: "8-live",
                filepath: "Butterflies/8-live.png",
                category: "Butterflies"
            }, {
                name: "9-live",
                filepath: "Butterflies/9-live.png",
                category: "Butterflies"
            }]
        }
    };
    a.lib.stamp.credits = {
        Butterflies: {
            email: "bulletproof.cupidx@gmail.com",
            url: "http://dead-brushes.deviantart.com/art/ps7-butterfly-brushes-61623697",
            name: "dead-brushes"
        },
        Doodles: {
            email: "punksafetypin@gmail.com",
            url: "http://punksafetypin.deviantart.com/art/Brush-Set-21-Boney-Doodles-57365483",
            name: "punksafetypin"
        },
        Flowers: {
            email: "ir@hawksmont.com",
            url: "http://hawksmont.com/",
            name: "hawksmont"
        },
        Footprints: {
            email: "jonas@rognemedia.no",
            url: "http://chain.deviantart.com/art/Footprint-brushes-60108797",
            name: "chain"
        },
        Leafs: {
            email: "ir@hawksmont.com",
            url: "http://hawksmont.com/",
            name: "hawksmont"
        },
        Retro: {
            email: "vivekdhage@gmail.com",
            url: "http://vwake.deviantart.com/art/Retr0-Brushes-1689219",
            name: "vwake"
        },
        "Simple Smudges": {
            email: "p.szczepanski@gmail.com",
            url: "http://env1ro.deviantart.com/art/SimpleSmudges-1-Brushes-Pack-52089760",
            name: "env1ro"
        },
        Tizzape: {
            email: "services@dirt2.com",
            url: "http://keepwaiting.deviantart.com/art/Tizzape-Tape-Brushes-29459997",
            name: "keepwaiting"
        },
        Typogrunge: {
            email: "",
            url: "http://scully7491.deviantart.com/art/Typographic-Grunge-Brushes-30565921",
            name: "scully7491"
        },
        "Water Colors": {
            email: "p.szczepanski@gmail.com",
            url: "http://env1ro.deviantart.com/art/WaterColor-Reloaded-98294189",
            name: "env1ro"
        }
    };
    a.lib.init("stamp");
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.vector && (sketch.vector = {});
(function(a) {
    var h = {}, d = {}, g = 1 / (180 / Math.PI),
        b = function(a) {
            sketch = b.__self || sketch;
            a = a || {};
            this.convertMetrics = sketch.util.getScreenMetrics ? this.convertMetrics || sketch.util.getScreenMetrics() : {
                normal_px: 16,
                "xx-small_px": 9,
                "x-small_px": 10,
                small_px: 13,
                medium_px: 16,
                large_px: 18,
                "x-large_px": 24,
                "xx-large_px": 32,
                "%>px": 0.16,
                "px>pt": 0.7500187504687618,
                "pt>pc": 0.08333333333333333,
                "px>in": 0.010416666666666666,
                "in>ft": 0.08333333333333333,
                "ft>yd": 0.3333333333333333,
                "px>mm": 0.2645833333333333,
                "mm>cm": 0.1,
                "cm>m": 0.01,
                "px>ex": 0.11951429390955158,
                "ex>em": 0.52295,
                "px>px": 1,
                "px>pc": 0.06250156253906347,
                "pt>px": 1.3333,
                "pc>px": 15.9996,
                "pc>pt": 12,
                "px>cm": 0.02645833333333333,
                "mm>m": 0.001,
                "mm>px": 3.779527559055119,
                "m>mm": 1E3,
                "cm>mm": 10,
                "px>m": 2.645833333333333E-4,
                "cm>px": 37.795275590551185,
                "m>px": 3779.527559055118,
                "m>cm": 100,
                "px>ft": 8.680555555555555E-4,
                "in>yd": 0.027777777777777776,
                "in>px": 96,
                "yd>in": 36,
                "ft>in": 12,
                "px>yd": 2.8935185185185184E-4,
                "ft>px": 1152,
                "yd>px": 3456,
                "yd>ft": 3,
                "px>em": 0.0625,
                "ex>px": 8.3672,
                "em>px": 16,
                "em>ex": 1.9122287025528253
            };
            this.type = "svg";
            this.cors = a.cors || !1;
            this.debug = a.debug || !1;
            this.debugSVG = a.debugSVG || !1;
            this.debugBBox = a.debugBBox || !1;
            this.placement = a.placement || "bbox";
            this.defaultStroke = this.defaultFill = "#000000";
            this.state = {
                fillStyle: "#000000"
            };
            this.defs = {};
            this.vob = {
                type: "svg"
            };
            this.batch = 0;
            this.skipRender = a.skipRender || !1;
            this.useCache = a.useCache || !1;
            this.uid = 0;
            a.src && (this.src = a.src);
            a.srcs && (this.srcs = a.srcs);
            a.data && (this.data = a.data);
            a.cache && (this.cache = a.cache);
            a.ctx && (this.ctx = a.ctx);
            a.onerror && (this.onerror = a.onerror);
            a.onload && (this.onload = a.onload);
            a.document && (this.document = a.document);
            return a.src || a.document ? this.load() : this
        };
    b.prototype.load = function() {
        if (!this.src && !this.data && !this.document) return this;
        var b = this;
        if (this.src || this.data) {
            var c = this.src || this.data;
            if ("string" !== typeof c) {
                if (this.onerror) this.onerror("not string");
                return this
            }
            this.__id = c.replace(this.rxAlphaNumeric, "");
            if (a.SVG.isSVG(c)) return this.fromString(c), this;
            !1 !== this.useCache && (this.document = document.getElementById(this.__id))
        } else if (this.document) return this.__id = "#", this.onParseReady(), this;
        if (d[c]) {
            if (this.onerror) this.onerror("404")
        } else if (this.document) if (h[this.__id] && h[this.__id].loaded || this.srcs && this.srcs[c]) this.onParseReady();
        else b.onParseReady();
        else this.srcs && this.srcs[c] ? this.fromString(this.srcs[c]) : sketch.util.request({
                url: c,
                onerror: function() {
                    d[c] = !0;
                    if (b.onerror) b.onerror("404")
                },
                onload: function(a) {
                    b.fromString(a.responseText)
                }
            });
        return this
    };
    b.decodeDataURL = function(a) {
        return atob(STRING.decode_utf8(a.split(",").pop()))
    };
    b.prototype.fromString = function(a, c) {
        var e;
        e = new DOMParser;
        0 === a.indexOf("data:image/svg") && (a = b.decodeDataURL(a));
        this.srcXML = a;
        a = a.replace(/\<(\?xml|(\!DOCTYPE[^\>\[]+(\[[^\]]+)?))+[^>]+\>/g, "");
        a = a.replace(/(xmlns(:.*|)="&.*;")/g, "");
        this.document = e = e.parseFromString("<object>" + a + "</object>", "text/xml").documentElement;
        this.svg = e.querySelector ? e.querySelector("svg") : e;
        this.document.id = this.__id;
        "undefined" === typeof module && this.debugSVG && document.body.appendChild(this.document);
        this.onParseReady(c);
        if (this.debugSVG) return this;
        this.document.style && (this.document.style.visibility = "hidden", this.document.style.opacity = 0, this.document.style.zIndex = -1, this.document.style.width = "1px", this.document.style.height = "1px");
        return this
    };
    b.prototype.onParseReady = function(a) {
        if (h[this.__id]) {
            if (this.onload) this.onload(h[this.__id]);
            return this
        }
        var b = this,
            c = (new Date).getTime(),
            e = this.document.contentDocument || this.document;
        this.loaded = !0;
        this.element = e;
        this.parse({
            document: e,
            skipRender: this.skipRender,
            onload: function(e) {
                if (e) {
                    b.vob = e[0];
                    b.viewBox = b.getBoundingBox(null);
                    b.viewBoxStroke = b.getBoundingBox(null, !0);
                    b.debug && console.log("parseTime", (new Date).getTime() - c);
                    b.useCache && (h[b.__id] = b);
                    a && a(b);
                    if (b.onload) b.onload(b);
                    if (!b.debug) try {
                        document.body.removeChild(b.document)
                    } catch (d) {}
                }
            },
            node: {
                childNodes: []
            }
        })
    };
    b.prototype.rxSplitByUppercase = /([A-Z]?[^A-Z]*)/g;
    b.prototype.rxAlphaNumeric = /[^A-Z0-9]+/gi;
    b.prototype.rxNumeric = /[0-9.-]*/g;
    b.prototype.parse = function(a) {
        if (a.node) {
            if (a.document && a.document.childNodes && a.document.childNodes.length) var b = a.document.childNodes;
            else if (a.document) {
                var c = a.document.nodeName.toLowerCase();
                if (k[c]) b = [a.document];
                else {
                    if (a.onload) a.onload([]);
                    return this
                }
            } else {
                if (a.onload) a.onload([]);
                return this
            }
            a.defs && (this.defs = a.defs);
            for (var d = this, f = sketch.vector.shape, g = a.node.childNodes, h = a.svg || d.svg, s = a.skipRender || !1, x = a.ctx || this.ctx, w = [], A = 0, y = b.length; A < y; A++) {
                var z = b[A],
                    c = z.nodeName.toLowerCase();
                "#" !== c[0] && (0 === c.indexOf("sketchjs:") && (c = c.substr(9)), z.type = c, w.push(z))
            }
            var B = w.length,
                D = -1,
                E = function() {
                    if (0 === ++d.batch % 250) setTimeout(E, 0);
                    else if (++D === B) {
                        if (a.onload) a.onload(g)
                    } else {
                        var b = w[D],
                            c = b.type,
                            k = "";
                        x && x.save();
                        if ("none" === e(b).display) return E();
                        switch (c) {
                            case "svg":
                                d.currentNode = k = d.getAttributes(b, "id,x,y,width,height,viewBox,version,metadata,brush");
                                k.matrix = sketch.vector.Transform.getIdentity();
                                k.type = "svg";
                                if ("undefined" !== typeof sketch.vector.SVGFont) {
                                    c = d.element.getElementsByTagName("font");
                                    c.length && (d.vob.type || (d.vob = k), x && (d.debug && (x.canvas.style.border = "1px solid rgba(0,0,0,0.1)",
                                        d.document.style.left = k.width + "px"), x.canvas.width = k.width || 1, x.canvas.height = k.height || 1), d.typeface = new sketch.vector.SVGFont(x), d.document.width = k.width || 1, d.document.height = k.height || 1, h = k);
                                    for (var l = 0; l < c.length; l++) d.typeface.load(c[l].cloneNode(!0), function(a) {})
                                }
                                if (k.viewBox) {
                                    var l = k.viewBox,
                                        c = k.width,
                                        p = k.height,
                                        A = l[2] - l[0],
                                        y = l[3] - l[1];
                                    x && (x.canvas.width = c, x.canvas.height = p);
                                    A = Math.min(c / A, p / y);
                                    y = new sketch.vector.Transform;
                                    y.translate(-l[0], - l[1]);
                                    y.translate(c / 2, p / 2);
                                    y.scale(A, A);
                                    y.translate(1 * (-c / 2) / A, 1 * (-p / 2) / A);
                                    x && y.apply(x);
                                    k.matrix = y.matrix;
                                    k.transform = y.matrix;
                                    k.transform.type = "transform"
                                }
                                g.push(k);
                                k.childNodes = [];
                                d.parse({
                                    skipRender: a.skipRender,
                                    document: b,
                                    node: k,
                                    svg: h,
                                    onload: function(a) {
                                        k.childNodes = a;
                                        x && x.restore();
                                        E()
                                    }
                                });
                                return;
                            case "title":
                                if (!h) break;
                                h.title = b.textContent;
                                break;
                            case "desc":
                                if (!h) break;
                                h.desc = b.textContent;
                                break;
                            case "a":
                            case "switch":
                            case "g":
                                if (d.currentNode = k = d.getAttributes(b, "id,labels"), k.parentNode = a.node, k.type = "g", x && x.beginPath(), d.parseTransform(b, !0), d.parseClipPath(b, !0), k.style = d.parseStyle(x, b, !s), b.hasChildNodes) {
                                    g.push(k);
                                    k.childNodes = [];
                                    d.parse({
                                        skipRender: a.skipRender,
                                        document: b,
                                        node: k,
                                        svg: h,
                                        onload: function(a) {
                                            k.childNodes = a;
                                            x && x.restore();
                                            E()
                                        }
                                    });
                                    return
                                }
                            case "use":
                                if (c = d.parseHref(b)) if (d.currentNode = k = {}, k.parentNode = a.node, k.type = "use", c = c.substr(1), !d.defs[c]) {
                                    var z = d.getElementById(c);
                                    x && x.beginPath();
                                    d.parseTransform(b, !0);
                                    d.parseClipPath(b, !0);
                                    d.parseTransform(z, !0);
                                    d.parseClipPath(z, !0);
                                    g.push(k);
                                    k.childNodes = [];
                                    d.parse({
                                        skipRender: a.skipRender,
                                        document: z,
                                        node: k,
                                        svg: h,
                                        onload: function(a) {
                                            k.childNodes = a;
                                            x && x.restore();
                                            E()
                                        }
                                    });
                                    return
                                }
                                break;
                            case "fegaussianblur":
                                d.currentNode = k = d.getAttributes(b, "id,stdDeviation");
                                k.parentNode = a.node;
                                k.type = "GaussianBlur";
                                g.push(k);
                                break;
                            case "image":
                                if (c = d.parseHref(b)) {
                                    if (!h.cors && "http" === c.substr(0, 4)) break;
                                    d.currentNode = k = d.getAttributes(b, "id,x,y,width,height,preserveAspectRatio,labels", !0);
                                    k.parentNode = a.node;
                                    k.type = "image";
                                    k.x = k.x || 0;
                                    k.y = k.y || 0;
                                    x && x.beginPath();
                                    d.parseTransform(b, !0);
                                    d.parseClipPath(b, !0);
                                    d.svg.data ? (b = d.svg.data.split("/"), b.pop(), (b = b.join("/")) && (b += "/")) : b = "";
                                    k.image = new Image;
                                    k.image.node = k;
                                    k.image.onload = function() {
                                        var a = this.width,
                                            b = this.height,
                                            c = this.node.matrix;
                                        x && x.setTransform(c.a, c.b, c.c, c.d, c.x, c.y);
                                        if (this.node.preserveAspectRatio && "none" !== this.node.preserveAspectRatio) {
                                            var e = this.node.preserveAspectRatio.split(" ")[0],
                                                c = e.substr(1, 3),
                                                e = e.substr(5, 3);
                                            a > this.node.width && (b *= this.node.width / a, a = this.node.width);
                                            b > this.node.height && (a *= this.node.height / b, b = this.node.height);
                                            switch (c) {
                                                case "Min":
                                                    c = 0;
                                                    break;
                                                case "Mid":
                                                    c = (this.node.width - a) / 2;
                                                    break;
                                                case "Max":
                                                    c = this.node.width - a
                                            }
                                            switch (e) {
                                                case "Min":
                                                    e = 0;
                                                    break;
                                                case "Mid":
                                                    e = (this.node.height - b) / 2;
                                                    break;
                                                case "Max":
                                                    e = this.node.height - b
                                            }
                                            x && x.drawImage(this, c, e, a, b);
                                            k.x = c;
                                            k.y = e;
                                            k.width = a;
                                            k.height = b
                                        } else x && x.drawImage(this, this.node.x, this.node.y, this.node.width, this.node.height);
                                        k.bbox = new sketch.vector.BBox([k.x, k.y, k.x + k.width, k.y + k.height], k.matrix);
                                        x && x.restore();
                                        g.push(k);
                                        E()
                                    };
                                    k.image.onerror = function() {
                                        x && x.restore();
                                        E()
                                    }; - 1 !== c.indexOf("base64") || "http" === c.substr(0, 4) ? (k.href = c, k.image.src = c) : (k.href = b + c, k.image.src = b + c);
                                    return
                                }
                            case "text":
                                if (!sketch.vector.text) {
                                    console.log("missing text module");
                                    break
                                }
                                d.currentNode = k = d.getAttributes(b, "id,x,y,dx,dy,labels", !0);
                                k.parentNode = a.node;
                                k.type = "text";
                                k.childNodes = [];
                                x && x.beginPath();
                                d.parseTransform(b, !0);
                                d.parseClipPath(b, !0);
                                k.style = d.parseStyle(x, b, !s);
                                for (var A = p = Infinity, F = y = -Infinity, aa = k.dx || 0 + (k.x || 0), U = k.dy || 0 + (k.y || 0), b = b.childNodes, l = c = 0, Z = b.length; l < Z; l++) {
                                    z = b[l];
                                    if ("[object Text]" === String(z)) {
                                        var T = {}, P = document.createElement("tspan");
                                        P.textContent = z.textContent;
                                        z = P
                                    } else T = d.getAttributes(z, "id,x,y,dx,dy", !0);
                                    "undefined" !== typeof T.x && (aa = 0);
                                    "undefined" !== typeof T.y && (U = 0);
                                    aa = 0 !== (T.dy || 0) ? T.dx || 0 : aa + (T.dx || 0);
                                    U += T.dy || 0;
                                    T.x = aa + (T.x || 0);
                                    T.y = U + (T.y || 0);
                                    T.parentNode = k;
                                    T.type = "tspan";
                                    T.content = z.textContent.trim();
                                    d.currentNode = T;
                                    T.style = d.parseStyle(x, z, !s);
                                    k.childNodes.push(T);
                                    P = d.fontStyleToString(x, T.style);
                                    z = sketch.vector.text.measureText(z.textContent,
                                        P);
                                    p > T.x && (p = T.x);
                                    A > T.y && (A = T.y - T.style.fontSize);
                                    F < T.y + z.height && (F = T.y + z.height - T.style.fontSize);
                                    y < T.x + z.width && (y = T.x + z.width);
                                    aa += z.width;
                                    c += z.width
                                }
                                switch (k.style.textAnchor) {
                                    case "middle":
                                        p -= c / 2;
                                        y -= c / 2;
                                        break;
                                    case "end":
                                        p -= c, y -= c
                                }
                                c = [p, A, y, F];
                                k.bbox = new sketch.vector.BBox(c, k.matrix);
                                g.push(k);
                                break;
                            case "rect":
                                d.currentNode = k = d.getAttributes(b, "id,x,y,rx,ry,width,height,labels");
                                k.parentNode = a.node;
                                k.type = "rect";
                                k.x || (k.x = 0);
                                k.y || (k.y = 0);
                                if (!k.width) break;
                                if (!k.height) break;
                                x && x.beginPath();
                                d.parseTransform(b, !0);
                                d.parseClipPath(b, !0);
                                c = [k.x, k.y, k.x + k.width, k.y + k.height];
                                k.bbox = new sketch.vector.BBox(c, k.matrix);
                                "undefined" === typeof k.rx && "undefined" !== typeof k.ry && (k.rx = k.ry);
                                "undefined" === typeof k.ry && "undefined" !== typeof k.rx && (k.ry = k.rx);
                                x && f && ("undefined" === typeof k.rx ? f.rect(x, k.x, k.y, k.width + k.x, k.height + k.y) : f.roundRect(x, k.x, k.y, k.width, k.height, k.rx, k.ry));
                                k.style = d.parseStyle(x, b, !s);
                                g.push(k);
                                break;
                            case "circle":
                                d.currentNode = k = d.getAttributes(b, "id,cx,cy,r,labels");
                                k.parentNode = a.node;
                                k.type = "circle";
                                x && x.beginPath();
                                d.parseTransform(b, !0);
                                d.parseClipPath(b, !0);
                                c = [k.cx - k.r, k.cy - k.r, k.cx + k.r, k.cy + k.r];
                                k.bbox = new sketch.vector.BBox(c, k.matrix);
                                k.cx = k.cx || 0;
                                k.cy = k.cy || 0;
                                x && f.ellipse(x, k.cx, k.cy, k.r, k.r);
                                k.style = d.parseStyle(x, b, !s);
                                g.push(k);
                                break;
                            case "ellipse":
                                d.currentNode = k = d.getAttributes(b, "id,cx,cy,rx,ry,labels");
                                k.parentNode = a.node;
                                k.type = "ellipse";
                                x && x.beginPath();
                                d.parseTransform(b, !0);
                                d.parseClipPath(b, !0);
                                k.cx = k.cx || 0;
                                k.cy = k.cy || 0;
                                c = [k.cx - k.rx, k.cy - k.ry, k.cx + k.rx,
                                    k.cy + k.ry];
                                k.bbox = new sketch.vector.BBox(c, k.matrix);
                                x && f && f.ellipse(x, k.cx, k.cy, k.rx, k.ry);
                                k.style = d.parseStyle(x, b, !s);
                                g.push(k);
                                break;
                            case "line":
                                d.currentNode = k = d.getAttributes(b, "id,x1,y1,x2,y2,labels");
                                k.parentNode = a.node;
                                k.type = "line";
                                k.x1 = k.x1 || 0;
                                k.y1 = k.y1 || 0;
                                k.x2 = k.x2 || 0;
                                k.y2 = k.y2 || 0;
                                x && x.beginPath();
                                d.parseTransform(b, !0);
                                d.parseClipPath(b, !0);
                                c = [k.x1, k.y1, k.x2, k.y2];
                                k.bbox = new sketch.vector.BBox(c, k.matrix);
                                x && f && (x.moveTo(k.x1, k.y1), x.lineTo(k.x2, k.y2));
                                k.style = d.parseStyle(x, b, !s);
                                g.push(k);
                                break;
                            case "pencil":
                            case "polyline":
                            case "polygon":
                                l = d.parsePoints(b, c);
                                p = l.points;
                                d.currentNode = k = d.getAttributes(b, "id,labels");
                                k.parentNode = a.node;
                                k.type = c.toLowerCase();
                                k.points = p;
                                x && x.beginPath();
                                d.parseTransform(b, !0);
                                d.parseClipPath(b, !0);
                                k.data = l.data;
                                k.bbox = new sketch.vector.BBox(k.data, k.matrix);
                                x && f && f.VOBPath(x, k.data);
                                k.style = d.parseStyle(x, b, !s);
                                g.push(k);
                                break;
                            case "path":
                                d.currentNode = k = d.getAttributes(b, "id,d,labels"), k.parentNode = a.node, k.type = "path", x && x.beginPath(), d.parseTransform(b, !0), d.parseClipPath(b, !0), k.data = sketch.vector.SVGPath.toVOBPath(k.d), k.bbox = new sketch.vector.BBox(k.data, k.matrix), k.element = b, x && f && f.VOBPath(x, k.data), k.style = d.parseStyle(x, b, !s), g.push(k)
                        }
                        x && x.restore();
                        E()
                    }
                };
            E();
            return g
        }
    };
    b.prototype.parseAttribute = function(a, b, c) {
        "undefined" === typeof a && (a = c);
        "inherit" === a && (a = this.currentNode, a = a.parentNode && a.parentNode.style && a.parentNode.style[b] ? a.parentNode.style[b] : c);
        return a
    };
    b.prototype.parseStyleAttribute = function(a, b, c) {
        a = b[c] || a.getAttribute(c);
        b = "color" === c ? "color" : c + "Style";
        if (a) {
            if (sketch.color.webcolors[a]) a = "#" + sketch.color.webcolors[a];
            else if ("none" === a) a = "rgba(0,0,0,0)";
            else if ("currentColor" === a) a = this.state.color;
            else if ("url" === a.substr(0, 3)) {
                a = a.substr(5, a.indexOf(")") - 5);
                var e = this.ctx,
                    d = this.parseDefs(e, a, c);
                d ? e && this.setStyle(e, d, b) : a = ""
            }
            "inherit" === a && (e = this.currentNode, e.parentNode && e.parentNode.style && e.parentNode.style[b] ? a = e.parentNode.style[b] : "stroke" !== c && (a = "#000000"));
            return a
        }
    };
    b.prototype.parseStyle = function(a,
                                      b, c) {
        var d = this.currentNode,
            f = this.state = sketch.util.clone(d.parentNode.style || this.state),
            g = e(b);
        d.uid = this.uid++;
        a && a.save();
        var k = this.getAttributes(b, "opacity,fill-rule,fill-opacity,stroke-width,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-dasharray,stroke-dashoffset,stroke-opacity,font-size,font-family,font-weight,font-style,line-height,text-anchor", !0);
        "undefined" !== typeof k.opacity ? (f.opacity = k.opacity, a && (a.globalAlpha = f.opacity)) : d.parentNode.style ? (f.opacity = d.parentNode.style.opacity,
            a && (a.globalAlpha = f.opacity)) : (f.opacity = 1, a && (a.globalAlpha = 1));
        var h = b.attributes;
        if (h) {
            var x = h.length;
            x && "undefined" === typeof d.attributes && (d.attributes = {});
            for (var w = 0; w < x; w++) {
                var A = h[w];
                if ("data-" === A.name.substr(0, 5)) {
                    var y = A.name.substr(5).split("-");
                    y[1] && (y[1] = y[1][0].toUpperCase() + y[1].substr(1));
                    y = y.join("");
                    d.attributes[y] = A.value
                }
            }(h = g.filter || b.getAttribute("filter")) ? (x = h.substr(5, h.length - 6), !this.defs[x] && (h = this.getElementById(x)) && (this.defs[x] = this.getAttributes(h, "id,x,y,width,height"),
                this.defs[x].type = "filter", this.defs[x].filter = this.parse({
                document: h,
                node: {
                    childNodes: []
                }
            })), f.filter = x) : delete f.filter;
            k.fontSize && (f.fontSize = k.fontSize);
            if (k.fontFamily) for (f.fontFamily = k.fontFamily, h = k.fontFamily.split(",");;) {
                x = h.shift();
                if (!x) break;
                if (this.typeface && this.typeface.packages[x]) {
                    f.fontRenderer = "SVG";
                    break
                }
                if (sketch.vector.text && sketch.vector.text.detectFont(x)) {
                    f.fontRenderer = "native";
                    break
                }
            }
            k.fontWeight && (f.fontWeight = k.fontWeight);
            k.fontStyle && (f.fontStyle = k.fontStyle);
            k.lineHeight && (f.lineHeight = k.lineHeight);
            k.textAnchor && (f.textAnchor = k.textAnchor);
            a && (a.font = this.fontStyleToString(a, f));
            if (h = this.parseStyleAttribute(b, g, "color")) f.color = h;
            if (h = this.parseStyleAttribute(b, g, "fill")) k.fillStyle = h;
            else if (h = d.parentNode, h.style) {
                h = sketch.util.clone(h.style);
                for (y in k) h[y] = k[y];
                k = h
            } else k.fillStyle = "default";
            f.fillStyle = this.parseAttribute(k.fillStyle, "fillStyle", "#000000");
            f.fillRule = this.parseAttribute(k.fillRule, "fillRule", "nonzero");
            f.fillOpacity = Math.max(0, this.parseAttribute(k.fillOpacity, "fillOpacity", 1));
            c && (f && a) && ("default" === f.fillStyle ? a.fillStyle = this.defaultFill : f.fillStyle && (a.fillStyle = f.fillStyle), a.save(), a.globalAlpha *= f.fillOpacity, d.content ? "SVG" === f.fontRenderer ? (this.typeface.setFont(a.font), this.typeface.fillText(d.content, d.x, d.y)) : a.fillText(d.content, d.x, d.y) : a.fill(), a.restore());
            if (h = this.parseStyleAttribute(b, g, "stroke")) k.strokeStyle = h;
            else if (h = d.parentNode, h.style) {
                h = sketch.util.clone(h.style);
                for (y in k) h[y] = k[y];
                k = h
            }
            f.strokeWidth = this.parseAttribute(k.strokeWidth, "strokeWidth", 1);
            f.strokeStyle = this.parseAttribute(k.strokeStyle, "strokeStyle", "none");
            f.strokeLinecap = this.parseAttribute(k.strokeLinecap, "strokeLinecap", "butt");
            f.strokeLinejoin = this.parseAttribute(k.strokeLinejoin, "strokeLinejoin", "miter");
            f.strokeMiterlimit = Math.max(1, this.parseAttribute(k.strokeMiterlimit, "strokeMiterlimit", 4));
            f.strokeDasharray = this.parseAttribute(k.strokeDasharray, "strokeDasharray", "none");
            f.strokeDashoffset = this.parseAttribute(k.strokeDashoffset, "strokeDashoffset", 0);
            f.strokeOpacity = Math.max(0, this.parseAttribute(k.strokeOpacity, "strokeOpacity", 1));
            c && (f && a) && (a.lineWidth = 0 === f.strokeWidth ? 1E-10 : f.strokeWidth || 1, a.lineCap = f.strokeLinecap || "butt", a.lineJoin = f.strokeLinejoin || "miter", a.miterLimit = f.strokeMiterlimit || a.lineWidth, f.strokeStyle && "none" !== f.strokeStyle && (a.strokeStyle = f.strokeStyle, a.save(), a.globalAlpha *= f.strokeOpacity, d.content ? "SVG" === f.fontRenderer ? (this.typeface.setFont(a.font), this.typeface.strokeText(d.content, d.x, d.y)) : a.strokeText(d.content, d.x, d.y) : a.stroke(),
                a.restore()));
            a && a.restore();
            return f
        }
    };
    b.prototype.parseDefs = function(a, b, c) {
        if (this.defs[b]) return this.defs[b];
        var e = this.getElementById(b);
        if (!e) return {};
        c = e.nodeName.toLowerCase();
        switch (c) {
            case "pattern":
                return this.defs[b] = this.parsePattern(a, e);
            case "lineargradient":
            case "radialgradient":
                return this.defs[b] = this.parseGradient(a, e, c)
        }
    };
    b.prototype.addDef = function(a) {
        this.defs[a.id] = a
    };
    b.prototype.Gradient = function(a) {
        a = a || {};
        return {
            gradientUnits: a.gradientUnits || "objectBoundingBox",
            id: a.id || "HelloGradient",
            type: a.type || "linearGradient",
            stops: a.stops || [{
                color: "#FFF",
                offset: 0
            }, {
                color: "#000",
                offset: 1
            }],
            x1: isFinite(a.x1) ? a.x1 : 0,
            x2: isFinite(a.x2) ? a.x2 : 1,
            y1: isFinite(a.y1) ? a.h1 : 0,
            y2: isFinite(a.y2) ? a.y2 : 0
        }
    };
    b.prototype.Pattern = function(a) {
        return {
            id: a.id || "HelloPattern",
            pattern: a.pattern || CanvasPattern,
            patternUnits: a.patternUnits || "userSpaceOnUse",
            type: a.type || "pattern",
            width: a.width || 100,
            height: a.height || 100
        }
    };
    b.prototype.parseGradient = function(a, b, c) {
        if ("lineargradient" === c) {
            var d = this.getAttributes(b, "id,x1,y1,x2,y2,spreadMethod,gradientUnits,gradientTransform");
            d.type = "linearGradient"
        } else d = this.getAttributes(b, "id,cx,cy,r,fx,fy,spreadMethod,gradientUnits,gradientTransform"), d.type = "radialGradient", "undefined" === typeof d.fx && (d.fx = d.cx, d.fy = d.cy);
        "undefined" === typeof d.gradientUnits && (d.gradientUnits = "objectBoundingBox");
        var f = [],
            g = b.childNodes,
            k = this.parseHref(b);
        if (k) return f = this.parseDefs(a, k.substr(1), c), d.stops = f.stops, d;
        var h = e(b);
        b = h.color || b.getAttribute("color") || this.state.color;
        a = 0;
        for (var x in g) if (k = g[x], k.nodeName && (c = k.nodeName.toLowerCase(), "stop" === c && (h = e(k), c = h["stop-color"] || k.getAttribute("stop-color")))) sketch.color.webcolors[c] ? c = "#" + sketch.color.webcolors[c] : "none" === c ? c = "rgba(0,0,0,0)" : "currentColor" === c ? c = b || "#000000" : "inherit" === c && (c = b || "#000000"), (h = h["stop-opacity"] || k.getAttribute("stop-opacity")) && "1" !== h && ("inherit" === h && (h = 1), "#" === c.substr(0, 1) ? (c = sketch.color.space(c.substr(1), "W3>HEX24>RGB"), c.A = 255 * parseFloat(h)) : "rgba" === c.substr(0, 4) ? (c = sketch.color.space(c, "W3>RGBA"), c.A *= parseFloat(h)) : "rgb" === c.substr(0, 3) && (c = sketch.color.space(c, "W3>RGB"), c.A = 255 * parseFloat(h)), c = sketch.color.space.RGBA_W3(c)), k = k.getAttribute("offset") || "0", h = -1 !== k.indexOf("%") ? 100 : 1, k = parseFloat(k) / h, k < a && (k = a), f.push({
            offset: k,
            color: c
        }), a = k;
        d.stops = f;
        return d
    };
    b.prototype.parsePattern = function(b, c) {
        var e = this,
            d = this.getAttributes(c, "patternUnits,patternContentUnits,patternTransform,x,y,width,height,preserveAspectRatio,href"),
            f = this.parseHref(c);
        f && (d.href = f);
        d.type = "pattern";
        d.id = c.id;
        var g = new a.SVG;
        g.element = c;
        g.parse({
            skipRender: !0,
            document: c,
            node: {
                childNodes: []
            },
            onload: function(a) {
                d.childNodes = a;
                if (a.length) {
                    a = document.createElement("canvas").getContext("2d");
                    var c = e.getBoundingBox(d.childNodes, !1, 0.5);
                    a.canvas.width = c[2] - c[0];
                    a.canvas.height = c[3] - c[1];
                    g.render({
                        ctx: a,
                        childNodes: d.childNodes,
                        viewBox: c,
                        placement: "crop"
                    });
                    b && (a.canvas.width && a.canvas.height) && (d.pattern = b.createPattern(a.canvas, "repeat"))
                }
                d.href && e.parseDefs(b, d.href.substr(1), "pattern")
            }
        });
        return d
    };
    b.prototype.parseHref = function(a) {
        return a.getAttribute("xlink:href") || a.getAttribute("href")
    };
    b.prototype.parseTransform = function(a, b, c) {
        var e = this.ctx,
            d = this.currentNode;
        if (a) {
            a = a.getAttribute(c || "transform");
            if (b) if (d.parentNode.matrix) {
                var k = d.parentNode.matrix;
                c = d.matrix = {
                    a: k.a,
                    b: k.b,
                    c: k.c,
                    d: k.d,
                    x: k.x,
                    y: k.y
                }
            } else c = d.matrix = sketch.vector.Transform.getIdentity();
            else c = sketch.vector.Transform.getIdentity();
            if (a) {
                var k = new sketch.vector.Transform(c),
                    h = new sketch.vector.Transform;
                if ("matrix" === a.substr(0, 6)) a = a.substr(7, a.length - 8), a = f(a), b && (e && e.transform(a[0], a[1], a[2], a[3], a[4], a[5]), h.transform(a[0], a[1], a[2], a[3], a[4], a[5])), k.transform(a[0], a[1], a[2], a[3], a[4], a[5]);
                else if (-1 !== a.indexOf("(")) {
                    a = a.substr(0, a.length - 1).split(")");
                    for (var s = 0, x = a.length; s < x; s++) {
                        var w = a[s].replace(/^\s+|\s+$/, "").split("(");
                        c = w[0].replace(/^\s+|\s+$/, "");
                        w = f(w[1]);
                        switch (c) {
                            case "translate":
                                2 === w.length ? (b && (e && e.translate(w[0], w[1]), h.translate(w[0], w[1])), k.translate(w[0], w[1])) : (b && (e && e.translate(w[0],
                                    0), h.translate(w[0], 0)), k.translate(w[0]));
                                break;
                            case "scale":
                                2 === w.length ? (b && (e && e.scale(w[0], w[1]), h.scale(w[0], w[1])), k.scale(w[0], w[1])) : (b && (e && e.scale(w[0], w), h.scale(w[0], w[0])), k.scale(w[0], w[0]));
                                break;
                            case "rotate":
                                c = w[0] * g;
                                3 === w.length ? (b && (e && (e.translate(w[1], w[2]), e.rotate(c), e.translate(-w[1], - w[2])), h.translate(w[1], w[2]), h.rotate(c), h.translate(-w[1], - w[2])), k.translate(w[1], w[2]), k.rotate(c), k.translate(-w[1], - w[2])) : (b && (e && e.rotate(c), h.rotate(c)), k.rotate(c));
                                break;
                            case "skewX":
                                c = w[0] * g;
                                b && (e && e.transform(1, 0, Math.tan(c), 1, 0, 0), h.skew(c, 0));
                                k.skew(c, 0);
                                break;
                            case "skewY":
                                c = w[0] * g, b && (e && e.transform(1, Math.tan(c), 0, 1, 0, 0), h.skew(0, c)), k.skew(0, c)
                        }
                    }
                }
                b && (d.transform = h.matrix, d.transform.type = "transform", d.matrix = k.matrix);
                return {
                    matrix: k.matrix,
                    transform: h.matrix
                }
            }
        }
    };
    b.prototype.parseClipPath = function(a, b) {
        var c = this.ctx,
            e = this.currentNode;
        if (a) {
            var d = a.getAttribute("clip-path");
            if (d) {
                d = d.substr(5, d.length - 6);
                if (this.defs[d]) return b && (e.clipPath = this.defs[d].d), c && (this.renderChildNodes(c, {}, e.clipPath, !0), c.clip(), c.beginPath()), this.defs[d];
                var f = this.getElementById(d);
                if (f) return this.defs[d] = this.getAttributes(f, "id,x,y,width,height,clipPathUnits"), this.defs[d].type = "clipPath", f = this.parse({
                    document: f,
                    matrix: this.vob.matrix,
                    node: {
                        childNodes: []
                    },
                    skipRender: !0
                }), c && (c.clip(), c.beginPath()), f.id = d, this.defs[d].d = f, b && (e.clipPath = f), this.defs[d]
            }
        }
    };
    b.prototype.parsePoints = function(a, b) {
        var c = a.getAttribute("points");
        if (c) {
            var e = c.replace(/[\s,]+/g, " ").trim().split(/[, ]/);
            if (!(2 > e.length)) {
                for (var d = [], c = [], f = 0, g = e.length; f < g; f += 2) {
                    var k = e[f],
                        h = e[f + 1];
                    d.push({
                        cmd: c.length ? "L" : "M",
                        x: parseFloat(k),
                        y: parseFloat(h)
                    });
                    c.push([k, h])
                }
                e = c.length - 1;
                f = c[e];
                isFinite(f[1]) || (d[e].y = f[1] = c[0][1]);
                "Polygon" === b ? (c = "" + c.join(" ") + "", d.push({
                    cmd: "Z",
                    x: d[0].x,
                    y: d[0].y
                })) : c = "" + c.join(" ");
                return {
                    points: c,
                    data: d
                }
            }
        }
    };
    b.prototype.getAttributes = function(a, b, c) {
        var d = {};
        if (!a || !a.getAttribute) return {};
        var g = e(a),
            k = 0;
        b = b.split(",");
        for (var h = b.length; k < h; k++) {
            var s = b[k],
                x = this.__attributes[s],
                w = !1;
            if (!x) if (x = this.__attributesNS[s]) s = this.__namepace + ":" + s, w = !0;
            else if (s = s.match(this.rxSplitByUppercase).slice(0, - 1).join("-").toLowerCase(), x = this.__attributes[s], !x) {
                console.log(s);
                continue
            }
            x = x.format;
            if (c) {
                var A = g[s] || a.getAttribute(s); - 1 !== s.indexOf("-") && (s = s.split("-"), s[1] && (s[1] = s[1][0].toUpperCase() + s[1].substr(1)), s = s.join(""))
            } else A = a.getAttribute(s) || g[s], "id" !== s || A || (A = a.getAttribute("xml:id"));
            if (A) if ("inherit" === A) w = this.currentNode, w.parentNode && (w.parentNode.style && w.parentNode.style[s]) && (d[s] = w.parentNode.style[s]);
            else if ("none" === A) d[s] = A;
            else switch (w && (s = s.replace(this.__namepace + ":", "")), x) {
                    case "numarray":
                        d[s] = f(A);
                        break;
                    case "coordinate":
                        d[s] = parseFloat(A);
                        (x = A.replace(this.rxNumeric, "")) && "px" !== x && (d[s] *= this.convertMetrics[x + ">px"]); - 1 !== A.indexOf("%") && (d[s] *= 3);
                        Infinity === d[s] && (d[s] = 4294967295); - Infinity === d[s] && (d[s] = -4294967295);
                        break;
                    case "float":
                        d[s] = parseFloat(A);
                        Infinity === d[s] && (d[s] = 4294967295); - Infinity === d[s] && (d[s] = -4294967295);
                        break;
                    case "gradientTransform":
                    case "patternTransform":
                    case "transform":
                        w = this.parseTransform(a, !1, x);
                        d[s] = w.matrix;
                        break;
                    case "string":
                        d[s] = A
                }
        }
        return d
    };
    b.prototype.getBoundingBox = function(a, b, c) {
        var e = Infinity,
            d = Infinity,
            f = -Infinity,
            g = -Infinity,
            k = function(a) {
                for (var c = 0, h = a.length; c < h; c++) {
                    var m = a[c];
                    if (m) {
                        if (m.bbox) {
                            if (b && m.style && m.style.strokeStyle) var p = m.style.strokeWidth || 0,
                                B = m.bbox.x1 - p,
                                D = m.bbox.x2 + p,
                                E = m.bbox.y1 - p,
                                p = m.bbox.y2 + p;
                            else B = m.bbox.x1, D = m.bbox.x2, E = m.bbox.y1, p = m.bbox.y2;
                            B < e && (e = B);
                            E < d && (d = E);
                            D > f && (f = D);
                            p > g && (g = p)
                        }
                        m.childNodes && k(m.childNodes)
                    }
                }
            };
        k(a || [this.vob]);
        c && (e -= c, d -= c, f += c, g += c);
        return [e, d, f, g]
    };
    b.prototype.getElementById = function(a) {
        if (this.element.ownerDocument) {
            var b = this.element.ownerDocument.getElementById(a);
            b || (b = c(this.element.ownerDocument, a))
        } else(b = this.element.getElementById(a)) || (b = c(this.element, a));
        return b
    };
    b.prototype.getLayerById = function(a) {
        var b = function(c) {
            for (var e = 0; e < c.length; e++) {
                var d = c[e];
                if (d.id === a || d.childNodes && (d = b(d.childNodes))) return d
            }
        };
        return b(this.vob.childNodes)
    };
    b.prototype.getLayerBy = function(a,
                                      b) {
        var c = function(e) {
            for (var d = 0; d < e.length; d++) {
                var f = e[d];
                if (f[a] === b || f.childNodes && (f = c(f.childNodes))) return f
            }
        };
        return c(this.vob.childNodes)
    };
    b.prototype.fontStyleToString = function(a, b) {
        if (a && b) {
            var c = b.textAnchor || "left";
            "middle" === c && (c = "center");
            a.textAlign = c;
            return (b.fontStyle || "normal") + " " + (b.fontWeight || "normal") + " " + (b.fontSize || "normal") + "px " + (b.fontFamily || "sans-serif")
        }
    };
    b.prototype.createCanvas = function() {
        var a = document.createElement("canvas");
        a.ctx = a.getContext("2d");
        return a
    };
    b.prototype.walk = function(a, b, c) {
        var e = "undefined" !== typeof c,
            d = function(f) {
                for (var g = 0; g < f.length; g++) {
                    var k = f[g];
                    if (b) {
                        if (e && k[b] === c) return a(k);
                        k[b] && a(k)
                    } else a(k);
                    if (k.childNodes && (k = d(k.childNodes))) return k
                }
            };
        if (this.vob) return d(this.vob.childNodes)
    };
    var e = function(a) {
        if (a.__style) return a.__style;
        if (!a.getAttribute) return a.__style = {};
        var b = a.getAttribute("style");
        if (!b) return a.__style = {};
        for (var b = b.split(";"), c = {}, e = 0, d = b.length; e < d; e++) {
            var f = b[e].split(":");
            f[0] && f[1] && (c[f[0].trim()] = f[1].trim())
        }
        return a.__style = c
    }, f = function(a) {
        var b = [];
        if (!a) return [];
        for ("string" === typeof a && (a = -1 !== a.indexOf(",") ? a.split(",") : a.split(" ")); a.length;) {
            var c = parseFloat(a.shift());
            b.push(c)
        }
        return b
    }, c = function(a, b) {
        return window.XPathResult ? a.evaluate('//*[@xml:id="' + b + '"]', a, function() {
            return "http://www.w3.org/XML/1998/namespace"
        }, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue : a.getElementById ? a.getElementById(b) : null
    }, k = {
        text: !0,
        rect: !0,
        circle: !0,
        ellipse: !0,
        line: !0,
        polyline: !0,
        polygon: !0,
        path: !0
    };
    a.SVG = b;
    a.SVG.storage = h;
    a.SVG.isSVG = function(a) {
        return 0 === a.indexOf("data:image/svg") || 0 === a.indexOf("<?xml") || 0 === a.indexOf("<svg")
    }
})(sketch.vector);
"undefined" !== typeof module && module.exports && (window = {}, DOMParser = require("xmldom").DOMParser, module.exports = sketch.vector.SVG);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.vector && (sketch.vector = {});
(function() {
    var a = function(a) {
        a.prototype.__dtd = "https://sketch.io/dtd/";
        a.prototype.__namepace = "sketchjs";
        a.prototype.__version = "3.0";
        a.prototype.__attributesNS = {
            labels: {
                param: "labels",
                format: "string",
                value: ""
            },
            version: {
                param: "version",
                format: "string",
                value: ""
            },
            metadata: {
                param: "metadata",
                format: "string",
                value: ""
            },
            brush: {
                param: "brush",
                format: "string",
                value: ""
            },
            uid: {
                param: "uid",
                format: "int",
                value: ""
            }
        };
        a.prototype.__attributes = {
            id: {
                param: "id",
                format: "string",
                value: ""
            },
            src: {
                param: "src",
                format: "string",
                value: ""
            },
            href: {
                param: "href",
                format: "string",
                value: ""
            },
            "xlink:href": {
                param: "xlink:href",
                format: "string",
                value: ""
            },
            display: {
                param: "display",
                format: "string",
                valid: "inline | block | list-item | run-in | compact | marker | table | inline-table | table-row-group | table-header-group | table-footer-group | table-row | table-column-group | table-column | table-cell | table-caption | none | inherit",
                value: "inline"
            },
            visibility: {
                param: "visibility",
                format: "string",
                valid: "visible | hidden | collapse | inherit",
                value: "visible"
            },
            viewBox: {
                param: "viewBox",
                format: "numarray",
                value: 0
            },
            preserveAspectRatio: {
                param: "preserveAspectRatio",
                format: "string",
                valid: "[defer] <align> [<meetOrSlice>]",
                value: "xMidYMid meet"
            },
            x: {
                param: "x",
                format: "coordinate",
                value: ""
            },
            y: {
                param: "y",
                format: "coordinate",
                value: ""
            },
            width: {
                param: "width",
                format: "coordinate",
                value: ""
            },
            height: {
                param: "height",
                format: "coordinate",
                value: ""
            },
            transform: {
                param: "transform",
                format: "transform",
                value: "matrix(1,0,0,1,0,0)"
            },
            dx: {
                param: "dx",
                format: "coordinate",
                value: ""
            },
            dy: {
                param: "dy",
                format: "coordinate",
                value: ""
            },
            cx: {
                param: "cx",
                format: "coordinate",
                value: ""
            },
            cy: {
                param: "cy",
                format: "coordinate",
                value: ""
            },
            rx: {
                param: "rx",
                format: "float",
                value: ""
            },
            ry: {
                param: "ry",
                format: "float",
                value: ""
            },
            r: {
                param: "r",
                format: "coordinate",
                value: ""
            },
            x1: {
                param: "x1",
                format: "float",
                value: ""
            },
            y1: {
                param: "y1",
                format: "float",
                value: ""
            },
            x2: {
                param: "x2",
                format: "float",
                value: ""
            },
            y2: {
                param: "y2",
                format: "float",
                value: ""
            },
            d: {
                param: "d",
                format: "string",
                value: ""
            },
            points: {
                param: "points",
                format: "string",
                value: ""
            },
            "font-size": {
                param: "font-size",
                format: "float",
                valid: "<absolute-size> | <relative-size> | <length> | <percentage> | inherit",
                value: "medium"
            },
            "font-style": {
                param: "font-style",
                format: "string",
                valid: "normal | italic | oblique | inherit",
                value: "normal"
            },
            "font-family": {
                param: "font-family",
                format: "string",
                valid: "[[ <family-name> | <generic-family> ],]* [<family-name> | <generic-family>] | inherit",
                value: "sans-serif"
            },
            "font-weight": {
                param: "font-weight",
                format: "string",
                valid: "normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 | inherit",
                value: "normal"
            },
            "line-height": {
                param: "line-height",
                format: "float",
                valid: "normal | <number> | <length> | <percentage> | inherit",
                value: "normal"
            },
            "text-decoration": {
                param: "text-decoration",
                format: "string",
                valid: "none | [ underline || overline || line-through || blink ] | inherit",
                value: "none"
            },
            "text-anchor": {
                param: "text-anchor",
                format: "string",
                valid: "start | middle | end | inherit",
                value: "start"
            },
            kerning: {
                param: "kerning",
                format: "float",
                valid: "auto | <length> | inherit",
                value: "auto"
            },
            "letter-spacing": {
                param: "letter-spacing",
                format: "float",
                valid: "normal | <length> | inherit",
                value: "normal"
            },
            "word-spacing": {
                param: "word-spacing",
                format: "float",
                valid: "normal | <length> | inherit",
                value: "normal"
            },
            "clip-path": {
                param: "clip-path",
                format: "string",
                value: ""
            },
            clipPathUnits: {
                param: "clipPathUnits",
                format: "string",
                value: "userSpaceOnUse"
            },
            opacity: {
                param: "opacity",
                format: "float",
                value: 1
            },
            fill: {
                param: "fill",
                format: "string",
                value: "black"
            },
            "fill-rule": {
                param: "fill-rule",
                format: "string",
                valid: "nonzero | evenodd | inherit",
                value: "nonzero"
            },
            "fill-opacity": {
                param: "fill-opacity",
                format: "float",
                valid: "<opacity-value> | inherit",
                value: 1
            },
            stroke: {
                param: "stroke",
                format: "string",
                value: "black"
            },
            "stroke-width": {
                param: "stroke-width",
                format: "coordinate",
                valid: "<percentage> | <length> | inherit",
                value: 1
            },
            "stroke-linecap": {
                param: "stroke-linecap",
                format: "string",
                valid: "butt | round | square | inherit",
                value: "butt"
            },
            "stroke-linejoin": {
                param: "stroke-linejoin",
                format: "string",
                valid: "miter | round | bevel | inherit",
                value: "miter"
            },
            "stroke-miterlimit": {
                param: "stroke-miterlimit",
                format: "float",
                valid: "<miterlimit> | inherit",
                value: 4
            },
            "stroke-dasharray": {
                param: "stroke-dasharray",
                format: "numarray",
                valid: "none | <dasharray> | inherit",
                value: "none"
            },
            "stroke-dashoffset": {
                param: "stroke-dashoffset",
                format: "coordinate",
                valid: "<percentage> | <length> | inherit",
                value: 0
            },
            "stroke-opacity": {
                param: "stroke-opacity",
                format: "float",
                valid: "<opacity-value> | inherit",
                value: 1
            },
            stops: {
                param: "stops",
                format: "string",
                value: ""
            },
            gradientUnits: {
                param: "gradientUnits",
                format: "string",
                valid: "userSpace | userSpaceOnUse | objectBoundingBox",
                value: "userSpace"
            },
            gradientTransform: {
                param: "gradientTransform",
                format: "gradientTransform",
                value: "matrix(1,0,0,1,0,0)"
            },
            spreadMethod: {
                param: "spreadMethod",
                format: "string",
                valid: "pad | reflect | repeat",
                value: "pad"
            },
            fx: {
                param: "fx",
                format: "coordinate",
                value: ""
            },
            fy: {
                param: "fy",
                format: "coordinate",
                value: ""
            },
            patternUnits: {
                param: "patternUnits",
                format: "string",
                value: ""
            },
            patternContentUnits: {
                param: "patternContentUnits",
                format: "string",
                value: ""
            },
            patternTransform: {
                param: "patternTransform",
                format: "patternTransform",
                value: "matrix(1,0,0,1,0,0)"
            },
            stdDeviation: {
                param: "stdDeviation",
                format: "float",
                value: 0
            },
            filter: {
                param: "filter",
                format: "string",
                value: ""
            },
            color: {
                param: "color",
                format: "string",
                value: ""
            },
            "color-interpolation-filters": {
                param: "color-interpolation-filters",
                format: "string",
                valid: "auto | sRGB | linearRGB | inherit",
                value: "sRGB"
            }
        }
    };
    "undefined" !== typeof module && module.exports ? module.exports = a : a(sketch.vector.SVG)
})();
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.vector && (sketch.vector = {});
(function() {
    var a = function(a) {
        a.prototype.clone = function(b, d) {
            (new a).fromString(this.toDataURL(), function(a) {
                d && (a.vob.id = "clone" + Math.round(16777215 * Math.random()));
                b && b(a)
            })
        };
        a.prototype.toImage = function() {
            var a = new Image;
            a.src = this.toDataURL();
            a.width = this.vob.width;
            a.height = this.vob.height;
            return a
        };
        a.prototype.toBlob = function() {
            return new Blob([this.stringify()], {
                type: "image/svg+xml"
            })
        };
        a.prototype.toDataURL = function() {
            return "data:image/svg+xml;base64," + this.btoa()
        };
        a.prototype.btoa = function() {
            return btoa(this.stringify())
        };
        a.prototype.toString = a.prototype.stringify = function() {
            var a = this,
                d = function(b, g) {
                    if (b && b.length) for (var l = 0, h = b.length; l < h; l++) {
                        var m = b[l];
                        if (m) {
                            var p = m.type;
                            switch (p) {
                                case "circle":
                                case "ellipse":
                                case "image":
                                case "line":
                                case "path":
                                case "polyline":
                                case "polygon":
                                case "rect":
                                    s += g + "<" + p;
                                    s = c(s, m);
                                    s += "></" + p + ">\n";
                                    break;
                                case "stamp":
                                case "eraser":
                                case "pencil":
                                    p = a.__namepace + ":" + p;
                                    s += g + "<" + p;
                                    s = c(s, m);
                                    s += "></" + p + ">\n";
                                    break;
                                case "text":
                                    s += g + "<text";
                                    s = c(s, m);
                                    s += ">";
                                    if (m = m.childNodes) for (var p = 0, r = m.length; p < r; p++) s += "<tspan", s = c(s, m[p]), s += ">" + m[p].content + "</tspan>";
                                    s += "</text>\n";
                                    break;
                                case "g":
                                    s += g + "<g";
                                    s = c(s, m);
                                    s += ">\n";
                                    d(m.childNodes, g + "\t");
                                    s += g + "</g>\n";
                                    break;
                                case "svg":
                                    s += '<?xml version="1.0" encoding="utf-8"?>\n';
                                    s += "\x3c!-- Generator: sketch.js " + a.__version + " <https://sketch.io/api/> --\x3e\n";
                                    s += '<svg version="1.1" xmlns="http://www.w3.org/2000/svg"';
                                    s += ' xmlns:xlink="http://www.w3.org/1999/xlink"';
                                    s += " xmlns:" + a.__namepace + '="' + a.__dtd + '"';
                                    m.version = m.version || a.__version;
                                    s = c(s, m);
                                    s += ">\n";
                                    k && (s += "<defs>" + k + "</defs>");
                                    d(m.childNodes, g + "\t");
                                    s += "</svg>";
                                    break;
                                default:
                                    d(m.childNodes, g + "\t")
                            }
                        }
                    }
                }, c = function(d, f) {
                    for (var k in f) switch (k) {
                        case "href":
                            var l = g("xlink:href", f[k], a);
                            l && (d += l);
                            break;
                        case "clipPath":
                            (l = g("clip-path", "url(#" + f[k].id + ")", a)) && (d += l);
                            break;
                        case "viewBox":
                            (l = g(k, f[k].join(" "), a)) && (d += l);
                            break;
                        case "transform":
                        case "gradientTransform":
                        case "patternTransform":
                            l = f[k];
                            if (!l) break;
                            (l = g(k, "matrix(" + l.a + "," + l.b + "," + l.c + "," + l.d + "," + l.x + "," + l.y + ")", a)) && (d += l);
                            break;
                        case "fill":
                        case "fillStyle":
                            (l = b("fill", f[k], a)) && (d += l);
                            break;
                        case "stroke":
                        case "strokeStyle":
                            (l = b("stroke", f[k], a)) && (d += l);
                            break;
                        case "style":
                            d += c("", f.style);
                            break;
                        case "attributes":
                        case "element":
                            break;
                        default:
                            (l = g(k, f[k], a)) && (d += l)
                    }
                    return d
                }, k = "",
                h;
            for (h in this.defs) {
                var l = this.defs[h];
                switch (l.type) {
                    case "linearGradient":
                    case "radialGradient":
                        for (var k = k + ("<" + l.type), k = c(k, l), k = k + ">\n", p = l.stops, r = 0; r < p.length; r++) {
                            var q = p[r],
                                u = q.color;
                            if ("rgba" === u.substr(0, 4)) var u = sketch.color.space(u, "W3>RGBA"),
                                v = u.A / 255,
                                u = sketch.color.space(u, "RGB>W3"),
                                k = k + ('\t<stop offset="' + q.offset + '" style="stop-color:' + u + ";stop-opacity:" + v + ';"/>\n');
                            else k += '\t<stop offset="' + q.offset + '" style="stop-color:' + q.color + ';"/>\n'
                        }
                        k += "</" + l.type + ">\n";
                        break;
                    case "pattern":
                        var k = k + "<pattern",
                            k = c(k, l),
                            k = k + ">\n",
                            l = l.childNodes,
                            s = "";
                        l.length && (d(l, "\t"), k += s);
                        k += "</pattern>\n";
                        break;
                    case "filter":
                        k += "<filter";
                        k = c(k, l);
                        k += ">\n";
                        l = l.filter;
                        for (r = 0; r < l.length; r++) p = l[r], k += "\t<fe" + p.type, k = c(k, p), k += "/>\n";
                        k += "</filter>\n";
                        break;
                    case "clipPath":
                        k += "<clipPath";
                        k = c(k, l);
                        k += ">\n";
                        l = l.d;
                        for (r = 0; r < l.length; r++) p = l[r], k += "\t<" + p.type, k = c(k, p), k += "/>\n";
                        k += "</clipPath>\n"
                }
            }
            s = "";
            d([this.vob], "");
            return s
        };
        var d = {
            type: !0,
            childNodes: !0,
            parentNode: !0,
            matrix: !0,
            data: !0,
            bbox: !0
        }, g = function(a, b, c) {
            if (!d[a]) {
                var g = c.__attributes[a];
                if (!g) if (g = c.__attributesNS[a]) a = c.__namepace + ":" + a;
                else if (a = a.match(c.rxSplitByUppercase).slice(0, - 1).join("-").toLowerCase(), g = c.__attributes[a], !g) return;
                if (g.value !== b) switch (g.format) {
                    case "string":
                    case "gradientTransform":
                    case "patternTransform":
                    case "transform":
                        if ("string" !== typeof b) break;
                        return " " + a + '="' + b + '"';
                    case "coordinate":
                    case "float":
                    case "int":
                        if (!isFinite(b)) break;
                        return " " + a + '="' + b + '"';
                    case "numarray":
                        return " " + a + '="' + b + '"';
                    default:
                        console.log("unhandled", g)
                }
            }
        }, b = function(a, b, c) {
            var d = c.__attributes[a];
            if (d && d.value !== b) {
                "default" === b && (b = "fill" === a ? c.defaultFill : c.defaultStroke);
                if (c.defs[b]) return " " + a + '="url(#' + b + ')"';
                if (b) return " " + a + '="' + b + '"'
            }
        }
    };
    "undefined" !== typeof module && module.exports ? module.exports = a : a(sketch.vector.SVG)
})();
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.vector && (sketch.vector = {});
(function(a) {
    a.SVGFont = function(a) {
        sketch = sketch.vector.SVGFont.__self || sketch;
        sketch.vector.fonts = sketch.vector.fonts || {};
        var e = {
            direction: "ltr",
            font: "",
            fontFamily: "sans-serif",
            fontSize: "40px",
            fontStyle: "normal",
            fontWeight: "normal",
            fontVariant: "normal",
            textAlign: "start",
            textBaseline: "alphabetic",
            textDecoration: "none",
            textTransform: "none",
            lineHeight: "1em",
            letterSpacing: 0,
            whiteSpace: "normal",
            ctx: a,
            scaleFactor: 1,
            pkg: {},
            pkgs: {},
            load: function(a, b) {
                var e = function(a) {
                    var c, e = document.createElement("div");
                    "string" === typeof a ? e.innerHTML = a : e.appendChild(a);
                    var d = null,
                        g = e.getElementsByTagName("font")[0],
                        m = e.getElementsByTagName("font-face")[0];
                    a = m.getAttribute("font-family") || a.id;
                    var s = (d = m.getElementsByTagName("font-face-name")[0]) ? d.getAttribute("name") : a,
                        x = m.getAttribute("font-style") || "all",
                        w = m.getAttribute("font-variant") || "normal",
                        A = m.getAttribute("font-weight") || "all",
                        y = m.getAttribute("font-stretch") || "normal",
                        z = m.getAttribute("unicode-range") || "U+0-10FFFF",
                        B = m.getAttribute("panose-1") || "0 0 0 0 0 0 0 0 0 0",
                        D = m.getAttribute("cap-height") || 0,
                        E = m.getAttribute("x-height") || 0,
                        G = parseFloat(m.getAttribute("units-per-em") || 1E3, 10),
                        d = e.getElementsByTagName("missing-glyph")[0],
                        J = {
                            x: parseFloat(g.getAttribute("horiz-adv-x"), 10),
                            y: parseFloat(g.getAttribute("vert-adv-y") || 0, 10) || G
                        };
                    parseFloat(d ? d.getAttribute("horiz-adv-x") : J.x, 10);
                    var g = {
                            horiz: {
                                x: parseFloat(g.getAttribute("horiz-origin-x") || 0, 10),
                                y: parseFloat(g.getAttribute("horiz-origin-y") || 0, 10)
                            },
                            vert: {
                                x: parseFloat(g.getAttribute("vert-origin-x") || 0, 10),
                                y: parseFloat(g.getAttribute("vert-origin-y") || 0, 10)
                            }
                        }, C = parseFloat(m.getAttribute("ascent") || G - g.vert.y, 10),
                        O = parseFloat(m.getAttribute("descent") || g.vert.y, 10),
                        N = {}, L = ["alphabetic", "ideographic", "mathematical", "hanging"];
                    for (c in L)(d = m.getAttribute(c = L[c])) && (N[c] = parseFloat(d, 10));
                    var m = {}, e = e.getElementsByTagName("glyph"),
                        Q;
                    for (c in e) if ((d = e[c]).getAttribute) {
                        L = d.getAttribute("unicode");
                        if (L.match(h)) {
                            Q = L;
                            if (Q.match(h)) {
                                for (var K = {
                                    amp: "&",
                                    apos: "'",
                                    quot: '"',
                                    lt: "<",
                                    gt: ">"
                                }, F = void 0, aa = ""; null !== (F = h.exec(Q));) aa = "x" === F[1].charAt(1) ? aa + String.fromCharCode(F[1].slice(2),
                                    16) : isNaN(parseInt(F[1].slice(1), 10)) ? aa + K(F[1]) : aa + String.fromCharCode(F[1].slice(1));
                                Q = aa
                            }
                            Q = Q.charCodeAt()
                        } else Q = L.charCodeAt();
                        K = parseFloat(d.getAttribute("horiz-adv-x") || J.x, 10);
                        F = sketch.vector.SVGPath.toVOBPath(d.getAttribute("d")) || [];
                        F = new sketch.vector.BBox(F);
                        m[Q] = {
                            unicode: L,
                            name: d.getAttribute("glyph-name"),
                            xadv: K,
                            width: F.x2 - F.x1,
                            height: F.y2 - F.y1,
                            path: d.getAttribute("d"),
                            data: sketch.vector.SVGPath.toVOBPath(d.getAttribute("d")) || []
                        }
                    }
                    c = {
                        family: a,
                        name: s,
                        style: x,
                        variant: w,
                        weight: A,
                        stretch: y,
                        range: z,
                        panose: B.split(" ").map(parseFloat),
                        capHeight: D,
                        unitsPerEm: G,
                        origin: g,
                        advance: J,
                        ascent: C,
                        descent: O,
                        xheight: E,
                        baseline: N,
                        glyphs: m
                    };
                    c = f(c);
                    b && b(c)
                };
                "string" === typeof a && -1 === a.indexOf("<font") && -1 === a.indexOf("<?xml") ? sketch.util.request({
                    url: a,
                    onload: function(a) {
                        e(a.responseText)
                    },
                    onerror: function(a) {},
                    onprogress: function(a) {}
                }) : e(a)
            }
        }, f = function(a) {
            if ("string" === typeof a) {
                var b = a;
                a = sketch.vector.fonts[b]
            } else b = a.family || "unknown", sketch.vector.fonts[b] = a;
            e.pkg.family !== b && (a ? e.pkg = e.pkgs[b] = a : b in e.pkgs && (e.pkg = e.pkgs[b]));
            return a
        };
        e.measureText = function(a) {
            if (a) {
                a = "" + a;
                for (var b = e.pkg.glyphs, d = a.length, f = 0, g = e.pkg.advance.y, h = 0, q = 0; q < d; q++) {
                    var u = b[a.charCodeAt(q)];
                    u && (f += u.xadv, h += u.width)
                }
                return {
                    width: f * e.scaleFactor,
                    height: g * e.scaleFactor,
                    actualWidth: h * e.scaleFactor,
                    actualHeight: 0 * e.scaleFactor
                }
            }
        };
        e.strokeText = function(a, b, d, f) {
            if (a && isFinite(b) && isFinite(d)) return a = this.drawText(a, b, d, f), e.ctx.stroke(), e.ctx.beginPath(), a
        };
        e.fillText = function(a, b, d, f) {
            if (a && isFinite(b) && isFinite(d)) return a = this.drawText(a, b, d, f), e.ctx.fill(), e.ctx.beginPath(), a
        };
        e.getBaseline = function(a) {
            switch (a || this.textBaseline) {
                case "alphabetic":
                    break;
                case "top":
                    return e.pkg.ascent * e.scaleFactor;
                case "hanging":
                    return 8 * e.pkg.ascent / 10 * e.scaleFactor;
                case "absmiddle":
                    return ((e.pkg.ascent - e.pkg.descent) / 2 + e.pkg.descent) * e.scaleFactor;
                case "middle":
                    return e.pkg.xheight / 2 * e.scaleFactor;
                case "ideographic":
                    return e.pkg.descent * e.scaleFactor;
                case "bottom":
                    return e.pkg.descent * e.scaleFactor;
                default:
                    return 0
            }
        };
        e.getScaleFactor = function() {
            var a = e.fontSize;
            if ("number" === typeof a) var b = "px";
            else b = a.toLowerCase(), a = a = parseFloat(b), b = b.replace(a, "");
            2 < b.length ? a = ScreenMetrics[t + "_px"] : "px" !== b && (a = ScreenMetrics[b + "_px"] * (isNaN(a) ? 1 : a));
            isNaN(a) || (e.scaleFactor = a / e.pkg.unitsPerEm);
            return e.scaleFactor
        };
        e.drawText = function(a, b, f, g) {
            var h = e.ctx;
            if (a.length) {
                for (var r = 0; r < d.length; r++) a = a.split(d[r]).join(" ");
                e.getScaleFactor();
                b = b || 0;
                r = f || 0;
                switch (this.textAlign) {
                    case "start":
                        b -= "ltr" === this.direction ? 0 : this.measureText(a).width;
                        break;
                    case "end":
                        b -= "ltr" === this.direction ? this.measureText(a).width : 0;
                        break;
                    case "right":
                        b -= this.measureText(a).width;
                        break;
                    case "center":
                        b -= this.measureText(a).width / 2
                }
                switch (this.textBaseline) {
                    case "top":
                        r += e.pkg.ascent * e.scaleFactor;
                        break;
                    case "hanging":
                        r += 8 * e.pkg.ascent / 10 * e.scaleFactor;
                        break;
                    case "absmiddle":
                        r += ((e.pkg.ascent - e.pkg.descent) / 2 + e.pkg.descent) * e.scaleFactor;
                        break;
                    case "middle":
                        r += e.pkg.xheight / 2 * e.scaleFactor;
                        break;
                    case "ideographic":
                        r += e.pkg.descent * e.scaleFactor;
                        break;
                    case "bottom":
                        r += e.pkg.descent * e.scaleFactor
                }
                var q, u, v, s, x;
                "object" === typeof g && (q = g, u = q.minWidth, g = q.maxWidth, v = q.maxHeight, x = q.targetWidth, s = q.targetHeight, q = q.getData);
                h.save();
                h.beginPath();
                f = this.measureText(a);
                var w = f.width,
                    A = f.height;
                f = q ? new sketch.vector.Transform : h;
                isFinite(x) ? (f.scale(x / w, 1), b = b * w / x) : (isFinite(g) && w > g && (f.scale(g / w, 1), b = b * w / g), isFinite(u) && w < u && (f.scale(u / w, 1), b = b * w / u));
                isFinite(s) ? (f.scale(1, s / A), r = r * A / s) : isFinite(v) && A > v && (f.scale(1, v / A), r = r * A / v);
                (b || r) && f.translate(b, r);
                f.scale(e.scaleFactor, - e.scaleFactor);
                g = e.pkg.glyphs;
                v = [];
                "number" === typeof a && (a = String(a));
                s = 0;
                for (x = a.length; s < x; s++) u = g[b = a.charCodeAt(s)], 10 !== b && 13 !== b && (u || (u = g["?".charCodeAt()]), u && (u.data || (u.data = sketch.vector.SVGPath.toVOBPath(u.path) || []), u.data && (b = u.data, q ? v.push({
                    d: u.path,
                    data: f.flatten(u.data, !0, !1)
                }) : (h.beginPath(), sketch.vector.shape.VOBPath(h, b), h.fill()), f.translate(u.xadv, 0))));
                h.restore();
                if (q) return {
                    childNodes: v
                }
            }
        };
        e.toSVG = function(a, b) {
            new sketch.vector.SVG({
                ctx: sketch.ctx,
                src: a,
                onload: function(a) {
                    a = a.typeface.pkg.glyphs;
                    var c = {}, e;
                    for (e in a) {
                        var d = a[e];
                        if (d.path) {
                            var f = sketch.vector.SVGPath.toVOBPath(d.path),
                                g = new sketch.vector.BBox(f),
                                f = (new sketch.vector.Transform).translate(0, g.y2).scale(1, - 1).flatten(f, !0),
                                f = sketch.vector.SVGPath.fromVOBPath(f),
                                h = g.x2 - g.x1,
                                s = g.y2 - g.y1,
                                g = g.x1;
                            c[d.unicode.charCodeAt() + ".svg"] = '<?xml version="1.0" encoding="UTF-8"?><svg version="1.1" width="' + h + '" height="' + s + '" viewBox="' + g + " 0 " + h + " " + s + '" xmlns="http://www.w3.org/2000/svg"><path d="' + f + '"/></svg>'
                        }
                    }
                    b(c)
                }
            })
        };
        e.setFont = function(a) {
            if (e.font !== a) {
                for (var b = a.trim().split(" "), d = b.length, l = 0, h = 0, r = Math.min(3, d); l < r;) {
                    var q = b[l];
                    if (0 === (h & 1) && -1 !== " normal italic oblique ".indexOf(" " + q + " ")) e.fontStyle = b[l++], h |= 1;
                    else if (0 === (h & 2) && -1 !== " normal small-caps ".indexOf(" " + q + " ")) e.fontVariant = b[l++], h |= 2;
                    else if (0 === (h & 4) && (-1 !== " normal bold bolder lighter ".indexOf(" " + q + " ") || 3 === q.length && "1" <= q.charAt(0) && "9" >= q.charAt(0) && "0" === q.charAt(1) && "0" === q.charAt(2))) e.fontWeight = g[b[l++]], h |= 4;
                    else break
                }
                l < d && (h = b[l], r = h.indexOf("/"), - 1 === r ? l++ : (h = h.substring(0, r), b[l] = b[l].substring(r)), e.fontSize = h);
                l < d && "/" === b[l].substr(0, 1) && ("/" !== b[l] ? e.lineHeight = b[l++].substring(1) : ++l < d && (e.lineHeight = b[l++]));
                if (l < d) {
                    for (h = b[l++]; l < d;) h += " " + b[l++];
                    e.fontFamily = h;
                    f(h)
                }
                e.font = a
            }
        };
        sketch.vector.font && (f(sketch.vector.font), e.fontFamily = sketch.vector.font.name);
        return e
    };
    var h = /&(quot|apos|lt|gt|amp|#x[^;]+|#\d+);/g,
        d = ["\t", "\n", "\x0B", "\f", "\r"],
        g = {
            normal: 400,
            bold: 700,
            lighter: 300,
            bolder: 500
        }
})(sketch.vector);
if ("undefined" !== typeof module && module.exports) {
    var jsdom = require("jsdom").jsdom;
    module.exports = sketch.vector.SVGFont;
    document = jsdom("<html><body></body></html>", null, {
        features: {
            FetchExternalResources: ["img"]
        }
    })
}
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.vector && (sketch.vector = {});
"undefined" === typeof sketch.vector.SVGPath && (sketch.vector.SVGPath = {});
(function(a) {
    var h = {
        m: 2,
        l: 2,
        h: 1,
        v: 1,
        c: 6,
        s: 4,
        q: 4,
        t: 2,
        a: 7,
        z: 0
    };
    a.fromVOBPath = function(a) {
        for (var b = "", e = {}, d = 0, c = a.length; d < c; d++) if (e = a[d]) switch (e.cmd) {
            case "M":
                b += "M" + e.x + " " + e.y + " ";
                break;
            case "L":
                b += "L" + e.x + " " + e.y + " ";
                break;
            case "C":
                b += "C" + e.x1 + " " + e.y1 + ", " + e.x2 + " " + e.y2 + ", " + e.x + " " + e.y + " ";
                break;
            case "Q":
                b += "Q" + e.x1 + " " + e.y1 + ", " + e.x + " " + e.y + " ";
                break;
            case "Z":
            case "z":
                b += "z"
        }
        return b.substr(0, b.length - 1)
    };
    a.fromVARPath = function(a) {
        for (var b = "", e = {}, d = 0, c = a.length; d < c; d++) if (e = a[d]) switch (e[0]) {
            case "M":
                b += "M" + e[1] + " " + e[2] + " ";
                break;
            case "L":
                b += "L" + e[1] + " " + e[2] + " ";
                break;
            case "C":
                b += "C" + e[1] + " " + e[2] + ", " + e[3] + " " + e[4] + ", " + e[5] + " " + e[6] + " ";
                break;
            case "Q":
                b += "Q" + e[1] + " " + e[2] + ", " + e[3] + " " + e[4] + " ";
                break;
            case "Z":
            case "z":
                b += "z"
        }
        return b.substr(0, b.length - 1)
    };
    a.fromVOBPolygon = function(a) {
        for (var b = "", e = {}, d = 0, c = a.length; d < c; d++) switch ((e = a[d]).cmd) {
            case "M":
            case "L":
                b += e.x + "," + e.y + " "
        }
        return b.substr(0, b.length - 1)
    };
    a.toVOBPath = function(a) {
        if (a) {
            a = a.replace(/([^e])([+-])/g, "$1 $2");
            a = a.match(/([mlhvcsqtaz])|[0-9.\-e]*/gi);
            for (var b = [], e = 0, f = a.length; e < f; e++) a[e] && b.push(a[e]);
            a = b;
            for (var b = "", c = e = 0, k = 0, m = 0, l = 0, p, r, q = "", u = 0, v = []; b = a[e];) {
                var s = h[b.toLowerCase()] + 1;
                if (s) {
                    for (var x = 1, f = s, w = []; x < f; x++) w.push(parseFloat(a[e + x]));
                    u = s;
                    e += s
                } else {
                    x = 0;
                    f = u - 1;
                    for (w = []; x < f; x++) w.push(parseFloat(a[e + x]));
                    b = "m" === q ? "l" : "M" === q ? "L" : q;
                    e += u - 1
                }
                if (b) {
                    switch (b) {
                        case "M":
                            c = w[0];
                            k = w[1];
                            m = c;
                            l = k;
                            p = r = null;
                            v.push({
                                cmd: "M",
                                x: c,
                                y: k
                            });
                            break;
                        case "m":
                            c += w[0];
                            k += w[1];
                            m = c;
                            l = k;
                            p = r = null;
                            v.push({
                                cmd: "M",
                                x: c,
                                y: k
                            });
                            break;
                        case "L":
                            c = w[0];
                            k = w[1];
                            p = r = null;
                            v.push({
                                cmd: "L",
                                x: c,
                                y: k
                            });
                            break;
                        case "l":
                            c += w[0];
                            k += w[1];
                            p = r = null;
                            v.push({
                                cmd: "L",
                                x: c,
                                y: k
                            });
                            break;
                        case "H":
                            c = w[0];
                            p = r = null;
                            v.push({
                                cmd: "L",
                                x: c,
                                y: k
                            });
                            break;
                        case "h":
                            c += w[0];
                            p = r = null;
                            v.push({
                                cmd: "L",
                                x: c,
                                y: k
                            });
                            break;
                        case "V":
                            k = w[0];
                            p = r = null;
                            v.push({
                                cmd: "L",
                                x: c,
                                y: k
                            });
                            break;
                        case "v":
                            k += w[0];
                            p = r = null;
                            v.push({
                                cmd: "L",
                                x: c,
                                y: k
                            });
                            break;
                        case "C":
                            c = w[4];
                            k = w[5];
                            p = w[2];
                            r = w[3];
                            v.push({
                                cmd: "C",
                                x1: w[0],
                                y1: w[1],
                                x2: w[2],
                                y2: w[3],
                                x: w[4],
                                y: w[5]
                            });
                            break;
                        case "c":
                            0 === w[4] && 0 === w[5] && (w[4] += 1E-4, w[5] += 1E-4);
                            v.push({
                                cmd: "C",
                                x1: w[0] + c,
                                y1: w[1] + k,
                                x2: w[2] + c,
                                y2: w[3] + k,
                                x: w[4] + c,
                                y: w[5] + k
                            });
                            p = c + w[2];
                            r = k + w[3];
                            c += w[4];
                            k += w[5];
                            break;
                        case "S":
                            null !== p && q.match(/[sc]/i) || (p = c, r = k);
                            v.push({
                                cmd: "C",
                                x1: c - (p - c),
                                y1: k - (r - k),
                                x2: w[0],
                                y2: w[1],
                                x: w[2],
                                y: w[3]
                            });
                            p = w[0];
                            r = w[1];
                            c = w[2];
                            k = w[3];
                            break;
                        case "s":
                            0 === w[2] && 0 === w[3] && (w[2] += 1E-4, w[3] += 1E-4);
                            null !== p && q.match(/[sc]/i) || (p = c, r = k);
                            v.push({
                                cmd: "C",
                                x1: c - (p - c),
                                y1: k - (r - k),
                                x2: c + w[0],
                                y2: k + w[1],
                                x: c + w[2],
                                y: k + w[3]
                            });
                            p = c + w[0];
                            r = k + w[1];
                            c += w[2];
                            k += w[3];
                            break;
                        case "Q":
                            p = w[0];
                            r = w[1];
                            c = w[2];
                            k = w[3];
                            v.push({
                                cmd: "Q",
                                x1: w[0],
                                y1: w[1],
                                x: w[2],
                                y: w[3]
                            });
                            break;
                        case "q":
                            0 === w[2] && 0 === w[3] && (w[2] += 1E-4, w[3] += 1E-4);
                            v.push({
                                cmd: "Q",
                                x1: w[0] + c,
                                y1: w[1] + k,
                                x: w[2] + c,
                                y: w[3] + k
                            });
                            p = c + w[0];
                            r = k + w[1];
                            c += w[2];
                            k += w[3];
                            break;
                        case "T":
                            null !== p && q.match(/[qt]/i) ? (p = c - (p - c), r = k - (r - k)) : (p = c, r = k);
                            v.push({
                                cmd: "Q",
                                x1: p,
                                y1: r,
                                x: w[0],
                                y: w[1]
                            });
                            c = w[0];
                            k = w[1];
                            break;
                        case "t":
                            0 === w[0] && 0 === w[1] && (w[0] += 1E-4, w[1] += 1E-4);
                            null !== p && q.match(/[qt]/i) ? (p = c - (p - c), r = k - (r - k)) : (p = c, r = k);
                            v.push({
                                cmd: "Q",
                                x1: p,
                                y1: r,
                                x: c + w[0],
                                y: k + w[1]
                            });
                            c += w[0];
                            k += w[1];
                            break;
                        case "A":
                            f = d(w[5], w[6], w[0], w[1], w[3], w[4], w[2], c, k);
                            for (c = 0; c < f.length; c++) v.push(f[c]);
                            c = w[5];
                            k = w[6];
                            break;
                        case "a":
                            w[5] += c;
                            w[6] += k;
                            f = d(w[5], w[6], w[0], w[1], w[3], w[4], w[2], c, k);
                            for (c = 0; c < f.length; c++) v.push(f[c]);
                            c = w[5];
                            k = w[6];
                            break;
                        case "Z":
                            v.push({
                                cmd: "Z",
                                x: m,
                                y: l
                            });
                            l = m = 0;
                            break;
                        case "z":
                            v.push({
                                cmd: "Z",
                                x: m,
                                y: l
                            }), c = m, k = l
                    }
                    q = b
                }
            }
            return v
        }
    };
    var d = function(a, b, e, d, c, k, h, l, p) {
        var r = h * (Math.PI / 180);
        h = Math.sin(r);
        var r = Math.cos(r),
            q = [];
        e = Math.abs(e);
        d = Math.abs(d);
        var u = 0.5 * r * (l - a) + 0.5 * h * (p - b),
            v = 0.5 * r * (p - b) - 0.5 * h * (l - a),
            u = u * u / (e * e) + v * v / (d * d);
        1 < u && (u = Math.sqrt(u), e *= u, d *= u);
        var u = r / e,
            v = h / e,
            s = -h / d,
            x = r / d,
            w = u * l + v * p;
        p = s * l + x * p;
        l = u * a + v * b;
        a = s * a + x * b;
        u = 1 / ((l - w) * (l - w) + (a - p) * (a - p)) - 0.25;
        0 > u && (u = 0);
        u = Math.sqrt(u);
        k === c && (u = -u);
        c = 0.5 * (w + l) - u * (a - p);
        b = 0.5 * (p + a) + u * (l - w);
        w = Math.atan2(p - b, w - c);
        p = Math.atan2(a - b, l - c) - w;
        0 > p && 1 === k ? p += 2 * Math.PI : 0 < p && 0 === k && (p -= 2 * Math.PI);
        k = Math.ceil(Math.abs(p / (0.5 * Math.PI + 0.001)));
        for (var A = 0; A < k; A++) {
            a = w + A * p / k;
            var y = w + (A + 1) * p / k,
                u = r * e,
                v = -h * d,
                s = h * e,
                x = r * d;
            l = 0.5 * (y - a);
            var z = 8 / 3 * Math.sin(0.5 * l) * Math.sin(0.5 * l) / Math.sin(l);
            l = c + Math.cos(a) - z * Math.sin(a);
            a = b + Math.sin(a) + z * Math.cos(a);
            var B = c + Math.cos(y),
                D = b + Math.sin(y),
                E = B + z * Math.sin(y),
                y = D - z * Math.cos(y);
            q[A] = {
                cmd: "C",
                x1: u * l + v * a,
                y1: s * l + x * a,
                x2: u * E + v * y,
                y2: s * E + x * y,
                x: u * B + v * D,
                y: s * B + x * D
            }
        }
        return q
    }
})(sketch.vector.SVGPath);
"undefined" !== typeof module && module.exports && (module.exports = sketch.vector.SVGPath);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.vector && (sketch.vector = {});
(function() {
    var a = function(a) {
        a.prototype.render = function(d) {
            d = d || {};
            sketch = a.__self || sketch;
            if (this.vob) {
                var g = d.calcStroke ? d.viewBoxStroke || this.viewBoxStroke : d.viewBox || this.viewBox,
                    b = d.placement || this.placement;
                if ("[object CanvasRenderingContext2D]" === String(d)) var e = d,
                    f = sketch.vector.Transform.getIdentity();
                else e = d.ctx || this.ctx, e || (e = this.ctx = this.createCanvas().ctx), f = d.matrix || sketch.vector.Transform.getIdentity();
                e.save();
                switch (b) {
                    case "crop":
                        var c = g[2] - g[0],
                            k = g[3] - g[1],
                            f = (new sketch.vector.Transform).translate(-g[0], - g[1]).matrix;
                        d.width && d.height ? (b = d.width, b = Math.min(b / c, d.height / k), f.a *= b, f.d *= b, f.x += g[0] * (1 - b), f.y += g[1] * (1 - b), g = (k - c) * b / 2, 0 < g ? f.x += g : f.y -= g, e.canvas.width = d.width, e.canvas.height = d.height) : (e.canvas.width = c >> 0, e.canvas.height = k >> 0);
                        e.transform(f.a, f.b, f.c, f.d, f.x, f.y);
                        break;
                    case "bbox":
                        c = g[2] * f.a;
                        b = c - g[0] * f.a;
                        b = f.a * (c / b - 1);
                        this.vob.matrix = f;
                        this.vob.matrix.a += b;
                        this.vob.matrix.d += b;
                        this.vob.matrix.x -= g[0] * this.vob.matrix.a;
                        this.vob.matrix.y -= g[1] * this.vob.matrix.d;
                        f = this.vob.matrix;
                        e.transform(f.a,
                            f.b, f.c, f.d, f.x, f.y);
                        break;
                    case "none":
                        e.canvas.width = this.ctx.canvas.width, e.canvas.height = this.ctx.canvas.height
                }
                d.defaultFill && (this.defaultFill = d.defaultFill);
                g = d.childNodes || [this.vob];
                this.activeAreas = [];
                this.renderChildNodes(e, d, g);
                e.restore();
                return this.activeAreas
            }
        };
        a.prototype.renderChildNodes = function(a, g, b, e) {
            if (b && b.length) {
                var f = b.length,
                    c = sketch.vector.shape;
                this.typeface && (this.typeface.ctx = a);
                for (var k = 0; k < f; k++) {
                    var h = b[k];
                    this.currentNode = h;
                    a && (a.save(), a.beginPath(), a.save());
                    if (h.matrix) {
                        var l = h.matrix;
                        a && a.transform(l.a, l.b, l.c, l.d, l.x, l.y)
                    }
                    h.clipPath && h.clipPath.length && (this.renderChildNodes(a, g, h.clipPath, !0), a && (a.clip(), a.beginPath()));
                    switch (h.type) {
                        case "image":
                            a.drawImage(h.image, h.x, h.y, h.width, h.height);
                            break;
                        case "line":
                            a.moveTo(h.x1, h.y1);
                            a.lineTo(h.x2, h.y2);
                            break;
                        case "polyline":
                        case "polygon":
                        case "path":
                            c.VOBPath(a, h.data);
                            break;
                        case "ellipse":
                            c.ellipse(a, h.cx, h.cy, h.rx, h.ry);
                            break;
                        case "circle":
                            c.ellipse(a, h.cx, h.cy, h.r, h.r);
                            break;
                        case "rect":
                            isFinite(h.rx) ? c.roundRect(a, h.x, h.y, h.width, h.height, h.rx, h.ry) : c.rect(a, h.x, h.y, h.width + h.x, h.height + h.y)
                    }
                    g.point && a.isPointInPath(g.point.x, g.point.y) && this.activeAreas.push(h);
                    (l = h.style) && !e && (a.save(), "undefined" !== typeof l.opacity && (a.globalAlpha = l.opacity), l.fillStyle && (a.save(), this.setStyle(a, this.defs[l.fillStyle] || l, "fillStyle", this.defaultFill), a.globalAlpha *= l.fillOpacity, h.content ? (a.font = this.fontStyleToString(a, l), "SVG" === l.fontRenderer ? (this.typeface.setFont(a.font), this.typeface.fillText(h.content,
                        h.x, h.y)) : a.fillText(h.content, h.x, h.y)) : a.fill(), a.restore()), a.lineWidth = 0 === l.strokeWidth ? 1E-10 : l.strokeWidth || 1, a.lineCap = l.strokeLinecap || "butt", a.lineJoin = l.strokeLinejoin || "miter", a.miterLimit = l.strokeMiterlimit || a.lineWidth, l.strokeStyle && "none" !== l.strokeStyle && (a.save(), this.setStyle(a, this.defs[l.strokeStyle] || l, "strokeStyle", this.defaultStroke), a.globalAlpha *= l.strokeOpacity, h.content ? (a.font = this.fontStyleToString(a, l), "SVG" === l.fontRenderer ? (this.typeface.setFont(a.font), this.typeface.strokeText(h.content,
                        h.x, h.y)) : a.strokeText(h.content, h.x, h.y)) : a.stroke(), a.restore()), a.restore());
                    this.debugBBox && (h.bbox && !e) && (l = h.bbox, a.save(), a.setTransform(1, 0, 0, 1, 0, 0), a.strokeRect(l.x1, l.y1, l.x2 - l.x1, l.y2 - l.y1), a.restore());
                    a.restore();
                    h.childNodes && h.childNodes.length && this.renderChildNodes(a, g, h.childNodes, e);
                    a.restore()
                }
            }
        };
        a.prototype.setStyle = function(d, g, b, e) {
            sketch = a.__self || sketch;
            "undefined" !== typeof g.strokeWidth && (d.lineWidth = g.strokeWidth || 1E-10);
            "undefined" !== typeof g.strokeLinecap && (d.lineCap = g.strokeLinecap);
            "undefined" !== typeof g.strokeLinejoin && (d.lineJoin = g.strokeLinejoin);
            "undefined" !== typeof g.strokeMiterlimit && (d.miterLimit = g.strokeMiterlimit);
            var f;
            if (g.gradientTransform) {
                var c = g.gradientTransform;
                this.currentNode && this.currentNode.matrix && (f = new sketch.vector.Transform, f.transform(c.a, c.b, c.c, c.d, c.x, c.y), f = f.matrix)
            }
            switch (g.type) {
                case "linearGradient":
                    "undefined" === String(g.x1) && (g.x1 = 0);
                    "undefined" === String(g.y1) && (g.y1 = 0);
                    "undefined" === String(g.x2) && (g.x2 = 0);
                    "undefined" === String(g.y2) && (g.y2 = 0);
                    if (!d) break;
                    f && d.transform(f.a, f.b, f.c, f.d, f.x, f.y);
                    if ("objectBoundingBox" === g.gradientUnits) {
                        0 === g.x1 && (0 === g.y1 && 0 === g.x2 && 0 === g.y2) && (g.x2 = 1);
                        var k = this.currentNode;
                        if (!k.bbox) break;
                        e = k.bbox;
                        var m = e.x1 + (e.x2 - e.x1) * g.x1,
                            l = e.y1 + (e.y2 - e.y1) * g.y1,
                            p = e.x1 + (e.x2 - e.x1) * g.x2,
                            r = e.y1 + (e.y2 - e.y1) * g.y2;
                        f = d.createLinearGradient(m, l, p, r);
                        f = (new sketch.vector.Transform(k.matrix)).invert();
                        m = f.point2d(m, l);
                        f = f.point2d(p, r);
                        f = d.createLinearGradient(m.x, m.y, f.x, f.y)
                    } else f = d.createLinearGradient(g.x1,
                        g.y1, g.x2, g.y2);
                    e = 0;
                    for (c = g.stops.length; e < c; e++) {
                        var q = g.stops[e];
                        f.addColorStop(q.offset, q.color)
                    }
                    d[b] = f;
                    break;
                case "radialGradient":
                    "undefined" === typeof g.cx && (g.cx = 0.5);
                    "undefined" === typeof g.cy && (g.cy = 0.5);
                    "undefined" === typeof g.fx && (g.fx = 0.5);
                    "undefined" === typeof g.fy && (g.fy = 0.5);
                    "undefined" === typeof g.r && (g.r = 0.5);
                    if (!d) break;
                    f && d.transform(f.a, f.b, f.c, f.d, f.x, f.y);
                    if ("objectBoundingBox" === g.gradientUnits) {
                        k = this.currentNode;
                        e = k.bbox;
                        if (!k.bbox) break;
                        var c = e.x2 - e.x1,
                            q = e.y2 - e.y1,
                            m = e.x1 + c * g.cx,
                            l = e.y1 + q * g.cy,
                            p = e.x1 + c * g.fx,
                            r = e.y1 + q * g.cy,
                            u = 1.6 * Math.max(c, q) * g.r;
                        f = (new sketch.vector.Transform(k.matrix)).invert();
                        m = f.point2d(m, l);
                        f = f.point2d(p, r);
                        f = d.createRadialGradient(m.x, m.y, 0, f.x, f.y, u);
                        q < c && (c = q / c, d.translate(0, e.y2), d.scale(1, c))
                    } else f = d.createRadialGradient(g.cx, g.cy, 0, g.fx, g.fy, g.r);
                    e = 0;
                    for (c = g.stops.length; e < c; e++) q = g.stops[e], f.addColorStop(q.offset, q.color);
                    d[b] = f;
                    break;
                case "pattern":
                    d.translate(g.x || 0, g.y || 0);
                    d[b] = g.pattern || "none";
                    break;
                default:
                    d[b] = "default" === g[b] ? e || this.defaultFill : g[b]
            }
        }
    };
    "undefined" !== typeof module && module.exports ? (DOMParser = require("xmldom").DOMParser, module.exports = a) : a(sketch.vector.SVG)
})();
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.lib && (sketch.lib = {});
sketch = function(a) {
    a.lib.image = {
        defaultCategory: "",
        path: "./media/image",
        thumbnail: {
            _width: 44,
            _height: 44,
            columns: 4,
            rows: 4,
            padding: 4
        },
        tree: {}
    };
    a.lib.init("image");
    a.lib.clipart = {
        defaultCategory: "animals",
        path: "./media/clipart",
        thumbnail: {
            _width: 44,
            _height: 44,
            columns: 4,
            rows: 4,
            padding: 4
        },
        tree: {
            yourFiles: [],
            animals: [{
                name: "1216139760278927551lemmling Cartoon cow",
                filepath: "./media/clipart/animals/1216139760278927551lemmling_Cartoon_cow.svg",
                category: "animals"
            }, {
                name: "Anonymous Architetto -- Dinosauri 05",
                filepath: "./media/clipart/animals/Anonymous_Architetto_--_Dinosauri_05.svg",
                category: "animals"
            }, {
                name: "Anonymous Architetto -- Dinosauri 06",
                filepath: "./media/clipart/animals/Anonymous_Architetto_--_Dinosauri_06.svg",
                category: "animals"
            }, {
                name: "antontw BlackCat with White Sockets",
                filepath: "./media/clipart/animals/antontw_BlackCat_with_White_Sockets.svg",
                category: "animals"
            }, {
                name: "conejo",
                filepath: "./media/clipart/animals/conejo.svg",
                category: "animals"
            }, {
                name: "FunDraw dot com Coloring Book Octopus",
                filepath: "./media/clipart/animals/FunDraw_dot_com_Coloring_Book_Octopus.svg",
                category: "animals"
            }, {
                name: "Gerald G Cartoon Cat Sitting",
                filepath: "./media/clipart/animals/Gerald_G_Cartoon_Cat_Sitting.svg",
                category: "animals"
            }, {
                name: "gth",
                filepath: "./media/clipart/animals/gth.svg",
                category: "animals"
            }, {
                name: "JazzyNico Dino Simple T-REX",
                filepath: "./media/clipart/animals/JazzyNico_Dino_Simple_T-REX.svg",
                category: "animals"
            }, {
                name: "Lucky Beckoning Cat",
                filepath: "./media/clipart/animals/Lucky_Beckoning_Cat.svg",
                category: "animals"
            }, {
                name: "monster truck",
                filepath: "./media/clipart/animals/monster_truck.svg",
                category: "animals"
            }, {
                name: "MrBordello Chimpzilla",
                filepath: "./media/clipart/animals/MrBordello_Chimpzilla.svg",
                category: "animals"
            }, {
                name: "qilin",
                filepath: "./media/clipart/animals/qilin.svg",
                category: "animals"
            }, {
                name: "rg1024 Little octopus",
                filepath: "./media/clipart/animals/rg1024_Little_octopus.svg",
                category: "animals"
            }, {
                name: "stone-giant",
                filepath: "./media/clipart/animals/stone-giant.svg",
                category: "animals"
            }, {
                name: "StudioFibonacci Cartoon peacock",
                filepath: "./media/clipart/animals/StudioFibonacci_Cartoon_peacock.svg",
                category: "animals"
            }, {
                name: "StudioFibonacci Cartoon Pterodactyl",
                filepath: "./media/clipart/animals/StudioFibonacci_Cartoon_Pterodactyl.svg",
                category: "animals"
            }, {
                name: "StudioFibonacci Cartoon triceratops",
                filepath: "./media/clipart/animals/StudioFibonacci_Cartoon_triceratops.svg",
                category: "animals"
            }],
            people: [{
                name: "1300463358",
                filepath: "./media/clipart/people/1300463358.svg",
                category: "people"
            }, {
                name: "archer",
                filepath: "./media/clipart/people/archer.svg",
                category: "people"
            }, {
                name: "burglar",
                filepath: "./media/clipart/people/burglar.svg",
                category: "people"
            }, {
                name: "centaur",
                filepath: "./media/clipart/people/centaur.svg",
                category: "people"
            }, {
                name: "dwarf",
                filepath: "./media/clipart/people/dwarf.svg",
                category: "people"
            }, {
                name: "girl with lantern",
                filepath: "./media/clipart/people/girl_with_lantern.svg",
                category: "people"
            }, {
                name: "johnny automatic geisha playing shamisen",
                filepath: "./media/clipart/people/johnny_automatic_geisha_playing_shamisen.svg",
                category: "people"
            }, {
                name: "ninja",
                filepath: "./media/clipart/people/ninja.svg",
                category: "people"
            }],
            plants: [{
                name: "1313071007",
                filepath: "./media/clipart/plants/1313071007.svg",
                category: "plants"
            }, {
                name: "automne",
                filepath: "./media/clipart/plants/automne.svg",
                category: "plants"
            }, {
                name: "baronchon palm trees 1",
                filepath: "./media/clipart/plants/baronchon_palm_trees_1.svg",
                category: "plants"
            }, {
                name: "ete",
                filepath: "./media/clipart/plants/ete.svg",
                category: "plants"
            }, {
                name: "mekonee 29 vegetables set 1",
                filepath: "./media/clipart/plants/mekonee_29_vegetables_set_1.svg",
                category: "plants"
            }, {
                name: "mekonee 29 vegetables set 2",
                filepath: "./media/clipart/plants/mekonee_29_vegetables_set_2.svg",
                category: "plants"
            }, {
                name: "mekonee 29 vegetables set 7",
                filepath: "./media/clipart/plants/mekonee_29_vegetables_set_7.svg",
                category: "plants"
            }, {
                name: "molumen fern",
                filepath: "./media/clipart/plants/molumen_fern.svg",
                category: "plants"
            }, {
                name: "rg1024 country landscape ",
                filepath: "./media/clipart/plants/rg1024_country_landscape_.svg",
                category: "plants"
            }, {
                name: "spring",
                filepath: "./media/clipart/plants/spring.svg",
                category: "plants"
            }, {
                name: "treehouse",
                filepath: "./media/clipart/plants/treehouse.svg",
                category: "plants"
            }]
        }
    };
    a.lib.init("clipart");
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.vector && (sketch.vector = {});
"undefined" === typeof sketch.vector.shape && (sketch.vector.shape = {});
(function(a) {
    var h = 2 * Math.PI;
    a.VOBNode = function(d, g) {
        switch (g.type) {
            case "image":
                d.drawImage(g.image, g.x, g.y, g.width, g.height);
                break;
            case "line":
                d.moveTo(g.x1, g.y1);
                d.lineTo(g.x2, g.y2);
                break;
            case "polyline":
            case "polygon":
            case "path":
                a.VOBPath(d, g.data);
                break;
            case "ellipse":
                a.ellipse(d, g.cx, g.cy, g.rx, g.ry);
                break;
            case "circle":
                a.ellipse(d, g.cx, g.cy, g.r, g.r);
                break;
            case "rect":
                isFinite(g.rx) ? a.roundRect(d, g.x, g.y, g.width, g.height, g.rx, g.ry) : a.rect(d, g.x, g.y, g.width + g.x, g.height + g.y)
        }
    };
    a.record = function() {
        this.data = [];
        this.moveTo = function(a, g) {
            this.data.push({
                cmd: "M",
                x: a,
                y: g
            })
        };
        this.lineTo = function(a, g) {
            this.data.push({
                cmd: "L",
                x: a,
                y: g
            })
        };
        this.bezierCurveTo = function(a, g, b, e, f, c) {
            this.data.push({
                cmd: "C",
                x1: a,
                y1: g,
                x2: b,
                y2: e,
                x: f,
                y: c
            })
        };
        this.quadraticCurveTo = function(a, g, b, e) {
            this.data.push({
                cmd: "Q",
                x1: a,
                y1: g,
                x: b,
                y: e
            })
        };
        this.arcTo = function(a, g, b, e, f) {
            this.data.push({
                cmd: "A",
                x1: a,
                y1: g,
                x2: b,
                y2: e,
                radius: f
            })
        };
        this.closePath = function() {
            this.data.push({
                cmd: "Z"
            })
        };
        this.stringify = function() {
            return sketch.vector.SVGPath.fromVOBPath(this.data)
        }
    };
    a.point = {};
    a.circle = function(d, g, b, e) {
        return a.ellipse(d, g, b, e, e)
    };
    a.ellipse = function(a, g, b, e, f) {
        a.moveTo(g, b - f);
        a.bezierCurveTo(g + 0.5522847498307936 * e, b - f, g + e, b - 0.5522847498307936 * f, g + e, b);
        a.bezierCurveTo(g + e, b + 0.5522847498307936 * f, g + 0.5522847498307936 * e, b + f, g, b + f);
        a.bezierCurveTo(g - 0.5522847498307936 * e, b + f, g - e, b + 0.5522847498307936 * f, g - e, b);
        a.bezierCurveTo(g - e, b - 0.5522847498307936 * f, g - 0.5522847498307936 * e, b - f, g, b - f);
        a.closePath()
    };
    a.line = function(a, g, b, e, f) {
        a.moveTo(g, b);
        a.lineTo(e, f)
    };
    a.SVGPath = function(d, g) {
        g = sketch.vector.SVG.toVOBPath(g);
        return a.VOBPath(d, g)
    };
    a.VOBPath = function(a, g) {
        var b, e;
        for (e in g) switch ((b = g[e]).cmd) {
            case "M":
                a.moveTo(b.x, b.y);
                break;
            case "L":
                a.lineTo(b.x, b.y);
                break;
            case "Q":
                a.quadraticCurveTo(b.x1, b.y1, b.x, b.y);
                break;
            case "C":
                a.bezierCurveTo(b.x1, b.y1, b.x2, b.y2, b.x, b.y);
                break;
            case "A":
                a.arcTo(b.x1, b.y1, b.x2, b.y2, b.radius);
                break;
            case "Z":
            case "z":
                a.closePath()
        }
    };
    a.VOBPathDebug = function(a, g) {
        var b, e = "",
            f;
        for (f in g) switch ((b = g[f]).cmd) {
            case "M":
                e += "ctx.moveTo(" + b.x + "," + b.y + ");\n";
                break;
            case "L":
                e += "ctx.lineTo(" + b.x + "," + b.y + ");\n";
                break;
            case "Q":
                e += "ctx.quadraticCurveTo(" + b.x1 + "," + b.y1 + "," + b.x + "," + b.y + ");\n";
                break;
            case "C":
                e += "ctx.bezierCurveTo(" + b.x1 + "," + b.y1 + "," + b.x2 + "," + b.y2 + "," + b.x + "," + b.y + ");\n";
                break;
            case "A":
                e += "ctx.arcTo(" + b.x1 + "," + b.y1 + "," + b.x2 + "," + b.y2 + "," + b.radius + ");\n";
                break;
            case "Z":
            case "z":
                e += "ctx.closePath();\n"
        }
        console.log(e)
    };
    a.square = function(d, g, b, e, f) {
        a.rect(d, g, b, e, f)
    };
    a.rectangle = a.rect = function(a, g, b, e, f) {
        0 >= g - e !== 0 >= b - f ? (a.moveTo(g,
            b), a.lineTo(e, b), a.lineTo(e, f), a.lineTo(g, f)) : (a.moveTo(g, b), a.lineTo(g, f), a.lineTo(e, f), a.lineTo(e, b));
        a.lineTo(g, b);
        a.closePath()
    };
    a.roundRectangle = a.roundRect = function(a, g, b, e, f, c, k) {
        0 > e && (g += e, e = Math.abs(e));
        0 > f && (b += f, f = Math.abs(f));
        isFinite(k) || (k = c);
        var h = -Math.PI / 2,
            l = Math.PI / 4;
        c > Math.min(e, f) / 2 && (c = Math.min(e, f) / 2);
        k > Math.min(e, f) / 2 && (k = Math.min(e, f) / 2);
        a.moveTo(g + c, b);
        a.lineTo(g + e - c, b);
        a.quadraticCurveTo(g + e - c + Math.cos(h + l / 2) * c / Math.cos(l / 2), b + k + Math.sin(h + l / 2) * k / Math.cos(l / 2), g + e - c + Math.cos(h + l) * c, b + k + Math.sin(h + l) * k);
        a.quadraticCurveTo(g + e - c + Math.cos((h += l) + l / 2) * c / Math.cos(l / 2), b + k + Math.sin(h + l / 2) * k / Math.cos(l / 2), g + e - c + Math.cos(h + l) * c, b + k + Math.sin(h + l) * k);
        a.lineTo(g + e, b + f - k);
        a.quadraticCurveTo(g + e - c + Math.cos((h += l) + l / 2) * c / Math.cos(l / 2), b + f - k + Math.sin(h + l / 2) * k / Math.cos(l / 2), g + e - c + Math.cos(h + l) * c, b + f - k + Math.sin(h + l) * k);
        a.quadraticCurveTo(g + e - c + Math.cos((h += l) + l / 2) * c / Math.cos(l / 2), b + f - k + Math.sin(h + l / 2) * k / Math.cos(l / 2), g + e - c + Math.cos(h + l) * c, b + f - k + Math.sin(h + l) * k);
        a.lineTo(g + c, b + f);
        a.quadraticCurveTo(g + c + Math.cos((h += l) + l / 2) * c / Math.cos(l / 2), b + f - k + Math.sin(h + l / 2) * k / Math.cos(l / 2), g + c + Math.cos(h + l) * c, b + f - k + Math.sin(h + l) * k);
        a.quadraticCurveTo(g + c + Math.cos((h += l) + l / 2) * c / Math.cos(l / 2), b + f - k + Math.sin(h + l / 2) * k / Math.cos(l / 2), g + c + Math.cos(h + l) * c, b + f - k + Math.sin(h + l) * k);
        a.lineTo(g, b + k);
        a.quadraticCurveTo(g + c + Math.cos((h += l) + l / 2) * c / Math.cos(l / 2), b + k + Math.sin(h + l / 2) * k / Math.cos(l / 2), g + c + Math.cos(h + l) * c, b + k + Math.sin(h + l) * k);
        a.quadraticCurveTo(g + c + Math.cos((h += l) + l / 2) * c / Math.cos(l / 2), b + k + Math.sin(h + l / 2) * k / Math.cos(l / 2), g + c + Math.cos(h + l) * c, b + k + Math.sin(h + l) * k);
        a.closePath()
    };
    a.wedge = function(a, g, b, e, f, c, k) {
        a.moveTo(g, b);
        a.arc(g, b, e, f, c, k);
        a.lineTo(g, b);
        a.closePath()
    };
    a.triangle = function(d, g, b, e) {
        a.regularPolygon(d, g, b, e, 3)
    };
    a.regularPolygon = function(a, g, b, e, f) {
        a.moveTo(g, b - e);
        for (var c = 1, k; c < f; c++) k = 0.017453 * 360 / f * c, a.lineTo(Math.sin(k) * e + g, - Math.cos(k) * e + b);
        a.lineTo(g, b - e);
        a.closePath()
    };
    a.gear = function(a, g, b, e, f, c) {
        1 > c && (e *= c);
        var k = h / f,
            m = k / 4;
        c = e / c;
        a.moveTo(e + g, b);
        for (var l = 1; l <= f; l++) a.lineTo(Math.cos(k * l - 3 * m) * c + g, Math.sin(k * l - 3 * m) * c + b), a.lineTo(Math.cos(k * l - 2 * m) * c + g, Math.sin(k * l - 2 * m) * c + b), a.lineTo(Math.cos(k * l - m) * e + g, Math.sin(k * l - m) * e + b), a.lineTo(Math.cos(k * l) * e + g, Math.sin(k * l) * e + b);
        a.closePath()
    };
    a.star = function(a, g, b, e, f, c) {
        1 > c && (e *= c);
        var k = h / f,
            m = k / 2;
        c = e / c;
        a.moveTo(e + g, b);
        for (var l = 1; l <= f; l++) a.lineTo(Math.cos(k * l - m) * c + g, Math.sin(k * l - m) * c + b), a.lineTo(Math.cos(k * l) * e + g, Math.sin(k * l) * e + b);
        a.closePath()
    };
    a.burst = function(a, g, b, e, f, c) {
        1 > c && (e *= c);
        var k = h / f,
            m = k / 2,
            l = k / 4;
        c = e / c;
        var p = 0;
        a.moveTo(e + g, b);
        for (p = 1; p <= f; p++) a.quadraticCurveTo(Math.cos(k * p - 3 * l) * (c / Math.cos(l)) + g, Math.sin(k * p - 3 * l) * (c / Math.cos(l)) + b, Math.cos(k * p - m) * c + g, Math.sin(k * p - m) * c + b), a.quadraticCurveTo(Math.cos(k * p - l) * (c / Math.cos(l)) + g, Math.sin(k * p - l) * (c / Math.cos(l)) + b, Math.cos(k * p) * e + g, Math.sin(k * p) * e + b);
        a.closePath()
    };
    a.radialBurst = function(a, g, b, e, f, c) {
        c = 4 * c || 1;
        var k = h / f,
            m = k / 8,
            l = k / 4;
        a.moveTo(e + g, b);
        for (var p = 1; p <= f; p++) a.moveTo(0 * Math.cos(k * p - m * c) + g, 0 * Math.sin(k * p - m * c) + b), a.lineTo(Math.cos(k * p - l * c) * e + g, Math.sin(k * p - l * c) * e + b), a.lineTo(Math.cos(k * p) * e + g, Math.sin(k * p) * e + b), a.lineTo(0 * Math.cos(k * p - m * c) + g, 0 * Math.sin(k * p - m * c) + b);
        a.closePath()
    };
    a.spiral = function(d, g, b, e, f, c, k) {
        var m = 0,
            l = 0,
            p = 0,
            r = 0;
        c = c / f * h;
        var q = "moveTo";
        if (k) for (k = f; 0 < k; k--) {
            var p = Math.pow(e, k / f),
                u = k * c,
                m = Math.cos(u) * p + g,
                p = Math.sin(u) * p + b;
            if (a[q]) l = Math.sqrt(Math.pow(m - l, 2) + Math.pow(p - r, 2)), a[q](d, m, p, l / 2, 5, 3.35);
            else d[q](m, p);
            "moveTo" === q && (a.point.x = m, a.point.y = p, q = "lineTo");
            l = m;
            r = p
        } else {
            for (k = 0; k <= f; k++) p = Math.pow(e, k / f), u = k * c, m = Math.cos(u) * p + g, p = Math.sin(u) * p + b, d.lineTo(m, p);
            a.point.x = m;
            a.point.y = p
        }
        d.closePath()
    };
    a.spirals = function(d, g, b, e, f, c, k, m) {
        for (m = f; m--;) {
            d.save();
            d.translate(g, b);
            d.rotate(m * h / f);
            d.translate(-g, - b);
            d.moveTo(g, b);
            var l = 100 * c;
            a.spiral(d, g, b, e * k, l, c, !0);
            var p = a.point.x,
                r = a.point.y;
            a.spiral(d, g, b, e, l, c);
            d.lineTo(p, r);
            d.restore()
        }
        d.closePath()
    };
    a.supershape = a.superformula = function(a, g, b, e, f, c, k, m, l) {
        0 === c && (c = 0.01);
        0 === k && (k = -0.01);
        0 === m && (m = 0.01);
        0 === l && (l = 0.01);
        for (var p = "moveTo", r = 0; r <= f; r++) {
            var q = r * h / f,
                u = Math.pow(Math.abs(Math.cos(c * q / 4) / 1), m),
                v = Math.pow(Math.abs(Math.sin(c * q / 4) / 1), l),
                v = Math.pow(u + v, 1 / k);
            0 === v ? q = u = 0 : (v = 1 / v, u = v * Math.cos(q), q = v * Math.sin(q));
            a[p](u * e + g, q * e + b);
            p = "lineTo"
        }
        a.closePath()
    };
    a.clearPath = function(d, g, b, e, f, c, k, h, l) {
        var p = d.globalCompositeOperation;
        d.beginPath();
        d.globalCompositeOperation = "destination-out";
        a[g](d, g, b, e, f, c, k, h, l);
        d.fill();
        d.globalCompositeOperation = p;
        d.beginPath()
    };
    a.clipPath = function(d, g, b, e, f, c, k, h, l) {
        d.beginPath();
        a[g](d, g, b, e, f, c, k, h, l);
        d.clip()
    }
})(sketch.vector.shape);
"undefined" !== typeof module && module.exports && (module.exports = sketch.vector.shape);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.vector && (sketch.vector = {});
"undefined" === typeof sketch.vector.shape && (sketch.vector.shape = {});
(function(a) {
    var h = {};
    a.vector.shape.imperfectCircle = function(a, b, e, f, c, k, m) {
        h = new sketch.util.Random(m);
        var l, p, r = 2 * Math.PI,
            q;
        m = d(9).first;
        p = k;
        l = f + m.y * (c - f);
        q = b + l * Math.cos(p);
        l = e + l * Math.sin(p);
        for (a.lineTo(q, l); null != m.next;) m = m.next, p = r * m.x + k, l = f + m.y * (c - f), q = b + l * Math.cos(p), l = e + l * Math.sin(p), a.lineTo(q, l)
    };
    a.vector.shape.imperfectRect = function(a, b, e, f, c, k, m) {
        h = new sketch.util.Random(m);
        m = [];
        var l = [],
            p;
        b += 3 * (2 * h.toDouble() - 1);
        e += 3 * (2 * h.toDouble() - 1);
        for (p = 0; 4 > p; p++) m[p] = {};
        m[0].x = b + 3 * (2 * h.toDouble() - 1);
        m[0].y = e + 3 * (2 * h.toDouble() - 1);
        m[1].x = b + f + 3 * (2 * h.toDouble() - 1);
        m[1].y = e + 3 * (2 * h.toDouble() - 1);
        m[2].x = b + f + 3 * (2 * h.toDouble() - 1);
        m[2].y = e + c + 3 * (2 * h.toDouble() - 1);
        m[3].x = b + 3 * (2 * h.toDouble() - 1);
        m[3].y = e + c + 3 * (2 * h.toDouble() - 1);
        l[0] = {
            x: 0,
            y: k
        };
        l[1] = {
            x: k,
            y: 0
        };
        l[2] = {
            x: 0,
            y: k
        };
        l[3] = {
            x: k,
            y: 0
        };
        a.moveTo(m[0].x, m[0].y);
        for (p = 0; 4 > p; p++) for (b = m[(p + 1) % 4], e = d(8), c = e.first, k = c.y; null != c;) e = m[p].x + c.x * (b.x - m[p].x), f = m[p].y + c.x * (b.y - m[p].y), e += l[p].x * (c.y - k), f += l[p].y * (c.y - k), a.lineTo(e, f), c = c.next
    };
    var d = function(a) {
        for (var b = {
            first: {
                next: {
                    x: 1,
                    y: 1
                },
                x: 0,
                y: 1
            }
        }, e = 1, d = 1, c, k, m, l, p, r = 0; r < a; r++) for (c = b.first; null != c.next;) k = c.next, p = 0.33 + h.toDouble() * (1 - 0.66), l = c.x + p * (k.x - c.x), m = 0.5 > p ? l - c.x : k.x - l, p = c.y + p * (k.y - c.y), p += m * (2 * h.toDouble() - 1), m = {
            x: l,
            y: p
        }, p < e ? e = p : p > d && (d = p), m.next = k, c.next = m, c = k;
        if (d !== e) for (a = 1 / (d - e), c = b.first; null != c;) c.y = a * (c.y - e), c = c.next;
        else for (c = b.first; null != c;) c.y = 1, c = c.next;
        return b
    }
})(sketch);
(function(a) {
    a.toolkit.register("shape", function(d) {
        var g = this;
        this.type = "shape";
        this.active = d.active.ctx;
        this.cache = d.cache.ctx;
        this.ctx = d.layer0.ctx;
        this.device = {};
        this.device.fill = {};
        this.time = this.gid = 0;
        this.batches = {};
        this.events = {};
        this.path = {};
        this.enable = function() {
            this.disable();
            this.device.useGesture = !1;
            this.events[this.gid] = g.device.useGesture ? eventjs.add(this.active.canvas, "gesture", new this.record) : eventjs.add(this.active.canvas, "drag", new this.record);
            a.tool !== a.toolkit.select && a.toolkit.select.enable({
                mouse: !1
            })
        };
        this.disable = function() {
            for (var b in this.events) this.events[b].remove(), delete this.events[b];
            a.tool !== a.toolkit.select && a.toolkit.select.disable({
                mouse: !1
            })
        };
        this.changeDevice = function(b, c, e) {
            this.device = a.util.clone(b);
            this.loadResource({
                action: this.device,
                onload: e
            })
        };
        this.changeColor = function(a) {
            this.device.fill.type = "color";
            this.device.fill.color = a;
            this.device.fill.__colors = [0, a]
        };
        this.getDevice = function(b, c) {
            var e = a.util.clone(a.configure.tools[b]);
            this.loadResource({
                action: e,
                onload: c
            });
            return e
        };
        this.attributes = {
            seed: "number",
            composite: "string",
            movement: "string",
            opacity: "number",
            roundness: "number",
            imperfection: "number",
            sides: "number",
            slope: "number",
            coils: "number",
            spread: "number",
            points: "number",
            m: "number",
            n1: "number",
            n2: "number",
            n3: "number",
            fill: "style",
            stroke: "style"
        };
        this.cloneAttributes = function(b, c) {
            var e = this.attributes,
                d;
            for (d in e) {
                var f = e[d],
                    g = b[d];
                switch (f) {
                    case "number":
                        isFinite(g) && (c[d] = g);
                        break;
                    case "string":
                        g && (c[d] = g);
                        break;
                    case "style":
                        g && (c[d] = a.util.clone(g));
                        break;
                    default:
                        console.log("unhandled",
                            f)
                }
            }
            return c
        };
        this.updateActionSize = function(b) {
            a.toolkit.updateActionSize(b, g)
        };
        this.loadResource = function(b) {
            var c = b.action,
                e = b.onload;
            "string" === typeof c && (c = {
                type: c
            });
            if (b = a.configure.tools[c.type]) {
                c.dirty = !0;
                c.render = f;
                b = g.cloneAttributes(c, a.util.clone(b));
                c.fill || (c.fill = b.fill || a.style.fill);
                c.stroke || (c.stroke = b.stroke || a.style.stroke);
                c.composite || (c.composite = b.composite || "source-over");
                c.movement || (c.movement = b.movement || "placement");
                c.type || (c.type = b.type || "star");
                c.seed = c.seed || a.util.Random.seed();
                var d = this.attributes,
                    k;
                for (k in d) switch (d[k]) {
                    case "number":
                        b[k] && isFinite(b[k].value) && (c[k] = b[k].value)
                }
                a.style.load(c, function(a) {
                    e && e(c)
                })
            } else e && e(c)
        };
        this.record = function() {
            var c = g.gid;
            return function(d, k, h) {
                var u = k.state,
                    v = "down" === u || "start" === u,
                    s = "up" === u || "end" === u,
                    x = !! d,
                    w = a.toolkit.genMouseId(d, k);
                if (u = x ? g.device : g.deviceProxy[w]) {
                    g.deviceLastRecordId = w;
                    g.deviceLastRecord = u;
                    v ? (u.seed = a.util.Random.seed(), u.cache = {}, u.cache.start = {
                        x: k.x,
                        y: k.y
                    }) : x && eventjs.cancel(d);
                    var A = k.start || u.cache.start;
                    x && (a.dataChannel && a.feature.stream.sketchLive) && a.dataChannel.send(["shape", u.type, k.state + "," + k.x + "," + k.y + "," + w, v ? u.fill : null]);
                    var y = g.batches[w];
                    y || (y = g.batches[w] = [], y.time = g.time);
                    d = a.canvas2d;
                    var z = d.zoom,
                        x = d.zoom * d.pixelRatio,
                        B = (z - 1) / z,
                        D = a.project.scrollLeft * B,
                        B = a.project.scrollTop * B;
                    if (u.useGesture) if (v) g.gestures++, g.events[++g.gid] = eventjs.add(g.active.canvas, "gesture", new g.record);
                    else {
                        s && (g.gestures--, g.events[c].remove(), g.time = y.time, delete g.events[c]);
                        var E = {};
                        E.pt1 = k.touches[0];
                        E.pt2 = k.touches[1];
                        E.rotation = k.rotation;
                        E.state = k.state;
                        E.time = g.time;
                        y[0] = E
                    } else {
                        var E = {}, v = A.x / z + D,
                            G = A.y / z + B;
                        k.y = k.y / z + B;
                        k.x = k.x / z + D;
                        if ("drag" === u.movement) {
                            E.pt1 = {
                                x: b[w],
                                y: e[w]
                            };
                            b[w] = k.x;
                            e[w] = k.y;
                            if ("undefined" === typeof E.pt1.x) return;
                            s && (delete b[w], delete e[w])
                        } else E.pt1 = {
                            x: v,
                            y: G
                        };
                        E.pt2 = {
                            x: k.x,
                            y: k.y
                        };
                        E.rotation = -Math.atan2(k.x - E.pt1.x, k.y - E.pt1.y) * a.util.RAD_DEG + 180;
                        E.state = k.state;
                        E.time = g.time;
                        y[0] = E
                    }
                    s ? !1 !== (A.x !== k.x || A.y !== k.y) && (k = g.cloneAttributes(u, a.scene.fromConfigure(a.configure.tools[a.tool.type])),
                        k.data = g.path, k.toolkit = {
                        device: u
                    }, k.firstRecord = !0, A = !! eventjs.metaKey, y = !! eventjs.shiftKey, a.detect.shapeConstrain[g.type] ? (A = !y, y = !0) : A && (y = !0), k = a.util.clone(E), s = k.pt1, w = k.pt2, u.useGesture ? (v = w.x - s.x, z = w.y - s.y, v = Math.max(0, Math.sqrt(v * v + z * z) - 75)) : (v = w.x - s.x, z = w.y - s.y, v = Math.max(0, Math.sqrt(v * v + z * z))), !1 === A && (E.rotation = 0), y ? y = A = 1 : (Math.abs(s.x - w.x) > Math.abs(s.y - w.y) ? (A = 1, y = Math.abs(s.y - w.y) / Math.abs(s.x - w.x)) : (A = Math.abs(s.x - w.x) / Math.abs(s.y - w.y), y = 1), isFinite(A) || (A = 0), isFinite(y) || (y = 0)),
                        z = s.x - v * A, D = s.y - v * y, s.x -= z, s.y -= D, w.x -= z, w.y -= D, E = g.cloneAttributes(u, {
                        type: g.type,
                        data: k,
                        composite: u.composite,
                        opacity: u.opacity,
                        render: g.renderAction,
                        bbox: {
                            x: z + 0 - 1 * d.x / x,
                            y: D + 0 - 1 * d.y / x,
                            width: 2 * v,
                            height: 2 * v,
                            rotate: E.rotation,
                            units: "objectBoundingBox",
                            scale: {
                                x: A,
                                y: y
                            }
                        }
                    }), E = a.scene.addObject(E), E.render = f, E.dirty = !0, a.active.canvas.width = a.active.canvas.width, a.style.updateCache(E), a.scene.deselectAll(), a.render("root.shape.record"), a.history && a.history.store("add", [a.scene.clone(E)]), h && setTimeout(h,
                        0)) : (g.dirty = !0, g.rendering || requestAnimationFrame(m))
                }
            }
        };
        var b = {}, e = {}, f = function(b, e, d) {
            var f = this.data;
            if ("undefined" !== typeof f.pt1 && "undefined" !== typeof f.pt2) {
                this.isRecording = !1;
                if (!this) return console.log("missing device");
                var k = this.bbox,
                    m = k.scale.x,
                    s = k.scale.y,
                    x = 1,
                    w = 1;
                b.save();
                b.beginPath();
                !1 !== d ? (e.matrix.x = k.viewBox[0] * k.scale.x, e.matrix.y = k.viewBox[1] * k.scale.y, e.apply(b, !0)) : (x = m, w = s);
                if (g.device.useGesture) {
                    e = f.pt1;
                    d = f.pt2;
                    var A = (e.x + d.x) / 2,
                        y = (e.y + d.y) / 2,
                        z = d.x - e.x,
                        B = d.y - e.y,
                        D = Math.max(0,
                            Math.sqrt(z * z + B * B) - 75)
                } else e = f.pt1, d = f.pt2, A = e.x, y = e.y, z = d.x - A, B = d.y - y, D = Math.max(0, Math.sqrt(z * z + B * B));
                A = k.width / 2;
                y = k.height / 2;
                h(b, A, y, z, B, D, this);
                b.restore();
                b.save();
                b.globalCompositeOperation = a.style.getComposite(this.composite, f.time);
                c(b, "fill", e, d, z, B, x, w, m, s, this, this);
                f = this.stroke;
                f.lineWidth && f.opacity && (b.lineWidth = f.lineWidth, b.lineJoin = f.lineJoin, b.lineCap = f.lineCap, b.miterLimit = f.miterLimit, c(b, "stroke", e, d, z, B, x, w, m, s, this, this));
                b.restore()
            }
        }, c = function(b, c, e, d, f, k, h, m, w, A, y, z) {
            y = y.bbox;
            var B = z[c];
            if ("color" === B.type) b[c + "Style"] = B.color, b[c]();
            else if ("cycle" === B.mode) w = z[c].__colors, A = (2 * self.time+++1) % w.length, b[c + "Style"] = w[A], b[c]();
            else if (g.device.useGesture) f = e.x / h, e = e.y / m, h = d.x / h, d = d.y / m, b[c + "Style"] = a.style.createGradient(c, g.ctx, f, e, h, d, z), b[c]();
            else {
                f = (e.x - f) / h;
                e = (e.y - k) / m;
                h = d.x / h;
                d = d.y / m;
                k = m = 0;
                w > A ? k = (w - A) * (y.height / 2) / w : m = (A - w) * (y.width / 2) / A;
                var D = (f + h) / 2,
                    E = (e + d) / 2;
                b.save();
                "pattern" === B.type && b.translate(-y.x, - y.y);
                b.scale(w, A);
                b.translate(D + m, E + k);
                b.translate(-D, - E);
                b[c + "Style"] = a.style.createGradient(c, g.ctx, f, e, h, d, z);
                b[c]();
                b.restore()
            }
        }, k = function(b, c, e, d, f, k, h, m, w, A, y, z) {
            var B = z[c];
            if ("color" === B.type) b[c + "Style"] = B.color, b[c]();
            else if ("cycle" === B.mode) z = z[c].__colors, e = (2 * self.time+++1) % z.length, b[c + "Style"] = z[e], b[c]();
            else if (f = e.x - f - w, k = e.y - k - A, w = d.x - w, A = d.y - A, !1 !== y) {
                B = y = 0;
                h > m ? B = e.y / m - e.y : y = e.x / h - e.x;
                var D = (f + w) / 2,
                    E = (k + A) / 2;
                b.save();
                b.scale(h, m);
                b.translate(D + y, E + B);
                b.rotate(-Math.atan2(d.x - e.x, d.y - e.y) - Math.PI);
                b.translate(-D, - E);
                "pattern" === z[c].type && (e = a.canvas2d, b.translate(e.x / e.zoom, e.y / e.zoom));
                b[c + "Style"] = a.style.createGradient(c, g.ctx, f, k, w, A, z);
                b[c]();
                b.restore()
            } else b[c + "Style"] = a.style.createGradient(c, g.ctx, f, k, w, A, z), b[c]()
        }, m = function() {
            if (g.dirty) {
                (new Date).getTime();
                var b = g.device,
                    c = !1,
                    e = g.active,
                    d = !! eventjs.metaKey,
                    f = !! eventjs.shiftKey;
                a.detect.shapeConstrain[g.type] ? (d = !f, f = !0) : d && (f = !0);
                var v = a.project.scrollLeft,
                    s = a.project.scrollTop;
                b.ctx = g.ctx;
                b.active = g.active;
                b.cache = g.cache;
                b.isRecording = !0;
                var x = a.canvas2d,
                    x = x.zoom * x.pixelRatio;
                g.active.canvas.width = g.active.canvas.width;
                g.active.scale(x, x);
                for (var w in g.batches) for (var x = g.batches[w], A = 0; A < x.length; A++) {
                    var y = x.shift(),
                        z = "end" === y.state || "up" === y.state,
                        c = !0;
                    if ("placement" === b.movement) {
                        if (z) continue;
                        x[0] = y
                    }
                    e.save();
                    e.beginPath();
                    if (g.device.useGesture) var B = y.pt1,
                        D = y.pt2,
                        E = (B.x + D.x) / 2,
                        G = (B.y + D.y) / 2,
                        J = D.x - B.x,
                        C = D.y - B.y,
                        O = Math.max(0, Math.sqrt(J * J + C * C) - 75);
                    else B = y.pt1, D = y.pt2, E = B.x, G = B.y, J = D.x - B.x, C = D.y - B.y, O = Math.max(0, Math.sqrt(J * J + C * C));
                    !1 === d && (y.rotation = 0);
                    if (f) var N = 1,
                        L = 1;
                    else Math.abs(B.x - D.x) > Math.abs(B.y - D.y) ? (N = 1, L = Math.abs(B.y - D.y) / Math.abs(B.x - D.x)) : (N = Math.abs(B.x - D.x) / Math.abs(B.y - D.y), L = 1), isFinite(N) || (N = 0), isFinite(L) || (L = 0);
                    var Q = new a.vector.Transform;
                    Q.translate(E - v, G - s);
                    Q.scale(N, L);
                    Q.rotate(y.rotation * a.util.DEG_RAD);
                    Q.translate(-E * N, - G * L);
                    Q.apply(e, !0);
                    h(e, E * N, G * L, J, C, O, b);
                    e.restore();
                    e.save();
                    e.globalAlpha = b.opacity / 100;
                    e.globalCompositeOperation = a.style.getComposite(b.composite, x.time);
                    k(e, "fill", B, D, J, C, N, L, v, s, d,
                        b);
                    y = b.stroke;
                    y.lineWidth && y.opacity && (e.lineWidth = y.lineWidth, e.lineJoin = y.lineJoin, e.lineCap = y.lineCap, e.miterLimit = y.miterLimit, k(e, "stroke", B, D, J, C, N, L, v, s, d, b));
                    e.restore();
                    if (z) {
                        g.time = g.batches[w].time;
                        delete g.batches[w];
                        break
                    }
                }
                g.dirty = !1;
                "undefined" !== typeof w && c ? (requestAnimationFrame(m), g.rendering = !0) : g.rendering = !1
            } else requestAnimationFrame(m), g.rendering = !0
        };
        return a.toolkit.init(this)
    });
    var h = function(d, g, b, e, f, c, k) {
        e = f = c;
        var h = a.vector.shape;
        switch (k.type) {
            case "ellipse":
            case "circle":
                k.imperfection ? (c = k.imperfection / 2, h.imperfectCircle(d, g, b, e - c, f + c, 42, k.seed)) : h.ellipse(d, g, b, e, f);
                break;
            case "rectangle":
            case "square":
                k.roundness ? h.roundRect(d, g - e, b - f, 2 * e, 2 * f, k.roundness) : k.imperfection ? h.imperfectRect(d, g - e, b - f, 2 * e, 2 * f, k.imperfection, k.seed) : h.rect(d, g - e, b - f, g + e, b + f);
                break;
            case "triangle":
                k.sides = 3;
            case "regularPolygon":
                h.regularPolygon(d, g, b, c, k.sides >> 0);
                break;
            case "gear":
                h.gear(d, g, b, c, k.sides >> 0, k.slope);
                break;
            case "star":
                h.star(d, g, b, c, k.sides >> 0, k.slope);
                break;
            case "burst":
                h.burst(d,
                    g, b, c, k.sides >> 0, k.slope);
                break;
            case "radialBurst":
                h.radialBurst(d, g, b, c, k.sides >> 0, k.spread);
                break;
            case "spiral":
                h.spirals(d, g, b, c, k.sides >> 0, k.coils, 1 - k.spread / 100, k.fill.__colors);
                break;
            case "supershape":
                h.superformula(d, g, b, c, k.points, k.m >> 0, k.n1, k.n2, k.n3)
        }
    };
    a.toolkit.updateActionSize = function(a, g) {}
})(sketch);
var QueueLinearFloodFill = function() {
    var a, h, d, g, b, e, f, c, k, m, l, p, r, q, u, v, s, x, w, A, y, z, B, D, E, G, J = function(a) {
        k = a.src;
        m = a.srcRect || {
            x: 0,
            y: 0,
            width: s,
            height: x
        };
        l = a.srcData || k.getImageData(m.x, m.y, m.width, m.height);
        r = a.dst;
        q = a.dstRect || {
            x: 0,
            y: 0
        };
        u = a.dstData || r.getImageData(m.x, m.y, m.width, m.height);
        s = k.canvas.width || 0;
        x = k.canvas.height || 0;
        w = 4 * s;
        if ("number" === typeof a.tolerance) {
            var b = 255 * a.tolerance;
            A = [b, b, b, b]
        } else b = a.tolerance, A = [255 * b[0], 255 * b[1], 255 * b[2], 255 * b[3]];
        y = a.contiguous
    };
    J.prototype.render = function(J) {
        if (!isFinite(J.x) || !isFinite(J.y)) return console.log("point.x || point.y is NaN");
        var N = J.x,
            L = J.y;
        J = w * L + 4 * N;
        z = r.createImageData(s * x / 4 + 1 >> 0, 1).data;
        l || (l = k.getImageData(m.x, m.y, m.width, m.height));
        u || (u = r.getImageData(m.x, m.y, m.width, m.height));
        p = l.data;
        v = u.data;
        a = p[J] - A[0];
        h = p[J + 1] - A[1];
        d = p[J + 2] - A[2];
        g = p[J + 3] - A[3];
        b = p[J] + A[0];
        e = p[J + 1] + A[1];
        f = p[J + 2] + A[2];
        c = p[J + 3] + A[3];
        D = [];
        G = E = 0;
        if (y) for (C(N, L); 0 < G;) {
            B = D[E];
            E++;
            G--;
            for (var N = s * (B.y + 1) + B.startx, L = s * (B.y - 1) + B.startx, Q = B.y - 1, K = B.y + 1, F = B.endx,
                     aa = B.startx; aa <= F; aa++) J = w * Q + 4 * aa, 0 < B.y && (!z[L] && p[J] >= a && p[J] <= b && p[J + 1] >= h && p[J + 1] <= e && p[J + 2] >= d && p[J + 2] <= f && p[J + 3] >= g && p[J + 3] <= c) && C(aa, Q), J = w * K + 4 * aa, B.y < x - 1 && (!z[N] && p[J] >= a && p[J] <= b && p[J + 1] >= h && p[J + 1] <= e && p[J + 2] >= d && p[J + 2] <= f && p[J + 3] >= g && p[J + 3] <= c) && C(aa, K), N++, L++
        } else for (F = p.length, J = 0; J < F; J += 4) p[J] >= a && (p[J] <= b && p[J + 1] >= h && p[J + 1] <= e && p[J + 2] >= d && p[J + 2] <= f && p[J + 3] >= g && p[J + 3] <= c) && (v[J + 3] = 255);
        r.putImageData(u, q.x, q.y)
    };
    var C = function(k, l) {
        for (var m = k, q = w * l + 4 * k, r = s * l + k; z[r] = 1, v[q + 3] = 255, r--,
            q -= 4, m--, !(0 > m) && p[q] >= a && p[q] <= b && p[q + 1] >= h && p[q + 1] <= e && p[q + 2] >= d && p[q + 2] <= f && p[q + 3] >= g && p[q + 3] <= c;);
        for (var x = k, q = w * l + 4 * k, r = s * l + k; z[r] = 1, v[q + 3] = 255, r++, q += 4, x++, !(x >= s) && p[q] >= a && p[q] <= b && p[q + 1] >= h && p[q + 1] <= e && p[q + 2] >= d && p[q + 2] <= f && p[q + 3] >= g && p[q + 3] <= c;);
        G + E === D.length && (D.splice(0, E), E = 0);
        D[E + G] = {
            startx: ++m,
            endx: --x,
            y: l
        };
        G++
    };
    return J
}();
(function(a) {
    a.toolkit.register("brush.floodfill", function(h) {
        var d = this,
            g = a.style.createGradient;
        this.construct = function(a) {
            this.type = "floodfill";
            this.lineRecord = this.useStretchToEdge = !0;
            this.tolerance = a.tolerance || 25;
            this.antialias = a.antialias || !1;
            this.contiguous = a.contiguous || !1;
            a.callback(this)
        };
        this.prepare = function() {
            this.useCache = !1;
            return this.renderTo = this.ctx
        };
        this.render = function() {
            if (!this.isGhost && (!1 !== a.feature.vector.edit || "z" === this.cmd)) {
                var b = a.canvas2d.zoom;
                a.render("floodfill",

                    function() {
                        var e = d.bbox || {
                                x: 0,
                                y: 0,
                                scale: {
                                    x: 1,
                                    y: 1
                                }
                            }, f = a.canvas2d.layers.bitmap.ctx,
                            c = (e.scale.x || 1) * b,
                            k = d.path || action.data || [];
                        if ("gradient" === d.fill.type) var h = k[0],
                            k = k[1] || h;
                        else k = h = k[1] || k[0];
                        var l = Math.round(e.x + h.x * c),
                            e = Math.round(e.y + h.y * c),
                            c = a.ctx.canvas.width,
                            p = a.ctx.canvas.height;
                        f.canvas.width = c;
                        f.canvas.height = p;
                        if (100 === d.tolerance) d.ctx.save(), d.ctx.globalAlpha = d.opacity / 100, d.ctx.fillStyle = g("fill", d.ctx, 0, 0, c, p, d), d.ctx.fillRect(0, 0, c, p), d.ctx.restore();
                        else {
                            d.__rendering = !0;
                            f.clearRect(0,
                                0, c, p);
                            var r = d.isRecording ? 0 : Math.ceil(a.area.padding);
                            (new QueueLinearFloodFill({
                                src: a.ctx,
                                srcRect: {
                                    x: 0,
                                    y: 0,
                                    width: c,
                                    height: p
                                },
                                dst: f,
                                dstRect: {
                                    x: 0,
                                    y: 0
                                },
                                tolerance: d.tolerance / 100,
                                contiguous: d.contiguous
                            })).render({
                                    x: l - r,
                                    y: e - r
                                });
                            d.antialias && (f.drawImage(f.canvas, 0, 0, c, p, 0.5, 0.5, c, p), f.drawImage(f.canvas, 0, 0, c, p, - 0.5, - 0.5, c, p));
                            "erase" !== d.composite && (f.save(), f.globalCompositeOperation = "source-in", f.fillStyle = h.x === k.x && h.y === k.y ? g("fill", d.ctx, 0, 0, c, p, d) : g("fill", d.ctx, h.x - (k.x - h.x) - r, h.y - (k.y - h.y) - r, k.x - r, k.y - r, d), f.fillRect(0, 0, c, p), f.restore());
                            d.ctx.save();
                            d.ctx.globalAlpha = d.opacity / 100;
                            d.ctx.drawImage(f.canvas, 0, 0);
                            d.ctx.restore();
                            d.drawControl()
                        }
                    })
            }
        };
        this.drawControl = function(b) {
            b = b || d;
            var e = a.canvas2d,
                f = e.pixelRatio,
                c = a.project.scrollLeft,
                g = a.project.scrollTop;
            a.active.canvas.width = a.active.canvas.width;
            var h = a.active,
                l = a.area.padding,
                l = b.bbox || {
                    x: l,
                    y: l,
                    scale: {
                        x: 1,
                        y: 1
                    }
                }, e = (l.scale.x || 1) * e.zoom,
                p = d.path || b.data || [];
            if (b = "gradient" === d.fill.type) var r = p[0],
                q = p[1] || r;
            else q = r = p[1] || p[0];
            var u = a.area.padding,
                p = Math.round(l.x + r.x * e) - u - c,
                r = Math.round(l.y + r.y * e) - u - g,
                c = Math.round(l.x + q.x * e) - u - c,
                g = Math.round(l.y + q.y * e) - u - g;
            if ("select" === a.tool.type && a.tool.coord) {
                var v = a.tool.coord,
                    s = v.x,
                    x = v.y;
                d.last = void 0;
                d.control = void 0;
                a.tool.coord = void 0
            }
            b && (h.beginPath(), h.strokeStyle = "rgba(255,255,255,0.7)", h.moveTo(p, r), h.lineTo(c, g), h.stroke());
            h.beginPath();
            h.fillStyle = "#000";
            h.arc(p, r, 6 * f, 0, 2 * Math.PI);
            v && h.isPointInPath(s, x) && (h.fillStyle = "#f00", d.control = 0);
            h.fill();
            h.stroke();
            b && (h.beginPath(),
                h.fillStyle = "#000", h.arc(c, g, 4 * f, 0, 2 * Math.PI), v && h.isPointInPath(s, x) && (h.fillStyle = "#f00", d.control = 1), h.fill(), h.stroke());
            return [{
                id: "area",
                type: "button",
                bbox: {
                    units: "objectBoundingBox",
                    x: 0,
                    y: 0,
                    width: window.innerWidth,
                    height: window.innerHeight,
                    rotate: 0,
                    scale: {
                        x: 1,
                        y: 1
                    }
                }
            }]
        };
        this.move = function(b) {
            var e = a.canvas2d,
                f = e.zoom / e.pixelRatio,
                c = d.control,
                e = d.action,
                g = e.data,
                h = a.area.padding,
                l = b.x / f + h,
                f = b.y / f + h,
                h = {
                    x: l,
                    y: f
                };
            "undefined" === typeof c ? (c = d.last || h, g[0].x -= c.x - l, g[0].y -= c.y - f, g[1].x -= c.x - l, g[1].y -= c.y - f) : (g[c].x = l, g[c].y = f);
            e.dirtyCacheForce = !0;
            e.dirtyRender = !0;
            a.render("root.select.moveActions");
            d.last = "up" === b.state ? void 0 : h
        };
        this.construct(h)
    })
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.lib && (sketch.lib = {});
sketch = function(a) {
    a.lib.text = {
        defaultCategory: "Display",
        path: "./media/font",
        thumbnail: {
            _width: 197,
            _height: 40,
            columns: 1,
            rows: 4,
            padding: 0
        },
        tree: {
            yourFiles: [],
            "Sans Serif": [{
                name: "Arial",
                filepath: "",
                category: "Sans Serif"
            }, {
                name: "Abel",
                filepath: "abel/Abel-Regular",
                category: "Sans Serif"
            }, {
                name: "Acme",
                filepath: "acme/Acme-Regular",
                category: "Sans Serif"
            }, {
                name: "Droid Sans",
                filepath: "droidsans/DroidSans",
                category: "Sans Serif"
            }, {
                name: "Economica",
                filepath: "economica/Economica-Regular",
                category: "Sans Serif"
            }, {
                name: "Lato",
                filepath: "lato/Lato-Regular",
                category: "Sans Serif"
            }, {
                name: "Open Sans",
                filepath: "opensans/OpenSans-Regular",
                category: "Sans Serif"
            }, {
                name: "Oswald",
                filepath: "oswald/Oswald-Regular",
                category: "Sans Serif"
            }, {
                name: "PT Sans Narrow",
                filepath: "ptsansnarrow/PT_Sans-Narrow-Web-Regular",
                category: "Sans Serif"
            }, {
                name: "PT Sans",
                filepath: "ptsans/PT_Sans-Web-Regular",
                category: "Sans Serif"
            }, {
                name: "PT Mono",
                filepath: "ptmono/PTM55FT",
                category: "Sans Serif"
            }, {
                name: "Ubuntu Condensed",
                filepath: "ubuntucondensed/UbuntuCondensed-Regular",
                category: "Sans Serif"
            }],
            Serif: [{
                name: "Andada",
                filepath: "andada/Andada-Regular",
                category: "Serif"
            }, {
                name: "Droid Serif",
                filepath: "droidserif/DroidSerif",
                category: "Serif"
            }, {
                name: "Gentium Book Basic",
                filepath: "gentiumbookbasic/GenBkBasR",
                category: "Serif"
            }, {
                name: "Josefin Slab",
                filepath: "josefinsans/JosefinSans-Regular",
                category: "Serif"
            }, {
                name: "IM Fell English",
                filepath: "imfellenglish/IMFeENrm28P",
                category: "Serif"
            }, {
                name: "Merriweather",
                filepath: "merriweather/Merriweather-Regular",
                category: "Serif"
            }, {
                name: "Old Standard TT",
                filepath: "oldstandardtt/OldStandard-Regular",
                category: "Serif"
            }, {
                name: "PT Serif",
                filepath: "ptserif/PT_Serif-Web-Regular",
                category: "Serif"
            }, {
                name: "Playfair Display",
                filepath: "playfairdisplay/PlayfairDisplay-Regular",
                category: "Serif"
            }, {
                name: "Vollkorn",
                filepath: "vollkorn/Vollkorn-Regular",
                category: "Serif"
            }],
            Display: [{
                name: "Abril Fatface",
                filepath: "abrilfatface/AbrilFatface-Regular",
                category: "Display"
            }, {
                name: "Bubblegum Sans",
                filepath: "bubblegumsans/BubblegumSans-Regular",
                category: "Display"
            }, {
                name: "Cabin Sketch",
                filepath: "cabinsketch/CabinSketch-Regular",
                category: "Display"
            }, {
                name: "Chelsea Market",
                filepath: "chelseamarket/ChelseaMarket-Regular",
                category: "Display"
            }, {
                name: "Codystar",
                filepath: "codystar/Codystar-Regular",
                category: "Display"
            }, {
                name: "Comfortaa",
                filepath: "comfortaa/Comfortaa-Regular",
                category: "Display"
            }, {
                name: "Emilys Candy",
                filepath: "emilyscandy/EmilysCandy-Regular",
                category: "Display"
            }, {
                name: "Gravitas One",
                filepath: "gravitasone/GravitasOne",
                category: "Display"
            }, {
                name: "Jolly Lodger",
                filepath: "jollylodger/JollyLodger-Regular",
                category: "Display"
            }, {
                name: "Lobster",
                filepath: "lobster/Lobster",
                category: "Display"
            }, {
                name: "Londrina Shadow",
                filepath: "londrinashadow/LondrinaShadow-Regular",
                category: "Display"
            }, {
                name: "Londrina Solid",
                filepath: "londrinasolid/LondrinaSolid-Regular",
                category: "Display"
            }, {
                name: "Love Ya Like a Sister",
                filepath: "loveyalikeasister/LoveYaLikeASister",
                category: "Display"
            }, {
                name: "Mystery Quest",
                filepath: "mysteryquest/MysteryQuest-Regular",
                category: "Display"
            }, {
                name: "Supermercado One",
                filepath: "supermercadoone/SupermercadoOne-Regular",
                category: "Display"
            }],
            Handwriting: [{
                name: "Aladin",
                filepath: "aladin/Aladin-Regular",
                category: "Handwriting"
            }, {
                name: "Amatic SC",
                filepath: "amaticsc/AmaticSC-Regular",
                category: "Handwriting"
            }, {
                name: "Architects Daughter",
                filepath: "architectsdaughter/ArchitectsDaughter",
                category: "Handwriting"
            }, {
                name: "Arizonia",
                filepath: "arizonia/Arizonia-Regular",
                category: "Handwriting"
            }, {
                name: "Bilbo Swash Caps",
                filepath: "bilboswashcaps/BilboSwashCaps-Regular",
                category: "Handwriting"
            }, {
                name: "Delius Swash Caps",
                filepath: "deliusswashcaps/DeliusSwashCaps-Regular",
                category: "Handwriting"
            }, {
                name: "Italianno",
                filepath: "italiana/Italiana-Regular",
                category: "Handwriting"
            }, {
                name: "Maiden Orange",
                filepath: "maidenorange/MaidenOrange"
            }, {
                name: "Ruge Boogie",
                filepath: "rugeboogie/RugeBoogie-Regular",
                category: "Handwriting"
            }]
        }
    };
    a.lib.init("text");
    return a
}(sketch);
(function(a) {
    var h = String.fromCharCode(65279);
    a.toolkit.register("text", function(d) {
        var g = this;
        g.container = document.createElement("div");
        g.container.className = "sk-textarea-wrap";
        d.defaultWidth = d.defaultWidth || 300;
        d.defaultHeight = d.defaultHeight || 100;
        d.minWidth = d.minWidth || 15;
        d.minHeight = d.minHeight || 15;
        this.id = "text";
        this.ctx = d.layer0.ctx;
        this.active = d.active.ctx;
        this.cache = d.cache.ctx;
        this.enable = function() {
            var b = a.toolkit.select;
            a.tool !== b && b && b.enable({
                cursor: !0,
                search: this.type
            })
        };
        this.disable = function() {
            var b = a.toolkit.select;
            a.tool !== b && b && b.disable({
                cursor: !0
            })
        };
        this.loadResource = function(b) {
            var c = b.action,
                e = b.onload;
            c.dirty = !0;
            c.render = function(b, c, e) {
                a.__editing && this.id === a.selection.id || (b = {
                    ctx: b,
                    opacity: this.opacity,
                    composite: this.composite,
                    fill: this.fill,
                    fontStyle: this.fontStyle,
                    fontVariant: this.fontVariant,
                    fontWeight: this.fontWeight,
                    fontSize: this.fontSize,
                    fontFamily: this.fontFamily,
                    letterSpacing: this.letterSpacing,
                    lineHeight: this.lineHeight,
                    textAlign: this.textAlign,
                    textDecoration: this.textDecoration,
                    textTransform: this.textTransform,
                    whiteSpace: this.whiteSpace,
                    blur: this.blur,
                    content: this.content,
                    textMetrics: this.__textMetrics,
                    useHighRes: this.useHighRes,
                    applyMatrix: e
                }, b.bbox = a.util.clone(this.bbox), b.bbox.x = 0, b.bbox.y = 0, b.bbox.rotate = 0, this.__textMetrics = a.vector.text.drawLineBreaks(b))
            };
            b = c.fontFamily;
            var d = c.bbox;
            d.owidth || (d.owidth = d.width);
            d.oheight || (d.oheight = d.height);
            g.loadFont({
                fontFamily: b,
                onload: function() {
                    e && e(c)
                },
                onerror: function(a) {
                    e && e(c, a)
                }
            })
        };
        this.loadFont = function(b) {
            var c = b.onload,
                e = b.onerror,
                d = b.fontFamily;
            b = function(a) {
                a ? (a = "â€œ" + d + "â€ font-family unavailable.", e && e(a)) : c && c()
            };
            if (a.vector.text.detectFont(d)) c && c();
            else if (a.lib.text.byName[d]) {
                var g = a.util.clone(a.lib.text.byName[d]);
                g.useLoader = !0;
                a.vector.text.attach(g, b)
            } else a.vector.text.attachFromGoogleAPI(d, b)
        };
        this.changeColor = function(a) {
            g.style.fillStyle = a
        };
        var b = function(b, c) {
            if (c = c || a.scene.data[a.selection.idx]) c.dirtyControl = !0, a.render.dirtyControls = !0, a.render("root.toolkit.text." + b)
        };
        this.keydown = function(d) {
            d = d.keyCode;
            if (eventjs.metaKey) {
                var c = a.scene.data[a.selection.idx];
                86 === d || 88 === d || 90 === d ? setTimeout(function() {
                    g.updateActionSize();
                    b("keydown")
                }, 25) : c && (85 === d ? e(c, "textDecoration", "underline", "none") : 73 === d ? e(c, "fontStyle", "italic", "normal") : 66 === d && e(c, "fontWeight", "bold", "normal"))
            }
        };
        var e = function(a, b, e, d) {
            a[b] = a[b] === d ? e : d
        };
        this.keyup = function(e) {
            if (27 === e.keyCode) a.scene.deselectAll(), b("keyup.1");
            else if (eventjs.metaKey && (88 === e.keyCode || 86 === e.keyCode)) g.updateActionSize(),
                b("keyup.2");
            else if (8 === e.keyCode) {
                e = g.textarea;
                var c = g.cleanText(g.textarea.innerHTML),
                    d = a.vector.text.getRange();
                if (d) {
                    var h = c.substr(0, d.startOffset),
                        c = c.substr(d.endOffset);
                    g.textarea.innerHTML = a.vector.text.entities(h + c);
                    (h = h.length) && a.vector.text.setRange(e, h, h);
                    g.updateActionSize();
                    b("keyup.3")
                }
            }
        };
        this.keypress = function(e) {
            var c = a.scene.data[a.selection.idx];
            if ("undefined" !== typeof c && 0 !== e.which && 8 !== e.keyCode && !eventjs.metaKey) {
                eventjs.prevent(e);
                var d = g.textarea,
                    h = g.cleanText(g.textarea.innerHTML);
                e = g.cleanText(String.fromCharCode(e.charCode || e.keyCode));
                if ("pre-nowrap" !== c.whiteSpace || 10 !== e.charCodeAt()) {
                    var l = a.vector.text.getRange(g.textarea);
                    if (l) {
                        var p = h.substr(0, l.startOffset),
                            h = h.substr(l.endOffset),
                            h = g.cleanText(p + e + h);
                        g.textarea.innerHTML = a.vector.text.entities(h);
                        (h = (p + e).length) && a.vector.text.setRange(d, h, h);
                        g.updateActionSize();
                        b("keypress", c)
                    }
                }
            }
        };
        this.record = function(e, c, k) {
            if ("eyeDropper" !== a.colorPicker.state) {
                var m = g.style;
                if ("undefined" === typeof m.render) c.pause(), g.loadResource({
                    action: g.style,
                    onload: function() {
                        c.resume();
                        g.record(e, c)
                    }
                });
                else {
                    var l = !! c.action;
                    !0 === l ? "undefined" === typeof g.textarea && g.createTextarea() : "down" === c.state && (a.area.show(g.style), g.updateCSSTransform());
                    var p = a.canvas2d,
                        r = p.zoom * p.pixelRatio,
                        q = p.zoom,
                        u = (q - 1) / q,
                        v = a.project.scrollLeft * u,
                        s = a.project.scrollTop * u,
                        u = c.start.x / q + v,
                        x = c.start.y / q + s;
                    c.y = c.y / q + s;
                    c.x = c.x / q + v;
                    q = m.bbox;
                    q.x = Math.min(u, c.x) - 1 * p.x / r;
                    q.y = Math.min(x, c.y) - 1 * p.y / r;
                    q.width = Math.abs(u - c.x) || 1;
                    q.height = Math.abs(x - c.y) || 1;
                    q.units = "objectBoundingBox";
                    if ("down" === c.state) k = c.action || {}, p = a.scene.fromConfigure(a.configure.tools.text), k = {
                        type: "text",
                        fill: a.util.clone(p.fill),
                        opacity: p.opacity || 100,
                        composite: p.composite,
                        blur: k.blur || p.blur || 0,
                        fontStyle: k.fontStyle || p.fontStyle,
                        fontVariant: k.fontVariant || p.fontVariant,
                        fontWeight: k.fontWeight || p.fontWeight,
                        fontSize: k.fontSize || p.fontSize,
                        fontFamily: k.fontFamily || p.fontFamily,
                        lineHeight: k.lineHeight || p.lineHeight,
                        letterSpacing: k.letterSpacing || p.letterSpacing,
                        textAlign: k.textAlign || p.textAlign,
                        textDecoration: k.textDecoration || p.textDecoration,
                        textTransform: k.textTransform || p.textTransform,
                        whiteSpace: k.whiteSpace || p.whiteSpace,
                        render: g.style.render,
                        content: k.content || "",
                        bbox: a.util.clone(q)
                    }, c.action && a.scene.copyRules(c.action, k), m = a.scene.addObject(k, m, c.action ? !1 : !0), g.textarea.innerHTML = m.content || h, !1 === l && (a.area.updateBBox(), a.active.canvas.width = a.active.canvas.width, a.scene.constrain(m), a.scene.updateTransform(m), a.render.action(a.active, m), a.area.renderControls(a.selection.idx));
                    else if (m = a.scene.data[a.selection.idx]) {
                        g.dragging = !0;
                        p = m.bbox;
                        p.x = q.x;
                        p.y = q.y;
                        p.width = q.width;
                        p.height = q.height;
                        m.dirty = !0;
                        m.dirtyTransform = !0;
                        r = a.toolkit.getDimensionConstraint(m, null, !1);
                        p.x = q.x - (c.x < c.start.x ? r.width - p.width : 0);
                        p.y = q.y - (c.y < c.start.y ? r.height - p.height : 0);
                        p.width = p.owidth = r.width;
                        p.height = p.oheight = r.height;
                        p.viewBox = [0, 0, p.width, p.height];
                        c.action && c.action.bbox && a.util.mergeObject(c.action.bbox, m.bbox);
                        if ("up" === c.state) {
                            g.dragging = !1;
                            if (q.width < d.minWidth || q.height < d.minHeight) if (a.feature.placement.click || a.feature.tools.text.clickToPlace) q = a.project.bounds.width / 3 / a.canvas2d.zoom, r = 2 * a.tool.style.fontSize / a.canvas2d.zoom, m.fontSize /= a.canvas2d.zoom, q = p.width = Math.max(d.defaultWidth, q), r = p.height = Math.max(d.defaultHeight, r), p.viewBox = [0, 0, q, r];
                            else {
                                l = a.selection.id;
                                a.scene.deselectAll();
                                a.scene.removeById(l);
                                b("record", m);
                                return
                            }!1 === l && (a.area.inGenesis = !0, g.focus());
                            p.owidth = p.width;
                            p.oheight = p.height;
                            g.updateActionSize()
                        }
                        a.area.updateBBox();
                        a.scene.constrain(m);
                        a.scene.updateTransform(m);
                        !1 === l && (a.active.canvas.width = a.active.canvas.width,
                            a.render.action(a.active, m), a.area.renderControls(a.selection.idx));
                        "up" === c.state && k && k()
                    }
                }
            }
        };
        this.focus = function() {
            setTimeout(function() {
                a.util.exists("cordova.plugins.SoftKeyboard.show") ? cordova.plugins.SoftKeyboard.show(function() {}, function() {}) : g.textarea.focus()
            }, 50)
        };
        this.selectAll = function(b) {
            b = b || g.textarea;
            a.vector.text.range.selectAll(b.firstChild)
        };
        this.updateBBox = function() {
            var e = a.scene.data[a.selection.idx];
            "undefined" !== typeof e && (g.textarea || g.createTextarea(), e.content && (g.textarea.innerHTML = g.cleanText(e.content)), g.updateCSSTransform(e), b("updateBBox", e))
        };
        this.updateActionSize = function(b) {
            var c = b ? a.__editing && b.id === a.scene.data[a.selection.idx] ? g.cleanText(g.textarea.innerHTML) : b.content : g.cleanText(g.textarea.innerHTML);
            b = b || a.scene.data[a.selection.idx];
            if ("undefined" !== typeof b) {
                var e = a.vector.text.getFontStyle(b),
                    c = c ? a.vector.text.format(c, b) : " ",
                    d = (2 * (b.blur || 0) + (b.diameter || 0) + (b.lineWidth || 0)) * (b.scale ? b.scale.max : 1);
                if ("pre-nowrap" === b.whiteSpace) {
                    var h = b.bbox.owidth,
                        e = 1.1 * a.vector.text.measureTextWidth(c, e);
                    b.bbox.viewBox[2] = b.bbox.owidth = b.bbox.width = e;
                    b.bbox.x += (h - e) / 2;
                    b.dirty = !0
                }
                h = a.vector.text.drawLineBreaks({
                    fillStyle: b.fillStyle,
                    fontStyle: b.fontStyle || "normal",
                    fontVariant: b.fontVariant || "normal",
                    fontWeight: b.fontWeight || "normal",
                    fontSize: b.fontSize || 0,
                    fontFamily: b.fontFamily || "Arial",
                    letterSpacing: b.letterSpacing || 0,
                    lineHeight: b.lineHeight || 1,
                    textAlign: b.textAlign || "center",
                    textDecoration: b.textDecoration || "none",
                    textTransform: b.textTransform || "none",
                    whiteSpace: b.whiteSpace || "none",
                    blur: b.blur || 0,
                    content: c,
                    bbox: b.bbox
                });
                a.feature.useCanvasTextRender && b.content !== c && (b.dirty = !0);
                b.content = c;
                b.__textMetrics = h;
                c = b.bbox.owidth + d / 2;
                d = h.height + d / 2;
                b.bbox.height !== d && (b.dirty = !0, b.dirtyControl = !0, b.bbox.height < d && a.area.inGenesis || !a.area.inGenesis) && (b.bbox.width = c, b.bbox.height = d, b.bbox.viewBox = [0, 0, c, d], g.container.style.height = d + "px");
                g.updateCSS(b)
            }
        };
        this.cleanText = function(a) {
            return a.split(" ").join(" ").split("<br>").join("\n").split("<div>").join("\n").split("\r").join("\n").replace(/</g, "<").replace(/>/g, ">").replace(/"/g, '"').replace(/&/g, "&").split(String.fromCharCode(160)).join(String.fromCharCode(32)).replace(/(<([a-z/]+)>)/ig, "")
        };
        this.createTextarea = function() {
            if (g.textarea) {
                var b = g.textarea.style.cssText,
                    c = g.textarea.innerHTML;
                g.textarea.parentNode.removeChild(g.textarea);
                g.styleCode.parentNode.removeChild(g.styleCode)
            } else a.addTooltip(g.container, ""), c = b = "";
            if (a.toolkit.text) return g.styleCode = document.createElement("style"), g.styleCode.type = "text/css", g.container.appendChild(g.styleCode),
                g.textarea = document.createElement("div"), g.textarea.className = "textarea", g.textarea.setAttribute("contentEditable", "true"), g.textarea.style.cssText = b + ";" + a.vector.text.CSSWhiteSpace.preWrap, g.textarea.innerHTML = c, g.container.appendChild(g.textarea), eventjs.add(g.textarea, "drag", eventjs.stop), eventjs.add(g.textarea, "keydown", g.keydown), eventjs.add(g.textarea, "keypress", g.keypress), eventjs.add(g.textarea, "keyup", g.keyup), g.textarea
        };
        this.updateCSS = function(a) {
            g.updateCSSStyle(a);
            g.updateCSSTransform(a)
        };
        this.updateCSSTransform = function(b) {
            if ("undefined" === typeof b && (b = a.scene.data[a.selection.idx], "undefined" === typeof b)) return;
            if ("undefined" === typeof b.bbox) return console.log("meh");
            if (b.id > a.util.INFINITY_MINUS_8bit || a.selection.items[b.zIndex]) {
                var c = a.canvas2d,
                    e = c.pixelRatio,
                    d = c.zoom,
                    h = a.project.scrollLeft * (d - 1),
                    p = a.project.scrollTop * (d - 1),
                    r = b.bbox,
                    q = a.area.padding / 2,
                    u = b.blur || 0,
                    v = isFinite(b.opacity) ? b.opacity : 100,
                    s = a.render.cache.padding / 2,
                    x = r.width,
                    w = r.height,
                    A = r.rotate,
                    y = r.scale.x,
                    z = r.scale.y;
                if ("objectBoundingBox" === r.units) var B = "50% 50%",
                    D = (x - x * y) / 2,
                    E = (w - w * z) / 2;
                else B = "0 0", E = D = 0;
                D = r.x - q - (D - q);
                r = r.y - q - (E - q);
                x = Math.max(0, x - u) * d;
                s = Math.max(0, w - s - u + 5) * d;
                h = D * d + c.x / e - h;
                c = r * d + c.y / e - p;
                v /= 100;
                e = g.container.style;
                e.padding = u / 2 + "px";
                e.left = h + "px";
                e.top = c + "px";
                e.width = Math.min(x, window.innerWidth - h) + "px";
                e.height = Math.min(s, window.innerHeight - c) + "px";
                e.opacity = v;
                a.vector.text.setFontStyle(b, g.container);
                e.transform = e.msTransform = e.OTransform = e.MozTransform = e.WebkitTransform = "rotate(" + A + "deg) scale(" + y + "," + z + ")";
                e.transformOrigin = e.msTransformOrigin = e.OTransformOrigin = e.MozTransformOrigin = e.WebkitTransformOrigin = B
            }
        };
        this.updateCSSStyle = function() {
            var b = a.scene.data[a.selection.idx];
            if ("undefined" !== typeof b && "undefined" !== typeof b.fill) {
                var c = g.textarea || g.createTextarea(),
                    e = b.fill.type,
                    d = "webkitFilter" in c.style,
                    h = "textShadow" in c.style;
                if ("webkitBackgroundClip" in c.style && d) {
                    switch (e) {
                        case "color":
                            var p = "background: " + b.fill.color;
                            break;
                        case "gradient":
                            p = a.style.getGradientCSS(b.fill.gradient, "left");
                            break;
                        case "pattern":
                            p = "background: url(" + b.fill.pattern + ")"
                    }
                    g.styleCode.innerHTML = "\t\t\t\tdiv.sk-textarea-wrap div.textarea { " + p + " }\t\t\t";
                    c.setAttribute("data-content", c.innerHTML);
                    c.style.textShadow = "none";
                    c.style.backgroundClip = "text";
                    c.style.webkitBackgroundClip = "text";
                    c.style.textFillColor = "transparent";
                    c.style.webkitTextFillColor = "transparent";
                    c.style.filter = "blur(" + b.blur / 3 + "px)";
                    c.style.webkitFilter = "blur(" + b.blur / 3 + "px)";
                    b = a.style.getBlendMode();
                    c.style.backgroundBlendMode = b;
                    c.style.webkitBackgroundBlendMode = b
                } else {
                    switch (e) {
                        case "color":
                            p = b.fill.color;
                            break;
                        case "gradient":
                        case "pattern":
                            p = "#000"
                    }
                    h ? (c.style.color = p, c.style.textShadow = "none") : c.style.color = p
                }
            }
        };
        this.style = {
            fontStyle: "normal",
            fontVariant: "normal",
            fontWeight: "bold",
            fontSize: 41,
            fontFamily: "Arial",
            letterSpacing: 0,
            lineHeight: 1,
            textAlign: "center",
            textDecoration: "none",
            textTransform: "none",
            whiteSpace: "normal",
            blur: 0,
            bbox: {
                x: 200,
                y: 18,
                width: 400,
                height: 470,
                rotate: 0,
                scale: {
                    x: 1,
                    y: 1
                }
            }
        };
        this.createTextarea();
        this.textarea && this.container.appendChild(this.textarea);
        a.canvas2d.container.appendChild(this.container);
        return a.toolkit.init(this)
    })
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.vector && (sketch.vector = {});
"undefined" === typeof sketch.vector.text && (sketch.vector.text = {});
(function(a) {
    function h() {
        a.container || c();
        var b = document.createElement("span");
        b.style.cssText = a.CSSWhiteSpace.preWrap;
        b.className = "lineBreakData";
        a.container.appendChild(b);
        a.elementContent = b
    }
    function d(b) {
        var c = a.elementContent;
        c.style.display = "block";
        c.style.width = b.width + "px";
        c.style.font = b.font;
        c.style.letterSpacing = (b.letterSpacing || 0) + "px";
        c.style.textAlign = b.textAlign || "left";
        c.style.textDecoration = b.textDecoration || "none";
        c.style.textTransform = b.textTransform || "none";
        c.innerHTML = a.entities(b.content);
        b = c.firstChild || c;
        var e = document.createRange();
        e.setStart(b, 0);
        e.setEnd(b, 0);
        var d = 1,
            f = b.textContent,
            g = f.length,
            k = [],
            h = 0,
            l = e.getClientRects();
        if (0 === l.length) return {
            data: k,
            lines: k.length,
            height: 1,
            width: 1
        };
        for (var m = l[l.length - 1].top, p = a.spaceOffset, q = a.mOffset, r = c.offsetHeight, u = c.offsetWidth; f;) {
            if (d > g) {
                a.tOffset ? k.push(f) : k.push(f.trim());
                break
            }
            e.setStart(b, h);
            e.setEnd(b, d);
            d++;
            l = e.getClientRects();
            l = l[l.length - 1].top;
            m !== l && (d--, a.tOffset ? k.push(f.substr(0, d - h - p + q)) : k.push(f.substr(0, d - h - p + q).trim()),
                f = f.substr(d - h - p + q), h = d - p + q, m = l)
        }
        f && 10 === f[f.length - 1].charCodeAt() && k.push("");
        c.style.display = "none";
        return {
            data: k,
            lines: k.length,
            height: r,
            width: u
        }
    }
    function g(b) {
        var c = a.elementContent;
        c.style.display = "block";
        c.style.width = b.width + "px";
        c.style.font = b.font;
        c.style.letterSpacing = (b.letterSpacing || 0) + "px";
        c.style.textAlign = b.textAlign || "left";
        c.style.textDecoration = b.textDecoration || "none";
        c.style.textTransform = b.textTransform || "none";
        c.innerHTML = b.content;
        b = document.body.createTextRange();
        for (var e = 1, d = target.innerText, f = d.length, g = [], k = 0, h = c.offsetHeight, l = c.offsetWidth; d;) {
            if (e > f) {
                g.push(d);
                break
            }
            b.moveToElementText(target);
            b.collapse(!0);
            b.moveEnd("character", e);
            b.moveStart("character", k);
            b.select();
            e++;
            1 < b.getClientRects().length && (e--, g.push(d.substr(0, e - k - 1)), d = d.substr(e - k - 1), k = e - 1)
        }
        c.style.display = "none";
        return {
            data: g,
            lines: g.length,
            height: h,
            width: l
        }
    }
    function b(b) {
        function c(e) {
            f.push(e);
            e = a.measureText(e, b.font);
            q += e.height;
            h = Math.max(e.width, h)
        }
        function e() {
            if (!(a.measureTextWidth(g,
                b.font) <= b.width)) {
                for (var d = g.length, f = 0, k = 0, h = 0; h < d; h++) {
                    var l = g.substr(f, ++k).replace(p, "");
                    a.measureTextWidth(l, b.font) > b.width && (l = l.substr(0, l.length - 1).replace(p, ""), l.match(m) ? (f = l.split(m), l = l[f[0].length], h -= f[1].length, c(f[0] + l)) : l.match(" ") ? (f = l.split(" "), h -= f.pop().length, c(f.join(" "))) : c(l), f = h, k = 1)
                }
                return g.substr(f, k + 1)
            }
        }
        for (var d = b.content.split("\n"), f = [], g = "", k, h = 0, q = 0, r = 0; r <= d.length; r++) {
            if (g) {
                c(g);
                if (r === d.length) break;
                g = ""
            }
            for (var u = d[r], J = u.split(l), C = 0, O = 0; O < J.length + 2; O++) {
                var N = 0 > C - 1 ? "" : u.substr(C - 1, 1),
                    L = J[O] || "";
                if (a.measureTextWidth(g + N + L, b.font) <= b.width) g += N + L;
                else if (k = e()) g = k + N + L;
                else {
                    k = N.match(m) ? N : "";
                    if (g || N) a.measureTextWidth(g + k, b.font) > b.width ? "\u2013" === k ? L = g + k + L : (c(g), L = k + L) : c(g + k);
                    g = L
                }
                C += L.length + 1
            }
        }
        return {
            data: f,
            lines: f.length,
            height: q,
            width: h
        }
    }
    a.entities = function(a) {
        return a.split(String.fromCharCode(160)).join(String.fromCharCode(32)).replace(/&/g, "&").replace(/</g, "<").replace(/>/g, ">").replace(/"/g, """)
    };
    a.format = function(a, b) {
        if (b.textTransform) switch (b.textTransform) {
            case "uppercase":
                a = a.toUpperCase();
                break;
            case "lowercase":
                a = a.toLowerCase();
                break;
            case "capitalize":
                a = a.replace(/^(.)|\s(.)/g, function(a) {
                    return a.toUpperCase()
                })
        }
        if (b.whiteSpace) switch (b.whiteSpace) {
            case "normal":
            case "pre":
            case "pre-wrap":
                a = a.split(" ").join(String.fromCharCode(160));
                break;
            case "pre-nowrap":
                a = a.split("\n").join(" ").split(" ").join(String.fromCharCode(160));
                break;
            case "pre-line":
            case "nowrap":
                a = a.replace(/\s{2,}/g, " ")
        }
        return a
    };
    a.textTransform = function(a, b) {
        switch (b) {
            case "uppercase":
                return a.toUpperCase();
            case "lowercase":
                return a.toLowerCase();
            case "capitalize":
                return a.replace(/^(.)|\s(.)/g, function(a) {
                    return a.toUpperCase()
                });
            default:
                return a
        }
    };
    a.getMetrics = function(b, e) {
        var d = "ltr";
        window.getComputedStyle && (d = window.getComputedStyle(document.body, "").direction);
        var f = a.measureTextHeight(b, e),
            g = a.measureTextWidth(b, e);
        return c({
            marginReset: !0,
            text: b,
            callback: function(b) {
                b.style.cssText = "font: " + e + "; white-space: nowrap; display: block;";
                var c = a.image,
                    k = c.offsetTop + 1,
                    h = k - f;
                b.style.cssText = "font: " + e + "; white-space: nowrap; line-height: 0; display: block;";
                var l = c.offsetTop + 1;
                b.style.verticalAlign = "sub";
                var m = k - (c.offsetTop - f);
                b.style.verticalAlign = "super";
                return {
                    font: e,
                    direction: d,
                    ascent: k,
                    descent: -h,
                    height: f,
                    width: g,
                    textBaseline: {
                        alphabetic: 0,
                        top: k,
                        hanging: 8 * k / 10,
                        middle: l,
                        ideographic: h,
                        bottom: h,
                        subScript: m,
                        superScript: k - (c.offsetTop - f)
                    },
                    textAlign: {
                        left: 0,
                        start: -("ltr" === d) ? 0 : g,
                        end: -("ltr" === d) ? g : 0,
                        right: -g,
                        center: -g / 2
                    }
                }
            }
        })
    };
    a.measureText = function(b, c) {
        return {
            width: a.measureTextWidth(b, c),
            height: a.measureTextHeight(b, c)
        }
    };
    a.measureTextWidth = function(a, b) {
        return c({
            text: a + a + a,
            callback: function(a) {
                a.style.cssText = "font: " + b + "; white-space: nowrap; display: inline;";
                return a.offsetWidth / 3
            }
        })
    };
    a.measureTextHeight = function(a, b) {
        return c({
            text: "1<br>2<br>3<br>4<br>5<br>6<br>7",
            callback: function(a) {
                a.style.cssText = "font: " + b + "; white-space: nowrap; display: inline;";
                return a.offsetHeight / 7 + 0.5 >> 0
            }
        })
    };
    a.textAlign = function(b, e) {
        var d = window.getComputedStyle(document.body, "").direction,
            f = a.measureTextWidth(b,
                e);
        return c({
            text: b,
            callback: function(a) {
                return {
                    left: 0,
                    start: -("ltr" === d) ? 0 : f,
                    end: -("ltr" === d) ? f : 0,
                    right: -f,
                    center: -f / 2
                }
            }
        })
    };
    a.textBaseline = function(b, e) {
        var d = a.measureTextHeight(b, e);
        return c({
            marginReset: !0,
            text: b,
            callback: function(b) {
                b.style.cssText = "font: " + e + "; white-space: nowrap; display: block;";
                var c = a.image.offsetTop + 1,
                    f = c - d;
                b.style.cssText = "font: " + e + "; white-space: nowrap; line-height: 0; display: block;";
                return {
                    alphabetic: 0,
                    top: c,
                    hanging: 8 * c / 10,
                    middle: a.image.offsetTop + 1,
                    ideographic: f,
                    bottom: f
                }
            }
        })
    };
    a.textBaselineTop = function(b, e) {
        return c({
            text: b,
            callback: function(b) {
                b.style.cssText = "font: " + e + "; white-space: nowrap; display: block;";
                return 1.315 * a.image.offsetTop
            }
        })
    };
    var e, f, c = function(b) {
        var c = document.body;
        a.element || (a.parent = document.createElement("span"), a.text = document.createElement("span"), a.parent.appendChild(a.text), a.image = document.createElement("img"), a.image.style.cssText = "vertical-align: baseline; background: #000; width: 10px; height: 1px; display: inline;", a.image.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=", a.parent.appendChild(a.image), a.element = document.createElement("div"), a.element.className = "metrics", a.element.appendChild(a.parent), a.container = document.createElement("div"), a.container.id = "sketchapi-text-metrics", a.container.appendChild(a.element), c.insertBefore(a.container, c.firstChild));
        if (b) if (a.text.innerHTML = b.text, a.element.style.cssText = "display: block;", b.marginReset) {
            b.setup && 1 !== b.setup || (e = c.style.padding, f = c.style.margin, c.style.padding = 0, c.style.margin = 0);
            if (!b.setup) var d = b.callback(a.parent);
            b.setup && 2 !== b.setup || (c.style.padding = e, c.style.margin = f, a.element.style.display = "none");
            if (!b.setup) return d
        } else return d = b.callback(a.parent), a.element.style.display = "none", d
    };
    a.getFontStyle = function(a) {
        var b = [];
        a.fontStyle && b.push(a.fontStyle);
        a.fontVariant && b.push(a.fontVariant);
        a.fontWeight && b.push(a.fontWeight);
        a.fontSize && b.push(a.fontSize + "px");
        a.fontFamily && b.push('"' + a.fontFamily + '"');
        return b.join(" ")
    };
    a.setFontStyle = function(a, b) {
        var c = (a.fontSize || 30) * (sketch.canvas2d.zoom || 1),
            e = a.textMetrics || a.__textMetrics,
            e = e ? e.lineHeight * sketch.canvas2d.zoom + "px" : Math.ceil((a.lineHeight || 1) * c) + "em",
            d = b.style;
        d.fontStyle = a.fontStyle || "normal";
        d.fontVariant = a.fontVariant || "normal";
        d.fontWeight = a.fontWeight || "normal";
        d.fontSize = c + "px";
        d.fontFamily = a.fontFamily || "Arial";
        d.letterSpacing = (a.letterSpacing || 0) + "px";
        d.lineHeight = e;
        d.textAlign = a.textAlign || "center";
        d.textDecoration = a.textDecoration || "none";
        d.textTransform = a.textTransform || "none"
    };
    var k = 1 / (180 / Math.PI);
    a.drawLineBreaks = function(b) {
        var c = b.content;
        if (c) {
            var e = a.getFontStyle(b),
                d = b.ctx,
                f = b.bbox,
                g = b.textMetrics,
                h = b.fontSize || 0,
                l = b.textAlign || "left",
                m = b.textDecoration || "none",
                h = b.textTransform || "none",
                p = b.letterSpacing || 0,
                c = a.format(c, b);
            g && g.data || (g = a.getLineBreaks({
                font: e,
                content: c,
                textTransform: h,
                textDecoration: m,
                letterSpacing: p,
                width: f.width
            }), g.baseline = a.textBaseline("test", e), g.lineHeight = g.height / g.lines);
            c = {
                data: g.data,
                baseline: g.baseline,
                lineHeight: g.lineHeight,
                height: g.height,
                width: g.width,
                x: f.x,
                y: f.y
            };
            if (!d) return c;
            d.save();
            d.font = e;
            b.useHighRes && !b.applyMatrix ? h = e = 1 : (e = f.scale.x, h = f.scale.y);
            p = f.rotate * k;
            d.translate(f.x, f.y);
            p && d.rotate(p);
            d.translate(-f.x * e, - f.y * h);
            1 === e && 1 === h || d.scale(e, h);
            d.fillStyle = sketch.style.createGradient("fill", d, 0, 0, f.width, 0, b);
            b.clip && (d.rect(f.x, f.y, f.width, f.height), d.clip());
            (p = (b.blur || 0) / 2) ? (h = b.fontSize, b = f.y + p, e = f.x - g.width - h, d.shadowOffsetX = g.width + h, d.shadowOffsetY = 0, d.shadowBlur = p, d.shadowColor = "#000") : (b = f.y, e = f.x);
            h = 0;
            switch (l) {
                case "right":
                    h = f.width;
                    break;
                case "center":
                    h = f.width / 2
            }
            for (var p = g.baseline, g = g.data, q = 0, r = g.length; q < r; q++) {
                var u = g[q].replace("\n", ""),
                    O = q * c.lineHeight + b + p.top,
                    N = e + h;
                d.textAlign = l;
                d.fillText(u, N, O);
                switch (m) {
                    case "underline":
                        d.fillRect(0, O + p.top + 1, f.width, 1);
                        break;
                    case "overline":
                        d.fillRect(0, O + p.alphabetic, f.width, 1);
                        break;
                    case "line-through":
                        d.fillRect(0, O + 2 * p.middle, f.width, 1)
                }
            }
            d.restore();
            return c
        }
    };
    var m = /[\u2014\u2013-]/,
        l = /[ \u2014\u2013-]/,
        p = /^\s+|\s+$/g;
    a.CSSWhiteSpace = {};
    a.CSSWhiteSpace.preWrap = "white-space: pre-wrap;white-space: -moz-pre-wrap !important;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;";
    a.getLineBreaks = function(c) {
        if (document.createRange) {
            h();
            var e = document.createElement("span");
            document.body.appendChild(e);
            a.spaceOffset = 1;
            var f = a,
                k = document.createRange();
            e.textContent = "d\u2014d";
            e.className = "wrap";
            e.style.cssText = "display: block; width: 1.6em; " + a.CSSWhiteSpace.preWrap + " font: bold 22px arial;";
            k.setStart(e.firstChild, 0);
            k.setEnd(e.firstChild, e.textContent.length);
            k = 2 < k.getClientRects().length ? 1 : 0;
            f.tOffset = k;
            a.mOffset = a.tOffset ? 0 : 1;
            document.body.removeChild(e);
            return (a.getLineBreaks = d)(c)
        }
        return document.body.createTextRange ? (h(), (a.getLineBreaks = g)(c)) : (a.getLineBreaks = b)(c)
    };
    a.range = {};
    a.range.selectAll = function(a) {
        if (document.selection) {
            var b = document.body.createTextRange();
            b.moveToElementText(a);
            b.select()
        } else if (window.getSelection) {
            var c = window.getSelection();
            0 < c.rangeCount && c.removeAllRanges();
            b = document.createRange();
            b.selectNode(a);
            c.addRange(b)
        }
    };
    a.getRange = function(b) {
        var c = window.getSelection();
        if (null === c) return c = a.getCursorPos(b), {
            startOffset: c,
            endOffset: c
        };
        if (b = c.focusNode) return 3 === b.nodeType ? c.getRangeAt(0) : b.firstChild ? (c = b.firstChild, {
            startOffset: 0,
            endOffset: c.data && c.data.length || 0
        }) : {
            startOffset: 0,
            endOffset: 0
        }
    };
    a.setRange = function(a, b, c) {
        var e = document.createRange();
        a = a.firstChild || a;
        e.setStart(a, b);
        e.setEnd(a, c);
        a = window.getSelection();
        a.removeAllRanges();
        a.addRange(e)
    };
    a.getCursorPos = function(a) {
        var b = 0;
        if (window.getSelection) {
            var c = window.getSelection();
            c.rangeCount && (c = c.getRangeAt(0), c.commonAncestorContainer.parentNode === a && (b = c.endOffset))
        } else document.selection && document.selection.createRange && (c = document.selection.createRange(), c.parentElement() === editableDiv && (a = document.createElement("span"), editableDiv.insertBefore(a, editableDiv.firstChild), b = c.duplicate(), b.moveToElementText(a), b.setEndPoint("EndToEnd", c), b = b.text.length));
        return b
    };
    a.attach = function(a,
                        b) {
        a.callback = b || a.callback;
        a.family = a.family || a.name;
        var c = new r(a);
        if (!c.detectFont(a)) {
            var e = a.family,
                d = a.filepath;
            2 === d.split("/").length && (d = "./media/font/" + d);
            a.filepath = d;
            var f = document.createElement("style");
            f.type = "text/css";
            document.getElementsByTagName("head")[0].appendChild(f);
            e = "@font-face {\t\tfont-family: '" + e + "';\t\tsrc: url('" + d + ".eot');\t\tsrc: url('" + d + ".eot?#iefix') format('embedded-opentype'),\t\t\turl('" + d + ".woff') format('woff'),\t\t\turl('" + d + ".ttf') format('truetype'),\t\t\turl('" + d + ".svg#" + e + "') format('svg');\t\tfont-weight: normal;\t\tfont-style: normal;\t}";
            f.styleSheet ? f.styleSheet.cssText = e : f.innerHTML = e;
            a.callback && c.waitForFont(a)
        }
    };
    a.attachFromCSS = function(a, b) {
        a.callback = b || a.callback;
        var c = new r(a);
        if (!c.detectFont(a)) {
            var e = a.href.replace(/[^a-zA-Z 0-9]+/g, ""),
                d = document.getElementById(e);
            if (d) return c = d.getAttribute("data-error"), a.callback ? a.callback(c) : c;
            a.link = d = document.createElement("link");
            d.href = a.href;
            d.id = e;
            d.setAttribute("rel", "stylesheet");
            d.setAttribute("type", "text/css");
            d.onerror = function() {
                a.callback && a.callback("404");
                d.setAttribute("data-error", "404")
            };
            document.body.appendChild(d);
            c.waitForFont(a)
        }
    };
    a.attachFromGoogleAPI = function(b, c) {
        a.attachFromCSS({
            family: b,
            href: window.location.protocol + "//fonts.googleapis.com/css?family=" + b + ":regular",
            callback: function(a) {
                a && (a = "â€œ" + b + "â€ font-family unavailable.");
                c && c(a)
            }
        })
    };
    var r = function(b) {
            b = b || {};
            var c = this;
            this.metrics = void 0;
            this.test = b.test || "Thequickbrownfox";
            this.font = this.missing = this.arial = this.ctx = this.canvas = void 0;
            this.createHash = function(a) {
                c.canvas.width = c.canvas.width;
                c.ctx.font = c.font;
                c.ctx.fillText(a, 0, c.metrics.textBaseline.top);
                return c.ctx.canvas.toDataURL()
            };
            this.getHash = function(b) {
                c.metrics || (c.metrics = a.getMetrics(c.test, "16px Arial, Helvetica"), c.canvas = document.createElement("canvas"), c.canvas.width = c.metrics.width, c.canvas.height = c.metrics.height, c.font = "16px Arial, Helvetica", c.ctx = c.canvas.getContext("2d"), c.ctx.font = "16px Arial, Helvetica", c.arial = c.createHash(c.test),
                    c.missing = c.createHash(""));
                c.font = "16px '" + b + "', Arial, Helvetica";
                return c.createHash(c.test)
            };
            this.detectFont = function(b) {
                "string" === typeof b && (b = {
                    family: b
                });
                if (!b) return console.log("missing conf");
                if (!b.family) return console.log("missing family", b);
                var e = b.family,
                    d = b.callback,
                    f = a.supports[e];
                if ("boolean" === typeof f) return d && d(), f;
                if ("arial" === e.toLowerCase()) return a.supports[b.family] = !0, d && d(), !0;
                e = c.getHash(e);
                return e !== c.missing && e !== c.arial ? (a.supports[b.family] = !0, d && d(), !0) : !1
            };
            this.waitForFont = function(b) {
                if (!c.detectFont(b)) {
                    var e = (new Date).getTime(),
                        d = b.timeout || 2E4,
                        f = function(c) {
                            a.supports[b.family] = !1;
                            b.link && b.link.setAttribute("data-error", "timeout");
                            clearInterval(h);
                            b.callback("timeout");
                            g()
                        }, g = function() {
                            window.sketch && (sketch.loader && u[b.family]) && sketch.loader.remove(u[b.family])
                        }, k = null,
                        h = setInterval(function() {
                            var l = c.getHash(b.family),
                                m = (new Date).getTime() - e;
                            l !== c.missing && l !== c.arial ? (a.supports[b.family] = !0, clearInterval(h), b.callback(), g()) : m > d ? f() : b.filepath && (2E3 < m && !k) && (k = sketch.util.request({
                                url: b.filepath,
                                onerror: f
                            }))
                        }, 10);
                    window.sketch && (sketch.loader && b.useLoader) && !u[b.family] && (u[b.family] = sketch.loader.add("loading â€œ" + b.family + "â€"))
                }
            }
        }, q = new r,
        u = {};
    a.supports = {};
    a.detectFont = q.detectFont;
    a.waitForFont = q.waitForFont
})(sketch.vector.text);
"undefined" !== typeof module && module.exports && (module.exports = sketch.vector.text);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.server && (sketch.server = {});
sketch = function(a) {
    var h;
    a.server.servers = [];
    a.server.addHost = function(d) {
        sketch.util.mergeObject([d], a.server.servers)
    };
    a.server.getHost = function(d) {
        for (var b = a.server.servers, e = 0, f = d.length, c = b.length; f--;) e += d[f].charCodeAt();
        return b[e % c]
    };
    a.server.open = function(d) {
        var b = a.location.pathGet,
            e = b ? a.location.getRoomID() : "new";
        if (!e) return (b = a.configure.sync) ? a.location.setHash("sketch", b) : (b = a.configure.defaultSketch) ? (b = b.replace("sketch=", ""), a.location.setHash("sketch", b)) : a.location.setHash("sketch", "new");
        if ("new" === e) return a.actions && a.scene.reset(!0), a.history && a.history.reset(), delete a.configure.sync, a.on.sketchReady();
        if (a.feature.stream.sketch && a.socketIO && !a.socket) return -1 === e.indexOf("/") && (e = "room/" + e), a.socketIO(e);
        if (!a.userAgent.nodewebkit) {
            a.loader.thread = a.loader.add("downloading sketch...");
            a.configure.sync = e;
            var f = function() {
                d && d();
                a.on.sketchReady();
                a.loader.stop()
            };
            a.util.request({
                url: b + e + "&format=" + a.project.format + "Ã—tamp=" + (new Date).getTime(),
                onerror: function(b) {
                    a.loader.update(a.loader.thread, "downloading sketch...", 100);
                    a.feature.debug ? console.log("server connection error", b) : a.location.setHash("sketch", "new")
                },
                onload: function(b) {
                    b = b.responseText;
                    if ("<?xml" === b.substr(0, 5) || "<svg" === b.substr(0, 4)) a.loader.update(a.loader.thread, "downloading sketch...", 99), a.open.svg(b, f, f);
                    else if ("<" === b.substr(0, 1)) a.loader.update(a.loader.thread, "downloading sketch...", 100), a.feature.debug ? console.log("invalid data from server", b) : a.location.setHash("sketch", "new");
                    else if ("{" === b.substr(0, 1)) a.loader.update(a.loader.thread, "downloading sketch...", 99), a.open.json(b, f, f);
                    else if (a.open.zip) {
                        for (var e = new Uint8Array(b.length), d = 0; d < b.length; d++) e[d] = b.charCodeAt(d) & 255;
                        a.loader.update(a.loader.thread, "downloading sketch...", 99);
                        a.open.zip(new Blob([e.buffer], {
                            type: "application/zip"
                        }))
                    } else a.loader.update(a.loader.thread, "downloading sketch...", 100), f()
                },
                onprogress: function(b) {
                    var e = b.total || parseInt(this.getResponseHeader("Content-xlength"));
                    isNaN(e) || a.loader.update(a.loader.thread, "downloading sketch...", Math.max(0, (100 * (b.loaded / e) >> 0) - 1))
                }
            })
        }
    };
    a.server.auth = function(d) {
        a.feature.requireAuth ? a.util.request({
            url: a.location.host + "check-login.html",
            onload: function(a) {
                d("true" === a.responseText)
            }
        }) : d(!0)
    };
    a.server.enabled = function() {
        if (a.userAgent.nodewebkit) return !1;
        var d = a.project.format,
            b = a.feature.sync;
        if (!b[d] && b.useDefaultFormat) return b[d] = !0;
        for (var e in b) switch (e) {
            case "zip":
            case "svg":
            case "json":
            case "thumb":
            case "image":
                if (b[e]) return !0
        }
        return !1
    };
    a.server.save = function(g, b) {
        "function" === typeof g && (g = {
            onsave: g
        });
        g = g || {};
        250 > (new Date).getTime() - h || (h = (new Date).getTime(), a.loader.syncing = a.loader.message("syncing...", function() {
            g.onsave = b || g.onsave;
            g.onprogress = function(b) {
                a.loader.update(a.loader.syncing, "syncing...", b / 2)
            };
            g.onload = function(a) {
                g.metadata = g.metadata || {};
                for (var b in a) if ("folder" === b) for (var c = 0; c < a.folder.length; c++) {
                    var k = a.folder[c];
                    g.metadata[k.filename] = k.blob
                } else g.metadata[b] = a[b];
                d(g)
            };
            a.server.auth(function(b) {
                b ? a.save.syncData(g) : a.exec("login")
            })
        }))
    };
    a.server.saveData = function(g) {
        g = g || {};
        a.loader.syncing = a.loader.message("syncing...", function() {
            a.server.auth(function(b) {
                b ? d(g) : a.exec("login")
            })
        })
    };
    var d = function(d) {
        var b = d.callback || d.onsave;
        if (d && a.util.count(d.metadata)) {
            var e = {
                action: d.url || a.location.pathPost,
                confirm: "text",
                files: []
            }, f = function(a, b) {
                e.files.push({
                    name: a,
                    data: b
                })
            };
            a.feature.sync.hash && a.configure.sync && f("sync", a.configure.sync);
            for (var c in d.metadata) f(c, d.metadata[c]);
            "string" !== typeof d.metadata.fileName && f("fileName", a.project.title);
            e.onProgress = function(b) {
                a.loader.update(a.loader.syncing, "syncing...", 50 + b.transferPercent / 2 >> 0)
            };
            e.onUpload = function(c, e) {
                a.loader.update(a.loader.syncing, "syncing...", 100);
                a.feature.debug && console.log(c.transferTotal, e, c);
                "false" === e || "<" === e[0] ? a.feature.debug && console.log("invalid server response", e) : (window.alertify && alertify.log("All changes saved!"), (a.feature.sync.json || a.feature.sync.zip || a.feature.sync.svg) && a.feature.sync.hash && (a.location.setHash("sketch", e), a.setItem("sync", e)), b && b(e))
            };
            new a.util.uploader.upload(e)
        } else console.log("server sync is not setup")
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.peer && (sketch.peer = {});
sketch = function(a) {
    a.socketIO = function(d) {
        var g = window.location.protocol,
            b = g + "//" + a.location.hostIO,
            g = "https:" === g,
            e = a.location.hostIO.split(":")[1];
        e || (e = g ? 443 : 80);
        if ("undefined" === typeof io) return dom.loadScript.add({
            url: b + "/socket.io/socket.io.js",
            verify: "io",
            error: a.setup.defaultFileID,
            callback: function() {
                a.socketIO(d)
            }
        });
        var f = a.configure.username ? a.configure.user_id : Math.abs(Math.random() * sketch.util.INFINITY >> 0);
        a.setItem("user_id", f);
        a.socket = io.connect(b, {
            secure: g,
            port: e
        });
        a.socket.user = {
            username: a.configure.username,
            id: f,
            room: d,
            session_id: a.configure.session_id,
            timestamp: (new Date).getTime()
        };
        for (var c in h) a.socket.addListener(c, h[c]);
        a.socket.addListener("data stream data", function(b) {
            if (a.feature.debug) {
                var c = JSON.parse(b);
                a.peer.run(c)
            } else try {
                c = JSON.parse(b), a.peer.run(c)
            } catch (e) {}
        });
        a.socket.addListener("session.error", function(b) {
            a.on.sketchReady()
        });
        a.socket.addListener("session.change", function(b) {
            a.socket.user.room = b
        });
        a.feature.debug && console.log("connecting to WebSocket...", (new Date).getTime());
        a.loader.webSocket = a.loader.add("connecting to WebSocket...");
        a.socket.addListener("session.start", function(b) {
            b ? (a.feature.debug && console.log("WebSocket connected", (new Date).getTime()), a.loader.update(a.loader.webSocket, "WebSocket connected", 100), a.location.setHash("sketch", b), a.server.open(), console.log(b)) : alertify.log("User has entered the room.")
        });
        a.socket.addListener("session.end", function(b) {
            b !== f && (alertify.log("User has left the room."), a.colorPalette && (a.colorPalette.container.style.width = window.innerWidth + "px", a.colorPalette.redraw(!0)))
        });
        a.socket.emit("session.start", a.socket.user)
    };
    var h = {};
    a.socketIO.addListener = function(d, g) {
        a.socket ? a.socket.addListener(d, g) : h[d] = g
    };
    a.socketIO.removeListener = function(d, g) {
        if (a.socket) a.socket.removeListener(d, g);
        else for (var b in h) d === b && delete h[b]
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.vector && (sketch.vector = {});
(function(a) {
    a.BBox = function(d, g, b) {
        sketch = a.BBox.__self || sketch;
        if (!d) return {};
        this.unset();
        if (4 === d.length && isFinite(d[0])) {
            var e = new sketch.vector.Transform(g);
            g = e.point2d(d[0], d[1]);
            b = e.point2d(d[0], d[3]);
            var f = e.point2d(d[2], d[3]),
                c = e.point2d(d[2], d[1]);
            d = Math.min(g.x, b.x, f.x, c.x);
            var e = Math.max(g.x, b.x, f.x, c.x),
                k = Math.min(g.y, b.y, f.y, c.y);
            g = Math.max(g.y, b.y, f.y, c.y);
            return {
                x1: d,
                y1: k,
                x2: e,
                y2: g
            }
        }
        return this.path(d, g, b)
    };
    a.BBox.prototype = {
        path: function(a, g, b) {
            var e, f = !0;
            g && (e = new sketch.vector.Transform(g),
                f = sketch.vector.Transform.isIdentity(g));
            var c;
            g = this.x;
            var k = this.y,
                h, l, p;
            if (f) for (f = 0, p = a.length; f < p; f++) switch ((c = a[f]).cmd) {
                case "M":
                    c.x < g.min && (g.min = c.x);
                    c.x > g.max && (g.max = c.x);
                    c.y < k.min && (k.min = c.y);
                    c.y > k.max && (k.max = c.y);
                    h = c.x;
                    l = c.y;
                    break;
                case "L":
                    c.x < g.min && (g.min = c.x);
                    c.x > g.max && (g.max = c.x);
                    c.y < k.min && (k.min = c.y);
                    c.y > k.max && (k.max = c.y);
                    h = c.x;
                    l = c.y;
                    break;
                case "C":
                    this.cubic(h, l, c.x1, c.y1, c.x2, c.y2, c.x, c.y);
                    h = c.x;
                    l = c.y;
                    break;
                case "Q":
                    var r = h + 2 / 3 * (c.x1 - h),
                        q = l + 2 / 3 * (c.y1 - l),
                        u = r + (c.x - h) / 3,
                        v = q + (c.y - l) / 3;
                    this.cubic(h, l, r, q, u, v, c.x, c.y);
                    h = c.x;
                    l = c.y
            } else for (f = 0, p = a.length; f < p; f++) switch ((c = a[f]).cmd) {
                case "M":
                    var s = e.point2d(c.x, c.y);
                    s.x < g.min && (g.min = s.x);
                    s.x > g.max && (g.max = s.x);
                    s.y < k.min && (k.min = s.y);
                    s.y > k.max && (k.max = s.y);
                    h = s.x;
                    l = s.y;
                    break;
                case "L":
                    s = e.point2d(c.x, c.y);
                    s.x < g.min && (g.min = s.x);
                    s.x > g.max && (g.max = s.x);
                    s.y < k.min && (k.min = s.y);
                    s.y > k.max && (k.max = s.y);
                    h = s.x;
                    l = s.y;
                    break;
                case "C":
                    s = e.point2d(c.x, c.y);
                    r = e.point2d(c.x1, c.y1);
                    c = e.point2d(c.x2, c.y2);
                    this.cubic(h, l, r.x, r.y, c.x, c.y, s.x,
                        s.y);
                    h = s.x;
                    l = s.y;
                    break;
                case "Q":
                    s = e.point2d(c.x, c.y), e.point2d(c.x1, c.y1), r = h + 2 / 3 * (s.x1 - h), q = l + 2 / 3 * (s.y1 - l), u = r + (s.x - h) / 3, v = q + (s.y - l) / 3, this.cubic(h, l, r, q, u, v, s.x, s.y), h = s.x, l = s.y
            }
            b && (g.expand(b), k.expand(b));
            return {
                x1: g.min,
                x2: g.max,
                y1: k.min,
                y2: k.max
            }
        },
        cubic: function(a, g, b, e, f, c, k, h) {
            var l = this.x,
                p = this.y;
            k < l.min && (l.min = k);
            k > l.max && (l.max = k);
            h < p.min && (p.min = h);
            h > p.max && (p.max = h);
            var r = l.contains(b) && l.contains(f),
                q = p.contains(e) && p.contains(c);
            if (!r) {
                var r = 3 * a - 9 * b + 9 * f - 3 * k,
                    u = 6 * b - 12 * f + 6 * k,
                    v = 3 * f - 3 * k;
                if (0 >= Math.abs(r)) 0 <= Math.abs(u) && (v = -v / u, 0 < v && 1 > v && l.extendToCubic(v, 1 - v, a, k, b, f));
                else if (v = u * u - 4 * r * v, 0 <= v) {
                    var s = Math.sqrt(v),
                        v = (-u + s) / (2 * r);
                    0 < v && 1 > v && l.extendToCubic(v, 1 - v, a, k, b, f);
                    v = (-u - s) / (2 * r);
                    0 < v && 1 > v && l.extendToCubic(v, 1 - v, a, k, b, f)
                }
            }
            q || (r = 3 * g - 9 * e + 9 * c - 3 * h, u = 6 * e - 12 * c + 6 * h, v = 3 * c - 3 * h, 0 >= Math.abs(r) ? 0 <= Math.abs(u) && (v = -v / u, 0 < v && 1 > v && p.extendToCubic(v, 1 - v, g, h, e, c)) : (v = u * u - 4 * r * v, 0 <= v && (s = Math.sqrt(v), v = (-u + s) / (2 * r), 0 < v && 1 > v && p.extendToCubic(v, 1 - v, g, h, e, c), v = (-u - s) / (2 * r), 0 < v && 1 > v && p.extendToCubic(v,
                1 - v, g, h, e, c))))
        },
        unset: function() {
            this.x = new h({
                min: Infinity,
                max: -Infinity
            });
            this.y = new h({
                min: Infinity,
                max: -Infinity
            })
        }
    };
    var h = function(a) {
        this.min = a.min;
        this.max = a.max
    };
    h.prototype = {
        extendToCubic: function(a, g, b, e, f, c) {
            a = a * a * a * b + 3 * a * a * g * f + 3 * a * g * g * c + g * g * g * e;
            a < this.min && (this.min = a);
            a > this.max && (this.max = a)
        },
        extendTo: function(a) {
            a < this.min && (this.min = a);
            a > this.max && (this.max = a)
        },
        contains: function(a) {
            return this.min <= a && a <= this.max
        },
        expand: function(a) {
            this.min -= a;
            this.max += a
        }
    }
})(sketch.vector);
"undefined" !== typeof module && module.exports && (module.exports = sketch.vector.BBox);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.vector && (sketch.vector = {});
(function(a) {
    var h = {
        a: 1,
        b: 0,
        x: 0,
        c: 0,
        d: 1,
        y: 0
    }, d = function(b) {
        var e = a.Transform.identity;
        return b.a === e.a && b.b === e.b && b.c === e.c && b.d === e.d && b.x === e.x && b.y === e.y
    }, g = function() {
        return {
            a: 1,
            b: 0,
            x: 0,
            c: 0,
            d: 1,
            y: 0
        }
    };
    a.Transform = function(a, e) {
        this.matrix = "undefined" === typeof a ? {
            a: 1,
            b: 0,
            x: 0,
            c: 0,
            d: 1,
            y: 0
        } : "undefined" === typeof a[0] ? a : this.cloneMatrix(a);
        return this
    };
    a.Transform.identity = h;
    a.Transform.isIdentity = d;
    a.Transform.getIdentity = g;
    a.Transform.prototype = {
        identity: h,
        isIdentity: d,
        getIdentity: g,
        point2d: function(a,
                          e) {
            var d = this.matrix;
            return {
                x: d.a * a + d.c * e + d.x,
                y: d.b * a + d.d * e + d.y
            }
        },
        point2dx: function(a, e, d) {
            var c = this.matrix,
                g = a[e],
                h = a[d];
            a[e] = c.a * g + c.c * h + c.x;
            a[d] = c.b * g + c.d * h + c.y
        },
        flatten: function(a, e, d) {
            if (a && a.length) {
                e && (a = JSON.parse(JSON.stringify(a)));
                e = 0;
                for (var c = a.length, g; e < c; e++) if (g = a[e]) switch (g.cmd) {
                    case "M":
                        this.point2dx(g, "x", "y");
                        break;
                    case "L":
                        this.point2dx(g, "x", "y");
                        break;
                    case "C":
                        this.point2dx(g, "x", "y");
                        this.point2dx(g, "x1", "y1");
                        this.point2dx(g, "x2", "y2");
                        break;
                    case "Q":
                        this.point2dx(g, "x", "y");
                        this.point2dx(g, "x1", "y1");
                        break;
                    case "Z":
                    case "z":
                        isFinite(g.x) && isFinite(g.y) && this.point2dx(g, "x", "y")
                }
                d && (this.matrix = this.getIdentity());
                return a
            }
        },
        invert: function(a) {
            a = a || this.matrix;
            "undefined" === typeof a.a && (M = this.cloneMatrix(M));
            var e = a.a * a.d - a.b * a.c;
            delete this.matrix;
            this.combine({
                a: a.d / e,
                b: -a.b / e,
                x: (a.b * a.y - a.d * a.x) / e,
                c: -a.c / e,
                d: a.a / e,
                y: (a.c * a.x - a.a * a.y) / e
            });
            return this
        },
        transform: function(a, e, d, c, g, h) {
            var l = this.matrix;
            this.matrix = {
                a: l.a * a + l.c * e,
                b: l.b * a + l.d * e,
                c: l.a * d + l.c * c,
                d: l.b * d + l.d * c,
                x: l.a * g + l.c * h + l.x,
                y: l.b * g + l.d * h + l.y
            };
            return this
        },
        setTransform: function(a, e, d, c, g, h) {
            this.matrix = {
                a: a,
                b: e,
                c: d,
                d: c,
                x: g,
                y: h
            };
            return this
        },
        rotate: function(a) {
            var e = this.matrix,
                d = Math.cos(a);
            a = Math.sin(a);
            this.matrix = {
                a: e.a * d + e.b * -a,
                b: e.a * a + e.b * d,
                c: e.c * d + e.d * -a,
                d: e.c * a + e.d * d,
                x: e.x,
                y: e.y
            };
            return this
        },
        scale: function(a, e) {
            "undefined" === typeof e && (e = a);
            var d = this.matrix;
            this.matrix = {
                a: d.a * a,
                b: d.b * e,
                c: d.c * a,
                d: d.d * e,
                x: d.x,
                y: d.y
            };
            return this
        },
        skew: function(a, e) {
            var d = this.matrix,
                c = d.a,
                g = d.b,
                h = d.c,
                l = d.d,
                p = Math.tan(a),
                r = Math.tan(e);
            d.a = c + h * r;
            d.b = g + l * r;
            d.c = c * p + h;
            d.d = g * p + l;
            return this
        },
        translate: function(a, e) {
            "undefined" === typeof e && (e = 0);
            var d = this.matrix;
            d.x = d.a * a + d.c * e + d.x;
            d.y = d.b * a + d.d * e + d.y;
            return this
        },
        combine: function(a) {
            var e = [];
            if ("undefined" !== typeof a.matrix) for (var d = 0; d < arguments.length; d++) e[d] = arguments[d].matrix;
            else if ("number" === typeof a.a) for (d = 0; d < arguments.length; d++) e[d] = arguments[d];
            else e = a;
            for (var d = this.matrix, c = [], g = 0; g < e.length; g++) "undefined" === typeof d ? d = e[g] : (c = e[g],
                d = {
                    a: d.a * c.a + d.b * c.c,
                    b: d.a * c.b + d.b * c.d,
                    c: d.c * c.a + d.d * c.c,
                    d: d.c * c.b + d.d * c.d,
                    x: d.a * c.x + d.c * c.y + d.x,
                    y: d.b * c.x + d.d * c.y + d.y
                });
            this.matrix = d;
            return this
        },
        clone: function() {
            return new a.Transform(this.cloneMatrix())
        },
        cloneMatrix: function(a) {
            a = a || this.matrix;
            return "undefined" === typeof a.a ? {
                a: a[0],
                b: a[1],
                c: a[2],
                d: a[3],
                x: a[4],
                y: a[5]
            } : {
                a: a.a,
                b: a.b,
                c: a.c,
                d: a.d,
                x: a.x,
                y: a.y
            }
        },
        reset: function() {
            this.matrix = g();
            return this
        },
        toString: function() {
            var a = this.matrix;
            return "" + a.a + "," + a.b + "," + a.c + "," + a.d + "," + a.x + "," + a.y
        },
        toArray: function() {
            var a = this.matrix;
            return [a.a, a.b, a.c, a.d, a.x, a.y]
        },
        apply: function(a, e) {
            var d = this.matrix;
            e ? a.transform(d.a, d.b, d.c, d.d, d.x, d.y) : a.setTransform(d.a, d.b, d.c, d.d, d.x, d.y);
            return this
        }
    };
    a.Transform.__default = new a.Transform
})(sketch.vector);
"undefined" !== typeof module && module.exports && (module.exports = sketch.vector.Transform);
"undefined" === typeof sketch && (sketch = {});
(function(a) {
    a.api = new function() {
        var b = this;
        this.alertify = {};
        this.test = function(e, d, c, g) {
            var h = b.alertify[e];
            h && h.close && h.close(h.lastItem);
            a.loader || new widget.Loader;
            var l = a.api[e],
                p = STRING.ucwords(e).replace("Gdrive", "Google Drive"),
                r = 0;
            l.init(function() {
                var q = "sk-loader-" + p,
                    u = "<span id='" + q + "'>...</span>";
                l.uploading ? alertify.log("Still uploading to " + p + u) : h = b.alertify[e] = alertify.log("<img src='./media/ux/loader.gif' style='border-radius: 50%;'> Uploading to " + p + u, null, 0);
                var v = a.$("#" + q);
                l.post({
                    title: c,
                    description: g,
                    canvas: d,
                    onupload: function(a) {
                        h && h.close && h.close(h.lastItem);
                        alertify.log(p + " upload complete :)");
                        l.shareProxy || window.open(a, "")
                    },
                    onprogress: function(a) {
                        a = 100 * (a.loaded / a.total) >> 0;
                        a + 5 > r && (r = a + 5, v.textContent = ": " + a + "%")
                    },
                    onerror: function() {
                        h && h.close && h.close(h.lastItem);
                        alertify.log(p + " upload failed :(")
                    }
                })
            }, function() {
                alertify.log(p + " could not authorize :(")
            })
        };
        this.construct = function(a, b, c, d) {
            window[b] ? c && c() : dom.loadScript.add({
                url: a,
                verify: b,
                error: d,
                callback: function() {
                    setTimeout(function() {
                        c && c()
                    }, 100)
                }
            })
        };
        this.verify = function(a, b, c) {
            if (a.verified) return a.verified;
            a.init(function() {
                b(c[0], c[1], c[2], c[3], c[4], c[5], c[6], c[7])
            })
        };
        this.sites = {
            digg: function(a) {
                return "http://digg.com/submit?url=" + encodeURIComponent(a.mediaUrl)
            },
            stumbleupon: function(a) {
                return "https://www.stumbleupon.com/submit?url=" + encodeURIComponent(a.mediaUrl)
            },
            reddit: function(a) {
                return "http://www.reddit.com/submit?url=" + encodeURIComponent(a.mediaUrl)
            },
            gmail: function(a) {
                return "http://mail.google.com/mail/" + ("?view=cm&fs=1&su=" + encodeURIComponent(a.title) + "&body=" + encodeURIComponent(a.mediaUrl))
            },
            delicious: function(a) {
                return "http://del.icio.us/post" + ("?url1=" + encodeURIComponent(a.mediaUrl) + "&title=" + encodeURIComponent(a.title))
            },
            myspace: function(a) {
                return "http://www.myspace.com/Modules/PostTo/Pages/" + ("?u=" + encodeURIComponent(a.mediaUrl) + "&t=" + encodeURIComponent(a.title))
            },
            slashdot: function(a) {
                return "http://slashdot.org/slashdot-it.pl?op=basic&url=" + encodeURIComponent(a.mediaUrl)
            },
            yahoo: function(a) {
                return "http://buzz.yahoo.com/submit/?url=" + encodeURIComponent(a.mediaUrl)
            },
            technorati: function(a) {
                return "http://www.technorati.com/faves?add=" + encodeURIComponent(a.mediaUrl)
            },
            linkedin: function(a) {
                return "http://www.linkedin.com/shareArticle" + ("?mini=true&url=" + encodeURIComponent(a.mediaUrl) + "&title=" + encodeURIComponent(a.title) + "&summary=" + encodeURIComponent(a.description) + "&source=" + encodeURIComponent(a.shareUrl))
            },
            tumblr: function(a) {
                return "http://www.tumblr.com/share/link" + ("?url=" + encodeURIComponent(a.mediaUrl) + "&name=" + encodeURIComponent(a.title) + "&description=" + encodeURIComponent(a.description))
            },
            twitter: function(a) {
                return "http://twitter.com/share" + ("?text=" + encodeURIComponent(a.title) + " " + encodeURIComponent(a.description) + "&url=" + encodeURIComponent(a.shareUrl))
            },
            facebook: function(a) {
                return "https://www.facebook.com/sharer/sharer.php" + ("?s=100&p[title]=" + encodeURIComponent(a.title) + "&p[summary]=" + encodeURIComponent(a.description) + "&p[url]=" + encodeURIComponent(a.shareUrl) + "&p[images][0]=" + encodeURIComponent(a.mediaUrl))
            },
            pinterest: function(a) {
                return "https://pinterest.com/pin/create/button" + ("?url=" + encodeURIComponent(a.shareUrl) + "&media=" + encodeURIComponent(a.mediaUrl) + "&description=" + encodeURIComponent(a.title) + " " + encodeURIComponent(a.description))
            }
        };
        this.share = function(a) {
            var d = a.target,
                c = b.sites[d];
            c && (a = c(a), window.open(a, d || ""))
        };
        this.shareProxy = function(b) {
            var f = this;
            this.shareProxy = !0;
            this.init = function(a, b) {
                f.verified = !0;
                a && a()
            };
            this.post = function(c) {
                if (a.api.verify(f, f.post, arguments)) {
                    var k = c.title,
                        h = c.description,
                        l = c.onupload;
                    a.api.local.post({
                        canvas: c.canvas,
                        onprogress: c.onprogress || g,
                        onerror: c.onerror || d,
                        onupload: function(c) {
                            l && l(c);
                            a.api.share({
                                target: b,
                                title: k,
                                description: h,
                                shareUrl: c,
                                mediaUrl: c
                            })
                        }
                    })
                }
            }
        }
    };
    (function() {
        for (var b = ["twitter", "pinterest", "tumblr", "stumbleupon", "gmail"], e = 0; e < b.length; e++) {
            var d = b[e];
            a.api[d] = new a.api.shareProxy(d)
        }
    })();
    a.api.facebook = new a.api.shareProxy("facebook");
    var h = function(b) {
        this.init = function(a, b) {
            a && a()
        };
        this.post = function(e) {
            if (sk.supports.io.blob) {
                var d = e.onpost,
                    c = e.onupload;
                e.canvas.toBlobURL(function(a) {
                    a = window.location.protocol + b + a;
                    c && c(a);
                    d && d(a)
                })
            } else a.api.imgur.post(e)
        }
    };
    "sketch.io" === window.location.host ? (a.api.sketchpad = new h("//sketch.io/sketchpad/?image="), a.api.webcamfx = new h("//sketch.io/webcam-fx/?image=")) : "localhost" === window.location.host && (a.api.sketchpad = new h("//localhost/sketch.io/sketch-src/www/?image="), a.api.webcamfx = new h("//localhost/sketch.io/sketch-filter/www/?image="));
    a.api.imgur = new function(b) {
        var e = this;
        this.uploading = !1;
        this.timestamp = (new Date).getTime();
        this.src = "";
        this.appId = "31b22b64cad2f65";
        this.init = function(a, b) {
            a && a()
        };
        this.post = function(f) {
            if (!e.uploading) {
                var c = f.canvas,
                    k = f.onpost,
                    h = f.onupload,
                    l = f.onprogress || g,
                    p = f.onerror || d;
                e.timestamp === a.__modifiedOnline ? (h && h(e.src), k && k(e.src)) : (e.uploading = !0, c.toBlob(function(c) {
                    var d = new FormData;
                    d.append("image", c);
                    a.util.request({
                        url: "https://api.imgur.com/3/image.json",
                        body: d,
                        headers: {
                            Authorization: "Client-ID " + e.appId
                        },
                        onprogress: l,
                        onerror: function(a) {
                            e.uploading = !1;
                            p && p(a)
                        },
                        onload: function(c) {
                            e.uploading = !1;
                            try {
                                var d = JSON.parse(c.responseText).data.link,
                                    d = b.indexOf("https://") ? b + d.replace("http://", "https://") : b + d;
                                h && h(d);
                                k && k(d);
                                e.src = d;
                                e.timestamp = a.__modifiedOnline
                            } catch (f) {}
                        }
                    })
                }))
            }
        }
    }("");
    a.api.filepicker = new function() {
        var b = this;
        this.appId = "AmXVSjplaSwalHIqs9E6Qz";
        this.init = function(e, d) {
            var c = window.location.protocol,
                c = (0 === c.indexOf("http") ? c : "https:") + "//api.filepicker.io/v1/filepicker.js";
            a.api.construct(c, "filepicker", function() {
                b.verified = !0;
                filepicker.setKey(b.appId);
                e && e()
            }, d || function() {
                console.log(FPError.toString())
            })
        };
        this.store = function(e, d, c, g) {
            if (a.api.verify(b, b.store, arguments)) {
                var h = e.toDataURL("image/png").split(",")[1],
                    l = h.length;
                filepicker.store(h, {
                    mimetype: "image/png",
                    base64decode: !0
                }, function(a) {
                    d && d(a.url)
                }, function(a) {
                    c && c(a.toString())
                }, function(a) {
                    g && g({
                        loaded: a / 100 * l,
                        total: l
                    })
                })
            }
        };
        this.post = function(e) {
            if (a.api.verify(b, b.post, arguments)) {
                var d = e.onpost,
                    c = e.onupload;
                a.api.local.post({
                    canvas: e.canvas,
                    onprogress: e.onprogress,
                    onerror: e.onerror,
                    onupload: function(a) {
                        c && c(a);
                        filepicker.exportFile(a, function(a) {
                            d && d(a.url)
                        })
                    }
                })
            }
        }
    };
    a.api.local = new function(b) {
        var e = this;
        this.src = "";
        this.timestamp = (new Date).getTime();
        this.uploading = !1;
        this.host = window.location.host;
        this.init = function(a, b) {
            a && a()
        };
        this.post = function(b) {
            if (!e.uploading) {
                var c = b.canvas,
                    k = b.onpost,
                    h = b.onupload,
                    l = b.onprogress || g,
                    p = b.onerror || d;
                e.timestamp === a.__modifiedOnline ? (h && h(e.src), k && k(e.src)) : (e.uploading = !0, a.feature.filepickerio ? a.api.filepicker.store(c, function(b) {
                        h && h(b);
                        k && k(b);
                        e.src = b;
                        e.uploading = !1;
                        e.timestamp = a.__modifiedOnline
                    },
                    p, l) : a.util.request({
                    url: "https://sketch.io/upload.php",
                    body: "canvasData=" + c.toDataURL("image/png"),
                    headers: {
                        "Content-Type": "canvas/upload"
                    },
                    onprogress: l,
                    onerror: function(a) {
                        p && p(a);
                        e.uploading = !1
                    },
                    onload: function(b) {
                        b = "https://sketch.io/render/" + b.response;
                        h && h(b);
                        k && k(b);
                        e.src = b;
                        e.uploading = !1;
                        e.timestamp = a.__modifiedOnline
                    }
                }))
            }
        }
    };
    var d = function(a) {
        console.log(a)
    }, g = function(a) {
        console.log(100 * (a.loaded / a.total) >> 0)
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.api && (sketch.api = {});
(function(a) {
    var h = function(a) {
        try {
            return JSON.parse(a)
        } catch (b) {
            return ""
        }
    };
    a.api.sketchio = {
        list: function(b) {
            b || (b = {});
            var c = b.mime || d;
            sketch.util.request({
                url: sketch.location.host + "my-files.html?format=json",
                onload: function(b) {
                    b = h(b.responseText);
                    a.api.sketchio.html_files(b, c)
                }
            })
        },
        html_files: function(a, b) {
            for (var e = document.querySelector("#sketch-files"), d = [], g = document.createElement("div"), h = function() {
                var b = this.querySelector("img").getAttribute("data-nid"),
                    b = a[b],
                    b = sketch.location.host + "/getFile.php?src=" + b.username + "/" + b.file_id;
                sketch.setupTool("select");
                sketchui.setToolMenu("select");
                sketch.ui.buildConfigure("image");
                sketch.addMedia({
                    src: b,
                    name: ".json",
                    callback: sketch.loader.stop
                })
            }, r = 0; r < a.length; r++) {
                var q = a[r],
                    u = document.createElement("div"),
                    v = new Image,
                    s = document.createTextNode(q.message);
                v.height = 64;
                v.src = sketch.location.host + q.thumb_50x50;
                v.setAttribute("data-nid", r);
                var x = document.createElement("div");
                x.style.cssText = "display: inline-block; width: 64px; height: 64px; overflow: hidden; margin-right: 15px;";
                x.appendChild(v);
                u.onclick = h;
                u.title = 'open "' + q.title + '"';
                u.style.cssText = "clear: both; margin-bottom: 10px; cursor: pointer;";
                u.appendChild(x);
                u.appendChild(s);
                g.appendChild(u);
                d.push(q)
            }
            d.length ? (e.innerHTML = "", e.appendChild(g)) : e.innerHTML = "<h3>You have no images stored in Sketch.IO</h3>"
        }
    };
    var d = {
        "image/png": !0,
        "image/jpeg": !0,
        "image/gif": !0
    }, g, b;
    a.api.gdrive = new function() {
        var f = this;
        this.init = function(b, e) {
            a.api.gdrive.html_profile();
            b = b || a.api.gdrive.auth;
            "undefined" === typeof gapi ? dom.loadScript.add({
                url: "https://apis.google.com/js/client.js",
                verify: ["gapi", "gapi.auth"],
                error: e,
                callback: function() {
                    sketch.loader.stop();
                    setTimeout(function() {
                        a.api.gdrive.auth(b, e)
                    }, 1)
                }
            }) : gapi.auth.getToken() ? b && b() : a.api.gdrive.auth(b, e)
        };
        this.getToken = function(a) {
            sketch.getItem("google-drive", function(b) {
                b && (b = h(b));
                b && b.access_token || (b = "");
                a(b)
            })
        };
        this.getUserInfo = function() {
            a.api.gdrive.getToken(function(b) {
                b && sketch.util.request({
                    url: "https://www.googleapis.com/oauth2/v1/userinfo?access_token=" + b.access_token,
                    onload: function(b) {
                        b && b.responseText && (g = h(b.responseText).email, a.api.gdrive.html_profile())
                    }
                })
            })
        };
        this.html_profile = function() {
            g && setTimeout(function() {
                var a = document.querySelector("#avgrund-html .drive-profile");
                a && (a.style.display = "inline-block", a.firstChild.innerHTML = g)
            }, 1)
        };
        this.html_files = function(b, e) {
            a.api.gdrive.getToken(function(a) {
                if (a) {
                    for (var d = document.querySelector(".drive-files"), f = [], g = document.createElement("div"), h = function() {
                        var b = this.querySelector("img").getAttribute("data-src"),
                            c = "&access_token=" + a.access_token;
                        sketch.addMedia({
                            src: b + c,
                            name: b + c,
                            callback: sketch.loader.stop
                        })
                    }, u = 0; u < b.length; u++) {
                        var v = b[u];
                        if (e[v.mimeType]) {
                            var s = document.createElement("div"),
                                x = new Image,
                                w = document.createTextNode(v.title);
                            x.height = 64;
                            x.src = v.thumbnailLink;
                            x.setAttribute("data-src", v.downloadUrl);
                            var A = document.createElement("div");
                            A.style.cssText = "display: inline-block; width: 64px; height: 64px; overflow: hidden; margin-right: 15px;";
                            A.appendChild(x);
                            s.onclick = h;
                            s.title = 'open "' + v.title + '"';
                            s.style.cssText = "clear: both; margin-bottom: 10px; cursor: pointer;";
                            s.appendChild(A);
                            s.appendChild(w);
                            g.appendChild(s);
                            f.push(v)
                        }
                    }
                    f.length ? (d.innerHTML = "", d.appendChild(g)) : d.innerHTML = "<h3>You have no images stored in Google Drive</h3>"
                }
            })
        };
        this.revoke = function() {
            a.api.gdrive.getToken(function(a) {
                a && sketch.util.request({
                    url: "../?revoke-google=" + a.access_token,
                    onload: function() {
                        sketch.setItem("google-drive", "");
                        b = g = void 0
                    }
                })
            })
        };
        this.auth = function(b, d, f) {
            a.api.gdrive.getToken(function(d) {
                var g = (new Date).getTime();
                if (d && 1 > (g - d.timestamp) / 1E3 / 60 / 60) gapi.auth.setToken(d),
                    a.api.gdrive.getUserInfo(), b && b();
                else {
                    var k = {
                        client_id: e[window.location.host],
                        scope: ["https://www.googleapis.com/auth/drive", "https://www.googleapis.com/auth/userinfo.email"]
                    };
                    !f && d && (k.immediate = !0);
                    gapi.auth.authorize(k, function() {
                        var e = gapi.auth.getToken();
                        if (e) {
                            var d = {};
                            d.timestamp = g;
                            d.access_token = e.access_token;
                            sketch.setItem("google-drive", JSON.stringify(d));
                            a.api.gdrive.getUserInfo();
                            b && b()
                        } else a.api.gdrive.revoke(), a.api.gdrive.auth(b, null, !0)
                    })
                }
            })
        };
        this.list = function(c) {
            c || (c = {});
            var e = c.mime || d,
                f = c.callback;
            a.api.gdrive.init(function() {
                sketch.loader.message("updating listing...");
                gapi.client.request({
                    path: "/drive/v2/files",
                    method: "GET",
                    params: {
                        maxResults: "100"
                    }
                }).execute(function(d) {
                        d.error ? (a.api.gdrive.revoke(), a.api.gdrive.auth(function() {
                            a.api.gdrive.list(c)
                        }, null, !0)) : ((b = d) && a.api.gdrive.html_files(b.items, e), f && f(ret))
                    });
                setTimeout(function() {
                    b && a.api.gdrive.html_files(b.items, e)
                }, 1)
            })
        };
        this.open = function() {};
        this.uploading = !1;
        this.timestamp = (new Date).getTime();
        this.src = "";
        this.post = function(b) {
            var e = b.title,
                d = b.canvas,
                g = b.onpost,
                h = b.onupload,
                r = b.onerror || onErrorHandler;
            f.timestamp === sketch.__modifiedOnline ? (h && h(f.src), g && g(f.src)) : a.api.gdrive.init(function() {
                a.api.gdrive.getToken(function(a) {
                    if (!a) r && r();
                    else if (!f.uploading) {
                        f.uploading = !0;
                        var b = d.toDataURL("image/png");
                        a = {
                            title: e,
                            mimeType: "image/png"
                        };
                        b = b.replace(/^data:image\/(gif|png|jpg|jpeg);base64,/, "");
                        a = "\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n" + JSON.stringify(a) + "\r\n---------314159265358979323846\r\nContent-Type: image/png\r\nContent-Transfer-Encoding: base64\r\n\r\n" + b + "\r\n---------314159265358979323846--";
                        gapi.client.request({
                            path: "/upload/drive/v2/files/",
                            method: "POST",
                            params: {
                                uploadType: "multipart"
                            },
                            headers: {
                                "X-Upload-Content-Type": "image/png",
                                "X-Upload-Content-Length": b.length,
                                "Content-Range": "*/*",
                                "Content-Type": 'multipart/mixed; boundary="-------314159265358979323846"'
                            },
                            body: a
                        }).execute(function(a, b) {
                                f.uploading = !1;
                                var c = document.querySelector(".request-url");
                                if (c) {
                                    var e = new Image,
                                        d = document.createElement("a");
                                    e.src = a.webContentLink;
                                    e.width = 64;
                                    d.href = a.webContentLink;
                                    d.appendChild(e);
                                    c.appendChild(d)
                                }
                                if (c = a.webContentLink) c = c.replace("&export=download", ""), h && h(c), g && g(c), f.src = c, f.timestamp = sketch.__modifiedOnline
                            })
                    }
                })
            })
        }
    };
    var e = {
        "": "54252469699-45phq7q6u8oi91kush4a6v6n9i4ka0hl.apps.googleusercontent.com",
        kkghjbajgkcialbbimbifdcjilhcgoim: "54252469699-2si3ievbu510bke1gij5vf5vk4g59t2u.apps.googleusercontent.com",
        "dev.sketchpad.io": "442790713590-10eks3nibtlfjb61o20b2ata55hn1ob8.apps.googleusercontent.com",
        "sketchpad.io": "442790713590.apps.googleusercontent.com",
        "sketch.io": "1084993334678-k63b3uvj7175ndpgai2q1l5p1nda4f13.apps.googleusercontent.com",
        "mudcu.be": "1084993334678-blm2o4tokd6sffahgqglmirir33imvoj.apps.googleusercontent.com",
        "mud.local": "442790713590-21sjq506elknq795rcd5a050689qs07n.apps.googleusercontent.com",
        localhost: "442790713590-21sjq506elknq795rcd5a050689qs07n.apps.googleusercontent.com"
    }
})(sketch);
(function(a) {
    a.convert || (a.convert = {});
    a.convert.blobToABR = function(a, d) {
        var g, b, e, f, c = a.slice(0, a.size),
            k = new FileReader;
        k.onload = function(a) {
            var c = function() {
                    if (!(v + 1 > x.byteLength)) return w.getUint8(v++-1, !1)
                }, h = function() {
                    if (!(v + 2 > x.byteLength)) return w.getUint16((v += 2) - 2, !1)
                }, r = function() {
                    if (!(v + 4 > x.byteLength)) return w.getUint32((v += 4) - 4, !1)
                }, q = function(a) {
                    var b = r();
                    if (0 === b) return v = brush.next, a && z();
                    a = 0;
                    for (var c = ""; a < b; a++) c += String.fromCharCode(w.getUint16(v, !1)), v += 2;
                    return c
                }, u = function(a) {
                    for (var b = "", c = x.byteLength, e = 0; b !== a && v < c;) {
                        ++e;
                        var d = String.fromCharCode(w.getUint8(v, !1));
                        v++;
                        if (a[b.length] === d) {
                            if (b += d, b === a) return e
                        } else b = ""
                    }
                }, v = 0,
                s = 0,
                x = k.result,
                w = new DataView(x);
            g = [];
            b = h();
            f = e = 0;
            var A = function() {
                    if (y !== f && !(v > x.byteLength - 1)) {
                        var a = {};
                        a.idx = y;
                        g.push(a);
                        B && (a.type = h());
                        a.byteSize = r();
                        if (D) for (; 0 !== a.byteSize % 4;) a.byteSize++;
                        a.next = v + a.byteSize;
                        if (B) {
                            if (2 !== a.type) return v = a.next, z();
                            v += 4;
                            a.spacing = h();
                            2 === b && (a.name = q(!0).replace(/\W/g, "").trim());
                            a.antialiasing = c();
                            v += 8
                        } else v += 1 === e ? 47 : 301;
                        var k = r(),
                            m = r(),
                            A = r(),
                            G = r(),
                            Q = h(),
                            K = c();
                        a.width = G - m;
                        a.height = A - k;
                        a.size = a.width * (Q >> 3) * a.height;
                        k = document.createElement("canvas");
                        k.style.background = "#ffffaa";
                        k.width = a.width;
                        k.height = a.height;
                        m = k.getContext("2d");
                        A = m.getImageData(0, 0, k.width, k.height);
                        G = A.data;
                        if (0 === K) if (8 === Q) for (var K = v, F = 0, Q = v + a.size; K < Q; K++, F += 4) G[F] = 0, G[F + 1] = 0, G[F + 2] = 0, G[F + 3] = w.getUint8(K);
                        else for (K = v, F = 0, Q = v + a.size; K < Q; K += 4, F += 4) G[F] = w.getUint8(K), G[F + 1] = w.getUint8(K + 1), G[F + 2] = w.getUint8(K + 2), G[F + 3] = w.getUint8(K + 3);
                        else {
                            for (var F = 0, aa = [], K = 0; K < a.height; K++) aa[K] = w.getUint16(v, !1), v += 2;
                            Q = 8 === Q ? 3 : 0;
                            for (K = 0; K < a.height; K++) for (var U = 0; U < aa[K];) {
                                var Z = w.getUint8(v);
                                v++;
                                U++;
                                128 <= Z && (Z -= 256);
                                if (0 > Z) {
                                    if (-128 != Z) {
                                        var Z = -Z + 1,
                                            T = w.getUint8(v);
                                        v++;
                                        U++;
                                        for (var P = 0; P < Z; P++, F += Q + 1) G[F + 3] = T
                                    }
                                } else for (P = 0; P < Z + 1; P++, F += Q + 1) G[F + Q] = w.getUint8(v), v++, U++
                            }
                        }
                        D && (v = E + s, s += u("Nm  TEXT"), a.name = q(), s += u("Nm  TEXT"), s += u("Nm  TEXT"));
                        m.putImageData(A, 0, 0);
                        d(k, a, 100 * ((y + 1) / f), z);
                        v = a.next
                    }
                }, y = 0,
                z = function() {
                    setTimeout(function() {
                            A(y++)
                        },
                        1)
                }, B = 6 > b,
                D = 6 <= b;
            if (B) f = h(), A();
            else if (D) {
                e = h();
                u("8BIMsamp");
                var E = r() + v;
                a = v;
                for (f = 0; v < E;) {
                    for (var G = r(); 0 !== G % 4;) G++;
                    v += G;
                    f++
                }
                v = a;
                A()
            }
        };
        k.readAsArrayBuffer(c)
    }
})(sketch);
(function(a) {
    a.convert || (a.convert = {});
    a.convert.blobToGBR = function(a, d) {
        var g = {
                0: "headerSize",
                4: "version",
                8: "width",
                12: "height",
                16: "colorDepth",
                20: "namespace",
                24: "spacing"
            }, b = {}, e = a.slice(0, a.size),
            f = new FileReader;
        f.onload = function(a) {
            var e = f.result;
            a = new DataView(e);
            for (var h = 0; 28 > h; h += 4) b[g[h]] = a.getUint32(h, !1);
            b.name = "";
            for (var h = 28, l = b.headerSize - 1; h < l; h++) b.name += String.fromCharCode(a.getUint8(h));
            var p = document.createElement("canvas");
            p.style.background = "#ffffaa";
            var r = p.getContext("2d");
            p.width = b.width;
            p.height = b.height;
            var q = r.getImageData(0, 0, p.width, p.height),
                u = q.data;
            if (1 === b.colorDepth) for (h = l, l = 0, e = e.byteLength; h < e; h++, l += 4) {
                var v = a.getUint8(h);
                u[l + 0] = 0;
                u[l + 1] = 0;
                u[l + 2] = 0;
                u[l + 3] = v
            } else for (h = l, e = e.byteLength - 4; h < e; h += 4) {
                var l = a.getUint8(h),
                    v = a.getUint8(h + 1),
                    s = a.getUint8(h + 2),
                    x = a.getUint8(h + 3);
                u[4 * h + 0] = 255 - l;
                u[4 * h + 1] = 255 - v;
                u[4 * h + 2] = 255 - s;
                u[4 * h + 3] = 255 - x
            }
            r.putImageData(q, 0, 0);
            document.body.appendChild(p);
            d && d(p, b, 100)
        };
        f.readAsArrayBuffer(e)
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.io && (sketch.io = {});
(function(a) {
    a.io.json = new function() {
        var g = this;
        this.read = function(b, e, f) {
            if (!b) return console.log("missing configure");
            e = e || b.onload || d;
            f = f || b.onerror || d;
            var c;
            if (b.data) c = b.data;
            else {
                if (b.hash) return a.convert.blobToText(b, function(b) {
                    a.open.json(b, e, f)
                });
                c = b.src ? b.src : b
            }
            if ("<" === c.substr(0, 1)) return a.loader.stop();
            if ("http" === c.substr(0, 4) || sketch.util.parseUri.isLocalhost(c)) return sketch.util.request({
                url: c,
                onload: function(a) {
                    b.data = a.responseText;
                    g.read(b, e, f)
                }
            });
            try {
                c = JSON.parse(c)
            } catch (k) {
                return f(k)
            }
            return e(c)
        };
        this.open = function(b, e, d) {
            e = b.onload || e;
            d = b.onerror || d;
            g.read(b, function(c) {
                if (c) {
                    if (b.mergeIntoActions) return g.merge(c, e, d);
                    a.loader.thread = a.loader.thread || a.loader.add("opening sketch...");
                    "sketch" === c.title && (c.title = a.project.title = a.feature.project.title);
                    "..." === c.description && (c.description = a.project.description = a.feature.project.description);
                    c.actions && a.scene.setData(c.actions);
                    a.history && a.feature.history.vector && (c.history && c.history.vector) && (a.history.history.vector = c.history.vector);
                    c = g.upgrade(c);
                    c = c.metadata || {};
                    for (var k in c) typeof c[k] === typeof a.project[k] && (a.project[k] = c[k]);
                    c.background && a.setBackground(c.background);
                    a.project.setSize(c.width, c.height, c.units);
                    a.orient && a.orient.reset();
                    a.render.state = "preload";
                    a.scene.reindex();
                    a.render.preload({
                        onprogress: function(b) {
                            a.loader.update(a.loader.thread, "opening sketch...", 99 * b >> 0)
                        },
                        onload: function() {
                            a.loader.stop();
                            a.assets && a.assets.addFromActions(a.scene.data);
                            e && e()
                        }
                    })
                }
            }, d)
        };
        this.merge = function(b, e, d) {
            if (!b) return d();
            b = b.actions ? b.actions : b;
            for (d = 0; d < b.length; d++) {
                var c = b[d];
                a.scene.getById(c.id) || (a.scene.push(c), a.scene.dataById[c.id] = c)
            }
            a.scene.reindex();
            a.render.preload({
                onload: function() {
                    a.assets && a.assets.addFromActions(a.scene.data);
                    e && e()
                }
            })
        };
        this.save = function(b, e) {
            b = b || function(a, b) {
                console.log(a, b)
            };
            var d = a.scene.data,
                c = {};
            if (a.history && a.history.history) if (e) {
                var g = a.feature.sync.json;
                g && g.undo && (c.history = {}, c.history.vector = a.history.history.vector)
            } else a.feature.history.vector && (c.history = {}, c.history.vector = a.history.history.vector);
            c.metadata = a.project;
            c.version = a.__version;
            c.title = a.project.title;
            c.description = a.project.description;
            c.actions = h(a.scene.clone(d));
            "sketch" === c.title && (c.title = a.project.title = a.feature.project.title);
            "..." === c.description && (c.description = a.project.description = a.feature.project.description);
            this.assets(function(e) {
                b(JSON.stringify(c, a.util.json.filterCircular), e)
            })
        };
        this.assets = function(b) {
            b = b || {};
            "function" === typeof b && (b = {
                callback: b
            });
            var e = b.actions || (b.fromSelection ? a.scene.getSelection() : a.scene.data),
                d = b.callback || function(a) {
                    console.log(a)
                }, c = b.toBlobURL || !1,
                g = function() {
                    !--r && q >= p - 1 && d(l)
                };
            b = function(b) {
                ++r;
                var e = b.src;
                if (l[e]) g();
                else if (!1 === h && sketch.util.parseUri.isLocalhost(e)) g();
                else if (a.assets.data[e]) {
                    var d = a.assets.data[e],
                        f = a.configure.image,
                        p = f.mime,
                        f = f.quality,
                        q = b.type;
                    if ("clipart" === q) {
                        if (d.srcXML) b = d.srcXML;
                        else {
                            if ("function" !== typeof d.stringify) return a.feature.debug && console.log("cannot stringify svg", d), g();
                            b = d.stringify()
                        }
                        b = new Blob([b], {
                            type: "image/svg+xml"
                        });
                        l[e] = c ? URL.createObjectURL(b) : b;
                        g()
                    } else a.detect.stampResource[q] && "image/jpeg" === p && (q = d.getContext("2d"), q.save(), q.globalCompositeOperation = "destination-atop", q.fillStyle = "#fff", q.fillRect(0, 0, d.width, d.height), q.restore()), c ? a.assets.IDtoURL[b.src] ? (l[e] = a.assets.IDtoURL[b.src], g()) : d.blob ? (l[e] = URL.createObjectURL(d.blob), g()) : d.toBlob(function(a) {
                        l[e] = URL.createObjectURL(a);
                        g()
                    }, p, f) : d.blob ? (l[e] = d.blob, g()) : d.toBlob(function(a) {
                        l[e] = a;
                        g()
                    }, p, f)
                } else g()
            };
            var h = a.feature.sync.localRefs,
                l = {}, p = e.length;
            if (0 === p || a.fromServer) return d(l);
            for (var r = 0, q = 0; q < p; q++) {
                var u = e[q];
                u.src ? b(u) : !r && q >= p - 1 && d(l)
            }
        };
        this.upgrade = function(b) {
            b.version = b.version || "2.0a";
            b.version = b.version.replace("dev", "");
            var e = new a.util.version(b.version || "2.0"),
                e = {
                    "2.0a": e.isLessThan("2.0a"),
                    "3.3": e.isLessThan("3.3"),
                    "3.4": e.isLessThan("3.4"),
                    "3.4.6": e.isLessThan("3.4.6"),
                    "3.4.6.1": e.isLessThan("3.4.6.1")
                };
            b.srcs && a.feature.deubg && console.log("data.srcs");
            for (var d = b.actions, c = 0, g = d.length; c < g; c++) {
                var h = d[c];
                e["2.0a"] && (h.color_mode && (h.fill.mode = h.color_mode), h.color_noise && (h.fill.noise = h.color_noise), h.flow && (h.spacing = h.flow));
                e["3.3"] && (h.src && (h.src = h.src.replace("/brush/", "/stamp/"), h.src = h.src.replace("/animal/", "/animals/")), "polygon" === h.type && (h.type = "regularPolygon"), "radialBurst" === h.type && (h.spread = h.slope, delete h.slope), "0,00000000" === h.fill.gradient && (h.fill.gradient = "none"));
                e["3.4.6"] && (h.content && (h.content = h.content.split("\uf7c2\uf7a0").join(" ")), a.detect("brush", h.type) && h.bbox.padding && (h.bbox.x -= 2 * h.bbox.padding, h.bbox.y -= 2 * h.bbox.padding), "paint" === h.composite && (h.composite = "source-over"), "light" === h.composite && (h.composite = "lighter"), isFinite(h.saturation) && (h.type = "image"), "image" === h.type && (delete h.temperature, delete h.tint, delete h.exposure, delete h.brightness, delete h.contrast, delete h.saturation, delete h.filters))
            }
            d = b.metadata = b.metadata || {};
            e["3.4"] && (b.title && (d.title = b.title), b.description && (d.description = b.description), isFinite(b.width) && (d.width = b.width), isFinite(b.height) && (d.height = b.height));
            e["3.4.6"] && "string" !== typeof d.units && (d.units = d.infiniteCanvas || d.autoResize ? "%" : "px");
            e["3.4.6.1"] && (isFinite(d.x) && isFinite(d.y)) && (d.x = -d.x, d.y = -d.y);
            if (a.feature.project.lockProperties) {
                a.util.mergeObject(a.feature.project || {}, d);
                for (var l in d);
            } else d.background = d.background || "rgba(0,0,0,0)", d.units = d.units || "%", d.width = d.width || 1, d.height = d.height || 1, d.x = d.x || 0, d.y = d.y || 0, d.pages = d.pages || {
                data: [],
                current: 0,
                length: 0
            };
            return b
        }
    };
    var h = function(a) {
        for (var b in a) {
            var e = a[b].data;
            if (e && e.length) for (var d = 0; d < e.length; d++) e[d].x = Math.round(1E3 * e[d].x) / 1E3, e[d].y = Math.round(1E3 * e[d].y) / 1E3;
            e = a[b].bbox;
            e.width = Math.round(1E3 * e.width) / 1E3;
            e.height = Math.round(1E3 * e.height) / 1E3;
            e.x = Math.round(1E3 * e.x) / 1E3;
            e.y = Math.round(1E3 * e.y) / 1E3
        }
        return a
    }, d = function(a, b) {
        console.log("callback", a, b)
    }
})(sketch);
"undefined" !== typeof module && module.exports && (module.exports = sketch.io.json);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.io && (sketch.io = {});
(function(a) {
    a.io.svg = new function() {
        var d = this;
        this.save = function(d) {
            d = d || {};
            var b = d.data || a.scene.data;
            "function" !== typeof d && ("object" === typeof d ? (b = d.items || b, d = d.callback || h) : d = function() {});
            for (var e = [], f = new a.vector.SVG, b = a.scene.clone(b), c = 0; c < b.length; c++) {
                var k = b[c];
                k.style || (k.style = {});
                var m = {
                    a: k.bbox.scale.x,
                    b: 0,
                    c: 0,
                    d: k.bbox.scale.y,
                    x: k.bbox.x,
                    y: k.bbox.y
                }, l = {
                    id: k.id,
                    type: k.type,
                    parentNode: f.vob
                };
                if (k.data && k.data.length) {
                    var p = k.data;
                    switch (a.detect.brush[k.type] ? "brush" : k.type) {
                        case "stamp":
                        case "path":
                            l.d = sketch.vector.SVGPath.fromVOBPath(p);
                            break;
                        case "brush":
                        case "polygon":
                        case "polyline":
                            l.points = sketch.vector.SVGPath.fromVOBPolygon(p);
                            break;
                        default:
                            console.log(k.type)
                    }
                } else console.log(k.type);
                l.bbox = {
                    x1: k.bbox.x,
                    y1: k.bbox.y,
                    x2: k.bbox.x + k.bbox.width,
                    y2: k.bbox.y + k.bbox.height
                };
                l.src = k.src;
                l.matrix = m;
                l.transform = m;
                l.style = {
                    opacity: k.style.opacity,
                    fillOpacity: k.style.fillOpacity,
                    fillRule: k.style.fillRule,
                    fillStyle: "color" === k.fill.type ? k.fill.color : "url(#gradient0)",
                    strokeLinecap: k.style.strokeLinecap,
                    strokeLinejoin: k.style.strokeLinejoin,
                    strokeMiterlimit: k.style.strokeMiterlimit,
                    strokeDasharray: k.style.strokeDasharray,
                    strokeDashoffset: k.style.strokeDashoffset,
                    strokeOpacity: k.style.strokeOpacity,
                    strokeStyle: k.style.strokeStyle,
                    strokeWidth: k.diameter
                };
                k.labels && (l.labels = k.labels.join(","));
                e.push(l)
            }
            b = a.project.getBounds();
            f.viewBox = [0, 0, b.width, b.height];
            f.vob.childNodes = e;
            f.vob.metadata = btoa(JSON.stringify(a.project, a.util.json.filterCircular));
            f.stringify ? d(f, f.stringify()) : console.log("missing: SVG.stringify")
        };
        this.toActions = function(d, b) {
            var e = d.data;
            if (!e.vob) return console.log("error", e);
            e = e.vob.childNodes;
            if (d.mergeIntoActions) var f = [];
            else f = [], a.scene.setData(f);
            var c = function(b) {
                for (var d = 0; d < b.length; d++) {
                    var e = b[d];
                    e.childNodes && c(e.childNodes);
                    if (e.data) {
                        for (var g = e.matrix, h = (new CSSMatrix("matrix(" + [g.a, g.b, g.c, g.d, g.x, g.y].join() + ")")).decompose(), g = h.rotate, q = h.scale, h = h.translate, u = new a.vector.bbox(e.data), v = u.x, s = u.y, x = a.scene.clone(e.data), w = 0; w < x.length; w++) isFinite(x[w].x) && (x[w].x -= v, x[w].y -= s), isFinite(x[w].x1) && (x[w].x1 -= v, x[w].y1 -= s), isFinite(x[w].x2) && (x[w].x2 -= v, x[w].y2 -= s);
                        g = {
                            zIndex: d,
                            composite: "source-over",
                            data: x,
                            diameter: e.style.strokeWidth,
                            opacity: 100 * e.style.fillOpacity,
                            fill: {
                                type: "color",
                                color: e.style.fillStyle
                            },
                            id: a.scene.createId(e.id),
                            type: e.type,
                            style: e.style,
                            bbox: {
                                x: v * q.x + h.x,
                                y: s * q.y + h.y,
                                width: u.width / q.x,
                                height: u.height / q.y,
                                units: "objectBoundingBox",
                                scale: {
                                    x: q.x,
                                    y: q.y
                                },
                                rotate: g.z
                            }
                        };
                        e.labels && (g.labels = e.labels.split(","));
                        f.push(g)
                    }
                }
            };
            c(e);
            b(f)
        };
        this.add = function(a,
                            b, e) {
            a.mergeIntoActions = !0;
            d.open(a, b, e)
        };
        this.open = function(g, b, e) {
            if (!g) return console.log("error: missing configuration");
            b = b || g.onload || h;
            e = e || g.onerror || h;
            var f;
            g.data ? f = g.data : "string" === typeof g ? f = g : g.src && (f = g.src);
            0 === f.indexOf("<polygon") && (f = '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketchjs="https://sketch.io/dtd/" sketchjs:version="3.0">' + f + "</svg>");
            0 === f.indexOf("<svg") && (f = '<?xml version="1.0" encoding="UTF-8"?>' + f);
            0 === f.indexOf("<?xml") && (f = "data:image/svg+xml;base64," + btoa(f));
            var c = a.loader.thread = a.loader.thread || a.loader.add("");
            a.loader.update(c, "reading svg...", 0);
            var k = g.mergeIntoActions;
            new a.perf;
            return new a.vector.SVG({
                skipRender: !0,
                placement: "none",
                src: f,
                onerror: e,
                onload: function(e) {
                    if (e.vob.metadata) {
                        var f = JSON.parse(atob(e.vob.metadata));
                        a.project.labels = f.labels
                    }
                    d.toActions({
                        data: e,
                        mergeIntoActions: k
                    }, function(d) {
                        a.loader.update(c, "rendering svg...", 50);
                        setTimeout(function() {
                            if (k) a.io.json.merge(d), a.loader.update(c, null, 100);
                            else {
                                var f = e.vob.viewBox || e.viewBox || [0, 0, window.innerWidth, window.innerHeight];
                                a.render.state = "preload";
                                a.project.setSize(f[2], f[3]);
                                a.scene.reset();
                                a.scene.setData(d);
                                a.render.preload({
                                    onload: function() {
                                        a.loader.stop(c);
                                        b && b(d)
                                    }
                                })
                            }
                        }, 1)
                    })
                }
            })
        }
    };
    var h = function(a, g) {
        console.log("callback", a, g)
    }
})(sketch);
"undefined" !== typeof module && module.exports && (module.exports = sketch.io.svg);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.io && (sketch.io = {});
sketch = function(a) {
    a.io.zip = new function() {
        this.open = function(d, g) {
            g = g || a.on.sketchReady;
            var b, e = "unpacking " + h(d.size);
            a.loader.thread = a.loader.thread || a.loader.add(e);
            a.loader.decoding = a.loader.add("...");
            a.io.zip.decode({
                blob: d,
                oncomplete: function() {
                    a.loader.update(a.loader.decoding, null, 100);
                    b ? a.open.json(b, g, g) : (a.loader.update(a.loader.thread, null, 100), g && g())
                },
                onchange: function(e) {
                    var c = e.blob,
                        d = e.filename,
                        g = e.next;
                    if (0 === c.size) return g();
                    switch (d) {
                        case "sketch.json":
                            a.convert.blobToText(c,

                                function(a) {
                                    b = a;
                                    g()
                                });
                            break;
                        case "README.txt":
                            g();
                            break;
                        default:
                            var h = "#" + d.split(".").shift();
                            "image/svg+xml" === c.type ? a.convert.blobToText(c, function(b) {
                                a.assets.add({
                                    type: "clipart",
                                    data: b,
                                    onload: g,
                                    onerror: g,
                                    targetId: h
                                })
                            }) : (e = URL.createObjectURL(c), a.assets.add({
                                type: "image",
                                src: e,
                                onload: g,
                                onerror: g,
                                targetId: h
                            }))
                    }
                },
                onprogress: function(b, c, d, g) {
                    d = STRING.basename(d);
                    var l = d.length;
                    12 < l && (d = d.substr(0, 12));
                    12 !== l && (d += "...");
                    g = h(g);
                    a.loader.update(a.loader.thread, e, Math.max(0, b - 1));
                    a.loader.update(a.loader.decoding,
                        d + " (" + g + ")", Math.max(0, c - 1))
                }
            })
        };
        this.encode = function(d, g, b, e) {
            if (sketch.util.exists("zip")) {
                zip.fs.FS();
                var f = function(a, b, c, e) {
                        if ("string" === typeof b) a.addText(e, b);
                        else if (b.blob) a.addBlob(b.filename, b.blob);
                        else if (b.length) for (c = 0; c < b.length; c++) a.addBlob(b[c].filename, b[c].blob);
                        else for (e in b) {
                                var d = a.addDirectory(e);
                                f(d, b[e], c, e)
                            }
                    }, c = 0,
                    k = zip.fs.entries[0];
                new sketch.util.Queue({
                    items: d,
                    flatten: !0,
                    oncomplete: function() {
                        k.exportBlob(function(a) {
                            g(a)
                        }, function(a, e, d) {
                            b && (a = Math.round(100 * (a / e)), a !== c && (b(a), c = a))
                        }, e)
                    },
                    next: function(a, b, c) {
                        f(k, a, c, b);
                        this.next()
                    }
                })
            } else a.feature.debug && console.log("missing: zip library")
        };
        this.getEntries = function(d, g, b) {
            b = b || function(b) {
                a.feature.debug && console.error(b);
                g()
            };
            zip.createReader(new zip.BlobReader(d), function(a) {
                a.getEntries(function(b) {
                    a.close();
                    g(b)
                })
            }, b)
        };
        this.decode = function(d, g, b, e, f) {
            g = d.onchange || g;
            b = d.oncomplete || b;
            e = d.onprogress || e;
            f = d.onerror || f;
            d = d.blob || d;
            var c = {
                json: "application/json",
                txt: "text/plain",
                svg: "image/svg+xml",
                png: "image/png",
                jpeg: "image/jpeg",
                jpg: "image/jpeg",
                gif: "image/gif"
            }, k = function(a) {
                var d = a.length - 1,
                    f = 0,
                    k = 0,
                    h = "",
                    u = 0,
                    v = 0,
                    s = new sketch.util.Queue({
                        items: a,
                        flatten: !0,
                        next: function(a, m, A) {
                            s = this;
                            k = A / d;
                            v = Math.min(d, A + 1) / d - k;
                            var y = A === d,
                                z = a.filename;
                            h = STRING.basename(z);
                            0 === h.indexOf(".") ? y ? b && b() : this.next() : (m = z.split(".").pop(), a.getData(new zip.BlobWriter(c[m]), function(a) {
                                g({
                                    blob: a,
                                    filename: z,
                                    idx: A,
                                    length: d,
                                    percent: f,
                                    batchPercent: u,
                                    next: s.next
                                });
                                y && b && b()
                            }, e && function(a, b, c) {
                                u = a / b;
                                a = 100 * (k + v * u) >> 0;
                                a !== f && e(f = a, 100 * u >> 0, h, b)
                            }))
                        }
                    })
            };
            d.entries ? k(d.entries) : zip.createReader(new zip.BlobReader(d), function(a) {
                a.getEntries(function(b) {
                    a.close();
                    k(b)
                })
            }, f || function(c) {
                a.feature.debug && console.error(c);
                b && b()
            })
        }
    };
    var h = function(a, g) {
        g = g || 0;
        for (var b = 0, e = a || 0; 1024 <= e;) b++, e /= 1024;
        return parseInt(e).toFixed(g) + " " + "bytes kb mb gb tb pb".split(" ")[b]
    };
    return a
}(sketch);
"undefined" !== typeof module && module.exports && (module.exports = sketch.io.zip);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.io && (sketch.io = {});
"undefined" === typeof sketch.save && (sketch.save = {});
"undefined" === typeof sketch.download && (sketch.download = {});
"undefined" === typeof sketch.convert && (sketch.convert = {});
"undefined" === typeof sketch.open && (sketch.open = {});
sketch = function(a) {
    a.server.save && (a.save.remote = a.server.save, a.open.remote = a.server.open);
    a.io.svg && (a.open.svg = a.io.svg.open);
    a.io.json && (a.open.json = a.io.json.open);
    a.io.zip && (a.open.sketch = a.open.zip = a.io.zip.open, a.zip = a.io.zip);
    var h = function(b, d, c, g, h, l, p) {
        var r = typeof b,
            q = "object" === r ? b : {}, u = function(a, b, c) {
                typeof q[a] !== b && (q[a] = c)
            }, v = function(a, b, c) {
                if ("function" === typeof c) if (q.callback) {
                    var d = q.callback;
                    q.callback = function() {
                        d();
                        c()
                    }
                } else q.callback = c;
                if (typeof c === b) return q[a] = c, !0
            };
        "number" === r ? (v("x", "number", b), v("y", "number", d), v("width", "number", c), v("height", "number", g), v("mime", "string", h), v("quality", "number", l), v("callback", "function", p)) : "string" === r ? (v("mime", "string", b), v("quality", "number", d), v("callback", "function", c)) : "function" === r && v("callback", "function", b);
        b = a.canvas2d.pixelRatio;
        d = a.project.getBounds();
        d.width && u("width", "number", d.width * b);
        d.height && u("height", "number", d.height * b);
        u("mime", "string", a.configure.image.mime);
        u("quality", "number", a.configure.image.quality);
        return q
    }, d = new function() {
        var b = "undefined" === typeof document ? !1 : "download" in document.createElement("a");
        this.lapse = 1E3;
        this.now = function() {
            return (new Date).getTime()
        };
        this.getElement = function() {
            var b = this.element || a.$("#sk-download-element");
            if (b) return b;
            this.element = document.createElement("a");
            this.element.id = "download";
            this.element.target = "_blank";
            this.element.style.display = "none";
            this.element.timestamp = this.now() - this.lapse;
            document.body.appendChild(this.element);
            return this.element
        };
        this.isReady = function(a) {
            var b = this.getElement(),
                d = this.now();
            if (d - b.timestamp >= this.lapse) return a ? !0 : b.timestamp = d
        };
        this.onReady = function(a) {
            var b = this.getElement();
            if (this.isReady(!0)) return a(b), b
        };
        this.download = function(f, c) {
            if (b) {
                window.alertify && !1 === a.userAgent.nodewebkit && alertify.log("Saving to computer...");
                var g = d.getElement();
                g.download = c;
                g.href = f;
                g.click()
            } else window.open().document.write("<title>" + c + '</title><img src="' + f + '"/>')
        }
    };
    a.download.blob = function(b, f) {
        b = b || new Blob(["hello world"]);
        f = f || a.project.title + ".txt";
        var c = a.supports.io.blob;
        a.supports.chooseEntry ? chrome.fileSystem.chooseEntry({
            type: "saveFile",
            suggestedName: f
        }, function(a) {
            a.createWriter(function(a) {
                a.write(b)
            }, function(a) {
                console.log(a)
            })
        }) : c ? (window.alertify && !1 === a.userAgent.nodewebkit && alertify.log("Saving to computer..."), saveAs(b, f)) : (c = URL.createObjectURL(b), d.download(c, f))
    };
    a.download.text = function(b, f, c) {
        f = f || a.project.title + ".txt";
        c = c || "text/plain";
        a.supports.io.blob ? a.download.blob(new Blob([b], {
            type: c
        }), f) : (b = "data:" + c + ";base64," + btoa(b), d.download(b, f))
    };
    a.download.canvas = function(b, f, c, g) {
        if (d.isReady()) {
            b = b || document.createElement("canvas");
            c = c || "image/png";
            g = g || 1;
            var h = c.split("/").pop(),
                l = f || a.project.title || "sketch";
            f = -1 === l.indexOf(h) ? l + "." + h : l;
            a.supports.io.blob ? b.toBlob(function(b) {
                a.download.blob(b, f)
            }, c, g) : (b = b.toDataURL(c, g), d.download(b, f))
        }
    };
    a.download.sketch = a.download.zip = function(b) {
        d.isReady() && a.save.zip(function(d) {
            var c = b || a.project.title;
            b = -1 === c.indexOf(".zip") ? c + ".zip" : c;
            a.download.blob(d,
                b)
        })
    };
    a.download.svg = function(b) {
        d.isReady() && a.save.svg(function(d, c) {
            var g = b || a.project.title;
            b = -1 === g.indexOf(".svg") ? g + ".svg" : g;
            a.download.text(d, b, "image/svg+xml")
        })
    };
    a.download.json = function(b) {
        d.isReady() && a.save.json(function(d, c) {
            var g = b || a.project.title;
            b = -1 === g.indexOf(".json") ? g + ".json" : g;
            a.download.text(JSON.stringify(d, a.util.json.filterCircular), b, "application/json")
        })
    };
    a.download.image = function(b, f, c, g, m, l, p) {
        d.onReady(function(d) {
            var q = h(b, f, c, g, m, l, p);
            a.save.canvas(q, function(b) {
                a.download.canvas(b,
                    q.filename, q.mime, q.quality)
            })
        })
    };
    a.download.pdf = function(b, f, c, g, m, l, p) {
        a.loader.thread = a.loader.thread || a.loader.add("reading files...");
        d.onReady(function(d) {
            var q = h(b, f, c, g, m, l, p),
                u = a.project.pages.data,
                v = u.length || 1,
                s = 0,
                x = 0;
            0 === u.length ? (s = a.project.bounds.width, x = a.project.bounds.height) : u.forEach(function(a) {
                s = Math.max(s, a.width);
                x = Math.max(x, a.height)
            });
            d = a.convert.metrics["px>mm"];
            var w = new jsPDF(s > x ? "landscape" : "portrait", "mm", [s * d, x * d]),
                A = w.internal.pageSize.width,
                y = w.internal.pageSize.height,
                z = 0;
            new sketch.util.Queue({
                range: {
                    from: 0,
                    to: v - 1
                },
                oncomplete: function() {
                    var b = q.filename || a.project.title;
                    a.download.blob(w.output("blob"), b + ".pdf");
                    a.loader.update(a.loader.thread, null, 100)
                },
                next: function(b, c, d) {
                    var e = this;
                    0 !== d && w.addPage();
                    var f = u[d] || a.project.bounds;
                    q.x = 0;
                    q.y = z;
                    q.width = f.width;
                    q.height = f.height;
                    a.save.canvas(q, function(b) {
                        var c = b.toDataURL("image/jpeg", 1);
                        b = Math.max(b.width / A, b.height / y);
                        w.addImage(c, "JPEG", 0, 0, f.width / b, f.height / b);
                        z += f.height;
                        a.loader.update(a.loader.thread,
                            null, 100 * (d / v));
                        setTimeout(e.next, 1)
                    })
                }
            })
        })
    };
    a.convert.htmlToCanvas = function(a) {
        var b = document.querySelector("#html-to-canvas");
        if (!b) return a.onerror();
        b.style.display = "block";
        b.innerHTML = a.html;
        html2canvas(b, {
            onerror: a.onerror,
            onrendered: function(c) {
                a.onload(c);
                b.style.display = "none"
            }
        })
    };
    a.convert.blobToText = function(a, b) {
        var c = new FileReader;
        c.onload = function(a) {
            b(a.target.result)
        };
        c.readAsText(a)
    };
    a.convert.fileToCanvas = function(b, d, c, g, h) {
        "string" === typeof b && (b = {
            src: b
        });
        dom.loadImage({
            src: b.src,
            onprogress: h,
            onerror: function(c) {
                a.feature.debug && console.log("failed to load: " + b.src);
                g && g()
            },
            onload: function() {
                var a = a || document.createElement("canvas"),
                    d = a.getContext("2d");
                a.width = this.width;
                a.height = this.height;
                d.drawImage(this, 0, 0);
                c(a, b)
            }
        })
    };
    a.open.folder = function(b, d, c) {
        a.loader.thread = a.loader.thread || a.loader.add("reading files...");
        var g, h = new sketch.util.Queue({
            items: b,
            flatten: !0,
            oncomplete: function() {
                g ? a.open.json(g, d, c) : (a.loader.update(a.loader.thread, null, 100), d && d())
            },
            next: function(c,
                           d, f) {
                h = this;
                a.loader.update(a.loader.thread, null, Math.max(0, (100 * ((f + 1) / b.length) >> 0) - 1));
                if (!c.name) return this.next();
                switch (c.name) {
                    case "sketch.json":
                        a.convert.blobToText(c, function(a) {
                            g = a;
                            h.next()
                        });
                        break;
                    case "README.txt":
                        this.next();
                        break;
                    default:
                        var q = "#" + c.name.split(".").shift();
                        "image/svg+xml" === c.type ? a.convert.blobToText(c, function(b) {
                            a.assets.add({
                                type: "clipart",
                                data: b,
                                onload: h.next,
                                onerror: h.next,
                                targetId: q
                            })
                        }) : (c = URL.createObjectURL(c), a.assets.add({
                            type: "image",
                            src: c,
                            onload: h.next,
                            onerror: h.next,
                            targetId: q
                        }))
                }
            }
        })
    };
    a.open.chooseEntry = function(b) {
        return a.supports.chooseEntry ? (chrome.fileSystem.chooseEntry({
            type: "openFile",
            accepts: [{
                extensions: a.util.uploader.formats
            }]
        }, function(a) {
            a && a.file(function(a) {
                b(a)
            })
        }), !0) : !1
    };
    a.open.clipart = a.open.image = function(b) {
        "string" === typeof b && (b = {
            src: b
        });
        var d = b.callback || b.onload,
            c = function(c) {
                a.feature.debug && console.log("failed to load: " + b.src);
                onerror && onerror()
            }, g = function(c) {
                if (b.openAsNew) {
                    a.exec("reset");
                    var g = c.width;
                    c = c.height;
                    var k = a.area.padding / 2,
                        k = {
                            x: g / 2 + k,
                            y: c / 2 + k
                        }, h = a.canvas2d.zoom;
                    k.x += a.canvas2d.x + a.project.x * h;
                    k.y += a.canvas2d.y + a.project.y * h;
                    a.project.setSize(g, c);
                    a.scene.add({
                        type: "image",
                        src: b.src,
                        width: g,
                        height: c,
                        points: [k]
                    }, function() {
                        a.exec("select");
                        a.scene.deselectAll();
                        a.orient.reset();
                        a.orient.render();
                        d && d()
                    })
                } else a.addMedia({
                    src: b.src,
                    callback: d
                })
            };
        b.blob ? a.assets.add(b.blob, function(a, b) {
            g(b)
        }, c) : -1 !== b.src.indexOf("filesystem:") ? (c = new Image, c.src = b.src, c.onload = function() {
            var a = document.createElement("canvas"),
                b = a.getContext("2d");
            a.width = this.width;
            a.height = this.height;
            b.drawImage(this, 0, 0);
            g(a)
        }) : a.assets.addImage(b.src, function(a, b) {
            g(b)
        }, c)
    };
    a.open.fromQuery = function(b, d) {
        "string" === typeof b && (b = a.util.parseUri(b).queryKey);
        for (var c in b) "" === b[c] && (b[c] = !0);
        b.folder ? (a.io.json.folder = b.folder, a.io.json.open({
            src: b.folder + "sketch.json",
            onload: d
        })) : b.image ? a.open.image({
            src: b.image,
            openAsNew: !0,
            onload: d
        }) : b.json ? a.open.json({
            src: b.json,
            onload: d
        }) : a.feature.fileSystem ? a.fs.openFile({
            onload: function(b) {
                a.open.folder(b,
                    d)
            },
            onerror: function(b) {
                b && 1 === b.code && a.lib.template && a.feature.canvas.openDefaultProject ? a.lib.template.open("tutorial-0", function() {
                    d && d();
                    a.fs.save()
                }) : d && d()
            }
        }) : a.server.open ? a.server.open(d) : d && d()
    };
    a.Save = function(a) {
        this.toDataURL = function(a, b) {
            "string" === typeof a && (a = {
                mime: a
            });
            a = a || {};
            return this.canvas(a).toDataURL(a.mime || "image/png", a.quality || 1)
        };
        this.blob = function(a, b) {
            "function" === typeof a ? (b = a, a = {}) : (a = a || {}, b = b || a.callback || g);
            this.canvas(a).toBlob(function(a) {
                b(a)
            }, a.mime || "image/png")
        };
        this.toBlobURL = function(a, b) {
            "function" === typeof a ? (b = a, a = {}) : (a = a || {}, b = b || a.callback || g);
            this.blob(a, function(a) {
                b(URL.createObjectURL(a))
            })
        };
        var d = function(b, d, f, g, h) {
            var r = document.createElement("canvas"),
                q = r.getContext("2d");
            r.width = f;
            r.height = g;
            h && ("none" !== h && a.feature.canvas.saveWithBackground) && (q.save(), q.fillStyle = h, q.translate(-Math.abs(b % f), - Math.abs(d % g)), q.fillRect(0, 0, 2 * f, 2 * g), q.restore());
            b = a.canvas2d.layers;
            for (var u in b) "cache" !== u && "active" !== u && q.drawImage(b[u], 0, 0);
            return r
        };
        this.canvas = function(b, g, h, l, p) {
            var r = a.canvas2d.pixelRatio,
                q = a.project.getBounds();
            a.project.getViewport();
            h = h || q.width * r;
            l = l || q.height * r;
            var u = "object" === typeof b ? b : {}, v = p,
                s = u.callback,
                x = "function" === typeof g ? g : "";
            p = function(a) {
                v && v(a);
                s && s(a);
                x && x(a)
            };
            l = isFinite(u.height) ? u.height : l;
            h = isFinite(u.width) ? u.width : h;
            g = isFinite(u.y) ? u.y : isFinite(g) ? g : 0;
            b = isFinite(u.x) ? u.x : isFinite(b) ? b : 0;
            var r = u.highRes || !1,
                q = u.background || void 0,
                w = u.clampToLayer || !1,
                A = u.fromSelection || !1,
                u = A || u.getBoundingBox || !isFinite(b) || !isFinite(g) || !isFinite(h) || !isFinite(l);
            "undefined" === typeof q && "transparent" !== a.project.background && (q = a.configure.backgroundRaw);
            if (u) {
                if (!a.actions) return console.log("missing", b, g, h, l);
                l = a.scene.getBoundingBox({
                    clampToLayer: w,
                    fromSelection: A
                });
                b = l.x >> 0;
                g = l.y >> 0;
                h = l.width >> 0;
                l = l.height >> 0
            } else b -= a.project.scrollLeft, g -= a.project.scrollTop;
            h = Math.ceil(h);
            l = Math.ceil(l);
            w && (h = Math.min(h, a.canvas2d.width), l = Math.min(l, a.canvas2d.height), b = Math.max(b, 0), g = Math.max(g, 0));
            if (a.getSnapshot) return a.getSnapshot(p,
                h, l);
            if (a.actions) {
                var w = a.canvas2d.x,
                    u = a.canvas2d.y,
                    y = a.canvas2d.zoom,
                    z = a.render.cache.enabled;
                a.canvas2d.x = -b - a.project.x;
                a.canvas2d.y = -g - a.project.y;
                a.canvas2d.zoom = 1;
                a.render.clipped = !1;
                a.render.selected = A && a.selection.items;
                a.render.cache.enabled = !r;
                a.render.forOutput = !0;
                a.setSize(h, l);
                a.render.output();
                b = d(b, g, h, l, q);
                a.canvas2d.x = w;
                a.canvas2d.y = u;
                a.canvas2d.zoom = y;
                a.render.clipped = !1;
                a.render.selected = !1;
                a.render.cache.enabled = z;
                a.setSize();
                a.render("root.save.canvas")
            } else b = d(b, g, h, l, q);
            p && p(b);
            return b
        };
        this.image = function(b, d) {
            b = b || {};
            d = d || b.callback || function(a) {
                console.log(a)
            };
            var f = function(f) {
                    b.toDataURL ? d(f.toDataURL(r, b.quality || 1), b) : b.toBlob || b.toBlobURL || b.toDownload ? f.toBlob(function(f) {
                        b.toDownload && a.download.blob(f, a.project.title + "." + h);
                        b.toBlobURL ? d(URL.createObjectURL(f), b) : d(f, b)
                    }, r) : d(f, b)
                }, g = a.canvas2d,
                h = b.format || "png",
                r = "image/" + h;
            b.crop ? a.save.canvas({
                background: b.background,
                fromSelection: b.fromSelection || !1,
                getBoundingBox: b.getBoundingBox || !1,
                clampToLayer: b.clampToLayer || !1,
                callback: function(d) {
                    a.util.thumbnailer({
                        src: d,
                        width: b.width || g.width,
                        height: b.height || g.height,
                        center: b.center,
                        croparea: b.croparea,
                        crop: b.crop,
                        onload: f
                    })
                }
            }) : a.save.canvas({
                x: b.x || 0,
                y: b.y || 0,
                fromSelection: b.fromSelection || !1,
                getBoundingBox: b.getBoundingBox || !1,
                clampToLayer: b.clampToLayer || !1,
                width: b.width || g.width,
                height: b.height || g.height,
                background: b.background,
                callback: f
            })
        };
        a.io.json && (this.json = a.io.json.save, this.assets = a.io.json.assets);
        a.io.svg && (this.svg = a.io.svg.save);
        this.sketch = this.zip = function(b, d) {
            b = b || g;
            this.folder(function(f) {
                a.io.zip.encode(f, function(a) {
                    b(a)
                }, d)
            })
        };
        this.folder = function(c) {
            c = c || g;
            a.save.json(function(a, d) {
                var e = [],
                    f;
                for (f in d) {
                    var g = b[d[f].type];
                    e.push({
                        filename: f.substr(1) + "." + g,
                        blob: d[f]
                    })
                }
                e.push({
                    filename: "sketch.json",
                    blob: new Blob([a], {
                        type: "text/plain"
                    })
                });
                e.push({
                    filename: "README.txt",
                    blob: new Blob(["\tWelcome to Sketchpad!\n\n\tThe contents of your drawing are kept in this .ZIP file.\n\n\tTo reload your image just drag the .ZIP back into Sketchpad!\n\n\t... but it seems you're here to explore, so here's a rundown:\n\n\tThe .JSON file inside has all your drawing commands, styles,\n\ttransforms, and other things that make up your drawing.\n\n\tThe other files included are other media resources which you\n\tmay of uploaded, or which you've taken with your webcam.\n\n\tWe hope you enjoy Sketchpad =)\n\n\tSketch.IO <hello@sketch.io>\n\thttps://sketch.io/\n\t\t\t\t"], {
                        type: "text/plain"
                    })
                });
                c(e)
            })
        };
        this.syncData = function(b) {
            b = b || {};
            var d = b.onprogress,
                f = b.onload || g;
            b = b.sync || a.feature.sync;
            var h = 0,
                p;
            for (p in b) b[p] && (!0 === b[p] && (b[p] = {}), h++);
            var r = h,
                q = function() {
                    d && d(100 * ((r - (h - 1)) / r));
                    --h || f && f(v)
                }, u, v = {};
            for (p in b) if (u = b[p]) switch (p) {
                case "folder":
                    a.save.folder(function(a) {
                        v.folder = a;
                        q()
                    }, !0);
                    break;
                case "zip":
                    a.save.zip(function(a) {
                        v.sketch = a;
                        q()
                    });
                    break;
                case "svg":
                    a.save.svg(function(a, b) {
                        v.svg = b;
                        q()
                    });
                    break;
                case "json":
                    a.save.json(function(a) {
                        v.json = a;
                        q()
                    }, !0);
                    break;
                case "thumb":
                    u.suffix = u.suffix || "thumb";
                case "image":
                    var s = u.format || "png";
                    u.idx = u.suffix ? u.suffix + "." + s : s;
                    u.toBlob || (u.toDataURL = !0);
                    a.save.image(u, function(a, b) {
                        v[b.idx] = a;
                        q()
                    });
                    break;
                default:
                    q()
            }
        };
        this.fromQuery = function(b, d) {
            a.feature.fileSystem ? a.fs.save(d) : a.server.save(d)
        };
        return this
    };
    a.print = function(b) {
        a.save.canvas({
            callback: function(a) {
                var c = document.querySelector("#print");
                c || (c = document.createElement("div"), c.id = "print", document.body.appendChild(c));
                c.innerHTML = "";
                c.appendChild(a);
                b || window.print()
            }
        })
    };
    var g = function(a, b) {
        console.log("callback", a, b)
    }, b = {
        "image/png": "png",
        "image/gif": "gif",
        "image/jpeg": "jpeg",
        "image/svg+xml": "svg"
    };
    return a
}(sketch);
"undefined" !== typeof module && module.exports && (module.exports = sketch.Save);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.ui && (sketch.ui = {});
sketch = function(a) {
    var h = /[^0-9]/gi,
        d = function(b, c, d) {
            c = document.createElement("div");
            c.className = "sketch-file-picker";
            c.innerHTML = "Load your own image";
            a.ui.addLineBreak(b);
            b.appendChild(c);
            a.util.uploader.createFileInput(c)
        }, g = function(b, c, d, e) {
            var f = d.getValue(),
                f = f.length ? f : [f];
            "Spacing" === e && (f = [f[0]]);
            a.ui.addLineBreak(b);
            var g = document.createElement("div");
            g.className = "sk-slider";
            b.appendChild(g);
            var k = document.createElement("span");
            k.className = "sk-title";
            g.appendChild(k);
            eventjs.add([g, k,
                b], "mousedown", eventjs.cancel);
            b = (b = e.match(/[A-Za-z0-9]*/g)) ? b.join(" ") : e;
            if (a.language.translate(b)) {
                k.setAttribute("data-cmd", b);
                k.innerHTML = a.language.translate(b).match(STRING.rxSplitByUppercase).join(" ").trim();
                e = document.createElement("span");
                e.className = "values";
                g.appendChild(e);
                for (b = 0; b < f.length; b++) {
                    var l = document.createElement("input");
                    l.className = "value" + b;
                    l.value = f[b];
                    eventjs.add(l, "mousedown", eventjs.stop);
                    eventjs.add(l, "keydown keyup change", function(a) {
                        eventjs.stop(a);
                        a = this.value.replace(h, "");
                        var b = parseInt(this.className.substr(5)),
                            c = m.thumbs[b];
                        a = Math.max(m.min, Math.min(m.max, a));
                        c.value !== a && (c.value = a, m.update(b))
                    });
                    e.appendChild(l);
                    f[b + 1] && (l = document.createElement("small"), l.innerHTML = "/", e.appendChild(l))
                }
                var m = new widget.Range({
                    parent: g,
                    min: d.clamp.min,
                    max: d.clamp.max,
                    format: d.format,
                    gradient: d.gradient,
                    value: f.toString(),
                    className: "sk-range",
                    onchange: function(b, e) {
                        a.area && a.area.inGenesis && a.area.exitGenesis();
                        b.element.parentNode.querySelector(".value" + e.index).value = 10 < d.clamp.max ? Math.round(e.value) : Math.round(10 * e.value) / 10;
                        if ("load" !== b.state && (!a.selection || 0 !== a.selection.length || "end" === b.state)) {
                            var f = k.getAttribute("data-cmd"),
                                f = (f[0].toLowerCase() + f.substr(1)).replace(" ", "");
                            a.toolkit.setActionData({
                                tool: c.type,
                                cacheObject: b,
                                param: f,
                                thumbs: b.thumbs
                            })
                        }
                    }
                });
                return m
            }
            a.feature.debug && console.log("range:", b, "disabled")
        }, b = function(b) {
            if (a.actions && a.scene.data) {
                var c = a.scene.data[a.selection.idx],
                    d = c ? c.toolkit : {}, e;
                for (e in a.ui.ranges) {
                    var f = a.ui.ranges[e];
                    if (!f) {
                        a.feature.debug && console.log("disabled", e);
                        break
                    }
                    var g = void 0;
                    c && (g = c[e]);
                    "undefined" === typeof g && d.device && (g = d.device.brush ? d.device.brush[e] : d.device[e]);
                    "undefined" === typeof g && (g = a.scene.fromConfigure(a.configure.tools[b][e]));
                    if ("undefined" !== typeof g) if (g = "undefined" !== typeof g.max ? [g.min, g.max] : g, 2 === f.thumbs.length) {
                        if (f.thumbs[0].value !== g[0] || f.thumbs[1].value !== g[1]) f.thumbs[0].value = g[0], f.thumbs[1].value = g[1], f.update(0, "load"), f.update(1, "load")
                    } else g = g[0] || g, f.thumbs[0].value !== g && (f.thumbs[0].value = g, f.update(0, "load"))
                }
            }
        };
    a.ui.buildSelect = function(b) {
        var c = document.createElement("select");
        c.id = "select-" + STRING.replaceAll(b.label, " ", "");
        eventjs.add(c, "mousedown", function(b) {
            a.windows.focus("sk-configure");
            eventjs.stop(b)
        });
        eventjs.add(c, "change", b.onchange);
        b.element.appendChild(c);
        var d = document.createElement("optgroup");
        d.label = b.label;
        for (var e in b.data) {
            var f = document.createElement("option");
            b.selected === e && (f.selected = "selected");
            f.value = b.data[e];
            f.setAttribute("data-cmd",
                e);
            if (b.ucwords) {
                var g = STRING.splitByUpperCase(e).join(" "),
                    g = STRING.ucwords(g.replace("regular", ""));
                f.innerHTML = a.language.translate(g)
            } else f.innerHTML = a.language.translate(e);
            d.appendChild(f)
        }
        b.style && (c.style.cssText = b.style);
        c.appendChild(d);
        c.getValue = function() {
            return c.options[c.selectedIndex].value
        };
        return c
    };
    a.ui.buildConfigure = function(d, f, g) {
        g = a.perf();
        var h = document.getElementById("sk-configure");
        if (h) {
            if (h && ("block" === h.style.display || !h.__skBuildRequest)) h.__skBuildRequest = !0;
            else if (!f) return;
            setTimeout(a.windows.restore, 1);
            if (0 !== h.offsetWidth && ("undefined" === typeof h.__skBuilt && (h.__skBuilt = !0), (d = d || a.tool.type) || f)) {
                a.ui.buildConfigure.type = d;
                var k = h.getAttribute("type");
                h.setAttribute("type", d);
                if (d === k && !f) return b(d);
                m();
                (k = document.querySelector("#sk-configure .sk-configure-submenu")) && dom.removeChildNodes(k);
                (f = document.querySelector("#sk-configure .sk-configure-header")) && dom.removeChildNodes(f);
                var p = a.actions && a.scene.data[a.selection.idx] || a.configure.tools[d];
                p && (d = p.type);
                var q = h.querySelector(".sk-configure-content");
                h.querySelector(".sk-configure-scroller").style.display = "none";
                if (a.detect.noConfigure[d]) {
                    dom.removeChildNodes(q);
                    if (f) {
                        var r = document.createElement("span");
                        r.textContent = STRING.ucwords(d || "");
                        f.appendChild(r)
                    }
                    "select" === d && a.ui.buildConfigureOptions(d)
                } else if (h = a.feature.tools.image.filter, (q = "image" === d) && !h && (d = "clipart"), a.ui.buildConfigureOptions(d), a.actions && a.scene.data) {
                    if (f || k) {
                        var u = a.feature.ui.mediaSelect && a.lib[d],
                            v = a.ui.getCatelog(d);
                        if (v) {
                            var J = d.replace("_", " ");
                            a.ui.buildSelect({
                                label: STRING.ucwords(v.replace("_", " ")),
                                element: f || k,
                                selected: J,
                                data: a.toolkit.__icons[v],
                                ucwords: !0,
                                onchange: function() {
                                    var b = this.options[this.selectedIndex].getAttribute("data-cmd").replace(" ", "_");
                                    a.toolkit.setActionType(a.selection.items, b);
                                    a.style.setBlendMode(null)
                                }
                            })
                        } else if (u && (h && !q || !h)) {
                            var v = u.tree,
                                C = p.src || "",
                                O = 0,
                                N;
                            for (N in v)++O;
                            J = p.fontFamily ? (p = sketch.lib.text.byName[p.fontFamily]) && p.category || u.defaultCategory || N : a.ui.detectFolder(d,
                                C) || u.defaultCategory || N;
                            N = J;
                            p = {};
                            u = e[d];
                            1 < O && (p["all " + u] = "everything");
                            for (r in v) "yourFiles" === r && "yourFiles" === J ? (N = "your " + u, p["your " + u] = r) : p[r] = r;
                            a.ui.buildSelect({
                                label: STRING.ucwords(u),
                                element: f || k,
                                selected: N,
                                data: p,
                                ucwords: !0,
                                onchange: function() {
                                    var a = this.options[this.selectedIndex].value;
                                    c(d, J, a);
                                    l(d, a)
                                }
                            })
                        } else J = "", N = STRING.ucwords(d.replace("gl_", "")).match(/[A-Z][a-z]+/g).join(" "), f && (f.innerHTML = "<span>" + a.language.translate(N) + "<span>")
                    }(h && !q || !h) && c(d, J, J);
                    a.feature.debug && console.log("configure",
                        d, g())
                } else f && (r = STRING.ucwords(d.replace("gl_", "").replace(/([A-Z])/g, " $1")), f.innerHTML = "<span>" + r + "</span>")
            }
        }
    };
    var e = {
        text: "fonts",
        stamp: "stamps",
        clipart: "clipart"
    }, f;
    a.ui.scrollers = {};
    var c = function(b, c, d) {
        var e = a.lib[b];
        if (e && e.paths) {
            f && f.hide();
            var g = a.ui.scrollers;
            g[b] ? g[b].length !== e.paths.length ? g[b] = new k(b, c, d) : g[b].show(c, d) : g[b] = new k(b, c, d);
            f = g[b]
        }
    }, k = function(b, c, d) {
        var e = this;
        this.type = b;
        this.library = c;
        this.folder = d;
        this.media;
        this.element;
        this.hide = function() {
            this.container.style.display = "none";
            this.content.style.display = "none"
        };
        this.show = function(b, c) {
            var d = function(a, b) {
                b.onerror = function() {
                    console.log(a.type)
                }
            };
            e.container.style.display = "block";
            e.content.style.display = "block";
            e.library = b || e.library;
            e.folder = c || e.folder;
            var f = a.lib[e.type];
            if (f && f.paths) {
                e.updateSize(e.type, f);
                var g = 0,
                    h = f.paths,
                    k = e.overflow;
                c = e.folder;
                for (var l = 0; l < h.length; l++) {
                    var m = h[l],
                        p = m.thumbnail,
                        q = m.image,
                        r = q.canvas,
                        s = m.filepath,
                        u = !c || "everything" === c,
                        v = m.folder === c;
                    "yourFiles" === c && 0 === s.indexOf("#") || v || u ? (++g <= k && (q.src = p, d(m, q), "stamp" !== m.type && "text" !== m.type || a.ui.sourceAtop(r)), r.style.display = "block") : r.style.display = "none"
                }
                d = document.querySelector(".noItemsAdded");
                0 === g ? (a.feature.debug && console.log(f.tree, c), d || (d = document.createElement("div"), d.className = "noItemsAdded", d.textContent = "No items added", e.content.appendChild(d)), d.style.display = "block") : d && (d.style.display = "none")
            }
        };
        this.updateSize = function(a, b) {
            var c = this.container,
                d = c.style;
            d.display = "block";
            d.overflowY = "hidden";
            var e = c.offsetWidth;
            d.overflowY = "scroll";
            e = 2 * (e - c.offsetWidth || 10);
            d.overflowY = "auto";
            var f = c.offsetWidth - e,
                c = b.thumbnail,
                d = c._height / c._width,
                e = isFinite(c.rows) ? c.rows : 5,
                g = isFinite(c.columns) ? c.columns : 4,
                h = isFinite(c.padding) ? c.padding : 0,
                f = f / g >> 0,
                c = sketch.util.mergeObject(c, {
                    width: f,
                    height: f * d,
                    padding: h,
                    columns: g,
                    rows: e
                });
            this.maxHeight = (c.height + 2 * c.padding) * c.rows;
            this.overflow = c.columns * (c.rows + 1);
            this.divider = c.columns;
            this.container.style.cssText += "max-height: " + this.maxHeight + "px;";
            return c
        };
        this.construct = function(b, c, d) {
            var e = a.lib[b];
            if (e && e.paths) {
                e.thumbnail = e.thumbnail || {};
                var f = document.querySelector("#sk-configure .sk-configure-scroller"),
                    g = document.createElement("div");
                f.appendChild(g);
                this.container = f;
                l(b, c);
                var h = this.updateSize(b, e),
                    k = this.overflow,
                    m = this.divider;
                eventjs.proxy.wheelPreventElasticBounce(f);
                eventjs.add(f, "scroll", this.onScroll);
                g.onscroll = this.onScroll;
                var q = a.scene.data[a.selection.idx];
                q || (q = a.configure.tools[b]);
                for (var r = p(q), s = !1, u = e.paths, v = a.canvas2d.pixelRatio, w = 0; w < u.length; w++) {
                    var x = u[w],
                        A = x.image || document.createElement("img"),
                        T = A.canvas || document.createElement("canvas");
                    "text" === b ? x.name === q.fontFamily && (s = T) : x.filepath === r && (s = T);
                    var P = h.width,
                        Y = h.height;
                    T.style.width = P + "px";
                    T.style.height = Y + "px";
                    A.canvas || (T.width = P * v, T.height = Y * v, T.className = b, T.setAttribute("data-type", x.type), T.setAttribute("data-src", x.filepath), T.setAttribute("data-name", x.name), T.setAttribute("data-thumbnail", x.thumbnail), T.setAttribute("data-n", w), T.style.padding = h.padding + "px",
                        T.title = x.filename, "clipart" !== x.type && "image" !== x.type || !a.feature.placement.mediaDrag ? eventjs.add(T, "mousedown", eventjs.stop) : eventjs.add(T, "mousedown", function(b) {
                        eventjs.stop(b);
                        a.feature.vector.edit || a.scene.deselectAll();
                        var c = this.getAttribute("data-src");
                        this.drag = a.toolkit.addFromDrag({
                            target: this,
                            event: b,
                            src: c
                        })
                    }), eventjs.add(T, "click", this.onClick), A.canvas = T, A.onload = function() {
                        var c = this;
                        setTimeout(function() {
                            a.util.thumbnailer({
                                src: c,
                                canvas: c.canvas,
                                width: c.width,
                                height: c.height,
                                croparea: !1,
                                onload: function(c) {
                                    "stamp" !== b && "text" !== b || a.ui.sourceAtop(c)
                                }
                            })
                        }, 1)
                    });
                    g.appendChild(T);
                    x.image = A;
                    x.canvas = T;
                    s && dom.setClass({
                        className: "selected",
                        list: s.parentNode.querySelectorAll("." + b),
                        target: s,
                        on: !0
                    })
                }
                this.media = e;
                this.length = e.paths.length;
                this.type = b;
                this.library = c;
                this.folder = d;
                this.divider = m;
                this.overflow = k;
                this.content = g;
                this.container = f;
                this.show();
                f.scrollTop = s ? s.offsetTop : 0
            }
        };
        this.onDblClick = function(b, c) {
            a.sidebar && a.sidebar.close()
        };
        this.onClick = function(b, c) {
            var d = c.target,
                e = d.getAttribute("data-src").split("/"),
                f = d.getAttribute("data-type");
            l(f, e[e.length - 2]);
            d.drag && (d.drag.remove(), (e = document.querySelector("#addFromDrag")) && e.parentNode.removeChild(e));
            "text" === a.tool.type || "stamp" === a.tool.type ? a.ui.changeMediaFromElement(d) : "select" === a.tool.type && a.selection.length ? a.ui.changeMediaFromElement(d) : a.feature.placement.mediaClick ? (e = d.getAttribute("data-src"), a.scene.deselectAll(), a.ui.changeMediaFromElement(d), a.addMedia(e)) : (a.scene.deselectAll(), a.ui.changeMediaFromElement(d))
        };
        this.onScroll = function(a) {
            a = e.content;
            var b = e.container,
                c = e.media,
                d = e.folder,
                f = e.divider,
                g = e.overflow;
            window.clearTimeout(a.timeout);
            a.timeout = setTimeout(function() {
                for (var a = [], e = c.paths, h = 0; h < e.length; h++) {
                    var k = e[h],
                        l = !d || "everything" === d,
                        m = k.folder === d;
                    ("yourFiles" === d && "#" === k.filepath[0] || m || l) && a.push(k)
                }
                e = 0;
                l = a.length;
                m = Math.floor(b.scrollTop / b.scrollHeight * l / f) * f;
                for (h = 0; h < l; h++) k = a[h], ++e <= g + m && e > m && (k && k.image && !k.image.src) && (k.image.src = k.canvas.getAttribute("data-thumbnail"))
            }, 100)
        };
        return this.construct(b, c, d)
    };
    a.ui.detectFolder = function(b, c, d) {
        var e = a.lib[b];
        if (e) {
            b = e.tree;
            c = c.replace(e.path + "/", "");
            if (d) return d[c];
            for (var f in b) if (d = b[f], d[c]) return f
        }
    };
    var m = function() {
        var a = document.querySelector(".sk-configure-credits");
        if (a) return dom.removeChildNodes(a), a.style.display = "none", a
    }, l = function(b, c) {
        var d = m(),
            e = a.lib[b].credits;
        if (e && e[c]) {
            d.style.display = "block";
            var e = e[c],
                f = document.createElement("a");
            f.href = e.url;
            f.target = "_blank";
            f.className = "roll";
            var g = document.createElement("span");
            g.setAttribute("data-title",
                e.name);
            g.innerHTML = e.name;
            f.appendChild(g);
            d.appendChild(document.createTextNode("By: "));
            d.appendChild(f)
        }
    }, p = function(b) {
        if (!b) return "";
        var c = a.detect.srcRequired;
        if (c[b.type]) {
            var d = b.type,
                e = a.tool.type;
            !b.src && a.lib[d] && (b.src = a.lib[d].paths[0].path);
            c[e] && d !== e && a.toolkit.setTool(d);
            return b.src
        }
        if (b.fontFamily) return "./media/font/" + b.fontFamily + ".png"
    };
    a.ui.setToolMenu = function(b, c) {
        var d, e = a.ui.getCatelog(b);
        "brushes" === e ? d = document.querySelector(".sk-brush-menu") : "shapes" === e && (d = document.querySelector(".sk-shape-menu"));
        if ((d = d || document.getElementById("tool-" + b) || document.querySelector("." + e)) && d.parentNode) {
            if (a.toolkit.__icons[e] && (e = a.toolkit.__icons[e][b.replace("_", " ")], !0 !== e)) if (d.id = "tool-" + b, d.title = STRING.ucwords(b), 0 === e.indexOf("icon-")) {
                var f = d.querySelector("img");
                f && (f.src = "./media/ux/transparent.png");
                if (f = d.querySelector(".sk-icon")) {
                    for (var g = "", h = f.className.split(" "), k = 0; k < h.length; k++) 0 !== h[k].indexOf("icon-") && (g += " " + h[k]);
                    f.className = g + " " + e
                }
            } else d.querySelector("img").src = e;
            c || dom.setClass({
                className: "selected",
                list: a.$$(".sketchapi .sk-toolset .selected"),
                target: d,
                on: !0
            })
        }
    };
    a.ui.setCursor = function(b) {
        if (!a.feature.debug) {
            var c = a.feature.cursorCSS,
                d = a.tool;
            a.active.canvas.style.cursor = b ? b : c && c[d.type] ? c[d.type] : ""
        }
    };
    a.ui.addLineBreak = function(a) {
        var b = document.createElement("div");
        b.className = "sk-break";
        a.appendChild(b)
    };
    a.ui.addClick = function(a, b, c) {
        if (a = "string" === typeof b ? a.querySelector(b) : b) eventjs.add(a, "click", c), eventjs.add(a, "mousedown", eventjs.stop)
    };
    a.ui.forQuery = function(a, b, c) {
        a = a.querySelectorAll(b);
        for (b = 0; b < a.length; b++) c(a[b])
    };
    a.ui.sourceAtop = function(b) {
        var c = b.className || "";
        c.indexOf("selected");
        var d = b.getContext("2d");
        d.globalCompositeOperation = "source-atop";
        d.fillStyle = a.feature.ui.sourceAtopColor;
        d.fillRect(0, 0, b.width, b.height);
        b.setAttribute("data-className", c)
    };
    a.ui.changeMediaFromElement = function(b) {
        var c = b.getAttribute("data-type"),
            d = b.getAttribute("data-src"),
            e = b.getAttribute("data-name");
        a.toolkit.setMedia({
            src: d,
            fontFamily: e,
            type: c,
            onload: function() {
                a.render.dirtyControls = !0
            }
        });
        if (b.parentNode && b.parentNode.querySelector(".selected")) {
            if ("stamp" === c || "text" === c) a.ui.sourceAtop(b.parentNode.querySelector(".selected")), a.ui.sourceAtop(b)
        } else "stamp" !== c && "text" !== c || a.ui.sourceAtop(b);
        "image" === c && (c = "clipart");
        dom.setClass({
            className: "selected",
            list: b.parentNode.querySelectorAll("." + c),
            target: b,
            on: !0
        })
    };
    var r = {
        menu: !0,
        "menu-download": !0,
        "menu-export": !0,
        "menu-about": !0,
        configure: !0,
        palette: !0
    }, q = function(b, c) {
        eventjs.cancel(b);
        var d = c.target.id.substr(5);
        if (r[d]) return a.exec(d);
        "camera" === d && sketch.util.exists("chrome.permissions.request") ? chrome.permissions.request({
            permissions: ["videoCapture"]
        }, function(b) {
            b ? a.exec(d) : alertify.log("Access to camera was denied.")
        }) : a.exec(d)
    };
    a.ui.toolset = {};
    a.ui.toolset.initEvents = function(b) {
        b = b || {};
        var c = b.target || ".sk-toolset";
        a.util.each(document.querySelectorAll(".sketchapi " + c + " img"), function(a) {
            eventjs.add(a, "mousedown", eventjs.returnFalse)
        });
        a.util.each(document.querySelectorAll(".sketchapi " + c + " .sk-button"), function(c) {
            if (c.id && 0 === c.id.indexOf("tool-")) {
                for (var d in b) 0 === d.indexOf("on") && "function" === typeof b[d] && eventjs.add(c, d.substr(2), b[d]);
                a.util.each(c.querySelectorAll(".sk-arrow"), function(b) {
                    var d, e, f = c.id.substr(5);
                    a.detect.brush[f] ? (d = "menuBrushTools", e = "More brushes...") : a.detect.shape[f] && (d = "menuShapeTools", e = "More shapes...");
                    eventjs.add({
                        target: c,
                        contextmenu: function(b) {
                            var c = a.toolkit.select.getCoord(b);
                            contextmenu.show(a.ui[d], c.x - 15, 45, !0);
                            eventjs.cancel(b)
                        },
                        longpress: {
                            timeout: 250,
                            listener: function(b,
                                               c) {
                                if ("start" === c.state) {
                                    var e = a.toolkit.select.getCoord(b);
                                    contextmenu.show(a.ui[d], e.x - 15, 45, !0)
                                }
                            }
                        }
                    });
                    eventjs.add({
                        target: b,
                        mousedown: function(b, c) {
                            var e = a.toolkit.select.getCoord(b);
                            contextmenu.show(a.ui[d], e.x - 15, 45, !0)
                        },
                        mouseover: function(b) {
                            eventjs.stop(b);
                            a.setTooltip(a.language.translate(e))
                        },
                        mouseout: function(b) {
                            eventjs.stop(b);
                            a.setTooltip("")
                        }
                    })
                });
                eventjs.add({
                    target: c,
                    click: q,
                    contextmenu: eventjs.cancel,
                    mousedown: eventjs.cancel,
                    mouseover: function(b) {
                        eventjs.stop(b);
                        b = c.getAttribute("data-title");
                        a.setTooltip(a.language.translate(b))
                    },
                    mouseout: function(b) {
                        eventjs.stop(b);
                        a.setTooltip("")
                    },
                    dblclick: function() {
                        var b = c.id.substr(5);
                        a.configure.tools[b] && (a.windows.blink("sk-configure"), a.ui.buildConfigure())
                    }
                })
            }
        })
    };
    a.setup.events = function() {
        var b = a.canvas2d.container;
        a.setup.onResize();
        a.setup.onHashChange();
        a.ui.toolset.initEvents();
        a.util.each(document.querySelectorAll(".sk-window"), a.windows.addWindowEvent);
        a.ui.setupStartWindow && a.ui.setupStartWindow();
        eventjs.add(window, "scroll", function() {
            a.windows.restore()
        });
        a.feature.preventScroll && !a.feature.debugCache && (eventjs.proxy.wheelPreventElasticBounce(".open-project-listing"), eventjs.add(window, "wheel", eventjs.cancel), eventjs.add(b, "wheel", eventjs.stop));
        a.feature.beforeUnloadPrompt && eventjs.add(window, "beforeunload", function(b) {
            var c = a.feature.beforeUnloadPrompt;
            return (b || window.event).returnValue = c
        });
        eventjs.isTouch && eventjs.add(document, "touchstart,touchmove,dragstart", eventjs.prevent);
        eventjs.add(a.active.canvas, "contextmenu", eventjs.prevent);
        a.windows && eventjs.add(a.active.canvas, "mouseup", a.windows.clearFocus);
        eventjs.add(a.active.canvas, "mouseup", function() {
            document.activeElement !== document.body && document.activeElement && document.activeElement.blur()
        });
        eventjs.add(window, "focus,load,blur", function() {
            eventjs.proxy.metaTrackerReset()
        })
    };
    a.ui.getCatelog = function(b) {
        if (b) {
            b = b.replace("_", " ");
            var c = a.toolkit.__icons,
                d;
            for (d in c) {
                var e = c[d];
                e.length && (c[d] = a.util.array2object(e));
                if (c[d][b]) return d
            }
        }
    };
    a.ui.MenuOverlay = function(b) {
        var c = b.id,
            d = b.options,
            e = b.autoclose,
            f = b.close || function() {
                dom.setClass("#" + c, "sk-menu-opened", !1)
            };
        b = a.$(".sketchapi");
        var g = dom.create('<div class="sk-menu"></div>');
        g.id = c;
        eventjs.add({
            target: g,
            mousedown: eventjs.cancel,
            click: function(a) {
                eventjs.stop(a);
                eventjs.prevent(a);
                e && f()
            }
        });
        var h = dom.create('<div class="sk-menu-valign"></div>');
        g.appendChild(h);
        var k = dom.create('<div class="sk-menu-content"></div>');
        h.appendChild(k);
        h = dom.create('<span class="icon-remove"></span>');
        eventjs.add({
            target: h,
            mousedown: eventjs.cancel,
            click: f
        });
        k.appendChild(h);
        var h = function(a, b) {
            eventjs.add(a, "mousedown", eventjs.cancel);
            eventjs.add(a, "mouseup", eventjs.prevent);
            eventjs.add(a, "click", function(a, c) {
                eventjs.prevent(a);
                eventjs.stop(a);
                b(a, c)
            })
        }, l;
        for (l in d) {
            var m = dom.create("div");
            0 === l.indexOf("icon-") ? m.className = l : (m.innerHTML = l, m.className = "option-" + l.toLowerCase());
            h(m, d[l]);
            k.appendChild(m)
        }
        b.appendChild(g)
    };
    a.ui.confirm = function(b) {
        if (a.actions && "delete-project-confirm" !== b.message && (a.scene.deselectAll(), !1 === a.__modified)) return b.callback(!0);
        var c = a.language.translate(b.message);
        b.labels && alertify.set({
            labels: b.labels
        });
        alertify.confirm('<h3 class="confirm-message">' + c + "</h3>", b.callback)
    };
    a.ui.param = function(a, b, c) {
        b = b.replace(")", "").split("(");
        this.param = a;
        this.format = b[0];
        this.range = b[1];
        this.value = c;
        return this
    };
    a.ui.vars = {};
    a.ui.vars.clamp = function(a, b, c, d, e) {
        e && sketch.util.mergeObject(e, this);
        "object" === typeof a ? (this.min = a[0], this.max = a[1], this.getValue = function() {
            return [this.min, this.max]
        }) : (this.value = a, this.getValue = function() {
            return this.value
        });
        this.clamp = {};
        this.clamp.min = b;
        this.clamp.max = c;
        this.type = "clamp";
        this.format = d || "float";
        return this
    };
    a.ui.vars.select = function(a, b, c, d) {
        this.type = "select";
        this.label = a || "";
        this.options = c;
        this.selected = b;
        this.setData = d;
        this.getOptions = function() {
            if ("function" === typeof c) return c();
            if (Array.isArray(c)) {
                for (var a = {}, b = 0; b < c.length; b++) {
                    var d = c[b];
                    a[d] = d
                }
                return a
            }
            return c
        }
    };
    a.ui.vars.checkbox = function(a, b) {
        this.type = "checkbox";
        this.label = a;
        this.checked = b
    };
    a.ui.vars.input = function(a) {
        this.type = "input";
        this.value = a
    };
    a.ui.vars.textarea = function(a) {
        this.type = "textarea";
        this.value = a
    };
    a.ui.vars.color = function(a) {
        this.type = "color";
        this.color = a
    };
    a.ui.vars.filePicker = function(a) {
        this.type = "filePicker";
        this.filter = a
    };
    a.ui.buildConfigureOptions = function(b) {
        var c = document.querySelector("#sk-configure .sk-configure-content");
        dom.removeChildNodes(c);
        if (b = a.configure.tools[b]) {
            a.ui.ranges = {};
            for (var e in b) {
                var f = b[e];
                if (f && f.type) {
                    var h = e[0].toUpperCase() + e.substr(1);
                    switch (f.type) {
                        case "filePicker":
                            d(c, b,
                                f);
                            break;
                        case "select":
                            a.ui.addLineBreak(c);
                            v(c, f);
                            break;
                        case "checkbox":
                            a.ui.addLineBreak(c);
                            var k = document.createElement("label"),
                                l = document.createElement("input"),
                                m = document.createElement("span");
                            m.textContent = h;
                            m.style.cssText = "margin: 0 0 0 7px;";
                            l.type = "checkbox";
                            l.checked = f.checked;
                            l.id = "checkbox-" + f.label;
                            l.onchange = function() {
                                var b = this.id.substr(9),
                                    c = {};
                                c[b] = !! this.checked;
                                a.tool.update(c)
                            };
                            k.appendChild(l);
                            k.appendChild(m);
                            k.style.cssText = "display:block; margin: 5px 0 5px 7px;";
                            c.appendChild(k);
                            break;
                        case "input":
                            a.ui.addLineBreak(c);
                            u(c, f, "input");
                            break;
                        case "textarea":
                            a.ui.addLineBreak(c);
                            u(c, f, "textarea");
                            break;
                        case "clamp":
                            a.ui.ranges[e] = g(c, b, f, h)
                    }
                }
            }
        }
    };
    var u = function(b, c, d) {
        a.ui.addLineBreak(b);
        var e = document.createElement("label");
        d = document.createElement(d || "input");
        d.textContent = c.value;
        var f = document.createElement("span");
        f.style.cssText = "margin: 0 0 0 7px;";
        e.appendChild(d);
        e.appendChild(f);
        b.appendChild(e);
        eventjs.add(d, "drag", eventjs.stop);
        eventjs.add(d, "change", function() {
            c.value = this.value;
            a.setTool(a.tool.type)
        })
    }, v = function(b, c) {
        return a.ui.buildSelect({
            label: c.label,
            style: "width: 185px; margin: 10px 0 0 7px; text-transform: capitalize;",
            element: b,
            selected: c.selected,
            data: c.getOptions(),
            onchange: function() {
                var b = this.id.substr(7),
                    d = this.options[this.selectedIndex],
                    e = d.getAttribute("data-cmd"),
                    d = d.value;
                c.setData ? c.setData(b, d) : (d = {}, d[b] = e, a.tool.update(d))
            }
        })
    };
    return sketch
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.ui && (sketch.ui = {});
(function(a) {
    a.ui.button = function(a) {
        this.data = {};
        this.add = function(a) {
            if (a && a.id && !this.data[a.id]) {
                var g = a.parent;
                delete a.parent;
                var b = a.src;
                delete a.src;
                var e = document.createElement("span");
                e.className = "sk-button";
                var f = document.createElement("span");
                f.className = "sk-button-title";
                f.innerHTML = a.title || "";
                e.appendChild(f);
                a.symbol && (f = document.createElement("span"), f.className = "sk-icon " + a.symbol, e.appendChild(f));
                e.events = {};
                for (var c in a) switch (c) {
                    case "id":
                    case "className":
                        e[c] = a[c];
                        break;
                    case "onclick":
                        e.events[c] = eventjs.add(e, c.substr(2), a[c]);
                        break;
                    case "title":
                        e.setAttribute("data-title", a[c]);
                        break;
                    case "style":
                    case "symbol":
                    case "image":
                        break;
                    default:
                        e.setAttribute(c, a[c])
                }
                g.appendChild(e);
                b && (g = new Image, g.src = b, g.width = 26, e.appendChild(g));
                return this.data[a.id] = e
            }
        };
        this.remove = function(d) {
            if (d = this.data[d]) delete this.data[a.id], d.parentNode && d.parentNode.removeChild(d)
        };
        this.disable = function(a) {
            if (a = this.data[a]) dom.setClass(a, "disabled", !0), a.events.onclick.remove()
        };
        this.enable = function(a) {
            if (a = this.data[a]) dom.setClass(a, "disabled", !1), a.events.onclick.add()
        };
        return a ? this.add(a) : this
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.ui && (sketch.ui = {});
(function(a) {
    var h = {};
    a.ui.DropDown = function(a) {
        var g = this,
            b = a.id,
            e = a.icon,
            f = a.container,
            c = a.selected,
            k = a.onselect;
        a = a.data;
        var m = document.createElement("div");
        m.className = "sk-dropdown-header";
        var l = document.createElement("span");
        l.className = "data-header";
        m.appendChild(l);
        var p = document.createElement("span");
        p.className = "vertical-line";
        m.appendChild(p);
        e ? (p = document.createElement("span"), p.className = e, m.appendChild(p)) : (p = document.createElement("span"), p.style.cssText = "margin-left: 6px;", p.className = "icon-caret-down", m.appendChild(p), l.textContent = c);
        f.appendChild(m);
        var r = document.createElement("ul");
        r.className = "dropdown-menu";
        p = function(a) {
            for (var b = 0; b < a.length; b++) {
                var c = a[b],
                    c = c.name || c,
                    d = document.createElement("li"),
                    e = document.createElement("a");
                e.href = "#";
                q.options[c] = eventjs.add(e, "click", function(a, b) {
                    var c = b.target.querySelector(".data");
                    g.setValue(c.textContent);
                    dom.setClass(f, "open", !1);
                    k && k(c.textContent)
                });
                var h = document.createElement("i");
                h.className = "i";
                var l = document.createElement("span");
                l.className = "data";
                l.textContent = c;
                e.appendChild(h);
                e.appendChild(l);
                d.appendChild(e);
                r.appendChild(d)
            }
        };
        f.appendChild(r);
        this.open = function() {
            for (var a in h) {
                var b = -1 !== f.className.indexOf("open");
                if (a !== g.id || b) dom.setClass(h[a].container, "open", !1);
                else {
                    dom.setClass(f, "open", !0);
                    r.style.left = 0;
                    b = sk.util.getMetrics(r);
                    if (b = Math.min(0, window.innerWidth - b.x1 - b.width)) r.style.left = b + "px";
                    eventjs.add(document.body, "click", function(a, b) {
                        b.remove();
                        eventjs.add(document.body, "click", function(a, b) {
                            dom.setClass(h[g.id].container, "open", !1);
                            b.remove()
                        })
                    })
                }
            }
        };
        this.setValue = function(a) {
            a = String(a);
            var b = q.options,
                c;
            for (c in b) if (c === a) {
                var d = b[c].target;
                g.selectedElement = d;
                g.selected = a;
                e || (l.textContent = a);
                dom.setClass({
                    target: d,
                    list: d.parentNode.parentNode.querySelectorAll("a"),
                    className: "selected"
                })
            }
        };
        var q = {
            options: {},
            toggle: eventjs.add(m, "mousedown", function(a) {
                var b = (new Date).getTime();
                50 > b - q.toggle.timestamp || (q.toggle.timestamp = b, eventjs.prevent(a), g.open())
            })
        };
        if (Array.isArray(a)) p(a);
        else for (var u in a) m = document.createElement("a"),
            m.href = "#", m.textContent = u, m.className = "optgroup", r.appendChild(m), p(a[u]);
        h[b] = this;
        this.setValue(c);
        this.container = f;
        this.ul = r;
        this.id = b || null;
        return this
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.ui && (sketch.ui = {});
(function(a) {
    var h = {};
    a.util.addFileInput = function(b) {
        a.util.uploader.createFileInput({
            element: b,
            onChange: function(b) {
                b.fileInput.value = "";
                a.setBackground("#fff");
                b.addMedia({
                    openAsNew: !0,
                    self: a.util.uploader
                })
            }
        });
        eventjs.add(a.util.uploader.fakeInputContainer, "mousedown", eventjs.stop)
    };
    h.openProject = function(b) {
        a.ui.forQuery(b, ".open-project-remove", function(c) {
            a.ui.addClick(b, c, function(b) {
                a.fs.removeFile();
                a.reset()
            })
        });
        a.ui.forQuery(b, ".open-project-save", function(c) {
            a.ui.addClick(b, c, function(b) {
                a.fs.save()
            })
        });
        a.ui.forQuery(b, ".open-project-save-copy", function(c) {
            a.ui.addClick(b, c, function(b) {
                a.fs.createFile()
            })
        });
        a.ui.forQuery(b, ".open-project-import", function(b) {
            a.util.addFileInput(b)
        });
        a.ui.addClick(b, ".open-project-start", function() {
            a.ui.openProjectWindow(".open-project")
        });
        a.ui.addClick(b, ".export-project-start", function() {
            a.ui.openProjectWindow(".export-project")
        });
        a.ui.addClick(b, ".new-project-start", function() {
            a.ui.openProjectWindow(".new-project")
        })
    };
    h.exportProject = function(b) {
        a.ui.forQuery(b, ".export-project-png", function(c) {
            a.supports.io.png ? a.ui.addClick(b, c, function(b) {
                a.download.image({
                    mime: "image/png"
                })
            }) : c.style.display = "none"
        });
        a.ui.forQuery(b, ".export-project-jpeg", function(c) {
            a.supports.io.jpeg ? a.ui.addClick(b, c, function(b) {
                a.download.image({
                    mime: "image/jpeg"
                })
            }) : c.style.display = "none"
        });
        a.ui.forQuery(b, ".export-project-webp", function(c) {
            a.supports.io.webp ? a.ui.addClick(b, c, function(b) {
                a.download.image({
                    mime: "image/webp"
                })
            }) : c.style.display = "none"
        });
        a.ui.forQuery(b, ".export-project-pdf",

            function(c) {
                a.supports.io.blob ? a.ui.addClick(b, c, function(b) {
                    a.download.pdf()
                }) : c.style.display = "none"
            });
        a.ui.forQuery(b, ".export-project-zip", function(c) {
            a.supports.io.blob ? a.ui.addClick(b, c, function(b) {
                a.download.zip()
            }) : c.style.display = "none"
        });
        var c = function(c) {
            a.ui.forQuery(b, ".export-project-" + c, function(d) {
                a.ui.addClick(b, d, function(b) {
                    b = a.project.title;
                    var d = a.project.description;
                    a.api.test(c, a.save.canvas(), b, d)
                })
            })
        };
        c("facebook");
        c("imgur");
        c("gdrive");
        c("twitter");
        c("pinterest")
    };
    var d = a.ui.PROJECT = {
        query: {},
        param: {
            units: {
                inches: "in",
                mm: "mm",
                cm: "cm",
                pixels: "px",
                "%": "%"
            },
            presets: {
                "Size of Screen": "screen",
                "Size of Window": "window",
                "377 x 197 (Facebook)": "size:377x197,units:px,res:72",
                "640 x 480": "size:640x480,units:px,res:72",
                "800 x 600": "size:800x600,units:px,res:72",
                "1024 x 768": "size:1024x768,units:px,res:72",
                "1280 x 800": "size:1280x800,units:px,res:72",
                "1680 x 1050": "size:1680x1050,units:px,res:72",
                "1920 x 1200": "size:1920x1200,units:px,res:72",
                "180 x 150 (Rectangle)": "size:180x150,units:px,res:72",
                "300 x 250 (Medium Rectangle)": "size:200x250,units:px,res:72",
                "728 x 90 (Leaderboard)": "size:728x90,units:px,res:72",
                "550 x 250 (Wide Skyscraper)": "size:550x250,units:px,res:72",
                "2 x 3": "size:2x3,units:in,res:300",
                "3 x 5 (Index Card)": "size:3x5,units:in,res:300",
                "4 x 6 (Postcard)": "size:4x6,units:in,res:300",
                "5 x 7 (L, 2L)": "size:5x7,units:in,res:300",
                "8 x 10 (Photo)": "size:8x10,units:in,res:300",
                "8.5 x 11 (Letter)": "size:8.5x11,units:in,res:300",
                "11 x 14 (Legal)": "size:11x14,units:in,res:300",
                "11 x 17 (Tabloid)": "size:11x17,units:in,res:300",
                "16 x 20 (Poster)": "size:16x20,units:in,res:300",
                "20 x 30 (Poster)": "size:20x20,units:in,res:300",
                Custom: "custom"
            }
        },
        WIDTH: 100,
        HEIGHT: 100,
        RESOLUTION: 72,
        BACKGROUND: "transparent",
        PRESET: "window",
        UNITS: "%",
        getPresetData: function(b) {
            var c = {};
            a.util.each(b.split(","), function(a) {
                a = a.split(":");
                c[a[0]] = a[1]
            });
            if (c.size) return b = c.size.split("x"), c.width = parseFloat(b[0]), c.height = parseFloat(b[1]), c
        },
        getPresetIndex: function(a, b) {
            var e = -1,
                g;
            for (g in a) {
                var h = d.getPresetData(a[g]);
                if (h && h.width === d.WIDTH && h.height === d.HEIGHT) return e + 1;
                ++e
            }
            return e
        },
        getDataIndex: function(a, b) {
            var d = -1,
                e;
            for (e in a) {
                if (a[e] === b) return d + 1;
                ++d
            }
            return d
        },
        updateFromData: function(b) {
            var c = d.query;
            if ("%" === b.units) {
                var e = 1;
                d.WIDTH = 100 * b.width;
                d.HEIGHT = 100 * b.height;
                d.UNITS = "%";
                d.PRESET = "window"
            } else e = d.getPresetIndex(d.param.presets, "custom"), d.WIDTH = b.width, d.HEIGHT = b.height, d.UNITS = "px", d.PRESET = "custom";
            c.width.value = d.WIDTH;
            c.height.value = d.HEIGHT;
            c.presets.selectedIndex = e;
            c.units.selectedIndex = d.getDataIndex(d.param.units, d.UNITS);
            d.BACKGROUND = b.background;
            d.update();
            b = d.BACKGROUND;
            STRING.rxAlphaNumeric.test(b) && (b = "white");
            dom.setClass({
                target: a.$(".fileEntry." + b),
                list: "div",
                className: "fileEntrySelected"
            })
        },
        update: function() {
            var b = d.UNITS,
                c = a.convert.metrics[b + ">px"];
            "%" === b ? (b = d.WIDTH / 100, c = d.HEIGHT / 100, a.project.setSize(b, c, "%")) : (b = d.WIDTH * c, c *= d.HEIGHT, a.project.setSize(b, c));
            a.setBackground(d.BACKGROUND);
            a.orient.reset();
            a.orient.render("root.startWindow")
        }
    };
    h.newProject = function(f) {
        var c = function(b, c) {
            a.ui.forQuery(f, ".new-project-" + b, function(e) {
                d.query[b] = e;
                e.value = d[c];
                var f = d[b] || (d[b] = []);
                eventjs.add(e, "drag", eventjs.stop);
                eventjs.add(e, "keyup,change", function() {
                    a.$(".new-project-presets select").selectedIndex = 22;
                    d[c] = parseFloat(e.value);
                    d.update()
                });
                f.push(e)
            })
        };
        c("width", "WIDTH");
        c("height", "HEIGHT");
        a.ui.forQuery(f, ".new-project-units", function(b) {
            d.units || (d.units = []);
            eventjs.add(b, "mousedown", eventjs.stop);
            b = a.ui.buildSelect({
                label: "Units",
                element: b,
                selected: "%",
                data: d.param.units,
                onchange: function() {
                    var b = this.options[this.selectedIndex],
                        c = d.WIDTH,
                        e = d.HEIGHT,
                        f = d.UNITS,
                        g = b.value;
                    "%" === f ? (c = c / 100 * window.innerWidth, e = e / 100 * window.innerWidth) : (f = a.convert.metrics[f + ">px"], c *= f, e *= f);
                    "%" === g ? (c = 100 * (c / window.innerWidth), e = 100 * (e / window.innerWidth)) : (f = a.convert.metrics["px>" + g], c *= f, e *= f);
                    a.$(".new-project-width").value = c;
                    a.$(".new-project-height").value = e;
                    d.WIDTH = c;
                    d.HEIGHT = e;
                    d.UNITS = b.value
                }
            });
            d.query.units = b;
            d.units.push(b)
        });
        a.ui.forQuery(f, ".new-project-presets", function(b) {
            d.presets || (d.presets = []);
            eventjs.add(b, "mousedown", eventjs.stop);
            b = a.ui.buildSelect({
                label: "Presets",
                style: "width: 165px; float: left;",
                element: b,
                selected: "Size of Window",
                data: d.param.presets,
                onchange: function() {
                    d.PRESET = this.options[this.selectedIndex].value;
                    switch (d.PRESET) {
                        case "custom":
                            break;
                        case "window":
                            d.WIDTH = 100;
                            d.HEIGHT = 100;
                            d.UNITS = "%";
                            break;
                        case "screen":
                            d.WIDTH = window.screen.width;
                            d.HEIGHT = window.screen.height;
                            d.UNITS = "px";
                            break;
                        default:
                            var a = d.getPresetData(d.PRESET);
                            d.WIDTH = a.width;
                            d.HEIGHT = a.height;
                            d.UNITS = a.units
                    }
                    d.update();
                    a = function(a, b) {
                        for (var c = d[a], e = 0; e < c.length; e++) b(c[e])
                    };
                    a("units", function(a) {
                        for (var b = a.options, c = 0; c < b.length; c++) b[c].value === d.UNITS && (a.selectedIndex = c)
                    });
                    a("width", function(a) {
                        a.value = d.WIDTH
                    });
                    a("height", function(a) {
                        a.value = d.HEIGHT
                    })
                }
            });
            d.query.presets = b;
            d.presets.push(b)
        });
        var g = {
            Transparent: {
                id: "transparent",
                background: a.gen.interlace({
                    size: 12,
                    innerColor: "#fff",
                    outerColor: "#d9d9d9"
                })
            },
            Black: {
                id: "black",
                background: "#111"
            },
            White: {
                id: "white",
                background: "#eee"
            },
            Notebook: {
                id: "notebook",
                background: a.gen.paper("notebook")
            },
            "Loose Leaf": {
                id: "looseLeaf",
                background: a.gen.paper("looseLeaf")
            },
            Lined: {
                id: "lined",
                background: a.gen.paper("lined")
            },
            Grid: {
                id: "grid",
                background: a.gen.grid("grid")
            },
            "Graph Paper": {
                id: "graphPaper",
                background: a.gen.grid("graphPaper")
            },
            Blueprint: {
                id: "bluePrint",
                background: a.gen.grid("bluePrint")
            }
        }, c = f.querySelector(".sk-project-listing");
        eventjs.proxy.wheelPreventElasticBounce(c);
        c = f.querySelector(".sk-project-listing-new");
        eventjs.proxy.wheelPreventElasticBounce(c);
        for (var h in g) {
            var l = document.createElement("div"),
                p = g[h];
            l.className = "fileEntry " + p.id;
            l.title = h;
            c.appendChild(l);
            p.id === d.BACKGROUND && (l.className += " fileEntrySelected");
            var r = document.createElement("span");
            r.innerHTML = h;
            l.appendChild(r);
            var r = document.createElement("canvas"),
                q = r.getContext("2d");
            r.width = 94;
            r.height = 94;
            q.scale(0.5, 0.5);
            q.fillStyle = p.background;
            q.fillRect(0, 0, 188, 188);
            l.appendChild(r)
        }
        a.ui.forQuery(f, ".new-project .fileEntry", function(b) {
            a.ui.addClick(f, b, function(c) {
                dom.setClass({
                    target: b,
                    list: "div",
                    className: "fileEntrySelected"
                });
                c = g[b.title];
                a.setBackground(c.id);
                d.BACKGROUND = c.id;
                d.update()
            })
        });
        a.ui.forQuery(f, ".new-project-create", function(b) {
            a.ui.addClick(f, b, function(b) {
                a.reset();
                a.supports.fileSystem ? (a.fs.createFile(), a.ui.openProjectWindow(".open-project")) : a.windows.close("sk-open")
            })
        });
        a.ui.forQuery(f, ".new-project-resize", function(b) {
            a.ui.addClick(f, b, function(b) {
                a.history && (b = a.project.getData(), a.history.store("project-resize", [e, b]));
                a.windows.close("sk-open")
            })
        });
        a.ui.forQuery(f, ".new-project-cancel", function(c) {
            a.ui.addClick(f, c, function(c) {
                d.WIDTH = b.WIDTH;
                d.HEIGHT = b.HEIGHT;
                d.UNITS = b.UNITS;
                d.PRESET = b.PRESET;
                d.BACKGROUND = b.BACKGROUND;
                d.update();
                a.ui.openProjectWindow(".start")
            })
        })
    };
    var g = {
        ".start": "Welcome to Sketchpad",
        ".open-project": "My Projects",
        ".export-project": "Export",
        ".new-project": "New Project"
    }, b = {}, e = {};
    a.ui.openProjectWindow = function(f, c) {
        f = f || "";
        var h = a.$("#sk-open"),
            m = (h.querySelector("div.selected") || {}).className || "";
        b = a.util.clone(d);
        e = a.project.getData();
        ".new-project" === f && a.project.width && d.updateFromData(a.project);
        if ((h = sk.windows.isOpen(h)) && -1 !== m.indexOf(f.substr(1))) c && sk.windows.blink("sk-open");
        else {
            m = a.$("#sk-open .sk-open-header");
            dom.removeChildNodes(m);
            if (".start" !== f) {
                var l = document.createElement("span");
                l.className = "link";
                l.textContent = "Start";
                l.onclick = function() {
                    a.ui.openProjectWindow(".start")
                };
                m.appendChild(l);
                m.appendChild(document.createTextNode(" | "))
            }
            l = document.createElement("span");
            l.className = "tree";
            l.textContent = g[f];
            m.appendChild(l);
            sk.windows.setCurrentTab("sk-open", f);
            c && h ? sk.windows.blink("sk-open") : sk.windows.open("sk-open");
            ".open-project" === f && a.feature.fileSystem ? a.fs.updateProjects(null, sk.windows.restore) : setTimeout(sk.windows.restore, 500)
        }
    };
    a.ui.setupStartWindow = function() {
        var b = a.$("#sk-open");
        b && (h.exportProject(b), h.newProject(b), h.openProject(b), a.history.registerFunction({
            type: "project-resize",
            fn: function(b, d, e, f, g) {
                a.project.setData(e ? d[0] : d[1])
            }
        }))
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(a) {
    a.setup.add(function() {
        var h = ["jpg", "jpeg", "gif", "png", "svg"];
        a.io.json && h.push("json");
        a.io.zip && h.push("zip");
        a.io.json && a.io.zip && h.push("sketch");
        window.PDFJS && h.push("pdf");
        window.PSD && h.push("psd");
        a.convert.blobToABR && h.push("abr");
        a.convert.blobToGBR && h.push("gbr");
        sketch.util.exists("Color.open.GGR") && h.push("gbr");
        sketch.util.exists("Color.open.GPL") && h.push("gpl");
        a.util.uploader = new widget.Uploader({
            confirm: "json",
            action: a.location.host + "filesystem.php?upload=true",
            mode: "read",
            maxFiles: Infinity,
            formats: h.join(","),
            dropAreaMessage: "<div style=\"line-height: 1.5em; display: table-cell; vertical-align: middle;\">          <p>Drop file(s) here<br><span style='width:600px;display:inline-block;'>" + h.join(" ") + "</span></p>      </div>",
            onChange: function(d, g) {
                if ("undefined" !== typeof g.pageX) {
                    var b = a.canvas2d.container,
                        e = eventjs.proxy.getCoord(g),
                        b = eventjs.proxy.getBoundingBox(b);
                    a.util.uploader.addMedia(d, {
                        x: e.x - b.x1 - b.scrollBodyLeft,
                        y: e.y - b.y1 - b.scrollBodyTop
                    })
                } else a.util.uploader.addMedia(d)
            },
            onProgress: function(d) {
                a.loader.thread ? a.loader.update(a.loader.thread, "Uploading...", d.transferPercent) : a.loader.thread = a.loader.add("Uploading...", d.transferPercent)
            },
            onError: function(d, g, b) {
                window.alertify && alertify.log("Invalid format uploaded.");
                a.loader.stop()
            }
        });
        a.util.uploader.addMedia = function(d, g, b) {
            if (a.addMedia) {
                var e;
                d.openAsNew && (e = !0, d = d.self);
                a.reset.configure("image");
                a.scene.deselectAll();
                var f = [],
                    c = function() {
                        a.feature.vector.edit || a.scene.deselectAll();
                        isFinite(a.selection.idx) && f.push(a.selection.idx);
                        setTimeout(m.next, 50)
                    }, h = d.changedFilesByName;
                if (h["sketch.json"]) return a.open.folder(h);
                var m = new sketch.util.Queue({
                    flatten: !1,
                    items: d.changedFiles,
                    oncomplete: function() {
                        1 >= f.length ? f.length && a.ui.buildConfigure && a.ui.buildConfigure(a.scene.data[f[0]].type) : (a.exec("select"), a.scene.deselectAll(), a.scene.selectByIndex(f, !1), a.render("root.setup.uploader"), a.renderControls(a.selection.items, !0));
                        b && b()
                    },
                    next: function(b) {
                        m = this;
                        a.vortex && 0 === (b.type || "").indexOf("image/") ? a.vortex(b, g, function() {
                            a.addMedia({
                                openAsNew: e,
                                file: b
                            }, g, c)
                        }) : a.addMedia({
                            openAsNew: e,
                            file: b
                        }, g, c)
                    }
                })
            }
        }
    })
})(sketch);
var ColorMatrix = function() {
    var a = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0];
    ColorMatrix = function(h, d) {
        this.filters = {};
        this.id = "ColorMatrix";
        if (h) if ("object" === typeof h) {
            var g = !0,
                b;
            for (b in h) g = !1;
            g && (this.matrix = a.slice(0));
            for (var e in h) break;
            if ("number" === typeof h[e]) if (isNaN(e)) this.update(h);
            else {
                g = {};
                for (b in h) g[b] = h[b];
                this.matrix = g
            } else "object" === typeof h[e] && this.combine(h)
        } else this.update(h, d);
        else this.matrix = a.slice(0);
        return this
    };
    ColorMatrix.prototype = {
        brightness: function(a) {
            return [1,
                0, 0, 0, a, 0, 1, 0, 0, a, 0, 0, 1, 0, a, 0, 0, 0, 1, 0]
        },
        contrast: function(a, d) {
            d = d || 0.5;
            return [++a, 0, 0, 0, d * (1 - a), 0, a, 0, 0, d * (1 - a), 0, 0, a, 0, d * (1 - a), 0, 0, 0, 1, 0]
        },
        sepia: function() {
            return [0.393, 0.769, 0.189, 0, 0, 0.349, 0.686, 0.168, 0, 0, 0.272, 0.534, 0.131, 0, 0, 0, 0, 0, 1, 0]
        },
        exposure: function(a) {
            return [a, 0, 0, 0, 0, 0, a, 0, 0, 0, 0, 0, a, 0, 0, 0, 0, 0, 1, 0]
        },
        colorize: function(h) {
            var d = (h >>> 16 & 255) / 255,
                g = (h >>> 8 & 255) / 255,
                b = (h & 255) / 255;
            h = (h >>> 24) / 255;
            d = [0.212656 * d, 0.715158 * d, 0.072186 * d, 0, 0, 0.212656 * g, 0.715158 * g, 0.072186 * g, 0, 0, 0.212656 * b, 0.715158 * b, 0.072186 * b, 0, 0, 0, 0, 0, 1, 0];
            if (1 > h) for (g = 0; 20 > g; g++) d[g] = (1 - h) * a[g] + h * d[g];
            return d
        },
        monotone: function(h) {
            var d = (h >>> 16 & 255) / 255,
                g = (h >>> 8 & 255) / 255,
                b = (h & 255) / 255;
            h = (h >>> 24) / 255;
            d = [d, g, b, 0, 0, d, g, b, 0, 0, d, g, b, 0, 0, 0, 0, 0, 1, 0];
            if (1 > h) for (g = 0; 20 > g; g++) d[g] = (1 - h) * a[g] + h * d[g];
            return d
        },
        hue: function(a) {
            a *= sketch.util.DEG_RAD;
            var d = Math.cos(a);
            a = Math.sin(a);
            return [0.212656 + 0.787344 * d + -0.212656 * a, 0.715158 + -0.715158 * d + -0.715158 * a, 0.072186 + -0.072186 * d + 0.927814 * a, 0, 0, 0.212656 + -0.212656 * d + 0.143 * a, 0.715158 + d * (1 - 0.715158) + 0.14 * a, 0.072186 + -0.072186 * d + -0.283 * a, 0, 0, 0.212656 + -0.212656 * d + -0.787344 * a, 0.715158 + -0.715158 * d + 0.715158 * a, 0.072186 + 0.927814 * d + 0.072186 * a, 0, 0, 0, 0, 0, 1, 0]
        },
        invert: function(a, d) {
            d = d || 1;
            a *= -1;
            return [a, 0, 0, 0, d, 0, a, 0, 0, d, 0, 0, a, 0, d, 0, 0, 0, 1, 0]
        },
        temperature: function(a) {
            return [1 + a / 256, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1 + -a / 256, 0, 0, 0, 0, 0, 1, 0]
        },
        tint: function(a) {
            return [1 + a / 256, 0, 0, 0, 0, 0, 1 + -a / 256, 0, 0, 0, 0, 0, 1 + a / 256, 0, 0, 0, 0, 0, 1, 0]
        },
        saturation: function(a) {
            var d = 0.212656 * (1 - a),
                g = 0.715158 * (1 - a),
                b = 0.072186 * (1 - a);
            return [d + a, g, b, 0,
                0, d, g + a, b, 0, 0, d, g, b + a, 0, 0, 0, 0, 0, 1, 0]
        },
        blend: function(a, d) {
            for (var g = this.matrix, b = [], e = 0; 20 > e; e++) b[e] = (1 - d) * g[e] + d * a[e];
            this.matrix = b;
            return this
        },
        light: function(a, d, g, b) {
            g = b.highlights;
            d = -clamp(g.value * (g.max - g.min) + g.min, g.min, g.max);
            g = b.shadows;
            b = -clamp(g.value * (g.max - g.min) + g.min, g.min, g.max);
            var e = Math.PI;
            g = Math.cos(e);
            for (var e = Math.sin(e), f = a.data, c = f.length, k = 0; k < c; k += 4) {
                var m = f[k],
                    l = f[k + 1],
                    p = f[k + 2],
                    r = m,
                    q = l,
                    u = p,
                    m = m ^ 255,
                    l = l ^ 255,
                    p = p ^ 255,
                    v = (0.299 + 0.701 * g + 0.168 * e) * m + (0.587 - 0.587 * g + 0.33 * e) * l + (0.114 - 0.114 * g - 0.497 * e) * p,
                    s = (0.299 - 0.299 * g - 0.328 * e) * m + (0.587 + 0.413 * g + 0.035 * e) * l + (0.114 - 0.114 * g + 0.292 * e) * p,
                    x = (0.299 - 0.3 * g + 1.25 * e) * m + (0.587 - 0.588 * g - 1.05 * e) * l + (0.114 + 0.886 * g - 0.203 * e) * p,
                    m = r < v ? r : v,
                    l = q < s ? q : s,
                    p = u < x ? u : x,
                    r = (1 - d) * r + d * m,
                    q = (1 - d) * q + d * l,
                    u = (1 - d) * u + d * p,
                    m = r > v ? r : v,
                    l = q > s ? q : s,
                    p = u > x ? u : x,
                    r = (1 - b) * r + b * m,
                    q = (1 - b) * q + b * l,
                    u = (1 - b) * u + b * p;
                f[k] = (0 > r ? 0 : 256 > r ? r : 255) >> 0;
                f[k + 1] = (0 > q ? 0 : 256 > q ? q : 255) >> 0;
                f[k + 2] = (0 > u ? 0 : 256 > u ? u : 255) >> 0
            }
            return a
        },
        duotone: function(a, d, g, b) {
            d = Color.HSV_RGB({
                H: 360 * b.hue.value,
                S: 100 * b.saturation.value,
                V: 100 * b.saturation.value
            });
            g = 1.5 * b.luminance.value;
            b = b.amount.value;
            for (var e = a.data, f = e.length, c = 0; c < f; c += 4) {
                var k = e[c],
                    m = e[c + 1],
                    l = e[c + 2],
                    p = 0.212656 * k + 0.715158 * m + 0.072186 * l,
                    r = (1 - p / 255) * d.R + p / 255 * p,
                    q = (1 - p / 255) * d.G + p / 255 * p,
                    u = (1 - p / 255) * d.B + p / 255 * p,
                    p = p - (r + q + u) / 3,
                    r = r + p,
                    q = q + p,
                    u = u + p,
                    p = (r + q + u) / 3,
                    v = Math.min(r, q, u);
                0 > v && (r = p + (r - p) * p / (p - v), q = p + (q - p) * p / (p - v), u = p + (u - p) * p / (p - v));
                v = Math.max(r, q, u);
                255 < v && (r = p + (r - p) * (255 - p) / (v - p), q = p + (q - p) * (255 - p) / (v - p), u = p + (u - p) * (255 - p) / (v - p));
                r = ((1 - b) * k + b * r) * g;
                q = ((1 - b) * m + b * q) * g;
                u = ((1 - b) * l + b * u) * g;
                e[c] = r;
                e[c + 1] = q;
                e[c + 2] = u
            }
            return a
        },
        combine: function(a) {
            var d = [];
            if ("number" === typeof a[0]) for (var g = 0, b = arguments.length; g < b; g++) d[g] = arguments[g];
            else d = a;
            var b = this.matrix,
                e = [];
            for (g in d) if (b) {
                for (var f = 0; 5 > f; f++) for (var c = 0; 20 > c; c += 5) e[c + f] = b[c] * d[g][f] + b[c + 1] * d[g][f + 5] + b[c + 2] * d[g][f + 10] + b[c + 3] * d[g][f + 15] + (4 === f ? b[c + 4] : 0);
                b = e
            } else b = d[g];
            this.matrix = b;
            return this
        },
        update: function(a, d) {
            if ("string" === typeof a) {
                if (!this[a]) return;
                "number" === typeof d ? this.filters[a] = this[a](d) : delete this.filters[a]
            } else for (var g in a) this[g] && ("number" === typeof a[g] ? this.filters[g] = this[g](a[g]) : delete this.filters[g]);
            delete this.matrix;
            this.combine(this.filters);
            return this
        },
        getMatrix4x4: function() {
            var a = this.matrix;
            return [a[0], a[1], a[2], a[3], a[5], a[6], a[7], a[8], a[10], a[11], a[12], a[13], a[15], a[16], a[17], a[18]]
        },
        toString: function() {
            return this.matrix.join(",")
        },
        apply: function(a, d, g, b) {
            var e = a.canvas;
            b || (b = [0, 0]);
            g || (g = a);
            d || (d = [0, 0, e.width, e.height]);
            a = a.getImageData(d[0], d[1], d[2],
                d[3]);
            d = a.data;
            for (var f = this.matrix, e = f[0], c = f[1], k = f[2], m = f[3], l = f[4], p = f[5], r = f[6], q = f[7], u = f[8], v = f[9], s = f[10], x = f[11], w = f[12], A = f[13], y = f[14], z = f[15], B = f[16], D = f[17], E = f[18], f = f[19], G, J, C, O, N, L, Q, K = 0, F = d.length; K < F; K += 4) G = d[K], J = d[K + 1], C = d[K + 2], O = d[K + 3], N = G * e + J * c + C * k + O * m + l, L = G * p + J * r + C * q + O * u + v, Q = G * s + J * x + C * w + O * A + y, G = G * z + J * B + C * D + O * E + f, a.data[K] = (0 > N ? 0 : 255 > N ? N : 255) >> 0, a.data[K + 1] = (0 > L ? 0 : 255 > L ? L : 255) >> 0, a.data[K + 2] = (0 > Q ? 0 : 255 > Q ? Q : 255) >> 0, a.data[K + 3] = (0 > G ? 0 : 255 > G ? G : 255) >> 0;
            g.putImageData(a, b[0], b[1])
        },
        reset: function() {
            this.matrix = a.slice(0)
        }
    };
    return ColorMatrix
}();
(function(a) {
    a.toolkit.register("media", function(h) {
        var d = this;
        h.defaultWidth = h.defaultWidth || 100;
        h.defaultHeight = h.defaultHeight || 100;
        h.minWidth = h.minWidth || 1E-8;
        h.minHeight = h.minHeight || 1E-8;
        this.id = "media";
        this.ctx = h.layer0.ctx;
        this.active = h.active.ctx;
        this.cache = h.cache.ctx;
        this.enable = function() {
            var d = a.toolkit.select;
            a.tool !== d && d && d.enable({
                cursor: !0,
                search: this.id
            })
        };
        this.disable = function() {
            var d = a.toolkit.select;
            a.tool !== d && d && d.disable({
                cursor: !0
            })
        };
        this.loadSVGResource = function(a, b, d) {
            if (!sketch.util.exists("sketch.vector.SVG")) throw "Requires sketch.vector.SVG library.";
            var f = a.action;
            b = f.bbox.width;
            var c = f.bbox.height,
                h = d.viewBox || [0, 0, b, c];
            a.scaleBBox(h[2] - h[0], h[3] - h[1]);
            if ("objectBoundingBox" === f.bbox.units) {
                var m = f.bbox.scale,
                    l = f.bbox.height;
                f.bbox.x += (1 - f.bbox.width / b) * b / 2 * m.x;
                f.bbox.y += (1 - l / c) * c / 2 * m.y
            }
            f.svg = d;
            f.dirty = !0;
            f.bbox.viewBox = h;
            f.render = function(a, b, c) {
                a = {
                    ctx: a
                };
                "symbol" === f.type && (a.defaultFill = this.fill && this.fill.color ? this.fill.color : "#000000");
                !1 !== c && (a.matrix = b.matrix);
                a.calcStroke = f.useStretchToEdge;
                d.render ? d.render(a) : console.log(d)
            };
            if (a.onComplete) a.onComplete(f)
        };
        this.loadImageResource = function(a, b, e) {
            b = a.action;
            var f = "default" === e.className ? [0, 0, b.bbox.width, b.bbox.height] : [0, 0, e.width, e.height];
            a.scaleBBox(f[2] - f[0], f[3] - f[1]);
            b.dirty = !0;
            b.canvas = e;
            b.bbox.viewBox = f;
            b.render = function(a, b) {
                this.canvas = e;
                !this.dirty && this.canvasCtx || d.updateActionSize(this);
                if (this.canvasCtx) if (a.save(), this.canvasCtx.canvas) a.drawImage(this.canvasCtx.canvas, 0, 0);
                else {
                    d.glfx.source = this.canvas;
                    var f = d.glfx.getComposite();
                    f && a.drawImage(f, 0, 0)
                } else {
                    var f = this.bbox.width * this.bbox.scale.x,
                        g = this.bbox.height * this.bbox.scale.y;
                    a.save();
                    a.drawImage(this.canvas, 0, 0, f, g)
                }
                a.restore()
            };
            d.updateActionSize(b, a.onComplete)
        };
        this.loadResource = function(g) {
            var b = g.action,
                e = g.onload,
                f = g.onprogress;
            if (!b.src) return e(b);
            var c = b.src,
                h = b.bbox,
                m = h.owidth || h.width,
                l = h.oheight || h.height;
            g = a.scene.fromConfigure(a.configure.tools[b.type]);
            for (var p in g) "undefined" === typeof b[p] && (b[p] = g[p]);
            var r = {
                src: c,
                action: b,
                onError: function() {
                    var d = "â€œ" + c.split("/").pop() + "â€ unavailable.";
                    e && e(b, d);
                    if ("undefined" !== typeof image) {
                        var d = a.cache,
                            f = d.canvas;
                        f.width = b.bbox.width;
                        f.height = b.bbox.height;
                        d.fillStyle = "#000";
                        d.fillRect(0, 0, f.width, f.height);
                        image.src = f.toDataURL()
                    }
                },
                onComplete: e,
                scaleBBox: function(a, b) {
                    m / a > l / b && (l = m / a * b);
                    m / a < l / b && (m = l / b * a);
                    h.width = m;
                    h.height = l;
                    h.owidth || (h.owidth = m);
                    h.oheight || (h.oheight = l)
                }
            };
            a.assets.add({
                src: r.src,
                type: b.type,
                onprogress: function(b) {
                    f && f(b.loaded / b.total);
                    a.feature.debug && console.log(b.loaded / b.total, f)
                },
                onload: function(a, c) {
                    c.setAttribute || "image" === b.type ? d.loadImageResource(r,
                        a, c) : d.loadSVGResource(r, a, c)
                }
            })
        };
        this.changeColor = function(a) {
            d.style.fillStyle = a
        };
        this.glfx = null;
        this.updateActionSize = function(a, b) {
            if ("image" !== a.type) b && b(a);
            else if (a.filters) {
                var e = a.canvas;
                if (e) {
                    d.glfx || (d.glfx = glfx.applyShader(a.canvas, e.width, e.height));
                    var e = a.bbox.width * a.bbox.scale.x >> 0,
                        f = a.bbox.height * a.bbox.scale.y >> 0;
                    d.glfx.source = a.canvas;
                    d.glfx.viewport(0, 0, e, f);
                    d.glfx.setFilter(a.filters);
                    d.glfx.render(!0, function() {
                        b && b(a)
                    });
                    a.canvasCtx = d.glfx
                }
            } else b && b(a)
        };
        this.updateTimeout = function(g, b) {
            var e = a.scene.data[a.selection.idx];
            if (e) {
                d.sizeAtRender = Math.sqrt(e.bbox.width * e.bbox.height);
                e.dirty = !0;
                e.bbox.scaleCache = {
                    x: 1,
                    y: 1
                };
                a.scene.constrain(e);
                a.scene.updateTransform(e);
                if (g) a.render.action(a.ctx, e);
                else {
                    var f = a.active;
                    f.clearRect(0, 0, f.canvas.width, f.canvas.height);
                    "source-over" !== d.style.composite && f.drawImage(a.ctx.canvas, 0, 0);
                    a.render.action(a.active, e)
                }
                a.area.renderControls(a.selection.idx)
            }
        };
        this.record = function(g, b, e) {
            eventjs.prevent(g);
            if ((!g || a.feature.placement.drag) && "eyeDropper" !== a.colorPicker.state) {
                var f = d.style;
                if ("function" !== typeof f.render) b.pause && b.pause(), f.src || (f.src = a.lib[f.type].paths[0].filepath), d.loadResource({
                    action: f,
                    onload: function(a) {
                        if (!a.src) return console.log("missing src", a);
                        b.resume && b.resume();
                        d.record(g, b, e)
                    }
                });
                else {
                    var c = !! b.action,
                        k = a.canvas2d,
                        m = k.zoom,
                        l = (m - 1) / m,
                        p = m * k.pixelRatio,
                        r = a.project.scrollLeft * l,
                        q = a.project.scrollTop * l,
                        l = b.start.x / m + r,
                        u = b.start.y / m + q;
                    b.y = b.y / m + q;
                    b.x = b.x / m + r;
                    q = f.bbox;
                    Math.min(l, b.x);
                    Math.min(u, b.y);
                    m = 2 * (Math.abs(l - b.x) || 1);
                    r = 2 * (Math.abs(u - b.y) || 1);
                    if (b.action && b.action.bbox) {
                        var v = b.action.bbox;
                        isFinite(v.width) && (m = v.width);
                        isFinite(v.height) && (r = v.height)
                    } else m / q.width > r / q.height ? r = m / q.width * q.height : m = r / q.height * q.width;
                    if ("down" === b.state) v = a.scene.fromConfigure(a.configure.tools[d.type]), b.action && sketch.util.mergeObject(b.action, v), q.x = l - 1 * k.x / p, q.y = u - 1 * k.y / p, q.width = m, q.height = r, q.units = "objectBoundingBox", q.scale = {
                        x: 1,
                        y: 1
                    }, v.bbox = sketch.util.clone(q), v.render = f.render, v.dirty = !0, (l = a.lib[d.type].byPath[f.src]) && a.scene.copyRules(l, v), q = a.scene.addObject(v, f, b.action ? !1 : !0), !q && b.action && e(), d.sizeAtRender = Math.sqrt(m * r);
                    else if (q = a.scene.data[a.selection.idx]) {
                        q.dirtyTransform = !0;
                        q.dirtyControl = !0;
                        q.bbox.x = l - 1 * k.x / p;
                        q.bbox.y = u - 1 * k.y / p;
                        q.bbox.width = m;
                        q.bbox.height = r;
                        k = a.toolkit.getDimensionConstraint(q, null, !0);
                        q.bbox.width = q.bbox.owidth = m = k.width;
                        q.bbox.height = q.bbox.oheight = r = k.height;
                        p = Math.sqrt(m * r) / d.sizeAtRender;
                        q.bbox.scaleCache = {
                            x: p,
                            y: p
                        };
                        if (b.action && b.action.bbox) sketch.util.mergeObject(b.action.bbox,
                            q.bbox), q.bbox.width = m, q.bbox.height = r;
                        else if ("undefined" === typeof b.rotate || !0 === b.rotate) l = -Math.atan2(b.x - l, b.y - u) * a.util.RAD_DEG, q.bbox.rotate = (l + 360) % 360;
                        l = q.bbox.scale.y * r / 2;
                        q.bbox.x -= q.bbox.scale.x * m / 2;
                        q.bbox.y -= l;
                        if ("up" === b.state && (!1 === c && (a.area.inGenesis = !0), q.svg = f.svg, q.bbox.width * q.bbox.height < h.minWidth * h.minHeight)) if (a.feature.placement.click) 5 >= m && 5 >= r ? (l = h.defaultWidth, u = h.defaultHeight) : (l = h.minWidth, u = h.minHeight), l / m > u / r && (u = l / m * r), l / m < u / r && (l = u / r * m), q.bbox.width = l, q.bbox.height = u, q.bbox.owidth = l, q.bbox.oheight = u, q.bbox.x -= (l - m) / 2, q.bbox.y -= (u - r) / 2;
                        else {
                            f = a.selection.id;
                            a.scene.deselectAll();
                            a.scene.removeById(f);
                            a.render("root.toolkit.media.record");
                            alertify.log("dimensions are out of range");
                            return
                        }
                        clearTimeout(a.area.timeout);
                        var s = "up" === b.state,
                            m = k.constrained && p || 0.5 > p || 3 < p || s;
                        if (c) {
                            if (s) return e()
                        } else if (m && (a.area.timeout = setTimeout(function() {
                            d.updateTimeout(s, c);
                            b.action && e()
                        }, s ? 250 : 0)), s || !m) m = a.active, m.canvas.width = m.canvas.width, "source-over" !== f.composite && m.drawImage(a.ctx.canvas, 0, 0), a.scene.constrain(q), a.scene.updateTransform(q), !1 === c && (m = s ? a.ctx : a.active, a.render.action(m, q), a.area.renderControls(a.selection.idx)), a.area.timeout = setTimeout(d.updateTimeout, 250)
                    }
                }
            }
        };
        this.onEnterKey = function() {
            a.exec("deselect-all")
        };
        this.style = {
            bbox: {
                x: 0,
                y: 0,
                width: 100,
                height: 100,
                rotate: 0,
                scale: {
                    x: 1,
                    y: 1
                }
            }
        };
        return a.toolkit.init(this)
    })
})(sketch);
var OES_texture_float_linear = function() {
    function a(a) {
        if (!a.getExtension("OES_texture_float")) return !1;
        var b = a.createFramebuffer(),
            c = a.createTexture();
        a.bindTexture(a.TEXTURE_2D, c);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, a.NEAREST);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.NEAREST);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE);
        a.texImage2D(a.TEXTURE_2D, 0, a.RGBA, 1, 1, 0, a.RGBA, a.UNSIGNED_BYTE, null);
        a.bindFramebuffer(a.FRAMEBUFFER,
            b);
        a.framebufferTexture2D(a.FRAMEBUFFER, a.COLOR_ATTACHMENT0, a.TEXTURE_2D, c, 0);
        b = a.createTexture();
        a.bindTexture(a.TEXTURE_2D, b);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, a.LINEAR);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.LINEAR);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE);
        a.texImage2D(a.TEXTURE_2D, 0, a.RGBA, 2, 2, 0, a.RGBA, a.FLOAT, new Float32Array([2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]));
        var c = a.createProgram(),
            d = a.createShader(a.VERTEX_SHADER),
            e = a.createShader(a.FRAGMENT_SHADER);
        a.shaderSource(d, "      attribute vec2 vertex;      void main() {        gl_Position = vec4(vertex, 0.0, 1.0);      }    ");
        a.shaderSource(e, "      uniform sampler2D texture;      void main() {        gl_FragColor = texture2D(texture, vec2(0.5));      }    ");
        a.compileShader(d);
        a.compileShader(e);
        a.attachShader(c, d);
        a.attachShader(c, e);
        a.linkProgram(c);
        d = a.createBuffer();
        a.bindBuffer(a.ARRAY_BUFFER, d);
        a.bufferData(a.ARRAY_BUFFER,
            new Float32Array([0, 0]), a.STREAM_DRAW);
        a.enableVertexAttribArray(0);
        a.vertexAttribPointer(0, 2, a.FLOAT, !1, 0, 0);
        d = new Uint8Array(4);
        a.useProgram(c);
        a.viewport(0, 0, 1, 1);
        a.bindTexture(a.TEXTURE_2D, b);
        a.drawArrays(a.POINTS, 0, 1);
        a.readPixels(0, 0, 1, 1, a.RGBA, a.UNSIGNED_BYTE, d);
        return 127 === d[0] || 128 === d[0]
    }
    function h() {}
    function d(a) {
        "OES_texture_float_linear" === a ? (void 0 === this.$OES_texture_float_linear$ && Object.defineProperty(this, "$OES_texture_float_linear$", {
            enumerable: !1,
            configurable: !1,
            writable: !1,
            value: new h
        }), a = this.$OES_texture_float_linear$) : a = f.call(this, a);
        return a
    }
    function g() {
        var a = c.call(this); - 1 === a.indexOf("OES_texture_float_linear") && a.push("OES_texture_float_linear");
        return a
    }
    try {
        var b = document.createElement("canvas").getContext("experimental-webgl")
    } catch (e) {}
    if (b && -1 === b.getSupportedExtensions().indexOf("OES_texture_float_linear") && a(b)) {
        var f = WebGLRenderingContext.prototype.getExtension,
            c = WebGLRenderingContext.prototype.getSupportedExtensions;
        WebGLRenderingContext.prototype.getExtension = d;
        WebGLRenderingContext.prototype.getSupportedExtensions = g
    }
};
if ("undefined" === typeof glfx) var glfx = {};
glfx = function(a) {
    var h = [];
    a.debug = !1;
    a.filters = {};
    a.filterId = 1;
    a.reset = function() {
        for (var a = 0; a < h.length; a++) {
            var d = h[a];
            d.parentNode && d.parentNode.removeChild(d);
            for (var f = d.gl, c = f.layers, g = 0; g < c.length; g++) d = c[g], d.TEXTURE && d.TEXTURE.destroy(), d.parentNode && d.parentNode.removeChild(d);
            f.layers = []
        }
        h = []
    };
    a.applyShader = function(a, e, f) {
        e = e || a.offsetWidth;
        f = f || a.offsetHeight;
        e = new d(a, e, f);
        h.push({
            source: a,
            gl: e
        });
        return e
    };
    var d = function(b, d, f) {
        var c = this;
        this.source = b;
        this.layers = [];
        new sketch.perf;
        this.render = function(b, g, h) {
            h = c.source;
            var p = c.filters;
            if (p) for (var r = !1, q = Math.max(p.length, c.layers.length), u = 0; u < q; u++) {
                var v = u === p.length - 1,
                    s = p[u];
                if (s) {
                    if (c.layers[u]) {
                        var x = c.layers[u],
                            w = x.TEXTURE;
                        w.clean ? delete w.clean : w.loadContentsOf(h, d, f)
                    } else x = a.canvas(), w = x.texture(h), x.glfx = c, x.className = "texture" + u, x.TEXTURE = w, h.parentNode && h.parentNode.appendChild(x), c.layers[u] = x;
                    x.style.display = b || c.display ? b || c.display : v ? "block" : "none";
                    v = x.draw(w, d, f);
                    for (w = 0; w < s.length; w++) if (x = s[w], !1 !== x.enabled) switch (x.cmd) {
                        case "shader":
                            var A = x.data;
                            if (!v[x.id]) {
                                console.log("missing filter", x.id);
                                break
                            }
                            switch (x.id) {
                                case "colormap":
                                    if (glfx.filters.colormap.loadResource(A[1], function() {
                                        c.render(b, g)
                                    })) return;
                                    break;
                                case "displacement":
                                    if (glfx.filters.displacement.loadResource(A[4], function() {
                                        c.render(b, g)
                                    })) return;
                                    break;
                                case "blend":
                                    A[3] = c.layers[0], A[4] = c.layers[1]
                            }
                            r = r || !v[x.id].apply(v, x.data)
                    }
                    r || (u === p.length - 1 && v.mirror.apply(v, [1, 0]), v.update())
                } else {
                    var x = c.layers[u];
                    x.style.display = "none"
                }
            }
            g && g()
        };
        this.viewport = function(a, b, g, h) {
            g > c.source.width && h > c.source.height || sketch.actions ? a = c.source : (a = document.createElement("canvas"), b = a.getContext("2d"), a.width = g, a.height = h, b.drawImage(c.source, 0, 0, g, h));
            d = g;
            f = h;
            g = c.layers;
            h = g.length;
            for (b = 0; b < h; b++) {
                var r = g[b];
                r.width = d;
                r.height = f;
                r.ctx.viewport(0, 0, d, f);
                for (b = 0; b < c.layers.length; b++) r = c.layers[b], r.TEXTURE && (r.TEXTURE.destroy(), r.TEXTURE = r.texture(a), r.TEXTURE.clean = !0)
            }
        };
        this.setFilter = function(a) {
            c.filters = a
        };
        this.setDefaults = function() {
            this.filters = {};
            for (var b in a.filters) this.filters[b] = {
                index: 0,
                enabled: !1,
                values: a.filters[b].defaults
            }
        };
        this.animate = function(b) {
            a.animate(b)
        };
        this.play = function() {
            c.animating = !0
        };
        this.pause = function() {
            c.animating = !1
        };
        this.getComposite = function(a) {
            if (c.filters) {
                var b = c.layers[c.filters.length - 1];
                a = a || {};
                return a.mime ? b.toDataURL(a.mime, a.quality) : b
            }
        };
        this.setDefaults();
        return this
    };
    a.render = function(b) {
        if (!a.animationId || b) if (a.animationId || !sketch.rtc) a.requestAnimation(!0), a.cancelAnimation();
        else {
            var d = function() {
                f.removeEventListener("playing",
                    d);
                setTimeout(function() {
                    a.requestAnimation(!0);
                    a.cancelAnimation();
                    f.pause()
                }, 250)
            }, f = sketch.rtc.getFocusVideo();
            f && (f.addEventListener("playing", d), f.play())
        }
    };
    a.textures = {};
    a.loadResource = function(b, d, f, c, g, h, l) {
        c = c || b[d];
        if ("string" !== typeof c || a.textures[c]) return !1;
        var p;
        l = l || c.replace("./media/", "");
        sketch.loader && 0 === !c.indexOf("data") && (p = sketch.loader.message(l));
        var r = dom.loadImage({
            src: c,
            onload: function() {
                var q = document.createElement("canvas"),
                    u = q.getContext("2d");
                if (g && h) q.width = g, q.height = h, u.drawImage(r, 0, 0);
                else {
                    var v = u.createPattern(r, "repeat");
                    q.width = r.width;
                    q.height = r.height;
                    u.scale(1, 1);
                    u.fillStyle = v;
                    u.fillRect(0, 0, 1 * q.width, 1 * q.height)
                }
                setTimeout(function() {
                    q.ctx = u;
                    a.textures[c] = b[d] = q;
                    f && f(q);
                    p && sketch.loader.update(p, l, 100)
                }, 50)
            },
            onprogress: p && function(a) {
                sketch.loader.update(p, l, a && a.lengthComputable ? 100 * (a.loaded / a.totalSize) >> 0 : "")
            }
        });
        a.textures[c] = r;
        return !0
    };
    a.animate = function(b) {
        null === b ? a.animationId ? a.cancelAnimation() : a.requestAnimation(b) : b ? a.requestAnimation(b) : a.cancelAnimation()
    };
    a.requestAnimation = function(b) {
        !0 === b && a.animationId && a.cancelAnimation();
        sketch.feature.stats && sketch.stats.begin();
        b = h.length;
        for (var d = 0; d < b; d++) {
            var f = h[d].gl;
            f && "none" !== f.display && f.render()
        }
        sketch.feature.stats && sketch.stats.end();
        a.animationId = window.requestAnimationFrame(a.requestAnimation)
    };
    a.cancelAnimation = function() {
        a.animationId && window.cancelAnimationFrame(a.animationId);
        delete a.animationId
    };
    a.param = function(a, d, f) {
        return {
            param: a,
            format: d,
            value: f
        }
    };
    var g = function(a) {
        return a[1] ? a[1].split(",").map(function(a) {
            return "width" === a ? window.innerWidth : "width/2" === a ? window.innerWidth / 2 : "height" === a ? window.innerHeight : "height/2" === a ? window.innerHeight / 2 : parseFloat(a)
        }) : ""
    };
    a.addFilter = function(b, d) {
        var f = b.type,
            c = "gl_" + f,
            h = sketch.configure.tools[c] = {};
        h.toolkit = "media";
        h.type = c;
        var c = sketch.ui.vars,
            m = b.defaults = [],
            l = b.paramIndex = {}, p = {
                temperature: ["#568fcf", "#f7e146"],
                tint: ["#00ae47", "#c73baf"],
                exposure: ["#777", "#eee"],
                brightness: ["#777", "#eee"],
                contrast: ["#777", "#eee"]
            };
        b.param || console.log(b);
        for (var r = 0; r < b.param.length; r++) {
            var q = b.param[r];
            q || console.log(f);
            var u = q.param,
                v = q.value;
            l[u] = r;
            m.push(v);
            q = q.format.replace(")", "").split("(");
            switch (q[0]) {
                case "px":
                case "int":
                    q = g(q);
                    h[u] = new c.clamp(v, q[0] || 0, q[1] || 100);
                    break;
                case "float":
                    q = g(q);
                    h[u] = new c.clamp(v, q[0] || 0, q[1] || 1);
                    break;
                case "degree":
                    q = g(q);
                    h[u] = new c.clamp(v, q[0] || 0, q[1] || 360);
                    break;
                case "radian":
                    q = g(q);
                    h[u] = new c.clamp(v, q[0] || 0, q[1] || 360 * sketch.util.DEG_RAD);
                    break;
                case "color":
                    h[u] = new c.color(v);
                    break;
                case "select":
                    h[u] = new c.select(q[1].split(","));
                    break;
                default:
                    console.log(q[0])
            }
            p[u] && h[u] && (h[u].gradient = p[u])
        }
        a.filters[f] = b
    };
    a.dragCenterPoint = function(b, d) {
        var f = d.env,
            c = f.type;
        if (b && b.activeFilter) {
            var g = a.filters[c] && a.filters[c].paramIndex,
                c = sketch.configure.tools["gl_" + c];
            c.centerX.value = b.activeFilter.data[g.centerX] = d.x / f.width;
            c.centerY.value = b.activeFilter.data[g.centerY] = d.y / f.height;
            a.render("glfx.dragCenterPoint")
        }
    };
    a.getStack = function(b) {
        for (var d = [], f = a.filterStack[a.filterId], c = 0; c < f.length; c++) {
            for (var g = [], h = f[c], l = 0; l < h.length; l++) {
                var p = h[l];
                !1 !== p.enabled && ("blend" === p.id ? (g.shift(), g.push({
                    cmd: "shader",
                    id: "blend",
                    data: [p.data[0], p.data[1], p.data[2], "texture0", "texture1"]
                })) : g.push(p))
            }
            d.push(g)
        }
        return b ? encodeURIComponent(JSON.stringify(d)) : JSON.stringify(d)
    };
    a.getContextByIndex = function(a) {
        return h[a]
    };
    a.getContext = function(a, d) {
        d = d || {
            preserveDrawingBuffer: !0,
            premultipliedAlpha: !1
        };
        return a.getContext("webgl", d) || a.getContext("experimental-webgl", d)
    };
    return a
}(glfx);
if ("undefined" === typeof gl) var gl;
"undefined" === typeof glfx && (glfx = {});
(function() {
    function a(a) {
        return {
            _: a,
            loadContentsOf: function(a, b, c) {
                gl = this._.gl;
                this._.loadContentsOf(a, b, c)
            },
            destroy: function() {
                gl = this._.gl;
                this._.destroy()
            }
        }
    }
    function h(b) {
        var c = a(Texture.fromElement(b));
        return b.texture = c
    }
    function d(a, b) {
        if (gl.getExtension("OES_texture_float") && gl.getExtension("OES_texture_float_linear") && !m) {
            var c = new Texture(100, 100, gl.RGBA, gl.FLOAT);
            try {
                c.drawTo(function() {
                    m = gl.FLOAT
                })
            } catch (d) {}
            c.destroy()
        }
        this.width = a;
        this.height = b;
        this.randomSeed = new sketch.util.Random(1);
        this._.texture && this._.texture.destroy();
        this._.spareTexture && this._.spareTexture.destroy();
        this._.extraTexture && this._.extraTexture.destroy();
        this._.extraTexture2 && this._.extraTexture.destroy();
        this._.texture = new Texture(a, b, gl.RGBA, m);
        this._.spareTexture = new Texture(a, b, gl.RGBA, m);
        this._.extraTexture = new Texture(0, 0, gl.RGBA, m);
        this._.extraTexture2 = new Texture(0, 0, gl.RGBA, m);
        this._.flippedShader = this._.flippedShader || new Shader(null, "\t\tuniform sampler2D texture;\t\tvarying vec2 texCoord;\t\tvoid main() {\t\t\tgl_FragColor = texture2D(texture, vec2(texCoord.x, 1.0 - texCoord.y));\t\t}\t");
        this._.isInitialized = !0;
        this._.dirty = !1
    }
    function g(a, b, c) {
        !this._.dirty && this._.isInitialized && a._.width == this.width && a._.height == this.height || d.call(this, b ? b : a._.width, c ? c : a._.height);
        this.now = (new Date).getTime();
        this.startTime = this.startTime || this.now - 1;
        this.random = this.randomSeed.toDouble();
        a._.use();
        this._.texture.drawTo(function() {
            Shader.getDefaultShader().drawRect()
        });
        return this
    }
    function b() {
        this._.texture.use();
        this._.flippedShader.drawRect();
        return this
    }
    function e(a) {
        a.parentNode.insertBefore(this,
            a);
        a.parentNode.removeChild(a);
        return this
    }
    function f() {
        var b = new Texture(this._.texture.width, this._.texture.height, gl.RGBA, gl.UNSIGNED_BYTE);
        this._.texture.use();
        b.drawTo(function() {
            Shader.getDefaultShader().drawRect()
        });
        return a(b)
    }
    function c() {
        var a = this._.texture.width,
            b = this._.texture.height,
            c = new Uint8Array(4 * a * b);
        this._.texture.drawTo(function() {
            gl.readPixels(0, 0, a, b, gl.RGBA, gl.UNSIGNED_BYTE, c)
        });
        return c
    }
    function k(a) {
        return function() {
            gl = this._.gl;
            return a.apply(this, arguments)
        }
    }
    glfx.canvas = function() {
        var a = document.createElement("canvas");
        try {
            gl = glfx.getContext(a), "function" === typeof OES_texture_float_linear && (OES_texture_float_linear(), OES_texture_float_linear = !1)
        } catch (d) {
            throw gl = null, "This browser does not support WebGL";
        }
        a._ = {
            gl: gl,
            isInitialized: !1,
            dirty: !1,
            texture: null,
            spareTexture: null,
            flippedShader: null
        };
        a.ctx = gl;
        a.texture = k(h);
        a.draw = k(g);
        a.update = k(b);
        a.replace = k(e);
        a.contents = k(f);
        a.getPixelArray = k(c);
        for (var m in glfx.filters) a[m] = k(glfx.filters[m].shader);
        return a
    };
    glfx.simpleShader = function(a, b, c, d) {
        (c || this._.texture).use();
        this._.spareTexture.drawTo(function() {
            a.invalid || a.uniforms(b).drawRect()
        });
        this._.spareTexture.swapWith(d || this._.texture)
    };
    var m
})();
"undefined" === typeof glfx && (glfx = {});
var glfx = function(a) {
        a.loadFilters = function(h) {
            glfx.filters.colormap && glfx.filters.colormap.construct();
            var d = a.filterStack = [
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "natural displace",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.23008849557522115, 0.3097345132743363]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.5707964601769911, 1]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [0.9734513274336283, 0.2654867256637168, 0.2654867256637168, 0, 0, 0.017699115044247815]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "old tv",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "film",
                            enabled: !0,
                            data: [0.5, 0.06637168141592921, 0.6902654867256637, 1024]
                        }, {
                            cmd: "shader",
                            id: "bulgePinch",
                            enabled: !0,
                            data: [0.5, 0.5, 0.8, 0.5663716814159292]
                        }, {
                            cmd: "shader",
                            id: "oldFilm",
                            enabled: !0,
                            data: [0.7, 0, 0.3, 0.22123893805309736]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [1, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace"
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [-0.026548672566371667, 0.10619469026548678]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.9424778761061947, 11]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.6415929203539823, 1]
                        }, {
                            cmd: "shader",
                            id: "triangleBlur",
                            enabled: !0,
                            data: [6.6371681415929205]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [0.6858407079646017, 0.4646017699115045, 1.3274336283185841, 1.0176991150442478]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-3, 0.05752212389380531, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "dot shift"
                        }, {
                            cmd: "shader",
                            id: "bulgePinch",
                            enabled: !0,
                            data: [0.5, 0.5132743362831859,
                                0.5, 0.6814159292035398]
                        }, {
                            cmd: "shader",
                            id: "dotScreen",
                            enabled: !0,
                            data: [0.5, 0.5, 0.001, 1.504424778761062]
                        }, {
                            cmd: "shader",
                            id: "RGBShift",
                            enabled: !0,
                            data: [2.057326162527829, 0.030530973451327433]
                        }, {
                            cmd: "shader",
                            id: "colorMatrixOld",
                            enabled: !0,
                            data: [116.28318584070797]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "wood",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            data: [-2.2566371681415927, 0.12389380530973451, 1],
                            enabled: !0
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9424778761061947,
                                0.1327433628318584, 0, 0.9690265486725664, 41, 0.1327433628318584]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.8805309734513275, 3]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.5929203539823009, 0.5486725663716814, 22.90265486725664, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "oldFilm",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7, 0, 0, 0.3]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [13, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "zoomBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5, 0.5, 0.08108108108108109]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.95, 0.05405405405405406, 2.47787610619469, 1.4867256637168142, 0, - 0.6106194690265487]
                        }, {
                            id: "ink",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.2657657657657657]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.972972972972973, 1.8716814159292035, 7.4774774774774775, 0.5270270270270271, 0, 0.18018018018018012]
                        }, {
                            id: "triangleBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [50, 50]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [13, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "zoomBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5, 0.5, 0.0752212389380531]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 7]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.95, 0.0663716814159292, 2.47787610619469, 1.4867256637168142, 0, - 0.6106194690265487]
                        }, {
                            id: "ink",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.2743362831858407]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [1.920353982300885, 1, 1, 0.025, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 19]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 1.8716814159292035, 0.08849557522123894, 0.584070796460177, 0, - 0.026548672566371723]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [13, 1, 1, "texture0", "texture1"]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-1, 0]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "sepia glow sketch",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [3, 0.0752212389380531, 0.11946902654867257]
                        }, {
                            cmd: "shader",
                            id: "oldFilm",
                            enabled: !0,
                            data: [0.6238938053097345, 0.001, 0.6548672566371682, 0.001]
                        }, {
                            id: "unsharpMask",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.8849557522123894, 9.823008849557521]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [1, 1]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.2566371681415929, 0.5]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "bronze hatch",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "film",
                            enabled: !0,
                            data: [10, 0, 0.6371681415929203, 0]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [3, 0.11946902654867257, 0.1592920353982301]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.7477876106194691, 0.9557522123893806]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.19469026548672574, 0.415929203539823]
                        }, {
                            cmd: "shader",
                            id: "colorMatrixOld",
                            enabled: !0,
                            data: [92]
                        }, {
                            id: "unsharpMask",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.0619469026548671,
                                10]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "zoomBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5, 0.5, 0.10619469026548672]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.95, 0.5973451327433629, 0.6194690265486725, 1.752212389380531, 0, - 0.6371681415929203]
                        }, {
                            id: "ink",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.2743362831858407]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [2, 1, 1, 0.025, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.6548672566371682, 3]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.584070796460177, 0.9823008849557522, 8.141592920353983, 2.0442477876106193, 0, - 0.7787610619469026]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [4, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9292035398230087, - 0.19469026548672563]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "zoomBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5, 0.5, 0.10619469026548672]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7168141592920354, 0.0663716814159292, 0.17699115044247787, 3, 0, - 0.6460176991150443]
                        }, {
                            id: "ink",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.2743362831858407]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [2, 1, 1, 0.025, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 11]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 3, 1.1504424778761062, 1, 0, - 0.026548672566371723]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [16, 0.7964601769911505, 0.7300884955752213, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9292035398230087, - 0.19469026548672563]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "zoomBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5, 0.5, 0.10619469026548672]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, - 0.6106194690265487]
                        }, {
                            id: "ink",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.2743362831858407]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [2, 1, 1, 0.025, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 11]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 3, 1.1504424778761062, 1, 0, - 0.026548672566371723]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [16, 0.7964601769911505, 0.7300884955752213, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 7]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [10]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.0221238938053097, 0.41150442477876104, 0.7079646017699115, 2.1238938053097343, 0, - 0.9469026548672567]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 8]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 19]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9955752212389382, 3, 0.5309734513274336, 0, 0, - 0.21238938053097345]
                        }, {
                            id: "zoomBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5, 0.5, 0.26548672566371684]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [16, 0.7964601769911505, 0.7300884955752213, "texture0", "texture1"]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.053097345132743445, 0.18584070796460184]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.584070796460177, 0.831858407079646]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9955752212389382, 2.5353982300884956, 9.29203539823009,
                                2.7876106194690267, 0, 0.07079646017699126]
                        }, {
                            id: "zoomBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5, 0.5, 0.048672566371681415]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [26]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [2, 1, 1, 0.025, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 15]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [17, 0.7964601769911505, 0.7300884955752213, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5309734513274337, 5]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [20]
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.35398230088495575, 0.7920353982300885, 84.23008849557522, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [9, 1, 0.9778761061946902, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.6548672566371682,
                                18]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7035398230088495, 0.10619469026548672, 0.8849557522123894, 1.1017699115044248, 0, - 0.23893805309734517]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.21238938053097345, 1, 34.29203539823009, 0.0051991150442477875, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7256637168141593, 1]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [13, 1, 0.9778761061946902, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9292035398230087, 0.7345132743362832]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "zoomBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5, 0.5, 0.10619469026548672]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, - 0.6106194690265487]
                        }, {
                            id: "ink",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.2743362831858407]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [2, 1, 1, 0.025, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 19]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.008849557522124, 3, 0.5309734513274336, 1, 0, - 0.008849557522123908]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [10, 0.7964601769911505, 0.7300884955752213, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9292035398230087, 0.7345132743362832]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "zoomBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5, 0.5, 0.10619469026548672]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, - 0.6106194690265487]
                        }, {
                            id: "ink",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.2743362831858407]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [2, 1, 1, 0.025, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 11]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1,
                                3, 1.1504424778761062, 1, 0, - 0.026548672566371723]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [16, 0.7964601769911505, 0.7300884955752213, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9292035398230087, 0.7345132743362832]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "zoomBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5, 0.5, 0.10619469026548672]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.95, 0.0663716814159292, 0.17699115044247787,
                                1.4867256637168142, 0, - 0.6106194690265487]
                        }, {
                            id: "ink",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.2743362831858407]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [2, 1, 1, 0.025, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 3]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 3, 1.1504424778761062, 1, 0, - 0.026548672566371723]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [16, 0.7964601769911505, 0.7300884955752213, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "zoomBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5, 0.5, 0.0752212389380531]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 7]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, - 0.6106194690265487]
                        }, {
                            id: "ink",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.2743362831858407]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [1.920353982300885, 1, 1, 0.025, 5.640884955752212, 0,
                                0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 19]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 3, 1.1504424778761062, 1, 0, - 0.026548672566371723]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [4, 0.7964601769911505, 0.7300884955752213, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, - 0.6106194690265487]
                        }, {
                            id: "ink",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.2743362831858407]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [1.920353982300885, 1, 2.752212389380531, 0.025, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "ripple",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.84070796460177, 0.4424778761061947, 1, 0.5]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, - 0.12389380530973448]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [4, 0.7566371681415929, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 16]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, - 0.6106194690265487]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            id: "ripple",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.84070796460177, 0.4424778761061947, 1, 0.5]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 0.008849557522123908]
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [1.3097345132743363, 1,
                                7.570796460176992, 0.025, 5.640884955752212, 0, 0],
                            enabled: !0
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [4, 0.7566371681415929, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 18]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, - 0.6106194690265487]
                        }, {
                            id: "unsharpMask",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.4424778761061947,
                                1.991150442477876]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            id: "ripple",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.84070796460177, 0.4424778761061947, 1, 0.5]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 0.008849557522123908]
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [1.3097345132743363, 1, 7.570796460176992, 0.025, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 3]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [16, 0.7566371681415929, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.6194690265486725, 15]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.0353982300884956, 0.03982300884955752, 0.2654867256637168, 1.4867256637168142, 0, - 0.6106194690265487]
                        }, {
                            id: "unsharpMask",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.4424778761061947, 1.991150442477876]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [1.3097345132743363, 1, 7.570796460176992, 0.025, 5.640884955752212, 0,
                                0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 3]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [13, 0.7787610619469026, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.6194690265486725, 10]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.0353982300884956, 0, 10.442477876106196, 1.4867256637168142, 0, - 0.6106194690265487]
                        }, {
                            id: "unsharpMask",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.7699115044247788, 7.300884955752212]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.6460176991150443, 1, 15.017699115044248, 0.0051991150442477875, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [4, 0.7699115044247787, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.6194690265486725, 10]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.0353982300884956, 0, 10.442477876106196,
                                1.4867256637168142, 0, - 0.6106194690265487]
                        }, {
                            id: "zoomBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.16371681415929204, 0.19469026548672566, 0.048672566371681415]
                        }, {
                            id: "unsharpMask",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.7699115044247788, 7.300884955752212]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.6460176991150443, 1, 15.017699115044248, 0.0051991150442477875, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [4, 0.7699115044247787,
                                1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7831858407079646, 9]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.0353982300884956, 0, 10.442477876106196, 1.4867256637168142, 0, - 0.6106194690265487]
                        }, {
                            id: "zoomBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5, 0.19469026548672566, 0.03982300884955752]
                        }, {
                            id: "unsharpMask",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9734513274336283, 9.15929203539823]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.6460176991150443, 1, 15.017699115044248, 0.0051991150442477875, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [2, 0.7699115044247787, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7831858407079646, 9]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.0353982300884956, 0, 10.442477876106196, 0.9424778761061947, 0, 0.053097345132743445]
                        }, {
                            id: "zoomBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5, 0.27876106194690264, 0.004424778761061947]
                        }, {
                            id: "unsharpMask",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9734513274336283, 9.15929203539823]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.6460176991150443, 1, 15.017699115044248, 0.02190265486725664, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [2, 0.7699115044247787, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 3]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.0353982300884956, 0, 10.442477876106196, 1.4867256637168142, 0, - 0.6106194690265487]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.12389380530973451, 0.45132743362831856, 15.017699115044248, 0.0051991150442477875, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [2, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 3]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0.10619469026548672, 0.8849557522123894, 1.8185840707964602, 0, - 0.23893805309734517]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.12389380530973451, 0.45132743362831856, 15.017699115044248, 0.0051991150442477875, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [2, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9292035398230089, 11]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [3, 3, 13.008849557522124, 3, 0, - 0.22123893805309736]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.11504424778761062, 0.336283185840708, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "lumaKey",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0.22566371681415928]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [2, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5309734513274337, 6]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0.10619469026548672, 0.8849557522123894, 1.8185840707964602, 0, - 0.23893805309734517]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.12389380530973451, 0.45132743362831856, 15.017699115044248, 0.0051991150442477875, 5.640884955752212,
                                0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [0, 1, 0.9778761061946902, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5309734513274337, 5]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0.10619469026548672, 0.8849557522123894, 1.8185840707964602, 0, - 0.23893805309734517]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.23893805309734514,
                                0.43565309734513274, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [9, 1, 0.9778761061946902, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "newsprint",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "film",
                            enabled: !0,
                            data: [0.5, 0, 1, 5]
                        }, {
                            cmd: "shader",
                            id: "dotScreen",
                            enabled: !0,
                            data: [0.19911504424778761, 0.21238938053097345, 4.36486766914688, 2.920353982300885]
                        }, {
                            cmd: "shader",
                            id: "RGBShift",
                            enabled: !0,
                            data: [0.001, 0.001327433628318584]
                        }, {
                            cmd: "shader",
                            id: "oldFilm",
                            enabled: !0,
                            data: [0.672566371681416, 0.5176991150442478, 0.4424778761061947, 0.21238938053097345]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.6946902654867256, 0.7212389380530974]
                        }, {
                            cmd: "shader",
                            id: "tiltShift",
                            enabled: !0,
                            data: [0.001, 0.22566371681415928, 0.5796460176991151, 0.4557522123893805, 2.6548672566371683, 1063.0088495575221]
                        }, {
                            cmd: "shader",
                            id: "sepia",
                            enabled: !0,
                            data: [1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "newsprint"
                        }, {
                            cmd: "shader",
                            id: "film",
                            enabled: !0,
                            data: [2.0132743362831858, 0.001, 0.3185840707964602,
                                1309.3097345132744]
                        }, {
                            cmd: "shader",
                            id: "dotScreen",
                            enabled: !0,
                            data: [0.5, 0.5, 0.001, 5.20353982300885]
                        }, {
                            cmd: "shader",
                            id: "RGBShift",
                            enabled: !0,
                            data: [2.1963346870229525, 0.003982300884955752]
                        }, {
                            cmd: "shader",
                            id: "oldFilm",
                            enabled: !0,
                            data: [0.7, 0.3, 0.3, 0.3]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9292035398230089, 11]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0.915929203539823, 0.7964601769911505, 1.470962389380531,
                                0, 0.5381637168141593]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.09734513274336283, 0.39297566371681414, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 18]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [14, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9292035398230089, 11]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0.6238938053097345, 0.7964601769911505,
                                1.3805309734513274, 0, 0.7079646017699115]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.09734513274336283, 0.39297566371681414, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 18]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [2, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9292035398230089, 10]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0, 0, 2.190265486725664,
                                0, - 1]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.008849557522123894, 0.39297566371681414, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [18, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9292035398230089, 10]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071,
                                0, 0, 2.190265486725664, 0, - 1]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.008849557522123894, 0.39297566371681414, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [18, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.41150442477876104, 6]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0, 0, 2.190265486725664, 0, - 1]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.008849557522123894, 0.39297566371681414, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [18, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.41150442477876104, 6]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0.7433628318584071, 0.08849557522123894, 2.176991150442478, 0, 0.23008849557522115]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.008849557522123894, 0.39297566371681414, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [18, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9292035398230089,
                                11]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0.915929203539823, 0.7964601769911505, 1.470962389380531, 0, 0.5381637168141593]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.09734513274336283, 0.39297566371681414, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 18]
                        }, {
                            id: "lumaKey",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.1504424778761062, 0.23008849557522124]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [14, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9380530973451328, 11]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.2610619469026547, 0.09292035398230089, 1.0619469026548671, 0, 0, 0.5381637168141593]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0, 0.41150442477876104, 19.836283185840706, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 18]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [14, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.41150442477876104, 6]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0, 20, 3, 0, 0.23008849557522115]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.008849557522123894, 0.39297566371681414, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [18, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.6415929203539823, 18]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0, 20, 3, 0, 0.23008849557522115]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.008849557522123894, 0.39297566371681414, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [0, 1,
                                1, "texture0", "texture1"]
                        }, {
                            id: "edgeDetect",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.8761061946902657, 0.30973451327433627, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "oldFilm",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7, 0.3, 0.3, 0.3]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.41150442477876104, 6]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0, 20, 3, 0, 0.23008849557522115]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.008849557522123894, 0.39297566371681414, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [18, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.3407079646017699, 4]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0, 0.7964601769911505, 1.470962389380531, 0, 0.5381637168141593]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.09734513274336283, 0.30973451327433627, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 7]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [9, 1, 0.9778761061946902, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.3407079646017699, 4]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0.8495575221238938, 0.17699115044247787, 1.3805309734513274, 15, 0.6017699115044248]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.09734513274336283, 0.30973451327433627, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 7]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [9, 1, 0.9778761061946902, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7699115044247788, 0.8495575221238938, 0.17699115044247787, 1.3805309734513274, 15, 0.6017699115044248]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.09734513274336283, 0.30973451327433627, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 12]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [9, 1, 0.9778761061946902, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7699115044247788, 0.8495575221238938, 0.17699115044247787, 1.3805309734513274,
                                15, 0.6017699115044248]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.09734513274336283, 0.30973451327433627, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 8]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [9, 1, 0.9778761061946902, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.41150442477876104, 6]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0, 20, 3, 0, 0.23008849557522115]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.008849557522123894, 0.39297566371681414, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [18, 1, 1, "texture0", "texture1"]
                        }, {
                            id: "brightnessContrast",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.06194690265486735, 0.18584070796460184]
                        }, {
                            id: "sepia",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.4026548672566372]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.6415929203539823, 18]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0.10619469026548672, 0, 2.495575221238938, 0, 0.6283185840707965]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.008849557522123894, 0.39297566371681414, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [0,
                                1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "green displace",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [1, 11]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.6415929203539823, 1]
                        }, {
                            cmd: "shader",
                            id: "triangleBlur",
                            enabled: !0,
                            data: [7.743362831858407]
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [-0.47787610619469023, 0.4070796460176991]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [0.9424778761061947, 0.0663716814159292, 0.08849557522123894, 0.6504424778761062]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-2.601769911504425, 0.048672566371681415, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "pink"
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            data: [-3, 0.05752212389380531, 1],
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            data: [1, 10],
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [-0.16814159292035402, 0.34513274336283195]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.001, 0.004424778761061954]
                        }, {
                            cmd: "shader",
                            id: "lumaKey",
                            enabled: !0,
                            data: [0.001, 0.9336283185840708]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "blue"
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            data: [-3, 0.09734513274336283, 1],
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            data: [1, 10],
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [-0.5486725663716814, 0.5929203539823009]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "Rainbow room"
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            data: [3, 0.07079646017699115, 1],
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            data: [1, 19],
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "invert",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [0.3982300884955752, 0.2920353982300885]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "crisp",
                            enabled: !0
                        }, {
                            id: "unsharpMask",
                            cmd: "shader",
                            enabled: !0,
                            data: [3.274336283185841, 4.0265486725663715]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [20]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.18584070796460228, 0.26548672566371684, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "sepia glow sketch"
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.5, 1, 0]
                        }, {
                            cmd: "shader",
                            id: "oldFilm",
                            enabled: !0,
                            data: [0.6238938053097345,
                                0.001, 0.6548672566371682, 0.001]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [1, 1]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.2566371681415929, 0.5]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "bronze hatch"
                        }, {
                            cmd: "shader",
                            id: "film",
                            enabled: !0,
                            data: [10, 0.001, 0.6106194690265486, 5]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.8495575221238938, 1, 0.1592920353982301]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.7433628318584071, 0.9557522123893806]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.12831858407079644, 0.5]
                        }, {
                            cmd: "shader",
                            id: "colorMatrixOld",
                            enabled: !0,
                            data: [121.06194690265488]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "dark glow",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.31858407079646023, 0.32, 56.19469026548672, 0, 0, 0, 0],
                            enabled: !0
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "tron kaleidoscope",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.25663716814159293, 0.28761061946902655, 84.66814159292035,
                                0, 0, 11.283185840707963, 0],
                            enabled: !0
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "swirl",
                            enabled: !0,
                            data: [0, 0.5, 335.4424778761062, 1]
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.35, 0, 42, 0, 3, 10, 2],
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "kaleidoscope",
                            enabled: !0,
                            data: [1.55, 5]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [1, 0.5]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: ["ADD", 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 18]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7433628318584071, 0.915929203539823, 0.7964601769911505, 0, 17, 0.32743362831858414]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.336283185840708, 0.32, 100, 0, 0, 0, 0],
                            enabled: !0
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [14, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "light glow",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            data: [0.7, 1, 1],
                            enabled: !0
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.4, 0.32, 24, 0, 0, 0, 0],
                            enabled: !0
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: ["ADD", 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "cracks",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 10]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            data: [0.7, 1, 1],
                            enabled: !0
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9955752212389382, 0, 0, 1.0221238938053097, 50, - 0.8053097345132744]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.168141592920354, 0.5309734513274337, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "oldFilm",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7, 0.1, 0.3, 0.3]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [11, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "high contrast",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 1]
                        }, {
                            id: "lensBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [7.079646017699115, 0.75, 0]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            data: [-0.5575221238938051, 1, 1],
                            enabled: !0
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.1238938053097347, 0.8805309734513275, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "oldFilm",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7, 0.1, 0.3, 0.3]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [11, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "green canvas",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 9]
                        }, {
                            id: "lensBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [29.646017699115045, 0.75, 0]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            data: [-0.5575221238938051, 1, 1],
                            enabled: !0
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9955752212389382, 0, 0, 1.7256637168141593, 28, - 0.11504424778761058]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.13274336283185842, 0.8805309734513275, 100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "oldFilm",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7, 0.1, 0.3, 0.3]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [11, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "coffee stains",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 14]
                        }, {
                            id: "lensBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [29.646017699115045, 0.75, 0]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            data: [-0.5575221238938051, 1, 1],
                            enabled: !0
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9955752212389382, 1.247787610619469, 10.353982300884956, 0.7831858407079646, 22, 0.1504424778761062]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.13274336283185842, 0.8805309734513275,
                                100, 0, 0, 0, 0],
                            enabled: !0
                        }, {
                            id: "oldFilm",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7, 0.1, 0.3, 0.3]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [11, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "sunrise",
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 15]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            data: [0.7, 1, 1],
                            enabled: !0
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9955752212389382, 0.15486725663716813, 0, 2.349557522123894, 29, 0.10619469026548667]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [0.11504424778761062, 0.4823008849557522, 100, 0, 0, 0, 3.451327433628318],
                            enabled: !0
                        }, {
                            id: "oldFilm",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7, 0.1, 0.3, 0.3]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [11, 1, 1, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "orange radiant"
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.7699115044247787, 1, 1]
                        }, {
                            cmd: "shader",
                            id: "oldFilm",
                            enabled: !0,
                            data: [0.6327433628318584, 0.001, 0.4, 0.001]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [-0.37168141592920356, 0.23451327433628322]
                        }, {
                            cmd: "shader",
                            id: "colorMatrixOld",
                            enabled: !0,
                            data: [264.42477876106193]
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [0.5044247787610618, 0.7699115044247788]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "blue radiant"
                        }, {
                            cmd: "shader",
                            id: "film",
                            enabled: !0,
                            data: [6.3008849557522115, 0.001, 0.001, 1693.4557522123894]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.8849557522123894, 1, 1]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [-0.37168141592920356,
                                0.23451327433628322]
                        }, {
                            cmd: "shader",
                            id: "colorMatrixOld",
                            enabled: !0,
                            data: [265]
                        }, {
                            cmd: "shader",
                            id: "denoise",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [0.49557522123893816, 0.7699115044247788]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "burn radiant"
                        }, {
                            cmd: "shader",
                            id: "film",
                            enabled: !1,
                            data: [6.3008849557522115, 0.001, 0.001, 1693.4557522123894]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.672566371681416, 1, 1]
                        }, {
                            cmd: "shader",
                            id: "oldFilm",
                            enabled: !0,
                            data: [1, 0.001, 0.28761061946902655,
                                0.001]
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [-0.20353982300884954, 0.8230088495575221]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "burn fire",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "film",
                            enabled: !0,
                            data: [6.3008849557522115, 0, 0.5221238938053098, 1943]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.672566371681416, 1, 0.3]
                        }, {
                            cmd: "shader",
                            id: "oldFilm",
                            enabled: !0,
                            data: [1, 0.001, 0.28761061946902655, 0.001]
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [-0.20353982300884954,
                                0.8230088495575221]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "kiwi",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "film",
                            enabled: !0,
                            data: [10, 0.001, 0.6106194690265486, 5]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.7699115044247788, 0.40707964601769914, 1]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.9513274336283186, 1]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.19469026548672574, 0.584070796460177]
                        }, {
                            cmd: "shader",
                            id: "colorMatrixOld",
                            enabled: !0,
                            data: [149.73451327433628]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "yellow monster",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            data: [0.6902654867256635, 0.5486725663716814, 1],
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            data: [0.8716814159292036, 13],
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [-0.4601769911504425, 0.8407079646017699]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "oompa loompa"
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            data: [-3, 0.03982300884955752, 0.8938053097345132],
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            data: [1, 0],
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [-0.5663716814159292, 0.5929203539823009]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "green displace"
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [1, 11]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.6415929203539823, 1]
                        }, {
                            cmd: "shader",
                            id: "triangleBlur",
                            enabled: !0,
                            data: [6.6371681415929205]
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [-0.47787610619469023, 0.4070796460176991]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [0.5973451327433629, 1, 16, 1]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-3, 0.030973451327433628, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "natural displace"
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.2743362831858407, 0.5]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.5707964601769911, 8]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.6415929203539823, 1]
                        }, {
                            cmd: "shader",
                            id: "triangleBlur",
                            enabled: !0,
                            data: [6.6371681415929205]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [0.9734513274336283, 0.17699115044247787, 0.1327433628318584, 0.6637168141592921]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-3, 0.030973451327433628, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "white displace"
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.8849557522123894, 6]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [0.30973451327433627, 1.836283185840708, 0.01, 2.433628318584071]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-1.7256637168141593, 0.04424778761061947, 1]
                        }, {
                            cmd: "shader",
                            id: "invert",
                            enabled: !0,
                            data: []
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [0.7345132743362832, 0.2743362831858407]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "blue displace"
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [1, 18]
                        }, {
                            cmd: "shader",
                            id: "triangleBlur",
                            enabled: !0,
                            data: [0.001]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [0.30973451327433627, 1.0619469026548671, 2.1238938053097343, 2.433628318584071]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-1.7256637168141593, 0.04424778761061947, 1]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.15486725663716816, 0.26106194690265483]
                        }, {
                            cmd: "shader",
                            id: "invert",
                            enabled: !0,
                            data: []
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "red displace"
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.34513274336283184, 10]
                        }, {
                            cmd: "shader",
                            id: "triangleBlur",
                            enabled: !0,
                            data: [0.001]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [0.5530973451327434, 1.6150442477876106, 0.24336283185840707, 2.3451327433628317]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-1.7256637168141593,
                                0.04424778761061947, 1]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.15486725663716816, 0.26106194690265483]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "vulcan"
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.42, 1, 0.5398230088495575]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.7433628318584071, 0.9557522123893806]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.28, 0.5]
                        }, {
                            cmd: "shader",
                            id: "colorMatrixOld",
                            enabled: !0,
                            data: [106.72566371681417]
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [0.008849557522123908, 0.3982300884955752]
                        }, {
                            cmd: "shader",
                            id: "vibrance",
                            enabled: !0,
                            data: [0.017699115044247815]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "monster"
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.6371681415929205, 1, 0.7964601769911505]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.22123893805309736, 0.5]
                        }, {
                            cmd: "shader",
                            id: "colorMatrixOld",
                            enabled: !0,
                            data: [194.3362831858407]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "old film"
                        }, {
                            cmd: "shader",
                            id: "film",
                            enabled: !0,
                            data: [10, 0.001, 0.5088495575221239,
                                5]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.3, 1, 0.4778761061946903]
                        }, {
                            cmd: "shader",
                            id: "oldFilm",
                            enabled: !0,
                            data: [0.001, 0.001, 0.8053097345132744, 0.3]
                        }, {
                            cmd: "shader",
                            id: "sepia",
                            enabled: !0,
                            data: [0.8]
                        }, {
                            cmd: "shader",
                            id: "vibrance",
                            enabled: !0,
                            data: [1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "invert green"
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            data: [3, 0.2079646017699115, 1],
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            data: [1, 3],
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "denoise",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [-0.16814159292035402, 0.34513274336283195]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "invert blue"
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            data: [3, 0.07079646017699115, 1],
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            data: [0.8716814159292036, 15],
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "invert",
                            enabled: !0,
                            data: [30]
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [-0.1415929203539823, 0.7079646017699115]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "zoom distort #1"
                        }, {
                            cmd: "shader",
                            id: "film",
                            enabled: !0,
                            data: [0.5, 0.3893805309734513,
                                0.6592920353982301, 5]
                        }, {
                            cmd: "shader",
                            id: "colorHalftone",
                            enabled: !0,
                            data: [0.5, 0.5, 3.169394358488818, 3.101769911504425]
                        }, {
                            cmd: "shader",
                            id: "oldFilm",
                            enabled: !0,
                            data: [0.7, 0.3, 0.3, 0.3]
                        }, {
                            cmd: "shader",
                            id: "zoomBlur",
                            enabled: !0,
                            data: [0.5, 0.5, 0.10176991150442478]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "zoom distort #2"
                        }, {
                            cmd: "shader",
                            id: "oldFilm",
                            enabled: !0,
                            data: [0.7, 0.8451327433628318, 1, 1]
                        }, {
                            cmd: "shader",
                            id: "zoomBlur",
                            enabled: !0,
                            data: [0.5, 0.5, 0.33185840707964603]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0, 0.5]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "zoom distort #3"
                        }, {
                            cmd: "shader",
                            id: "film",
                            enabled: !0,
                            data: [10, 0.001, 0.5088495575221239, 5]
                        }, {
                            cmd: "shader",
                            id: "bulgePinch",
                            enabled: !0,
                            data: [0.6742857142857143, 0.32857142857142857, 200, 0.5]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.4424778761061947, 1, 0.2]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.7433628318584071, 0.9557522123893806]
                        }, {
                            cmd: "shader",
                            id: "noise",
                            enabled: !0,
                            data: [0.001]
                        }, {
                            cmd: "shader",
                            id: "zoomBlur",
                            enabled: !0,
                            data: [0.41, 0.2342857142857143,
                                0.4336283185840708]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.17699115044247793, 0.5]
                        }, {
                            cmd: "shader",
                            id: "colorMatrixOld",
                            enabled: !0,
                            data: [313.8053097345133]
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [0, 0.3982300884955752]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "kaleidoscope",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "swirl",
                            enabled: !0,
                            data: [0.5, 0.5, 662.3362831858408, 2.477876106194689]
                        }, {
                            cmd: "shader",
                            id: "kaleidoscope",
                            enabled: !0,
                            data: [5.754952914098117, 12.787610619469026]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.7079646017699115, 0.6769911504424779]
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [0.03539823008849563, 0.31858407079646023]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "green kaleidoscope"
                        }, {
                            cmd: "shader",
                            id: "popArt",
                            enabled: !0,
                            data: []
                        }, {
                            cmd: "shader",
                            id: "swirl",
                            enabled: !0,
                            data: [0.5, 0.5, 862.3008849557523, 0.9734513274336276]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.5, 1, 1]
                        }, {
                            cmd: "shader",
                            id: "kaleidoscope",
                            enabled: !0,
                            data: [1.1, 4.716814159292035]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.7654867256637168, 0.1902654867256637]
                        }, {
                            cmd: "shader",
                            id: "hueSaturation",
                            enabled: !0,
                            data: [-1, 0]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "ancient kaleidoscope"
                        }, {
                            cmd: "shader",
                            id: "film",
                            enabled: !0,
                            data: [0.5, 0.22123893805309736, 1.5663716814159292, 1068.1017699115046]
                        }, {
                            cmd: "shader",
                            id: "popArt",
                            enabled: !0,
                            data: []
                        }, {
                            cmd: "shader",
                            id: "bulgePinch",
                            enabled: !0,
                            data: [0.5, 0.5, 1, - 0.06194690265486724]
                        }, {
                            cmd: "shader",
                            id: "swirl",
                            enabled: !0,
                            data: [0.5, 0.5, 999, 1]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.5,
                                1, 0]
                        }, {
                            cmd: "shader",
                            id: "kaleidoscope",
                            enabled: !0,
                            data: [4.976505176925425, 7.6902654867256635]
                        }, {
                            cmd: "shader",
                            id: "oldFilm",
                            enabled: !0,
                            data: [0.7, 0.3, 0.3, 0.3]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [1, 0.7964601769911505]
                        }, {
                            cmd: "shader",
                            id: "sepia",
                            enabled: !0,
                            data: [0.8]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "ancient kaleidoscope"
                        }, {
                            cmd: "shader",
                            id: "film",
                            enabled: !0,
                            data: [0.5, 0.2, 1, 2024]
                        }, {
                            cmd: "shader",
                            id: "popArt",
                            enabled: !0,
                            data: []
                        }, {
                            cmd: "shader",
                            id: "bulgePinch",
                            enabled: !0,
                            data: [0.5, 0.5, 0.1415929203539823,
                                0.12389380530973448]
                        }, {
                            cmd: "shader",
                            id: "swirl",
                            enabled: !0,
                            data: [0.5, 0.5, 0.001, 1.6814159292035402]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.5, 1, 0.6371681415929203]
                        }, {
                            cmd: "shader",
                            id: "colorIsolation",
                            enabled: !0,
                            data: [0.5]
                        }, {
                            cmd: "shader",
                            id: "kaleidoscope",
                            enabled: !0,
                            data: [3.169394358488818, 2.911504424778761]
                        }, {
                            cmd: "shader",
                            id: "oldFilm",
                            enabled: !0,
                            data: [0.7, 0.3, 0.09734513274336283, 0.3]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.6592920353982301, 0.6504424778761062]
                        }, {
                            cmd: "shader",
                            id: "tiltShift",
                            enabled: !0,
                            data: [0.001, 0.24336283185840707, 0.5929203539823009, 0.5619469026548672, 15, 200]
                        }, {
                            cmd: "shader",
                            id: "sepia",
                            enabled: !0,
                            data: [0.8]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "ancient kaleidoscope",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "popArt",
                            enabled: !0,
                            data: []
                        }, {
                            cmd: "shader",
                            id: "bulgePinch",
                            enabled: !0,
                            data: [0.5, 0.5, 0.1415929203539823, 0.12389380530973448]
                        }, {
                            cmd: "shader",
                            id: "swirl",
                            enabled: !0,
                            data: [0.5, 0.5, 0.001, 1.6814159292035402]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [0.32432432432432456, 0.38288288288288286,
                                0.6371681415929203]
                        }, {
                            cmd: "shader",
                            id: "colorIsolation",
                            enabled: !0,
                            data: [0.5]
                        }, {
                            cmd: "shader",
                            id: "oldFilm",
                            enabled: !0,
                            data: [1, 0.08558558558558559, 0.09734513274336283, 0]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.6592920353982301, 0.6504424778761062]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [-0.026548672566371667, 0.10619469026548678]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.9324324324324325, 3]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [1, 1]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [0.6858407079646017, 0.4646017699115045, 1.3274336283185841, 1.0176991150442478]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-3, 0.04954954954954955, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            id: "tron",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.4234234234234233, 0.5180180180180181, 9.91891891891892, 0.009346846846846847, 0, 2.027027027027027, 4.324324324324325]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.6261261261261262, 6]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-0.21621621621621623, 0.25225225225225223, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.4189189189189189, 5]
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-0.21621621621621623, 0.25225225225225223, 1]
                        }, {
                            id: "film",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.4504504504504504, 0.11261261261261261, 1, 1714]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [-0.3423423423423423, - 0.3783783783783784]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.4189189189189189, 5]
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-0.21621621621621623, 0.25225225225225223, 1]
                        }, {
                            id: "vibrance",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.43243243243243246]
                        }, {
                            id: "film",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.4504504504504504, 0.11261261261261261,
                                1, 1714]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [-0.3423423423423423, - 0.3783783783783784]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.7252252252252253, 0]
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-0.21621621621621623, 0.25225225225225223, 1]
                        }, {
                            id: "vibrance",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.43243243243243246]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [-0.05405405405405406, 0.10810810810810811]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.7297297297297297, 19]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [1, 1]
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.8198198198198199, - 1]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-0.21621621621621623, 0.25225225225225223, 1]
                        }, {
                            id: "vibrance",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.36036036036036045]
                        }, {
                            id: "film",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.4504504504504504, 0, 1.009009009009009, 1714]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [-0.05405405405405406, 0.06306306306306309]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.7297297297297297, 19]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [1, 1]
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.5225225225225225, 0.11711711711711703]
                        }, {
                            id: "brightnessContrast",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.15315315315315314, 0.08108108108108114]
                        }, {
                            id: "film",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0.04954954954954955, 0.954954954954955, 1833]
                        }, {
                            id: "colorHalftone",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.009009009009009009, 0.18468468468468469, 2.717053105807389, 18]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.5225225225225225, 0.11711711711711703]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [-0.05405405405405406, 0.06306306306306309]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.6711711711711712, 19]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [1, 1]
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.5315315315315315, 0.32432432432432434]
                        }, {
                            id: "film",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0.04954954954954955, 0.954954954954955, 1833]
                        }, {
                            id: "colorHalftone",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.4954954954954955, 0.12162162162162163, 6.283185307179586,
                                8]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.5315315315315315, 0.32432432432432434]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            id: "hexagonalPixelate",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5, 0.11711711711711711, 8.135135135135135]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [1, 1]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.5315315315315315, 0.32432432432432434]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.6711711711711712, 19]
                        }, {
                            id: "film",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0.04954954954954955, 0.954954954954955, 1833]
                        }, {
                            id: "colorHalftone",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.4954954954954955, 0.12162162162162163, 6.283185307179586, 8]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.5315315315315315, 0.32432432432432434]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            id: "hexagonalPixelate",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5451923076923076, 0.3923076923076923, 16.60810810810811]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.43243243243243246,
                                19]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.45760000000000056, 0.5945945945945945]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [1, 1]
                        }, {
                            id: "lumaKey",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.3153153153153153, 0.04954954954954955]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.43243243243243246, 19]
                        }, {
                            id: "film",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0, 0, 1833]
                        }, {
                            id: "colorHalftone",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.4954954954954955, 0.12162162162162163, 6.283185307179586, 8]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.45760000000000056, 0.5945945945945945]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            id: "hexagonalPixelate",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5451923076923076, 0.3923076923076923, 16.60810810810811]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.43243243243243246, 19]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.46846846846846846, 0.5945945945945945]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [1, 1]
                        }, {
                            id: "lumaKey",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.3153153153153153,
                                0.04954954954954955]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.43243243243243246, 19]
                        }, {
                            id: "colorHalftone",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.4954954954954955, 0.8693693693693694, 0.5377500938577123, 19]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.46846846846846846, 0.5945945945945945]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            id: "tron",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0.30180180180180183, 70.56756756756756, 0.014076576576576579, 2.14990990990991, 48.1981981981982, 5.900900900900901]
                        }, {
                            cmd: "shader",
                            id: "triangleBlur",
                            enabled: !0,
                            data: [14.63963963963964]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [1, 0.46396396396396394]
                        }, {
                            id: "film",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0, 0.07207207207207207, 1823]
                        }, {
                            id: "oldFilm",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.38738738738738737, 0.12612612612612611, 0.481981981981982, 0]
                        }, {
                            id: "lumaKey",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.3783783783783784, 0]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [-0.027027027027026973, 0.1351351351351351]
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            id: "tron",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0.23873873873873874, 1, 0.014076576576576579, 2.14990990990991, 48.1981981981982, 5.900900900900901]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [1, 0.46396396396396394]
                        }, {
                            id: "film",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0, 0.07207207207207207, 1823]
                        }, {
                            id: "oldFilm",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0.10810810810810811, 0.44144144144144143, 0]
                        }, {
                            id: "lumaKey",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.3783783783783784,
                                0]
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }, {
                            id: "colorHalftone",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.4189189189189189, 0.35135135135135137, 4.783145571681757, 2]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            id: "tron",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0.23873873873873874, 1, 0.014076576576576579, 2.14990990990991, 48.1981981981982, 5.900900900900901]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.26126126126126126, 15]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [1.635135135135135,
                                0, 3.873873873873874, 1.8918918918918919]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.9279279279279279, 0.38738738738738737]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.26126126126126126, 15]
                        }, {
                            id: "film",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0.0945945945945946, 0.26126126126126126, 1823]
                        }, {
                            id: "oldFilm",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.545045045045045, 0.11261261261261261, 0.8378378378378378, 0]
                        }, {
                            id: "lumaKey",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.3963963963963964, 0]
                        }, {
                            id: "tiltShift",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.1,
                                0.11711711711711711, 0.9, 0.9, 61.261261261261254, 1046]
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            id: "tron",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0.23873873873873874, 1, 0.014076576576576579, 2.14990990990991, 48.1981981981982, 5.900900900900901]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.26126126126126126, 15]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.9279279279279279, 0.38738738738738737]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [0.26126126126126126, 15]
                        }, {
                            id: "film",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0.0945945945945946, 0.18018018018018017, 1641]
                        }, {
                            id: "oldFilm",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.1036036036036036, 0.11261261261261261, 0.34684684684684686, 0]
                        }, {
                            id: "lumaKey",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.11711711711711711, 0]
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }, {
                            id: "sepia",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.2972972972972973]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [-0.026548672566371667, 0.10619469026548678]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.6621621621621623, 0.5405405405405406, 1.0810810810810811, 0.8648648648648649, 30, 0.1]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [1, 9]
                        }, {
                            id: "colorIsolation",
                            cmd: "shader",
                            enabled: !0,
                            data: [198, 360]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.2072072072072072, 0.5675675675675675]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-3, 0.04954954954954955, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [-0.026548672566371667, 0.10619469026548678]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.6621621621621623, 0.5405405405405406, 0, 0, 10, 0.072072072072072]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [10]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [1, 9]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [3, 0.10810810810810811, 13.243243243243244, 0]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 11]
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-3, 0.04954954954954955, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.19819819819819817, 0.1351351351351351]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.5135135135135134, 0.5945945945945946, 0, 0, 10, 0.072072072072072]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [1, 9]
                        }, {
                            id: "ink",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.06407567567567574]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0, 1]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [3, 0.10810810810810811, 13.243243243243244, 0]
                        }, {
                            id: "colorIsolation",
                            cmd: "shader",
                            enabled: !0,
                            data: [198, 360]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.43243243243243246, - 1]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 11]
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-3, 0.04954954954954955, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.19819819819819817, 0.1351351351351351]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.5135135135135134, 0.5945945945945946, 0, 0, 10, 0.072072072072072]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [1, 9]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [3, 0.013513513513513514, 0.09009009009009009, 0, 0]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.8198198198198198, 4]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-3, 0.04954954954954955, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "rainbow tron",
                            enabled: !0
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.9292035398230087, - 0.19469026548672563]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [30]
                        }, {
                            id: "zoomBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.5, 0.5, 0.10619469026548672]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, - 0.6106194690265487]
                        }, {
                            id: "ink",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.2743362831858407]
                        }],
                        [{
                            cmd: "input",
                            id: "source0",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "tron",
                            data: [2, 1, 1, 0.025, 5.640884955752212, 0, 0],
                            enabled: !0
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 11]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 3, 1.1504424778761062, 1, 0, - 0.026548672566371723]
                        }],
                        [{
                            cmd: "shader",
                            id: "blend",
                            data: [17, 1, 0.8423423423423423, "texture0", "texture1"]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.41891891891891886, 2.27027027027027, 7.567567567567568, 3, 36, - 0.7657657657657657]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.135135135135135, 0.4864864864864865, 18.01801801801802, 1.743243243243243, 29, 0.6126126126126126]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [10]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [3, 0.12162162162162163, 0.18018018018018017, 0.41891891891891886]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 4]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.22522522522522526, 0.7297297297297298]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.1711711711711712,
                                0.32432432432432434]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-3, 0.02252252252252252, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.41891891891891886, 2.27027027027027, 7.567567567567568, 3, 36, - 0.7657657657657657]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.135135135135135, 0.4864864864864865, 18.01801801801802, 1.743243243243243, 29, 0.6126126126126126]
                        }, {
                            id: "lensBlur",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0.75, 1.726460827648445]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [10]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [3, 0.12162162162162163, 0.18018018018018017, 0.41891891891891886]
                        }, {
                            id: "bleachBypass",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.4774774774774775]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.22522522522522526, 0.7297297297297298]
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.1711711711711712, 0.32432432432432434]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-3, 0.02252252252252252, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [10]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [3, 0.12162162162162163, 0.18018018018018017, 0.41891891891891886]
                        }, {
                            id: "edgeWork",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.885135135135135]
                        }, {
                            id: "colorify",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.2072072072072072, [255, 0, 0]]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [10]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [3, 0.12162162162162163, 0.18018018018018017, 0.41891891891891886]
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }, {
                            id: "edgeWork",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.885135135135135]
                        }, {
                            id: "colorify",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.2072072072072072, [255, 0, 0]]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 1]
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }, {
                            id: "film",
                            cmd: "shader",
                            enabled: !0,
                            data: [0, 0.15315315315315314, 0.42342342342342343, 775]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [10]
                        }, {
                            id: "oldFilm",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.7, 0.18468468468468469, 0.15315315315315314, 0.0045045045045045045]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            id: "ripple",
                            cmd: "shader",
                            enabled: !0,
                            data: [4.1887902047863905, 1, 0.5, 0.5]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [10]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [3, 0.12162162162162163, 0.18018018018018017, 0.41891891891891886]
                        }, {
                            id: "edgeWork",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.885135135135135]
                        }, {
                            id: "oldFilm",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.21621621621621623, 1, 1, 0]
                        }, {
                            id: "denoise",
                            cmd: "shader",
                            enabled: !0,
                            data: [10]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.19819819819819817, 0.1351351351351351]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.5135135135135134, 0.5945945945945946, 0, 0, 10, 0.072072072072072]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [1, 9]
                        }, {
                            id: "ink",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.06407567567567574]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0, 1]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [3, 0.10810810810810811, 13.243243243243244, 0]
                        }, {
                            id: "colorIsolation",
                            cmd: "shader",
                            enabled: !0,
                            data: [198, 360]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [1, 11]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [-0.7027027027027026, - 0.29729729729729726]
                        }, {
                            id: "invert",
                            cmd: "shader",
                            enabled: !0,
                            data: []
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-3, 0.04954954954954955, 1]
                        }]
                    ],
                    [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "turquoise displace",
                            enabled: !0
                        }, {
                            cmd: "shader",
                            id: "brightnessContrast",
                            enabled: !0,
                            data: [0.19819819819819817, 0.19819819819819817]
                        }, {
                            id: "displacement",
                            cmd: "shader",
                            enabled: !0,
                            data: [1.5135135135135134, 0.16216216216216217, 2.0720720720720722, 0, 10, 0.09009009009009006]
                        }, {
                            cmd: "shader",
                            id: "colormap",
                            enabled: !0,
                            data: [1, 9]
                        }, {
                            cmd: "shader",
                            id: "displacement",
                            enabled: !0,
                            data: [3, 0.10810810810810811, 13.243243243243244, 0]
                        }, {
                            id: "colormap",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.36486486486486486, 7]
                        }, {
                            id: "hueSaturation",
                            cmd: "shader",
                            enabled: !0,
                            data: [0.027027027027026973, 0.15315315315315314]
                        }, {
                            cmd: "shader",
                            id: "vignette",
                            enabled: !0,
                            data: [0.7702702702702703, 1]
                        }, {
                            cmd: "shader",
                            id: "edgeDetect",
                            enabled: !0,
                            data: [-3, 0.04954954954954955, 1]
                        }]
                    ]
                ],
                g = sketch.util.parseUri(window.location.search).queryKey.filter;
            if (g) if (32 === g.length) sketch.util.request({
                url: "./filesystem.php?filter=" + g,
                body: "test!",
                onerror: function(a) {
                    sketch.loader.stop();
                    h()
                },
                onload: function(a) {
                    sketch.loader.stop();
                    try {
                        var b = JSON.parse(a.responseText);
                        d.unshift(b)
                    } catch (c) {}
                    h()
                },
                onprogress: function(a) {
                    sketch.loader.message("loading: " + (100 * (a.loaded / a.total) >> 0) + "%")
                }
            });
            else {
                try {
                    g = JSON.parse(atob(g)), "string" === typeof g ? d.unshift(JSON.parse(g)) : d.unshift()
                } catch (b) {}
                h && h()
            } else h && h();
            for (g = 0; g < d.length; g++) {
                var e = d[g];
                e.name = e[0][0].name;
                1 < e.length && (e[e.length - 1] = [{
                    cmd: "input",
                    id: "source0"
                },
                    e[e.length - 1][0]]);
                for (var f = 0; f < e.length; f++) for (var c = e[f], k = 0; k < c.length; k++) {
                    var m = c[k];
                    "undefined" === typeof m.enabled && (m.enabled = !0)
                }
            }
            a.removed = [];
            a.filterStack.removeItem = function(a) {
                a = glfx.filterStack.splice(a, 1);
                for (var b = 0; b < a.length; b++) glfx.removed.push(a[b])
            }
        };
        return a
    }(glfx),
    Shader = function() {
        function a(a, b) {
            var c = gl.createShader(a);
            gl.shaderSource(c, b);
            gl.compileShader(c);
            if (!gl.getShaderParameter(c, gl.COMPILE_STATUS)) {
                var d = gl.getShaderInfoLog(c);
                if (glfx.handleError) {
                    glfx.handleError(d);
                    return
                }
                throw "compile error: " + gl.getShaderInfoLog(c);
            }
            return c
        }
        function h(e, f, c) {
            c = c || "NORMAL";
            this.texCoordAttribute = this.vertexAttribute = null;
            this.program = gl.createProgram();
            e = e || d;
            e = a(gl.VERTEX_SHADER, e);
            if (!e) return this.invalid = !0;
            gl.attachShader(this.program, e);
            f = f || g;
            if (b) {
                f = "#define " + c + ";\nprecision " + b + " float;" + f;
                var h = a(gl.FRAGMENT_SHADER, f);
                if (!h) return this.invalid = !0;
                gl.attachShader(this.program, h)
            } else try {
                h = a(gl.FRAGMENT_SHADER, "#define " + c + ";\nprecision highp float;" + f), gl.attachShader(this.program, h), b = "highp"
            } catch (m) {
                h = a(gl.FRAGMENT_SHADER, "#define " + c + ";\nprecision mediump float;" + f), gl.attachShader(this.program, h), b = "mediump"
            }
            gl.linkProgram(this.program);
            if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) throw "link error: " + gl.getProgramInfoLog(this.program);
            this.invalid = !1
        }
        var d = "\tattribute vec2 vertex;\tattribute vec2 _texCoord;\tvarying vec2 texCoord;\tvoid main() {\t\tvec2 coord = vertex * 2.0 - 1.0;\t\tgl_Position = vec4(coord.x, coord.y, 0.0, 1.0);\t\ttexCoord = _texCoord;\t}",
            g = "    uniform sampler2D texture;    varying vec2 texCoord;    void main() {        gl_FragColor = texture2D(texture, texCoord);    }",
            b;
        h.prototype.destroy = function() {
            gl.deleteProgram(this.program);
            this.program = null
        };
        h.prototype.uniforms = function(a) {
            gl.useProgram(this.program);
            for (var b in a) if (a.hasOwnProperty(b)) {
                var c = gl.getUniformLocation(this.program, b);
                if (null !== c) {
                    var d = a[b];
                    if ("[object Array]" == Object.prototype.toString.call(d)) if (d.format) {
                        var g = d.format;
                        if (-1 !== g.indexOf("matrix")) gl[g](c, !1, new Float32Array(d));
                        else gl[g](c, new Float32Array(d))
                    } else switch (d.length) {
                        case 1:
                            gl.uniform1fv(c, new Float32Array(d));
                            break;
                        case 2:
                            gl.uniform2fv(c, new Float32Array(d));
                            break;
                        case 3:
                            gl.uniform3fv(c,
                                new Float32Array(d));
                            break;
                        case 4:
                            gl.uniform4fv(c, new Float32Array(d));
                            break;
                        case 9:
                            gl.uniformMatrix3fv(c, !1, new Float32Array(d));
                            break;
                        case 16:
                            gl.uniformMatrix4fv(c, !1, new Float32Array(d));
                            break;
                        default:
                            throw "dont't know how to load uniform \"" + b + '" of length ' + d.length;
                    } else if ("[object Number]" == Object.prototype.toString.call(d)) gl.uniform1f(c, d);
                    else throw 'attempted to set uniform "' + b + '" to invalid value ' + (d || "undefined").toString();
                }
            }
            return this
        };
        h.prototype.textures = function(a) {
            gl.useProgram(this.program);
            for (var b in a) a.hasOwnProperty(b) && gl.uniform1i(gl.getUniformLocation(this.program, b), a[b]);
            return this
        };
        h.prototype.drawRect = function(a, b, c, d) {
            var g = gl.getParameter(gl.VIEWPORT);
            b = void 0 !== b ? (b - g[1]) / g[3] : 0;
            a = void 0 !== a ? (a - g[0]) / g[2] : 0;
            c = void 0 !== c ? (c - g[0]) / g[2] : 1;
            d = void 0 !== d ? (d - g[1]) / g[3] : 1;
            null == gl.vertexBuffer && (gl.vertexBuffer = gl.createBuffer());
            gl.bindBuffer(gl.ARRAY_BUFFER, gl.vertexBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([a, b, a, d, c, b, c, d]), gl.STATIC_DRAW);
            null == gl.texCoordBuffer && (gl.texCoordBuffer = gl.createBuffer(), gl.bindBuffer(gl.ARRAY_BUFFER, gl.texCoordBuffer), gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), gl.STATIC_DRAW));
            null == this.vertexAttribute && (this.vertexAttribute = gl.getAttribLocation(this.program, "vertex"), gl.enableVertexAttribArray(this.vertexAttribute));
            null == this.texCoordAttribute && (this.texCoordAttribute = gl.getAttribLocation(this.program, "_texCoord"), gl.enableVertexAttribArray(this.texCoordAttribute));
            gl.useProgram(this.program);
            gl.bindBuffer(gl.ARRAY_BUFFER,
                gl.vertexBuffer);
            gl.vertexAttribPointer(this.vertexAttribute, 2, gl.FLOAT, !1, 0, 0);
            gl.bindBuffer(gl.ARRAY_BUFFER, gl.texCoordBuffer);
            gl.vertexAttribPointer(this.texCoordAttribute, 2, gl.FLOAT, !1, 0, 0);
            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4)
        };
        h.getDefaultShader = function() {
            gl.defaultShader = gl.defaultShader || new h;
            return gl.defaultShader
        };
        return h
    }(),
    Texture = function() {
        function a(a, b, d, f) {
            this.gl = gl;
            this.id = gl.createTexture();
            this.width = a;
            this.height = b;
            this.format = d;
            this.type = f;
            gl.bindTexture(gl.TEXTURE_2D, this.id);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
            a && b && gl.texImage2D(gl.TEXTURE_2D, 0, this.format, a, b, 0, this.format, this.type, null)
        }
        function h(a) {
            null == d && (d = document.createElement("canvas"));
            d.width = a.width;
            d.height = a.height;
            a = d.getContext("2d");
            a.clearRect(0, 0, d.width, d.height);
            return a
        }
        a.fromElement = function(d, b, e) {
            var f = new a(0, 0, gl.RGBA, gl.UNSIGNED_BYTE);
            f.loadContentsOf(d, b, e);
            return f
        };
        a.prototype.loadContentsOf = function(a, b, d) {
            a && (this.width = b || a.width || a.videoWidth, this.height = d || a.height || a.videoHeight, this.width && this.height && (gl.bindTexture(gl.TEXTURE_2D, this.id), gl.texImage2D(gl.TEXTURE_2D, 0, this.format, this.format, this.type, a)))
        };
        a.prototype.initFromBytes = function(a, b, d) {
            this.width = a;
            this.height = b;
            this.format = gl.RGBA;
            this.type = gl.UNSIGNED_BYTE;
            gl.bindTexture(gl.TEXTURE_2D,
                this.id);
            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, a, b, 0, gl.RGBA, this.type, new Uint8Array(d))
        };
        a.prototype.destroy = function() {
            gl.deleteTexture(this.id);
            this.id = null
        };
        a.prototype.use = function(a) {
            gl.activeTexture(gl.TEXTURE0 + (a || 0));
            gl.bindTexture(gl.TEXTURE_2D, this.id)
        };
        a.prototype.unuse = function(a) {
            gl.activeTexture(gl.TEXTURE0 + (a || 0));
            gl.bindTexture(gl.TEXTURE_2D, null)
        };
        a.prototype.ensureFormat = function(a, b, d, f) {
            if (1 == arguments.length) {
                var c = arguments[0];
                a = c.width;
                b = c.height;
                d = c.format;
                f = c.type
            }
            if (a != this.width || b != this.height || d != this.format || f != this.type) this.width = a, this.height = b, this.format = d, this.type = f, gl.bindTexture(gl.TEXTURE_2D, this.id), gl.texImage2D(gl.TEXTURE_2D, 0, this.format, a, b, 0, this.format, this.type, null)
        };
        a.prototype.drawTo = function(a) {
            gl.framebuffer = gl.framebuffer || gl.createFramebuffer();
            gl.bindFramebuffer(gl.FRAMEBUFFER, gl.framebuffer);
            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.id, 0);
            if (gl.checkFramebufferStatus(gl.FRAMEBUFFER) !== gl.FRAMEBUFFER_COMPLETE) throw Error("incomplete framebuffer");
            gl.viewport(0, 0, this.width, this.height);
            a();
            gl.bindFramebuffer(gl.FRAMEBUFFER, null)
        };
        var d = null;
        a.prototype.fillUsingCanvas = function(a) {
            a(h(this));
            this.format = gl.RGBA;
            this.type = gl.UNSIGNED_BYTE;
            gl.bindTexture(gl.TEXTURE_2D, this.id);
            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, d);
            return this
        };
        a.prototype.toImage = function(a) {
            this.use();
            Shader.getDefaultShader().drawRect();
            var b = 4 * this.width * this.height,
                e = new Uint8Array(b),
                f = h(this),
                c = f.createImageData(this.width, this.height);
            gl.readPixels(0,
                0, this.width, this.height, gl.RGBA, gl.UNSIGNED_BYTE, e);
            for (var k = 0; k < b; k++) c.data[k] = e[k];
            f.putImageData(c, 0, 0);
            a.src = d.toDataURL()
        };
        a.prototype.swapWith = function(a) {
            var b;
            b = a.id;
            a.id = this.id;
            this.id = b;
            b = a.width;
            a.width = this.width;
            this.width = b;
            b = a.height;
            a.height = this.height;
            this.height = b;
            b = a.format;
            a.format = this.format;
            this.format = b
        };
        return a
    }();
(function() {
    var a = "NORMAL ADD SUBTRACT MULTIPLY DARKEN COLOUR_BURN LINEAR_BURN LIGHTEN SCREEN COLOUR_DODGE LINEAR_DODGE OVERLAY SOFT_LIGHT HARD_LIGHT VIVID_LIGHT LINEAR_LIGHT PIN_LIGHT DIFFERENCE EXCLUSION".split(" ");
    glfx.addFilter({
        type: "blend",
        param: [glfx.param("blendmode", "int(0," + (a.length - 1) + ")", 1), glfx.param("srcAmount", "float(0,1)", 1), glfx.param("dstAmount", "float(0,1)", 1)],
        getBlendMode: function(h) {
            return isFinite(h) ? a[h] : h
        },
        shaderCode: "uniform vec3 blendmode;\nuniform float srcAmount;\nuniform float dstAmount;\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nvarying vec2 texCoord;\nvec3 blend (vec3 src, vec3 dst) {\n\t#ifdef NORMAL\n\t\treturn src + dst;\n\t#endif\n\t#ifdef ADD\n\t\treturn src + dst;\n\t#endif\n\t#ifdef SUBTRACT\n\t\treturn src - dst;\n\t#endif\n\t#ifdef MULTIPLY\n\t\treturn src * dst;\n\t#endif\n\t#ifdef DARKEN\n\t\treturn min(src, dst);\n\t#endif\n\t#ifdef COLOUR_BURN\n\t\treturn vec3((src.x == 0.0) ? 0.0 : (1.0 - ((1.0 - dst.x) / src.x)),\n\t\t\t\t\t(src.y == 0.0) ? 0.0 : (1.0 - ((1.0 - dst.y) / src.y)),\n\t\t\t\t\t(src.z == 0.0) ? 0.0 : (1.0 - ((1.0 - dst.z) / src.z)));\n\t#endif\n\t#ifdef LINEAR_BURN\n\t\treturn (src + dst) - 1.0;\n\t#endif\n\t#ifdef LIGHTEN\n\t\treturn max(src, dst);\n\t#endif\n\t#ifdef SCREEN\n\t\treturn (src + dst) - (src * dst);\n\t#endif\n\t#ifdef COLOUR_DODGE\n\t\treturn vec3((src.x == 1.0) ? 1.0 : min(1.0, dst.x / (1.0 - src.x)),\n\t\t\t\t\t(src.y == 1.0) ? 1.0 : min(1.0, dst.y / (1.0 - src.y)),\n\t\t\t\t\t(src.z == 1.0) ? 1.0 : min(1.0, dst.z / (1.0 - src.z)));\n\t#endif\n\t\t\t\n\t#ifdef LINEAR_DODGE\n\t\treturn src + dst;\n\t#endif\n\t#ifdef OVERLAY\n\t\treturn vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n\t\t\t\t\t(dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n\t\t\t\t\t(dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n\t#endif\n\t#ifdef SOFT_LIGHT\n\t\treturn vec3((src.x <= 0.5) ? (dst.x - (1.0 - 2.0 * src.x) * dst.x * (1.0 - dst.x)) : (((src.x > 0.5) && (dst.x <= 0.25)) ? (dst.x + (2.0 * src.x - 1.0) * (4.0 * dst.x * (4.0 * dst.x + 1.0) * (dst.x - 1.0) + 7.0 * dst.x)) : (dst.x + (2.0 * src.x - 1.0) * (sqrt(dst.x) - dst.x))),\n\t\t\t\t\t(src.y <= 0.5) ? (dst.y - (1.0 - 2.0 * src.y) * dst.y * (1.0 - dst.y)) : (((src.y > 0.5) && (dst.y <= 0.25)) ? (dst.y + (2.0 * src.y - 1.0) * (4.0 * dst.y * (4.0 * dst.y + 1.0) * (dst.y - 1.0) + 7.0 * dst.y)) : (dst.y + (2.0 * src.y - 1.0) * (sqrt(dst.y) - dst.y))),\n\t\t\t\t\t(src.z <= 0.5) ? (dst.z - (1.0 - 2.0 * src.z) * dst.z * (1.0 - dst.z)) : (((src.z > 0.5) && (dst.z <= 0.25)) ? (dst.z + (2.0 * src.z - 1.0) * (4.0 * dst.z * (4.0 * dst.z + 1.0) * (dst.z - 1.0) + 7.0 * dst.z)) : (dst.z + (2.0 * src.z - 1.0) * (sqrt(dst.z) - dst.z))));\n\t#endif\n\t#ifdef HARD_LIGHT\n\t\treturn vec3((src.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - src.x) * (1.0 - dst.x)),\n\t\t\t\t\t(src.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - src.y) * (1.0 - dst.y)),\n\t\t\t\t\t(src.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - src.z) * (1.0 - dst.z)));\n\t#endif\n\t#ifdef VIVID_LIGHT\n\t\treturn vec3((src.x <= 0.5) ? (1.0 - (1.0 - dst.x) / (2.0 * src.x)) : (dst.x / (2.0 * (1.0 - src.x))),\n\t\t\t\t\t(src.y <= 0.5) ? (1.0 - (1.0 - dst.y) / (2.0 * src.y)) : (dst.y / (2.0 * (1.0 - src.y))),\n\t\t\t\t\t(src.z <= 0.5) ? (1.0 - (1.0 - dst.z) / (2.0 * src.z)) : (dst.z / (2.0 * (1.0 - src.z))));\n\t#endif\n\t#ifdef LINEAR_LIGHT\n\t\treturn 2.0 * src + dst - 1.0;\n\t#endif\n\t#ifdef PIN_LIGHT\n\t\treturn vec3((src.x > 0.5) ? max(dst.x, 2.0 * (src.x - 0.5)) : min(dst.x, 2.0 * src.x),\n\t\t\t\t\t(src.x > 0.5) ? max(dst.y, 2.0 * (src.y - 0.5)) : min(dst.y, 2.0 * src.y),\n\t\t\t\t\t(src.z > 0.5) ? max(dst.z, 2.0 * (src.z - 0.5)) : min(dst.z, 2.0 * src.z));\n\t#endif\n\t#ifdef DIFFERENCE\n\t\treturn abs(dst - src);\n\t#endif\n\t#ifdef EXCLUSION\n\t\treturn src + dst - 2.0 * src * dst;\n\t#endif\n}\nvoid main() {\n   vec4 src = texture2D(texture0, texCoord);\n   vec4 dst = texture2D(texture1, texCoord);\n\tvec3 color = clamp(blend(src.xyz*srcAmount, dst.xyz*dstAmount), 0.0, 1.0);\n   gl_FragColor.rgb = color;\n   gl_FragColor.a = src.a * dst.a;\n}",
        shader: function(h, d, g, b, e) {
            h = isFinite(h) ? a[h] : h;
            var f = glfx.filters.blend;
            if (f.dirty || this.mode !== h) delete gl.blend, this.mode = h;
            gl.blend = gl.blend || new Shader(null, f.shaderCode, h);
            this._.texture.loadContentsOf(b);
            this._.extraTexture.loadContentsOf(e);
            this._.extraTexture.use(1);
            gl.blend.textures({
                texture0: 0,
                texture1: 1
            });
            glfx.simpleShader.call(this, gl.blend, {
                blendmode: h,
                srcAmount: d,
                dstAmount: g,
                texSize: [this.width, this.height]
            });
            this._.extraTexture.unuse(1);
            return this
        }
    })
})();
glfx.helper = {};
glfx.helper.warpShader = {};

function warpShader(a, h) {
    return new Shader(null, a + "    uniform sampler2D texture;    uniform vec2 texSize;    varying vec2 texCoord;    void main() {        vec2 coord = texCoord * texSize;        " + h + "        gl_FragColor = texture2D(texture, coord / texSize);        vec2 clampedCoord = clamp(coord, vec2(0.0), texSize);        if (coord != clampedCoord) {            /* fade to transparent if we are outside the image */            gl_FragColor.a *= max(0.0, 1.0 - length(coord - clampedCoord));        }    }")
}
var randomShaderFunc = "    float random(vec3 scale, float seed) {        /* use the fragment position for a different seed per-pixel */        return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);    }";
glfx.helper.RGB_HSL = "vec3 RGB_HSL(vec3 rgb) {\n\tvec3 hsl;\n\tfloat fmin = min(min(rgb.r, rgb.g), rgb.b);\n\tfloat fmax = max(max(rgb.r, rgb.g), rgb.b);\n\tfloat fdelta = fmax - fmin;\n\thsl.z = (fmax + fmin) / 2.0;\n\tif (fdelta == 0.0) {\n\t\thsl.x = 0.0;\n\t\thsl.y = 0.0;\n\t} else {\n\t\tif (hsl.z < 0.5) {\n\t\t\thsl.y = fdelta / (fmax + fmin);\n\t\t} else {\n\t\t\thsl.y = fdelta / (2.0 - fmax - fmin);\n\t\t}\n\t\tvec3 delta = (((fmax - rgb) / 6.0) + (fdelta / 2.0)) / fdelta;\n\t\tif (rgb.r == fmax ) {\n\t\t\thsl.x = delta.z - delta.y;\n\t\t} else if (rgb.g == fmax) {\n\t\t\thsl.x = (1.0 / 3.0) + delta.x - delta.z;\n\t\t} else if (rgb.b == fmax) {\n\t\t\thsl.x = (2.0 / 3.0) + delta.y - delta.x;\n\t\t}\n\t\tif (hsl.x < 0.0) {\n\t\t\thsl.x += 1.0;\n\t\t} else if (hsl.x > 1.0) {\n\t\t\thsl.x -= 1.0;\n\t\t}\n\t}\n\treturn hsl;\n}";
glfx.helper.simplex_noise = "vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\nfloat snoise (vec2 v) {\n\tconst vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439);\n\tvec2 i  = floor(v + dot(v, C.yy) );\n\tvec2 x0 = v -   i + dot(i, C.xx);\n\tvec2 i1;\n\ti1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\tvec4 x12 = x0.xyxy + C.xxzz;\n\tx12.xy -= i1;\n\ti = mod289(i);\n\tvec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 ));\n\tvec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n\tm = m*m ;\n\tm = m*m ;\n\tvec3 x = 2.0 * fract(p * C.www) - 1.0;\n\tvec3 h = abs(x) - 0.5;\n\tvec3 ox = floor(x + 0.5);\n\tvec3 a0 = x - ox;\n\tm *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\tvec3 g;\n\tg.x  = a0.x  * x0.x  + h.x  * x0.y;\n\tg.yz = a0.yz * x12.xz + h.yz * x12.yw;\n\treturn 130.0 * dot(m, g);\n}";
glfx.addFilter({
    type: "bulgePinch",
    param: [glfx.param("centerX", "float", 0.5), glfx.param("centerY", "float", 0.5), glfx.param("radius", "float", 0.5), glfx.param("strength", "float(-1,1)", 0.5)],
    ondrag: glfx.dragCenterPoint,
    shaderCode: ["uniform float radius;\nuniform float strength;\nuniform vec2 center;", "coord -= center;\nfloat distance = length(coord);\nif (distance < radius) {\n\tfloat percent = distance / radius;\n\tif (strength > 0.0) {\n\t\tcoord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n\t} else {\n\t\tcoord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n\t}\n}\ncoord += center;"],
    shader: function(a, h, d, g) {
        var b = glfx.filters.bulgePinch;
        b.dirty && delete gl.bulgePinch;
        gl.bulgePinch = gl.bulgePinch || warpShader(b.shaderCode[0], b.shaderCode[1]);
        glfx.simpleShader.call(this, gl.bulgePinch, {
            radius: d * this.width,
            strength: sketch.util.clamp(-1, g, 1),
            center: [this.width * (1 - a), this.height * h],
            texSize: [this.width, this.height]
        });
        return this
    }
});
(function() {
    var a = "./media/texture/concrete_1.jpeg ./media/texture/concrete_2.jpeg ./media/texture/concrete_3.jpeg ./media/texture/concrete_4.jpeg ./media/texture/concrete_5.jpeg ./media/texture/fabric_1.jpeg ./media/texture/fabric_2.jpeg ./media/texture/fabric_3.jpeg ./media/texture/leather_1.jpeg ./media/texture/leather_2.jpeg ./media/texture/leather_3.jpeg ./media/texture/leather_4.jpeg ./media/texture/leather_5.jpeg ./media/texture/leather_6.jpeg ./media/texture/leather_7.jpeg ./media/texture/leather_8.jpeg ./media/texture/paint_1.jpeg ./media/texture/paint_2.jpeg ./media/texture/paint_3.jpeg ./media/texture/paper_1.jpeg ./media/texture/paper_2.jpeg ./media/texture/paper_3.jpeg ./media/texture/paper_4.jpeg ./media/texture/paper_5.jpeg ./media/texture/paper_6.jpeg ./media/texture/paper_7.jpeg ./media/texture/plastic_1.jpeg ./media/texture/plastic_2.jpeg ./media/texture/plastic_3.jpeg ./media/texture/plastic_4.jpeg ./media/texture/plastic_5.jpeg ./media/texture/rocks_1.jpeg ./media/texture/rocks_2.jpeg ./media/texture/rocks_3.jpeg ./media/texture/rocks_4.jpeg ./media/texture/rocks_5.jpeg ./media/texture/rocks_6.jpeg ./media/texture/rocks_7.jpeg ./media/texture/water_1.jpeg ./media/texture/water_2.jpeg ./media/texture/water_3.jpeg ./media/texture/wood_1.jpeg ./media/texture/wood_2.jpeg ./media/texture/wood_3.jpeg ./media/texture/wood_4.jpeg ./media/texture/wood_5.jpeg ./media/texture/wood_6.jpeg ./media/texture/wood_7.jpeg ./media/texture/wood_8.jpeg ./media/texture/wood_9.jpeg ./media/texture/crack3.jpg".split(" ");
    glfx.addFilter({
        type: "displacement",
        textures: a,
        loadResource: function(a, d) {
            var g = glfx.filters.displacement.textures;
            return "string" !== typeof g[a] ? !1 : glfx.loadResource(g, a, d)
        },
        param: [glfx.param("zoom", "float(0,3)", 1), glfx.param("dotDepth", "float(0,3)", 1), glfx.param("dotSize", "float(0,20)", 1), glfx.param("textureDepth", "float(0,3)", 1), glfx.param("textureId", "int(0," + (a.length - 1) + ")", 1), glfx.param("strength", "float(-1,1)", 0.1)],
        shaderCode: "uniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float time;\nuniform float zoom;\nuniform float dotDepth;\nuniform float dotSize;\nuniform float strength;\nuniform float textureDepth;\nuniform float textureId;\nvarying vec2 texCoord;\nfloat random(float seed) {\n\treturn fract(sin(seed)*23443.23);\n}\nvec2 random2f(vec2 p) {\n\treturn vec2(random(p.x+p.y*100.), random(p.x+p.y*1000.));\n}\nfloat voronoi( in vec2 x ) {\n\tvec2 p = floor( x );\n\tvec2 f = fract( x );\n\tfloat res = 8.0;\n\tfor( float j=-1.; j<=1.; j++ )\n\tfor( float i=-1.; i<=1.; i++ ) {\n\t    vec2  b = vec2( i, j );\n\t    vec2  r = b - f + random2f( p + b );\n\t    float d = dot( r, r );\n\t    res = min( res, d );\n\t}\n\treturn sqrt( res );\n}\nvoid main() {\n\tfloat t = time / dotSize;\n\tfloat b = voronoi(.003 * sin(t) * texCoord + 2. * t);\n\tfloat g = voronoi(0.2 * sin(t) * texCoord);\n\tfloat r = voronoi(t * texCoord - 1. * t);\n\tvec4 tex = texture2D(texture1, texCoord);\n\tvec4 dot = tex * vec4(r, g, b, 1);\n\tvec4 dis;\n\tif (textureId == 0.0) {\n\t\tdis = dot * dotDepth + tex * textureDepth;\n\t} else {\n\t\tdis = dot * dotDepth + 1.0 - tex * textureDepth;\n\t}\n\tdis.x -= 0.5;\n\tdis.y -= 0.5;\n\tdis.x *= strength;\n\tdis.y *= strength;\n\tvec2 res_uv = texCoord;\n\tres_uv.x = res_uv.x + dis.x;\n\tres_uv.y = res_uv.y + dis.y;\n\tgl_FragColor = texture2D(texture0, zoom * res_uv);\n\n}",
        shader: function(a, d, g, b, e, f) {
            var c = glfx.filters.displacement;
            c.dirty && delete gl.displacement;
            gl.displacement = gl.displacement || new Shader(null, c.shaderCode);
            isFinite(e) && 0 !== e ? (this._.extraTexture.loadContentsOf(glfx.filters.displacement.textures[e]), this._.extraTexture.use(1)) : this._.texture.use(1);
            gl.displacement.textures({
                texture0: 0,
                texture1: 1
            });
            glfx.simpleShader.call(this, gl.displacement, {
                time: 100,
                zoom: isFinite(a) ? a : 1,
                dotDepth: isFinite(d) ? d : 1,
                dotSize: g || 0.001,
                textureDepth: isFinite(b) ? b : 1,
                strength: isFinite(f) ? f : 1,
                textureId: e || 0
            });
            return this
        }
    })
})();
glfx.addFilter({
    type: "mirror",
    param: [glfx.param("flipX", "int(0,1)", 0), glfx.param("flipY", "int(0,1)", 0)],
    shaderCode: ["\tattribute vec2 vertex;\n\tattribute vec2 _texCoord;\n\tuniform float flipX;\n\tuniform float flipY;\n\tvarying vec2 texCoord;\n\tvoid main() {\n\t\tvec2 coord = vertex * 2.0 - 1.0;\n\t\tfloat x = flipX > 0.0 ? 1.0 - coord.x - 1.0 : coord.x;\n\t\tfloat y = flipY > 0.0 ? 1.0 - coord.y - 1.0 : coord.y;\n\t\tgl_Position = vec4(x, y, 0.0, 1.0);\n\t\ttexCoord = _texCoord;\n\t}", "    uniform sampler2D texture;\n    varying vec2 texCoord;\n    void main() {\n        gl_FragColor = texture2D(texture, texCoord);\n    }"],
    shader: function(a, h, d) {
        d = glfx.filters.mirror;
        d.dirty && delete gl.mirror;
        gl.mirror = gl.mirror || new Shader(d.shaderCode[0], d.shaderCode[1]);
        glfx.simpleShader.call(this, gl.mirror, {
            flipX: isFinite(a) ? a : 0,
            flipY: isFinite(h) ? h : 0
        });
        return this
    }
});
glfx.addFilter({
    type: "ripple",
    param: [glfx.param("wave", "float(0,10)", Math.PI / 0.75), glfx.param("distortion", "float(0,100)", 1), glfx.param("centerX", "float", 0.5), glfx.param("centerY", "float", 0.5)],
    shaderCode: "varying vec2 texCoord;\nuniform vec2 center;\nuniform sampler2D texture;\nuniform float time;\nuniform float wave;\nuniform float distortion;\nvoid main(void) {\n\tfloat scalar = abs(1.0 - abs(distance(texCoord, center)));\n\tfloat sinOffset = sin(wave * time / scalar);\n\tsinOffset = clamp(sinOffset, 0.0, 1.0);\n\tfloat sinSign = cos(wave / scalar);\n\tsinOffset = sinOffset * distortion / 32.0;\n\tgl_FragColor = texture2D(texture, texCoord + sinOffset * sinSign);\n}",
    shader: function(a,
                     h, d, g) {
        var b = glfx.filters.ripple;
        b.dirty && delete gl.ripple;
        gl.ripple = gl.ripple || new Shader(null, b.shaderCode);
        glfx.simpleShader.call(this, gl.ripple, {
            time: (this.now - this.startTime) / 1E3,
            texSize: [this.width, this.height],
            center: [1 - d, g],
            distortion: h,
            wave: a
        });
        return this
    }
});
glfx.addFilter({
    type: "swirl",
    param: [glfx.param("centerX", "float", 0.5), glfx.param("centerY", "float", 0.5), glfx.param("radius", "int(0,width)", 200), glfx.param("angle", "radian(-10,10)", 1)],
    ondrag: glfx.dragCenterPoint,
    shaderCode: ["uniform float radius;\nuniform float angle;\nuniform vec2 center;", "coord -= center;\nfloat distance = length(coord);\nif (distance < radius) {\n\tfloat percent = (radius - distance) / radius;\n\tfloat theta = percent * percent * angle;\n\tfloat s = sin(theta);\n\tfloat c = cos(theta);\n\tcoord = vec2(\n\t\tcoord.x * c - coord.y * s,\n\t\tcoord.x * s + coord.y * c\n\t);\n}\ncoord += center;"],
    shader: function(a, h, d, g) {
        var b = glfx.filters.swirl;
        b.dirty && delete gl.swirl;
        gl.swirl = gl.swirl || warpShader(b.shaderCode[0], b.shaderCode[1]);
        glfx.simpleShader.call(this, gl.swirl, {
            radius: d,
            center: [this.width * (1 - a), this.height * h],
            angle: g,
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "edgeDetect",
    param: [glfx.param("amount", "float(-3,3)", 0.5), glfx.param("diameter", "float(0,1)", 1), glfx.param("opacity", "float(0,1)", 1)],
    shaderCode: "uniform sampler2D texture;\nvarying vec2 texCoord;\nuniform float amount;\nuniform float diameter;\nuniform float opacity;\nvoid main() {\n\tfloat step_x = 0.0015 * diameter;\n\tfloat step_y = 0.0015 * diameter;\n\tvec3 t1 = texture2D(texture, vec2(texCoord.x - step_x, texCoord.y - step_y)).rgb;\n\tvec3 t2 = texture2D(texture, vec2(texCoord.x, texCoord.y - step_y)).rgb * 2.0;\n\tvec3 t3 = texture2D(texture, vec2(texCoord.x + step_x, texCoord.y - step_y)).rgb;\n\tvec3 t4 = texture2D(texture, vec2(texCoord.x - step_x, texCoord.y)).rgb * 2.0;\n\tvec3 t5 = texture2D(texture, texCoord).rgb;\n\tvec3 t6 = texture2D(texture, vec2(texCoord.x + step_x, texCoord.y)).rgb * 2.0;\n\tvec3 t7 = texture2D(texture, vec2(texCoord.x - step_x, texCoord.y + step_y)).rgb;\n\tvec3 t8 = texture2D(texture, vec2(texCoord.x, texCoord.y + step_y)).rgb * 2.0;\n\tvec3 t9 = texture2D(texture, vec2(texCoord.x + step_x, texCoord.y + step_y)).rgb;\n\tvec3 H = t1 + t2 + t3 - t7 - t8 - t9;\n\tvec3 V = t1 - t3 + t4 - t6 + t7 - t9;\n\tvec3 res = sqrt(H * H + V * V);\n\tgl_FragColor.a = 1.0;\n\tgl_FragColor.rgb = (res * amount) + (t5 * opacity);\n}",
    shader: function(a,
                     h, d) {
        var g = glfx.filters.edgeDetect;
        g.dirty && delete gl.edgeDetect;
        gl.edgeDetect = gl.edgeDetect || new Shader(null, g.shaderCode);
        glfx.simpleShader.call(this, gl.edgeDetect, {
            amount: isFinite(a) ? a : 0,
            opacity: isFinite(d) ? d : 0,
            diameter: isFinite(h) ? h : 1
        });
        return this
    }
});
glfx.addFilter({
    type: "ink",
    param: [glfx.param("strength", "float(-0.5,0.5)", 0.25)],
    shaderCode: "\t\t\tuniform sampler2D texture;\n\t\t\tuniform float strength;\n\t\t\tuniform vec2 texSize;\n\t\t\tvarying vec2 texCoord;\n\t\t\tvoid main() {\n\t\t\t\tvec2 dx = vec2(1.0 / texSize.x, 0.0);\n\t\t\t\tvec2 dy = vec2(0.0, 1.0 / texSize.y);\n\t\t\t\tvec4 color = texture2D(texture, texCoord);\n\t\t\t\tfloat bigTotal = 0.0;\n\t\t\t\tfloat smallTotal = 0.0;\n\t\t\t\tvec3 bigAverage = vec3(0.0);\n\t\t\t\tvec3 smallAverage = vec3(0.0);\n\t\t\t\tfor (float x = -2.0; x <= 2.0; x += 1.0) {\n\t\t\t\t\tfor (float y = -2.0; y <= 2.0; y += 1.0) {\n\t\t\t\t\t\tvec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\n\t\t\t\t\t\tbigAverage += sample;\n\t\t\t\t\t\tbigTotal += 1.0;\n\t\t\t\t\t\tif (abs(x) + abs(y) < 2.0) {\n\t\t\t\t\t\t\tsmallAverage += sample;\n\t\t\t\t\t\t\tsmallTotal += 1.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\n\t\t\t\tgl_FragColor = vec4(color.rgb - dot(edge, edge) * strength * 100000.0, color.a);\n\t\t\t}",
    shader: function(a) {
        var h = glfx.filters.ink;
        h.dirty && delete gl.ink;
        gl.ink = gl.ink || new Shader(null, h.shaderCode);
        glfx.simpleShader.call(this, gl.ink, {
            strength: a * a * a * a * a,
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "unsharpMask",
    param: [glfx.param("radius", "float(0,20)", 10), glfx.param("strength", "float(0,10)", 1)],
    defaults: [20, 2],
    shaderCode: "\t\t\tuniform sampler2D blurredTexture;\n\t\t\tuniform sampler2D originalTexture;\n\t\t\tuniform float strength;\n\t\t\tuniform float threshold;\n\t\t\tvarying vec2 texCoord;\n\t\t\tvoid main() {\n\t\t\t\tvec4 blurred = texture2D(blurredTexture, texCoord);\n\t\t\t\tvec4 original = texture2D(originalTexture, texCoord);\n\t\t\t\tgl_FragColor = mix(blurred, original, 1.0 + strength);\n\t\t\t}",
    shader: function(a,
                     h) {
        var d = glfx.filters.unsharpMask;
        d.dirty && delete gl.unsharpMask;
        gl.unsharpMask = gl.unsharpMask || new Shader(null, d.shaderCode);
        this._.extraTexture.ensureFormat(this._.texture);
        this._.texture.use();
        this._.extraTexture.drawTo(function() {
            Shader.getDefaultShader().drawRect()
        });
        this._.extraTexture.use(1);
        this.triangleBlur(a);
        gl.unsharpMask.textures({
            originalTexture: 1
        });
        glfx.simpleShader.call(this, gl.unsharpMask, {
            strength: h
        });
        this._.extraTexture.unuse(1);
        return this
    }
});
glfx.addFilter({
    type: "denoise",
    param: [glfx.param("exponent", "int(10,30)", 20)],
    shader: function(a) {
        gl.denoise = gl.denoise || new Shader(null, "\t\t\tuniform sampler2D texture;\t\t\tuniform float exponent;\t\t\tuniform float strength;\t\t\tuniform vec2 texSize;\t\t\tvarying vec2 texCoord;\t\t\tvoid main() {\t\t\t\tvec4 center = texture2D(texture, texCoord);\t\t\t\tvec4 color = vec4(0.0);\t\t\t\tfloat total = 0.0;\t\t\t\tfor (float x = -4.0; x <= 4.0; x += 1.0) {\t\t\t\t\tfor (float y = -4.0; y <= 4.0; y += 1.0) {\t\t\t\t\t\tvec4 sample = texture2D(texture, texCoord + vec2(x, y) / texSize);\t\t\t\t\t\tfloat weight = 1.0 - abs(dot(sample.rgb - center.rgb, vec3(0.25)));\t\t\t\t\t\tweight = pow(weight, exponent);\t\t\t\t\t\tcolor += sample * weight;\t\t\t\t\t\ttotal += weight;\t\t\t\t\t}\t\t\t\t}\t\t\t\tcolor = color / total;\t\t\t\tif (color.a > 1.0) color.a = 1.0;\t\t\t\tif (color.r > 1.0) color.r = 1.0;\t\t\t\tif (color.g > 1.0) color.g = 1.0;\t\t\t\tif (color.b > 1.0) color.b = 1.0;\t\t\t\tgl_FragColor = color;\t\t\t}\t\t");
        for (var h = 0; 2 > h; h++) glfx.simpleShader.call(this, gl.denoise, {
            exponent: Math.max(0, a),
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "noise",
    param: [glfx.param("amount", "float", 0.5)],
    shaderCode: ["uniform sampler2D texture;\nuniform float amount;\nuniform float random;\nvarying vec2 texCoord;", glfx.helper.simplex_noise, "void main() {\n\tvec4 color = texture2D(texture, texCoord);\n\tfloat diff = snoise(texCoord * vec2(1024.0 + random * 512.0, 1024.0 + random * 512.0)) * 0.5;\n\tcolor.r += diff;\n\tcolor.g += diff;\n\tcolor.b += diff;\n\tgl_FragColor = color;\n}"].join("\n"),
    shader: function(a) {
        var h = glfx.filters.noise;
        h.dirty && delete gl.noise;
        gl.noise = gl.noise || new Shader(null, h.shaderCode);
        glfx.simpleShader.call(this, gl.noise, {
            amount: sketch.util.clamp(0, a, 1),
            random: Math.random()
        });
        return this
    }
});
glfx.addFilter({
    type: "colorHalftone",
    param: [glfx.param("centerX", "float", 0.5), glfx.param("centerY", "float", 0.5), glfx.param("angle", "radian", 320), glfx.param("size", "int(1,20)", 7)],
    ondrag: glfx.dragCenterPoint,
    shaderCode: "\t\t\tuniform sampler2D texture;\n\t\t\tuniform vec2 center;\n\t\t\tuniform float angle;\n\t\t\tuniform float scale;\n\t\t\tuniform vec2 texSize;\n\t\t\tvarying vec2 texCoord;\n\t\t\t\n\t\t\tfloat pattern(float angle) {\n\t\t\t\tfloat s = sin(angle), c = cos(angle);\n\t\t\t\tvec2 tex = texCoord * texSize - center;\n\t\t\t\tvec2 point = vec2(\n\t\t\t\t\tc * tex.x - s * tex.y,\n\t\t\t\t\ts * tex.x + c * tex.y\n\t\t\t\t) * scale;\n\t\t\t\treturn (sin(point.x) * sin(point.y)) * 4.0;\n\t\t\t}\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tvec4 color = texture2D(texture, texCoord);\n\t\t\t\tvec3 cmy = 1.0 - color.rgb;\n\t\t\t\tfloat k = min(cmy.x, min(cmy.y, cmy.z));\n\t\t\t\tcmy = (cmy - k) / (1.0 - k);\n\t\t\t\tcmy = clamp(cmy * 10.0 - 3.0 + vec3(pattern(angle + 0.26179), pattern(angle + 1.30899), pattern(angle)), 0.0, 1.0);\n\t\t\t\tk = clamp(k * 10.0 - 5.0 + pattern(angle + 0.78539), 0.0, 1.0);\n\t\t\t\tgl_FragColor = vec4(1.0 - cmy - k, color.a);\n\t\t\t}",
    shader: function(a,
                     h, d, g) {
        var b = glfx.filters.colorHalftone;
        b.dirty && delete gl.colorHalftone;
        gl.colorHalftone = gl.colorHalftone || new Shader(null, b.shaderCode);
        glfx.simpleShader.call(this, gl.colorHalftone, {
            center: [this.width * (1 - a), this.height * h],
            angle: d,
            scale: Math.PI / g,
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "dotScreen",
    param: [glfx.param("centerX", "float", 0.5), glfx.param("centerY", "float", 0.5), glfx.param("angle", "radian", 1.1), glfx.param("size", "px(0,20)", 3)],
    ondrag: glfx.dragCenterPoint,
    shaderCode: "\t\t\tuniform sampler2D texture;\n\t\t\tuniform vec2 center;\n\t\t\tuniform float angle;\n\t\t\tuniform float scale;\n\t\t\tuniform vec2 texSize;\n\t\t\tvarying vec2 texCoord;\n\t\t\t\n\t\t\tfloat pattern() {\n\t\t\t\tfloat s = sin(angle), c = cos(angle);\n\t\t\t\tvec2 tex = texCoord * texSize - center;\n\t\t\t\tvec2 point = vec2(\n\t\t\t\t\tc * tex.x - s * tex.y,\n\t\t\t\t\ts * tex.x + c * tex.y\n\t\t\t\t) * scale;\n\t\t\t\treturn (sin(point.x) * sin(point.y)) * 4.0;\n\t\t\t}\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tvec4 color = texture2D(texture, texCoord);\n\t\t\t\tfloat average = (color.r + color.g + color.b) / 3.0;\n\t\t\t\tgl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n\t\t\t}",
    shader: function(a,
                     h, d, g) {
        var b = glfx.filters.dotScreen;
        b.dirty && delete gl.dotScreen;
        gl.dotScreen = gl.dotScreen || new Shader(null, b.shaderCode);
        glfx.simpleShader.call(this, gl.dotScreen, {
            center: [this.width * (1 - a), this.height * h],
            angle: d,
            scale: Math.PI / g,
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "edgeWork",
    param: [glfx.param("radius", "px(0.1,25)", 4)],
    shader: function(a) {
        gl.edgeWork1 = gl.edgeWork1 || new Shader(null, "\t\t\tuniform sampler2D texture;\t\t\tuniform vec2 delta;\t\t\tvarying vec2 texCoord;\t\t\t" + randomShaderFunc + "\t\t\tvoid main() {\t\t\t\tvec2 color = vec2(0.0);\t\t\t\tvec2 total = vec2(0.0);\t\t\t\t\t\t\t\t/* randomize the lookup values to hide the fixed number of samples */\t\t\t\tfloat offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\t\t\t\t\t\t\t\tfor (float t = -30.0; t <= 30.0; t++) {\t\t\t\t\tfloat percent = (t + offset - 0.5) / 30.0;\t\t\t\t\tfloat weight = 1.0 - abs(percent);\t\t\t\t\tvec3 sample = texture2D(texture, texCoord + delta * percent).rgb;\t\t\t\t\tfloat average = (sample.r + sample.g + sample.b) / 3.0;\t\t\t\t\tcolor.x += average * weight;\t\t\t\t\ttotal.x += weight;\t\t\t\t\tif (abs(t) < 15.0) {\t\t\t\t\t\tweight = weight * 2.0 - 1.0;\t\t\t\t\t\tcolor.y += average * weight;\t\t\t\t\t\ttotal.y += weight;\t\t\t\t\t}\t\t\t\t}\t\t\t\tgl_FragColor = vec4(color / total, 0.0, 1.0);\t\t\t}\t\t");
        gl.edgeWork2 = gl.edgeWork2 || new Shader(null, "\t\t\tuniform sampler2D texture;\t\t\tuniform vec2 delta;\t\t\tvarying vec2 texCoord;\t\t\t" + randomShaderFunc + "\t\t\tvoid main() {\t\t\t\tvec2 color = vec2(0.0);\t\t\t\tvec2 total = vec2(0.0);\t\t\t\t\t\t\t\t/* randomize the lookup values to hide the fixed number of samples */\t\t\t\tfloat offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\t\t\t\t\t\t\t\tfor (float t = -30.0; t <= 30.0; t++) {\t\t\t\t\tfloat percent = (t + offset - 0.5) / 30.0;\t\t\t\t\tfloat weight = 1.0 - abs(percent);\t\t\t\t\tvec2 sample = texture2D(texture, texCoord + delta * percent).xy;\t\t\t\t\tcolor.x += sample.x * weight;\t\t\t\t\ttotal.x += weight;\t\t\t\t\tif (abs(t) < 15.0) {\t\t\t\t\t\tweight = weight * 2.0 - 1.0;\t\t\t\t\t\tcolor.y += sample.y * weight;\t\t\t\t\t\ttotal.y += weight;\t\t\t\t\t}\t\t\t\t}\t\t\t\tfloat c = clamp(10000.0 * (color.y / total.y - color.x / total.x) + 0.5, 0.0, 1.0);\t\t\t\tgl_FragColor = vec4(c, c, c, 1.0);\t\t\t}\t\t");
        glfx.simpleShader.call(this, gl.edgeWork1, {
            delta: [a / this.width, 0]
        });
        glfx.simpleShader.call(this, gl.edgeWork2, {
            delta: [0, a / this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "film",
    param: [glfx.param("pixelSize", "float(0,10)", 0.5), glfx.param("amount", "float(0,1)", 0.2), glfx.param("opacity", "float(0,2)", 1), glfx.param("sCount", "int(0,2024)", 1024)],
    shaderCode: ["uniform sampler2D texture;\nvarying vec2 texCoord;\nuniform float time;\nuniform float opacity;\nuniform float sCount;\nuniform float amount;\nuniform float pixelSize;", glfx.helper.simplex_noise, "void main() {\n\tvec4 cTextureScreen = texture2D( texture, texCoord );\n\tfloat dx = texCoord.x * texCoord.y * time *  1000.0;\n\tvec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx * 100.0, 0.0, 1.0 );\n\tvec2 sc = vec2( sin( texCoord.y * sCount ), cos( texCoord.y * sCount ) );\n\tcResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * opacity;\n\tfloat xs = floor(gl_FragCoord.x / pixelSize);\n\tfloat ys = floor(gl_FragCoord.y / pixelSize);\n\tvec4 snow = vec4(snoise(vec2(xs * time, ys * time)) * amount);\n\tvec4 res = vec4( cResult, cTextureScreen.a -cTextureScreen.r);\n\tgl_FragColor = res + snow;\n}"].join("\n"),
    shader: function(a, h, d, g) {
        var b = glfx.filters.film;
        b.dirty && delete gl.film;
        gl.film = gl.film || new Shader(null, b.shaderCode);
        glfx.simpleShader.call(this, gl.film, {
            time: (this.now - this.startTime) / 1E3,
            amount: h || 0,
            pixelSize: isFinite(a) ? a : 10,
            opacity: d || 0,
            sCount: Math.min(2.5 * this.height, g) || 0,
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "hexagonalPixelate",
    param: [glfx.param("centerX", "float", 0.5), glfx.param("centerY", "float", 0.5), glfx.param("scale", "px(1,100)", 15)],
    ondrag: glfx.dragCenterPoint,
    shaderCode: "uniform sampler2D texture;\nuniform vec2 center;\nuniform float scale;\nuniform vec2 texSize;\nvarying vec2 texCoord;\nvoid main() {\n\tvec2 tex = (texCoord * texSize - center) / scale;\n\ttex.y /= 0.866025404;\n\ttex.x -= tex.y * 0.5;\n\t\n\tvec2 a;\n\tif (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) a = vec2(floor(tex.x), floor(tex.y));\n\telse a = vec2(ceil(tex.x), ceil(tex.y));\n\tvec2 b = vec2(ceil(tex.x), floor(tex.y));\n\tvec2 c = vec2(floor(tex.x), ceil(tex.y));\n\t\n\tvec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n\tvec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\n\tvec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\n\tvec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\n\t\n\tfloat alen = length(TEX - A);\n\tfloat blen = length(TEX - B);\n\tfloat clen = length(TEX - C);\n\t\n\tvec2 choice;\n\tif (alen < blen) {\n\t\tif (alen < clen) choice = a;\n\t\telse choice = c;\n\t} else {\n\t\tif (blen < clen) choice = b;\n\t\telse choice = c;\n\t}\n\t\n\tchoice.x += choice.y * 0.5;\n\tchoice.y *= 0.866025404;\n\tchoice *= scale / texSize;\n\tgl_FragColor = texture2D(texture, choice + center / texSize);\n}",
    shader: function(a, h, d) {
        var g = glfx.filters.hexagonalPixelate;
        g.dirty && delete gl.hexagonalPixelate;
        gl.hexagonalPixelate = gl.hexagonalPixelate || new Shader(null, g.shaderCode);
        glfx.simpleShader.call(this, gl.hexagonalPixelate, {
            center: [this.width * (1 - a), this.height * h],
            scale: d,
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "kaleidoscope",
    param: [glfx.param("angle", "radian", 1.1), glfx.param("sides", "int(1,25)", 3)],
    shaderCode: "uniform sampler2D texture;\nvarying vec2 texCoord;\nuniform float sides;\nuniform float angle;\nvoid main() {\n\tvec2 p = texCoord - 0.5;\n\tfloat r = length(p);\n\tfloat a = atan(p.y, p.x) + angle;\n\tfloat tau = 2.0 * 3.1416 ;\n\ta = mod(a, tau/sides);\n\ta = abs(a - tau/sides/2.) ;\n\tp = r * vec2(cos(a), sin(a));\n\tvec4 color = texture2D(texture, p + 0.5);\n\tgl_FragColor = color;\n}",
    shader: function(a,
                     h) {
        var d = glfx.filters.kaleidoscope;
        d.dirty && delete gl.kaleidoscope;
        gl.kaleidoscope = gl.kaleidoscope || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.kaleidoscope, {
            angle: a,
            sides: Math.round(h)
        });
        return this
    }
});
glfx.addFilter({
    type: "oldFilm",
    param: [glfx.param("sepia", "float", 0.7), glfx.param("noise", "float", 0.3), glfx.param("burn", "float", 0.3), glfx.param("scratch", "float", 0.3)],
    shaderCode: ["uniform vec2 ImageSize;\nuniform sampler2D Sample0;\nuniform float sepia;\nuniform float noise;\nuniform float burn;\nuniform float scratch;\nuniform float random;\nuniform float time;\nvarying vec2 texCoord;", glfx.helper.simplex_noise, "void main () {\n\tvec3 color = texture2D(Sample0, texCoord).xyz;\n\tcolor += color * burn;\n\tfloat average = (color.x + color.y + color.z) / 3.0;\n\tcolor.xyz += (average - color.xyz) * (1.0);\n\tfloat r = color.x;\n\tfloat g = color.y;\n\tfloat b = color.z;\n\tcolor.x = min(1.0, (r * (1.0 - (0.607 * sepia))) + (g * (0.769 * sepia)) + (b * (0.189 * sepia)));\n\tcolor.y = min(1.0, (r * 0.349 * sepia) + (g * (1.0 - (0.314 * sepia))) + (b * 0.168 * sepia));\n\tcolor.z = min(1.0, (r * 0.272 * sepia) + (g * 0.534 * sepia) + (b * (1.0 - (0.869 * sepia))));\n\tfloat coord = snoise(texCoord * vec2(1024.0 + random * 512.0, 1024.0 + random * 512.0)) * 0.5;\n\tcolor += coord * noise;\n\tif ( random < scratch ) {\n\t\tfloat dist = 1.0 / scratch;\n\t\tfloat d = distance(texCoord, vec2(random * dist, random * dist));\n\t\tif ( d < 0.4 ) {\n\t\t\tfloat xPeriod = 8.0;\n\t\t\tfloat yPeriod = 1.0;\n\t\t\tfloat pi = 3.141592;\n\t\t\tfloat phase = time;\n\t\t\tfloat turbulence = snoise(texCoord * 2.5);\n\t\t\tfloat vScratch = 0.5 + (sin(((texCoord.x * xPeriod + texCoord.y * yPeriod + turbulence)) * pi + phase) * 0.5);\n\t\t\tvScratch = clamp((vScratch * 10000.0) + 0.35, 0.0, 1.0);\n\t\t\tcolor.xyz *= vScratch;\n\t\t}\n\t}\n\tgl_FragColor.xyz = color;\n\tgl_FragColor.w = 1.0;\n}"].join("\n"),
    shader: function(a, h, d, g) {
        var b = glfx.filters.oldFilm;
        b.dirty && delete gl.oldFilm;
        gl.oldFilm = gl.oldFilm || new Shader(null, b.shaderCode);
        glfx.simpleShader.call(this, gl.oldFilm, {
            sepia: a,
            noise: h,
            burn: d,
            scratch: g,
            random: this.random,
            time: (this.now - this.startTime) / 1E3
        });
        return this
    }
});
glfx.addFilter({
    type: "popArt",
    param: [glfx.param("dividerValue", "float(0,1)", 1), glfx.param("gamma", "float(0,10)", 10), glfx.param("numColors", "float(0,256)", 256)],
    shaderCode: "\tuniform sampler2D texture;\n\tuniform float dividerValue;\n\tuniform float gamma;\n\tuniform float numColors;\n\tvarying vec2 texCoord;\n\tvoid main() {\n\t\tvec2 off = texCoord;\n\t\tif (texCoord.s > 0.5) {\n\t\t\toff.s = (off.s - 0.5) * 2.0;\n\t\t\tif (texCoord.t > 0.5) {\n\t\t\t\toff.t = (off.t - 0.5) * 2.0;\n\t\t\t} else {\n\t\t\t\toff.t *= 2.0;\n\t\t\t}\n\t\t} else {\n\t\t\tif (texCoord.t > 0.5) {\n\t\t\t\toff.s *= 2.0;\n\t\t\t\toff.t = (off.t - 0.5) * 2.0;\n\t\t\t} else {\n\t\t\t\toff.s *= 2.0;\n\t\t\t\toff.t *= 2.0;\n\t\t\t}\n\t\t}\n\t\tvec3 color = texture2D(texture, vec2(off)).rgb;\n\t\tif (texCoord.s > 0.5) {\n\t\t\tif (texCoord.t < 0.5) {\n\t\t\t} else {\n\t\t\t\tcolor.g *= 0.25;\n\t\t\t}\n\t\t} else {\n\t\t\tif (texCoord.t > 0.5) {\n\t\t\t\tcolor.b *= 0.25;\n\t\t\t} else {\n\t\t\t\tcolor.r *= 0.25;\n\t\t\t}\n\t\t}\n\t\tvec4 c = vec4(0.0);\n\t\tif (texCoord.x < dividerValue) {\n\t\t\tvec3 x = color;\n\t\t\tx = pow(x, vec3(gamma, gamma, gamma));\n\t\t\tx = x * numColors;\n\t\t\tx = floor(x);\n\t\t\tx = x / numColors;\n\t\t\tx = pow(x, vec3(1.0/gamma));\n\t\t\tc = vec4(x, 1.0);\n\t\t} else {\n\t\t\tc = texture2D(texture, texCoord);\n\t\t}\n\t\tgl_FragColor.a = 1.0;\n\t\tgl_FragColor.rgb = c.rgb * 1.5;\n\t}",
    shader: function(a,
                     h, d) {
        var g = glfx.filters.popArt;
        g.dirty && delete gl.popArt;
        gl.popArt = gl.popArt || new Shader(null, g.shaderCode);
        glfx.simpleShader.call(this, gl.popArt, {
            numColors: d || 12,
            dividerValue: a || 1,
            gamma: h || 1.2
        });
        return this
    }
});
glfx.addFilter({
    type: "RGBShift",
    param: [glfx.param("angle", "radian", 1.1), glfx.param("amount", "float(0,0.1)", 0.05)],
    shaderCode: "uniform sampler2D texture;\nuniform vec2 texSize;\nvarying vec2 texCoord;\nuniform float time;\nuniform float amount;\nuniform float angle;\nvoid main() {\nvec2 uv = gl_FragCoord.xy / texSize.xy;\n\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\tfloat value = 0.0;\n    vec3 col;\n    col.r = texture2D(texture, vec2(uv.x + value, uv.y) + offset).r;\n    col.g = texture2D(texture, uv).g;\n    col.b = texture2D(texture, vec2(uv.x - value, uv.y) - offset).b;\n    gl_FragColor = vec4(col,1.0);\n}",
    shader: function(a,
                     h) {
        var d = glfx.filters.RGBShift;
        d.dirty && delete gl.RGBShift;
        gl.RGBShift = gl.RGBShift || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.RGBShift, {
            texSize: [this.width, this.height],
            time: (this.now - this.startTime) / 1E3,
            angle: a,
            amount: h
        });
        return this
    }
});
(function(a, h) {
    if ("object" === typeof exports) h(a.require("seriously"));
    else if ("function" === typeof a.define && a.define.amd) a.define(["seriously"], h);
    else {
        var d = a.Seriously;
        d || (d = {
            plugin: function(a, b) {
                this[a] = b
            }
        });
        h(d)
    }
})(this, function(a, h) {
    a.plugin("scanlines", {
        shader: function(a, g) {
            g.fragment = "#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform float lines;\nuniform float width;\nuniform float intensity;\n\nvoid main(void) {\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tfloat darken = 2.0 * abs( fract(vTexCoord.y * lines) - 0.5);\n\tdarken = clamp(darken - width + 0.5, 0.0, 1.0);\n\tdarken = 1.0 - ((1.0 - darken) * intensity);\n\tgl_FragColor = vec4(pixel.rgb * darken, 1.0);\n}\n";
            return g
        },
        inPlace: !0,
        inputs: {
            source: {
                type: "image",
                uniform: "source"
            },
            lines: {
                type: "number",
                uniform: "lines",
                defaultValue: 60
            },
            size: {
                type: "number",
                uniform: "size",
                defaultValue: 0.2,
                min: 0,
                max: 1
            },
            intensity: {
                type: "number",
                uniform: "intensity",
                defaultValue: 0.1,
                min: 0,
                max: 1
            }
        },
        title: "Scan Lines",
        description: ""
    })
});
glfx.addFilter({
    type: "tron",
    param: [glfx.param("amount", "float(0,2)", 0.2), glfx.param("opacity", "float(0,1)", 1), glfx.param("colorIntensity", "float(1,100)", 5), glfx.param("alphaCutoff", "float(0,0.025)", 0), glfx.param("variation", "float(0,6.28)", 3), glfx.param("distance", "float(0,50)", 3), glfx.param("speed", "float(0,10)", 3)],
    shaderCode: "uniform sampler2D texture0;\nuniform vec2 texSize;\nvarying vec2 texCoord;\nuniform float time;\nuniform float alphaCutoff;\nuniform float colorIntensity;\nuniform float amount;\nuniform float opacity;\nuniform float speed;\nuniform float distance;\nuniform float variation;\nfloat luma(vec2 p, float dx, float dy) {\n\tvec4 c = texture2D(texture0, (p + vec2(dx * amount, dy * amount)) / texSize);\n\treturn 0.212656 * c.r + 0.715158 * c.g + 0.072186 * c.b;\n}\nvoid main(void) {\n\tvec2 wave = gl_FragCoord.xy;\n\twave.x = wave.x - 1.0 * sin(wave.y * variation + time * speed) * distance;\n  \twave.y = wave.y + sin(wave.y * variation + time * (speed * 0.66)) * distance;\n\tfloat t1 = luma(wave, -1.0, -1.0);\n\tfloat t3 = luma(wave, -1.0, 1.0);\n\tfloat t4 = luma(wave, 1.0, -1.0);\n\tfloat t6 = luma(wave, 1.0, 1.0);\n\tfloat H = -t1 - luma(wave, -1.0, 0.0) * 2.0 - t3 + t4 + luma(wave, 1.0, 0.0) * 2.0 + t6;\n\tfloat V = -t1 - luma(wave, 0.0, -1.0) * 2.0 - t4 + t3 + luma(wave, 0.0, 1.0) * 2.0 + t6;\n\tfloat sobel = H * H + V * V;\n\tvec2 p = gl_FragCoord.xy / texSize;\n\tvec4 edgeGradient = vec4(p.x * sobel, p.y * sobel, sobel, 1.0);\n\tvec4 original = texture2D(texture0, p);\n\tif (sobel < alphaCutoff) {\n\t\tedgeGradient *= 1.0 / colorIntensity;\n\t}\n\tif (amount < 0.0) {\n\t\tgl_FragColor = original * opacity - edgeGradient * colorIntensity;\n\t} else {\n\t\tgl_FragColor = original * opacity + edgeGradient * colorIntensity;\n\t}\n}",
    shader: function(a, h, d, g, b, e, f) {
        var c = glfx.filters.tron;
        c.dirty && delete gl.tron;
        gl.tron = gl.tron || new Shader(null, c.shaderCode);
        glfx.simpleShader.call(this, gl.tron, {
            time: (this.now - this.startTime) / 1E3,
            amount: a || 0,
            opacity: h || 0,
            alphaCutoff: g || 0,
            colorIntensity: d || 0,
            variation: b || 0,
            distance: e || 0,
            speed: f || 0,
            texSize: [this.width, this.height]
        });
        return this
    }
});
(function(a, h) {
    if ("object" === typeof exports) h(a.require("seriously"));
    else if ("function" === typeof a.define && a.define.amd) a.define(["seriously"], h);
    else {
        var d = a.Seriously;
        d || (d = {
            plugin: function(a, b) {
                this[a] = b
            }
        });
        h(d)
    }
})(this, function(a, h) {
    a.plugin("tvglitch", function() {
        return {
            initialize: function(d) {
                var g, b, e, f = this.gl,
                    c;
                this.lastHeight = this.height;
                c = [];
                b = 0.3 - 0.02;
                e = 0.8 - 0.2;
                for (g = 0; 20 > g; g++) c.push(2 * Math.random() - 1), c.push(Math.random() * e + 0.2), c.push(Math.random() * b + 0.02), c.push(0.2 * Math.random());
                this.particleBuffer = f.createBuffer();
                f.bindBuffer(f.ARRAY_BUFFER, this.particleBuffer);
                f.bufferData(f.ARRAY_BUFFER, new Float32Array(c), f.STATIC_DRAW);
                this.particleBuffer.itemSize = 4;
                this.particleBuffer.numItems = 20;
                this.particleShader = new a.util.ShaderProgram(f, "#ifdef GL_ES\nprecision mediump float;\n#endif \n\nattribute vec4 particle;\n\nuniform float time;\nuniform float height;\n\nvarying float intensity;\n\nvoid main(void) {\n\tfloat y = particle.x + time * particle.y;\n\ty = fract((y + 1.0) / 2.0) * 4.0 - 2.0;\n\tintensity = particle.w;\n\tgl_Position = vec4(0.0, -y , 1.0, 2.0);\n\tgl_PointSize = height * particle.z;\n}\n", "#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying float intensity;\n\nvoid main(void) {\n\tgl_FragColor = vec4(1.0);\n\tgl_FragColor.a = 2.0 * intensity * (1.0 - abs(gl_PointCoord.y - 0.5));\n}\n");
                this.particleFrameBuffer = new a.util.FrameBuffer(f, 1, this.height / 2);
                d()
            },
            shader: function(d, g) {
                g.fragment = "#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\n#define HardLight(top, bottom)  (1.0 - 2.0 * (1.0 - top) * (1.0 - bottom))\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform sampler2D particles;\nuniform float time;\nuniform float scanlines;\nuniform float lineSync;\nuniform float lineHeight;\nuniform float distortion;\nuniform float vsync;\nuniform float bars;\nuniform float frameSharpness;\nuniform float frameShape;\nuniform float frameLimit;\nuniform vec4 frameColor;\n\n" + a.util.shader.noiseHelpers + a.util.shader.snoise2d + "\nvoid main(void) {\n\tvec2 texCoord = vTexCoord;\n\tfloat drandom = snoise(vec2(time * 50.0, texCoord.y /lineHeight));\n\tfloat distortAmount = distortion * (drandom - 0.25) * 0.5;\n\tvec4 particleOffset = texture2D(particles, vec2(0.0, texCoord.y));\n\tdistortAmount -= lineSync * (2.0 * particleOffset.a - 0.5);\n\ttexCoord.x -= distortAmount;\n\ttexCoord.x = mod(texCoord.x, 1.0);\n\tfloat roll;\n\tif (vsync != 0.0) {\n\t\troll = fract(time / vsync);\n\t\ttexCoord.y = mod(texCoord.y - roll, 1.0);\n\t}\n\tvec4 pixel = texture2D(source, texCoord);\n\tfloat barsAmount = particleOffset.r;\n\tif (barsAmount > 0.0) {\n\t\tpixel = vec4(pixel.r + bars * barsAmount,pixel.g + bars * barsAmount,pixel.b + bars * barsAmount,pixel.a);\n\t}\n\tif (mod(texCoord.y / lineHeight, 2.0) < 1.0 ) {\n\t\tpixel.rgb *= (1.0 - scanlines);\n\t}\n\tfloat f = (1.0 - vPosition.x * vPosition.x) * (1.0 - vPosition.y * vPosition.y);\n\tfloat frame = clamp( frameSharpness * (pow(f, frameShape) - frameLimit), 0.0, 1.0);\n\tgl_FragColor = mix(frameColor, pixel, frame); //vec4(vec3(particleOffset), 1.0);\n}\n";
                return g
            },
            draw: function(a, g, b, e, f) {
                var c = this.lastTime !== this.inputs.time,
                    h, m = this.gl;
                this.lastHeight !== this.height && (this.lastHeight = this.height, c = !0);
                b.lineHeight = 1 / this.height;
                this.inputs.verticalSync ? (h = 0.2 / this.inputs.verticalSync, b.vsync = h) : (h = 1, b.vsync = 0);
                b.time = this.inputs.time % (1E4 * h) / 1E3;
                b.distortion = Math.random() * this.inputs.distortion;
                c && (this.inputs.lineSync || this.inputs.bars) && (this.particleShader.useProgram(), m.viewport(0, 0, 1, this.height / 2), m.bindFramebuffer(m.FRAMEBUFFER, this.particleFrameBuffer.frameBuffer),
                    m.clear(m.COLOR_BUFFER_BIT | m.DEPTH_BUFFER_BIT), m.enableVertexAttribArray(this.particleShader.location_particle), m.bindBuffer(m.ARRAY_BUFFER, this.particleBuffer), m.vertexAttribPointer(this.particleShader.location_particle, this.particleBuffer.itemSize, m.FLOAT, !1, 0, 0), m.enable(m.BLEND), m.blendFunc(m.SRC_ALPHA, m.ONE), this.particleShader.set_time(b.time), this.particleShader.set_height(this.height), m.drawArrays(m.POINTS, 0, 20), this.lastTime = this.inputs.time);
                b.particles = this.particleFrameBuffer.texture;
                f(a, g, b, e)
            },
            destroy: function() {
                delete this.particleBuffer;
                this.particleFrameBuffer && this.particleFrameBuffer.destroy()
            },
            inPlace: !1,
            inputs: {
                source: {
                    type: "image",
                    uniform: "source",
                    shaderDirty: !1
                },
                time: {
                    type: "number",
                    defaultValue: 0
                },
                distortion: {
                    type: "number",
                    defaultValue: 0.1,
                    min: 0,
                    max: 1
                },
                verticalSync: {
                    type: "number",
                    defaultValue: 0.1,
                    min: 0,
                    max: 1
                },
                lineSync: {
                    type: "number",
                    uniform: "lineSync",
                    defaultValue: 0.2,
                    min: 0,
                    max: 1
                },
                scanlines: {
                    type: "number",
                    uniform: "scanlines",
                    defaultValue: 0.3,
                    min: 0,
                    max: 1
                },
                bars: {
                    type: "number",
                    uniform: "bars",
                    defaultValue: 0,
                    min: 0,
                    max: 1
                },
                frameShape: {
                    type: "number",
                    uniform: "frameShape",
                    min: 0,
                    max: 2,
                    defaultValue: 0.27
                },
                frameLimit: {
                    type: "number",
                    uniform: "frameLimit",
                    min: -1,
                    max: 1,
                    defaultValue: 0.34
                },
                frameSharpness: {
                    type: "number",
                    uniform: "frameSharpness",
                    min: 0,
                    max: 40,
                    defaultValue: 8.4
                },
                frameColor: {
                    type: "color",
                    uniform: "frameColor",
                    defaultValue: [0, 0, 0, 1]
                }
            },
            description: "",
            title: "TV Glitch"
        }
    }())
});
glfx.addFilter({
    type: "vignette",
    param: [glfx.param("size", "float", 0.5), glfx.param("blur", "float", 1)],
    shaderCode: "uniform sampler2D texture;\nuniform float size;\nuniform float blur;\nvarying vec2 texCoord;\nvoid main() {\n\tvec4 color = texture2D(texture, texCoord);\n\t\n\tfloat dist = distance(texCoord, vec2(0.5, 0.5));\n\tcolor.rgb *= smoothstep(0.8, blur * 0.799, dist * (size + blur));\n\t\n\tgl_FragColor = color;\n}",
    shader: function(a, h) {
        var d = glfx.filters.vignette;
        d.dirty && delete gl.vignette;
        gl.vignette = gl.vignette || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.vignette, {
            size: sketch.util.clamp(0, a, 1),
            blur: sketch.util.clamp(0, 1 - h, 1)
        });
        return this
    }
});
glfx.addFilter({
    type: "lensBlur",
    param: [glfx.param("radius", "px", 10), glfx.param("brightness", "float(-1,1)", 0.75), glfx.param("angle", "radian", 0)],
    shader: function(a, h, d) {
        gl.lensBlurPrePass = gl.lensBlurPrePass || new Shader(null, "\t\t\tuniform sampler2D texture;\t\t\tuniform float power;\t\t\tvarying vec2 texCoord;\t\t\tvoid main() {\t\t\t\tvec4 color = texture2D(texture, texCoord);\t\t\t\tcolor = pow(color, vec4(power));\t\t\t\tgl_FragColor = vec4(color);\t\t\t}\t\t");
        var g = "\t\t\tuniform sampler2D texture0;\t\t\tuniform sampler2D texture1;\t\t\tuniform vec2 delta0;\t\t\tuniform vec2 delta1;\t\t\tuniform float power;\t\t\tvarying vec2 texCoord;\t\t\t" + randomShaderFunc + "\t\t\tvec4 sample(vec2 delta) {\t\t\t\t/* randomize the lookup values to hide the fixed number of samples */\t\t\t\tfloat offset = random(vec3(delta, 151.7182), 0.0);\t\t\t\t\t\t\t\tvec4 color = vec4(0.0);\t\t\t\tfloat total = 0.0;\t\t\t\tfor (float t = 0.0; t <= 30.0; t++) {\t\t\t\t\tfloat percent = (t + offset) / 30.0;\t\t\t\t\tcolor += texture2D(texture0, texCoord + delta * percent);\t\t\t\t\ttotal += 1.0;\t\t\t\t}\t\t\t\treturn color / total;\t\t\t}\t\t";
        gl.lensBlur0 = gl.lensBlur0 || new Shader(null, g + "\t\t\tvoid main() {\t\t\t\tgl_FragColor = sample(delta0);\t\t\t}\t\t");
        gl.lensBlur1 = gl.lensBlur1 || new Shader(null, g + "\t\t\tvoid main() {\t\t\t\tgl_FragColor = (sample(delta0) + sample(delta1)) * 0.5;\t\t\t}\t\t");
        gl.lensBlur2 = gl.lensBlur2 || (new Shader(null, g + "\t\t\tvoid main() {\t\t\t\tvec4 color = (sample(delta0) + 2.0 * texture2D(texture1, texCoord)) / 3.0;\t\t\t\tgl_FragColor = pow(color, vec4(power));\t\t\t}\t\t")).textures({
            texture1: 1
        });
        for (var g = [], b = 0; 3 > b; b++) {
            var e = d + 2 * b * Math.PI / 3;
            g.push([a * Math.sin(e) / this.width, a * Math.cos(e) / this.height])
        }
        a = Math.pow(10, sketch.util.clamp(-1, h, 1));
        glfx.simpleShader.call(this, gl.lensBlurPrePass, {
            power: a
        });
        this._.extraTexture.ensureFormat(this._.texture);
        glfx.simpleShader.call(this, gl.lensBlur0, {
            delta0: g[0]
        }, this._.texture, this._.extraTexture);
        glfx.simpleShader.call(this, gl.lensBlur1, {
            delta0: g[1],
            delta1: g[2]
        }, this._.extraTexture, this._.extraTexture);
        glfx.simpleShader.call(this, gl.lensBlur0, {
            delta0: g[1]
        });
        this._.extraTexture.use(1);
        glfx.simpleShader.call(this, gl.lensBlur2, {
            power: 1 / a,
            delta0: g[2]
        });
        return this
    }
});
glfx.addFilter({
    type: "tiltShift",
    param: [glfx.param("startX", "float", 0.1), glfx.param("startY", "float", 0.1), glfx.param("endX", "float", 0.9), glfx.param("endY", "float", 0.9), glfx.param("blurRadius", "px(0,100)", 15), glfx.param("gradientRadius", "px(0,width)", 200)],
    shaderCode: ["uniform sampler2D texture;\nuniform float blurRadius;\nuniform float gradientRadius;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\nvarying vec2 texCoord;", randomShaderFunc, "void main() {\n\tvec4 color = vec4(0.0);\n\tfloat total = 0.0;\n\t\n\t/* randomize the lookup values to hide the fixed number of samples */\n\tfloat offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\t\n\tvec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n\tfloat radius = smoothstep(0.0, 1.0, abs(dot(texCoord * texSize - start, normal)) / gradientRadius) * blurRadius;\n\tfor (float t = -30.0; t <= 30.0; t++) {\n\t\tfloat percent = (t + offset - 0.5) / 30.0;\n\t\tfloat weight = 1.0 - abs(percent);\n\t\tvec4 sample = texture2D(texture, texCoord + delta / texSize * percent * radius);\n\t\t\n\t\t/* switch to pre-multiplied alpha to correctly blur transparent images */\n\t\tsample.rgb *= sample.a;\n\t\t\n\t\tcolor += sample * weight;\n\t\ttotal += weight;\n\t}\n\t\n\tgl_FragColor = color / total;\n\t\n\t/* switch back from pre-multiplied alpha */\n\tgl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}"].join("\n"),
    shader: function(a, h, d, g, b, e) {
        gl.tiltShift = gl.tiltShift || new Shader(null, glfx.filters.tiltShift.shaderCode);
        a *= this.width;
        h *= this.height;
        d *= this.width;
        var f = g * this.height,
            c = d - a;
        g -= h;
        var k = Math.sqrt(c * c + g * g);
        glfx.simpleShader.call(this, gl.tiltShift, {
            blurRadius: b,
            gradientRadius: e,
            start: [a, h],
            end: [d, f],
            delta: [-g / k, c / k],
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "triangleBlur",
    param: [glfx.param("radiusX", "px(0,250)", 50), glfx.param("radiusY", "px(0,250)", 50)],
    shaderCode: ["uniform sampler2D texture;\nuniform vec2 delta;\nvarying vec2 texCoord;", randomShaderFunc, "void main() {\n\tvec4 color = vec4(0.0);\n\tfloat total = 0.0;\n\t\n\t/* randomize the lookup values to hide the fixed number of samples */\n\tfloat offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\t\n\tfor (float t = -30.0; t <= 30.0; t++) {\n\t\tfloat percent = (t + offset - 0.5) / 30.0;\n\t\tfloat weight = 1.0 - abs(percent);\n\t\tvec4 sample = texture2D(texture, texCoord + delta * percent);\n\t\t\n\t\t/* switch to pre-multiplied alpha to correctly blur transparent images */\n\t\tsample.rgb *= sample.a;\n\t\t\n\t\tcolor += sample * weight;\n\t\ttotal += weight;\n\t}\n\t\n\tgl_FragColor = color / total;\n\t/* switch back from pre-multiplied alpha */\n\tgl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}"].join("\n"),
    shader: function(a, h) {
        var d = glfx.filters.triangleBlur;
        d.dirty && delete gl.triangleBlur;
        gl.triangleBlur = gl.triangleBlur || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.triangleBlur, {
            delta: [a / this.width, 0]
        });
        glfx.simpleShader.call(this, gl.triangleBlur, {
            delta: [0, (h || a) / this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "zoomBlur",
    param: [glfx.param("centerX", "float", 0.5), glfx.param("centerY", "float", 0.5), glfx.param("strength", "float", 0.3)],
    ondrag: glfx.dragCenterPoint,
    shader: function(a, h, d) {
        gl.zoomBlur = gl.zoomBlur || new Shader(null, "\t\t\tuniform sampler2D texture;\t\t\tuniform vec2 center;\t\t\tuniform float strength;\t\t\tuniform vec2 texSize;\t\t\tvarying vec2 texCoord;\t\t\t" + randomShaderFunc + "\t\t\tvoid main() {\t\t\t\tvec4 color = vec4(0.0);\t\t\t\tfloat total = 0.0;\t\t\t\tvec2 toCenter = center - texCoord * texSize;\t\t\t\t\t\t\t\t/* randomize the lookup values to hide the fixed number of samples */\t\t\t\tfloat offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\t\t\t\t\t\t\t\tfor (float t = 0.0; t <= 40.0; t++) {\t\t\t\t\tfloat percent = (t + offset) / 40.0;\t\t\t\t\tfloat weight = 4.0 * (percent - percent * percent);\t\t\t\t\tvec4 sample = texture2D(texture, texCoord + toCenter * percent * strength / texSize);\t\t\t\t\t\t\t\t\t\t/* switch to pre-multiplied alpha to correctly blur transparent images */\t\t\t\t\tsample.rgb *= sample.a;\t\t\t\t\t\t\t\t\t\tcolor += sample * weight;\t\t\t\t\ttotal += weight;\t\t\t\t}\t\t\t\t\t\t\t\tgl_FragColor = color / total;\t\t\t\t\t\t\t\t/* switch back from pre-multiplied alpha */\t\t\t\tgl_FragColor.rgb /= gl_FragColor.a + 0.00001;\t\t\t}\t\t");
        glfx.simpleShader.call(this, gl.zoomBlur, {
            center: [this.width * (1 - a), this.height * h],
            strength: d,
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "bleachBypass",
    param: [glfx.param("opacity", "float(0,2)", 1)],
    shaderCode: "uniform sampler2D texture;\nvarying vec2 texCoord;\nuniform float opacity;\nvoid main() {\n\tvec4 base = texture2D( texture, texCoord );\n\tvec3 lumCoeff = vec3( 0.25, 0.65, 0.1 );\n\tfloat lum = dot( lumCoeff, base.rgb );\n\tvec3 blend = vec3( lum );\n\tfloat L = min( 1.0, max( 0.0, 10.0 * ( lum - 0.45 ) ) );\n\tvec3 result1 = 2.0 * base.rgb * blend;\n\tvec3 result2 = 1.0 - 2.0 * ( 1.0 - blend ) * ( 1.0 - base.rgb );\n\tvec3 newColor = mix( result1, result2, L );\n\tfloat A2 = opacity * base.a;\n\tvec3 mixRGB = A2 * newColor.rgb;\n\tmixRGB += ( ( 1.0 - A2 ) * base.rgb );\n\tgl_FragColor = vec4( mixRGB, base.a );\n}",
    shader: function(a) {
        var h = glfx.filters.bleachBypass;
        h.dirty && delete gl.bleachBypass;
        gl.bleachBypass = gl.bleachBypass || new Shader(null, h.shaderCode);
        glfx.simpleShader.call(this, gl.bleachBypass, {
            opacity: a
        });
        return this
    }
});
glfx.addFilter({
    type: "brightnessContrast",
    param: [glfx.param("brightness", "float(-1,1)", 0), glfx.param("contrast", "float(-1,1)", 0)],
    shaderCode: "uniform sampler2D texture;\nuniform float brightness;\nuniform float contrast;\nvarying vec2 texCoord;\nvoid main() {\n\tvec4 color = texture2D(texture, texCoord);\n\tcolor.rgb += brightness;\n\tif (contrast > 0.0) {\n\t\tcolor.rgb = (color.rgb - 0.5) / (1.0 - contrast) + 0.5;\n\t} else {\n\t\tcolor.rgb = (color.rgb - 0.5) * (1.0 + contrast) + 0.5;\n\t}\n\tgl_FragColor = color;\n}",
    shader: function(a,
                     h) {
        var d = glfx.filters.brightnessContrast;
        d.dirty && delete gl.brightnessContrast;
        gl.brightnessContrast = gl.brightnessContrast || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.brightnessContrast, {
            brightness: sketch.util.clamp(-1, a, 1),
            contrast: sketch.util.clamp(-1, h, 1)
        });
        return this
    }
});
glfx.addFilter({
    type: "colorify",
    param: [glfx.param("amount", "float(0,2)", 0.2), glfx.param("color", "color", [255, 0, 0])],
    shaderCode: "uniform vec3 color;\nuniform float amount;\nuniform sampler2D texture;\nvarying vec2 texCoord;\nvoid main() {\nvec4 point = texture2D( texture, texCoord );\nvec3 luma = vec3( 0.299, 0.587, 0.114 );\nfloat v = dot( point.xyz, luma );\ngl_FragColor = vec4( v * color, point.w ) * amount + (1.0 - amount) * point;\n}",
    shader: function(a, h) {
        var d = glfx.filters.colorify;
        d.dirty && delete gl.colorify;
        gl.colorify = gl.colorify || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.colorify, {
            amount: a,
            color: h
        });
        return this
    }
});
glfx.addFilter({
    type: "colorIsolation",
    param: [glfx.param("hueStart", "int(0,360)", 180), glfx.param("hueEnd", "int(0,360)", 260)],
    shaderCode: ["uniform sampler2D texture;\nuniform float hueStart;\nuniform float hueEnd;\nvarying vec2 texCoord;", glfx.helper.RGB_HSL, "void main(void) {\n\tvec3 color = texture2D(texture, texCoord).rgb;\n\tvec3 hsl = RGB_HSL(color);\n\tfloat gray = 0.299 * color.r + 0.587 * color.g + 0.114 * color.b;\n\tgl_FragColor.a = 1.0;\n\tif (hsl.x >= hueStart && hsl.x <= hueEnd) {\n\t\tgl_FragColor.rgb = color;\n\t} else {\n\t\tgl_FragColor.rgb = vec3(gray, gray, gray);\n\t}\n}"].join("\n"),
    shader: function(a,
                     h) {
        var d = glfx.filters.colorIsolation;
        d.dirty && delete gl.colorIsolation;
        gl.colorIsolation = gl.colorIsolation || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.colorIsolation, {
            hueEnd: (h || 1E-4) / 360,
            hueStart: (a || 1E-4) / 360
        });
        return this
    }
});
(function() {
    var a = "bgy black-white blues color-negative funky-contrast googley high-contrast-bw hue-minus-60 hue-plus-60 hue-plus-180 infrared inverse monochrome nightvision posterize radioactive red-to-cyan saturated sepia thermal".split(" ");
    glfx.addFilter({
        type: "colormap",
        textures: a,
        construct: function() {
            for (var h = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAETklEQVRIS22TW2gcdRTGv5nd2czeN8mmm1vVFR/WxocYKVEQrII3qC+2FaSKbcEqpoJCKdRKIFgQfOhDH7y8BHwVoQ/iW60taY1tUxtSrbdoQpo0lybbzWZnd2Zvf8/5z+zsrpuFgWW+Pd/5fuecVSDeEfjmNnB8ErgD+gToCUFVYlDQgUrmEWDsCnDmb3rfRk+Q3kegkK4qnShfDwIf/AhMGKT57VpESW+nh/TP14GPpoC0KmuBsOvN9aVDpI0vOt4h8g7LWtZUJY7iwDlgptTgTbkcb6n7vgYKmpPb9uZaBZ3wqF0wy1+RpstcnFttqFWVLnqX9ArMMbgT3gGXAdQ4rOo4UPW1gNcbfOk2qIN3UKMuGaBQOtsUjoda8/bSb4zSGSdcMzjDeak+V/zMGWoNvO7t14eQ3nrPWRgNvNGbaiOdr2N5ec+24BqxxXrfJw1hUd9ah9yax2nuD+/Bevqgs5XmyXrJINp1BEtLw04DDshbI3B6NE8fNTiKhblU08Z5qAwejL6EttAgFucH3Wti6Bp4LPE2quS8cocA5Nbq4Lo2gHBiP4rmItZWXmsBD7fvg6YnYRq3sLHxoXNNdjYeanvPCCoVA4XNn6CoyqNCgX2uDM5bC4SeQSD6NKzCLO6tHW46KRv8MOAJwdy6gUxmtB5OgvdK8JK1hnxmArnCeNPGg9EXCfxxWMYfMLIXYJV+cM+Vw9XAza3rMPNTKJZvyKFwrjZtFyKJAxI8n7lE2r8EMisvlWsbwfPZCZSrKxBiwx1qHXwSpjWDCumKV90rag0CgWEE258n8DkYmxdQrixRg3nZQOOTir8BVesk8Gnkc5PUYBkQWdmA9VjvMZRLaRQyV2AVb9sNFIU2Hoc//Bz8kSdh5WfJ+zxpqzKgl7Yrh7rjCKDqcqgF4xppq6iSrnkehs+TRLTnLRStuyjcvwyr/Jesr4oV6J4hhGKvwBfcRRv/DfnsJcq9gopgfRUB77OIdb9L38swN3+GaU7LvlVZvwbFr50QAf9uBDteIPB55Am8VFmU4dnA732KwA8SeJzC3ZTgrNkBVhHUXibwkRZwDiCoQWfHp9DDu1vAuVaIe+jt+57AfeT9C4FfdcE5nBDr2JmkK7CWCXyiCZxrebv9D00T+O8EfrEJnGv56d05ReDXCPxmE7jUcR/KA8msKBYWYGQuEvi8C2YHoAYPUoPcDPJbl5vABbhBGj39V+V/ybJ+dXU7HDfIIJE4T950TdW7zlDX5OTZG9ikAX2LQo7B61uR9RSO9WjgC/qb/Ck3Zg+17g3kEGz7ZBtw2xswEPCNbgsOZNHdXYES1s+KUmWhBdw2yJHBWAM4BZfg3CALXTehVE86OkPZW2Nw1lMpFfP/HPsfeJo01g3sO7AD35171T3HRvBIpIjjJ1M4/fHwtuBDT/gwenoI+/f2OwO1L6IG/uahPpwaG8RjSa87cAHubYOfODWAoyMp/AcbUr3EZfSLKAAAAABJRU5ErkJggg== data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAAcklEQVRIS+2VwQ7AIAhD4f8/GiUZxjBK3DjswEg8vbRiJcpEJHO1Lf4D+HACRISY9Q7iqnDVaiH/xdEEHBuAA2R6Y6jBCt+1kf+N+wAeG7gAMr1nvsEKj7S7P+QWwGuDK4BMj5g1WOHV15vn5r1/ge4BDJuRXu/4rz6bAAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAAeklEQVRIS2NkYGD4D8RYwX8GYQYZ4Yu4pBmevGVk4GSdiFP++28mBkaGDpzyIPMZGd7SVJ6ZUROn+X//swDtHw2A0RQwmgVGy4DRQnAk1wL/g3GWAf/+MzMwMc7EU00xAquReTjl//1nBOo/gkceZP5fGssL4DGfiQEAQpWPHrbb0F0AAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAABbElEQVRIS+2TvU4CQRDHZwGNNja+iU9oiImFiTZamegj2EDQeKAJH4FGVCz8iIlUEhotFBG4HX+7d8DhC1yhkwx7e7+dY+Y/s0axiYg08TK+Kcrv3FSeZMy2hZ/j+QUqYvXY86ZRz7d+xVt9SXCFO5v/h9VsqtxoP1QbF1gxIoc8d5MC6KOECX5A8r0kt0cy4V2L2DLrNmy4EP8MR0AEcjyPu+9NTREgTW50Z+jbcU2CNdYzCikkEwwf/K7N+xpeooDSAt/3uyviq3gR7iZhVqBtx9xKVawU/aTMJ0Dtcqrc6Manz6aTFWngF3Gh0y69Du59go7X8QoFuDOua87ePvb8eptDwIxKgJ/AZwIMLv3jTW5M/EQCE8LdzEWmX2upcsqJBLijEY1Vilty95m7HRfR7UcT0KFrjRUE4FwtI7Mx7r3vRgLQ3TqrG/NT+HccPw4DVyZ8BB9JgHQFzo6mAsh6qvxfgP8J+ONX4Adw0T2ZvsIGMgAAAABJRU5ErkJggg== data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAFIklEQVRISy2VyW8cRRTGv+q9p6vtWew4Hs/m8Y6dsd3eZmwCSUjuRBFCkTjkwok7/wpnJMQBLogDnBAIFBQWkUgBQhSQyCEocgyOkYCIKG5+PdjWN6+6vlre+6reKyMp9/hJwQRYl6OL8jRQqCUFMjpULF9l+qbAOu1zcNtws0P+VyWyOg1aipSBPZUYF6tD2+iGRlTRpKpaABk7bTO2B6Zou+YzjZqqGif84LiqDfoX4SewpeAHeMaC53KrnadW28epZli7CsbTIyXGVx1flvNQ/aeBsicBfMC+vtqnKirlwj9p5VjMl9aeGHX/FV4K/zzlgSONekaTrtG66+gCE3eOQy0882WeHqnkeaqBpuspcwOdNYE280BdYP56IOtFqgepprGZGyFeSasmRJCSzOObrG3VCCpaDAnOSbVlUi07VpO03UfXVfYRz69qOayp71W1DjcPxl0E2L+jMms2Q6sVxg28VBmYdkJV6B/bP1Lqumr4gXo+AuDfmodvXqgEf1uPRrHSFKe8SozbtHugw3ccFAKUnTzioww5FTtaDz2dDwJth6FmAwS4+1g28jXuO2phN8JAe3AZtsM48/1DjcSxpqJIMyALY+1EMc5EakQIcOtHlaNEzYgA0hq8ZY1US9jTWPPtNxqDb0WpehYBkopWac/CjTEnvPGTxlmzydqrFgESq7UkVZvvMvtUrh+qgs9NsJaEGliESPDNhirh79TnViOhmM/t5sh3Em6CNWolRmyLAPNBHgZGE4HLKTrKmPwCkzexM1jz5YEiFm3BF8jYZJf+NfraBf/pvko20qyN1Q08bdiStvhexjbSWObje0pxfA4spym81bod0Tzt0wRjPrypCn3z4IxNNajVhnYajDHGvH9HE0nEeEQFgwrpUxtRiz1G2dN790B16zPfQyBf/WqglVqkVpUbwPfo26HGCXSWoDMrDapGi6AB4ppBgFdO5SLwJpgOXa0S5FmCK4SYSTnhr/6gQBS3wdECAfbgBwTeg2sjhvnid/gIVWOthD68r03aS6ABzCf3JYLLCCbDrnF7egQ+VwiQjsh8dHvI7xDwFn2bJ0J1GDMU4IO7w/X3WKuPABuIcWZsZLh2uRD4vQM5icehedpNi719LSFAAwFs6sm847G80V5qODhxAEYLVUd1gi8NBXirl4vrL8/Reeym52qLOrAee1xDFrj/j0SO1OCfBxl8gRWuVycmRe79DR+pG4Xao05kvq8Vcm+RvkZMEbxzAJ9oAVyMOX3yc5Fc7ZICk1xxc/tnkhFhaL8EdmIKHGPatGuMMbd+gS/SKmJ+rK0w0hztepECfJuvOQD8OIuPl/B5i0Po4ludQytS19wg4UmBi7HRpYgaQCp0sKcQogSMvruQU/glgj7noBLYAsvG0RwBmz+fST6LOI4u09/H9sAC/DQBmyNKLA67nq9rjqdNsOS46hrykkJkDhHIK1GEEl2lGGaOr1knUAM7ybf5/QG81SJjrriWImjVppDVGVMr+H1uUFFcWeuyxy2g3QHj7DOKNQ8P4Tl98DI+9EH7pGgnHIZ5gO/UuAvgsv9/EWxw0JWiCIaFAPkVIij+DNVfenH4FJInueGZI27DDL4LvAp2wQro5o7aWIcXAYWGeEMuTxzCYZu5O3w2HVPMjXiUSnoTbNJqM7YOxnlFHEOK0d/hMX0d7IIhx7FVsEa/wZM2rHEN2wdN2sWzbIHREXzxbHt67cTWsWXmIj//hf/cAHCVr/7Jcz86nCX9B+yIwCAYJ6H7AAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAA/klEQVRIS6WVLQ7CQBCFZw2Cy6CxKASSIyAIByBBI0h6AAwW1wtwARSKHgDbhAOQoJa2YZtheLPdn8p+eV9n325bQ+urJXDZzaG7a447hCmHu6zm93HOUD6aywKiBaIgX14yuYAcjrLcr3JXQLLgW4Avr7LLi+ix70+TPGomgNv5GJ7QLttcQ9zYagFfgVDB0AMQd25twBzOs8gv+V8BsQK5QF9eMjlgDkdZ7td4X0CqwBWA8u/tnUbVlFR3wymR2zbbfqSLCf5Ih3IqZvgvECoAA6xuNZ3KpzqgG15bgI9zhvLRXBYQLWAFLKsnlef6Z0f4Dkm3XICPI8bzqfwD3FHc1cBpDLIAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAABa0lEQVRIS7WV4a1FQBCFKQEloAS0QAsoAS3QAkpAC7pCCd6bm5zNWLv25iYkfsiZ3Znz7eywLcs6/1/tE8fxR9v3Xbw8uKoq8YmYbdtE7DiOl70phutt295yc70sS21ttJfruk/lGzX7GwA687Q7ASCdQ4KB4ziseZ6FjhhusO/7i04xXG+aRmkCNQVBYDT5FGAEQAm4QXkzAOCQyACZpwcA+B7c4DRNt87ietd1Ai7PjXzo0F8pGAFQi6F4VZI8zy8G0OIqANwY4tZ1FetJlzsJVwiGUQPWZ1mm9X6ep2XbZFH/GAGYyKZpqjxBABiG4dGgDEDupGVZLlDkTiqKQlsiAfU8710AURQphyMA0JBTzRCcIL8C/JShqwDwTqrr+maQd1IYhu8C8H3/YxCG5WxUoG6IUqEYgqoY0gkA1wAGV0UHAGuSJHkXgOM4WvOUmVqU/x7laniH4GR5DM0A1e8VMRwA3XkZpAnAHyu6DAchzeRWAAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAE4klEQVRIS0WUTWhcVRiG3zMzmWSSpklTU1MzM5lkfjNJmoptBFMQrZYkTREVYzcilKJWGom4qYgiglD8qa0ibpS6UBD8wULtzoVVxI0IFrXJTGpEqtid9DftzFyf79xJXZycyX2/c+73Pue9x0kKChpSQdnmsN85xpD6mV1uq1y1oYJDt9Gsy/s5p+Suh6XluqLL8nouwnNGkd/5SE737D8kVeuMQPFzgXJRnjNsLlL3xCsf+PWqNLweX5EGY1llGQVqXvvoG/SG123upKblTymFnmN8/v159jbN9gjUthxo3e+BYn9L/eg/XmgP37+2B+t76CWxEij6j/CXiweR6nXlMVzEkBkrMuz/pAdwB38HeGY6z4O1OatkkJUrbkPNKE4TZjqEGQL0gKb2agN6Fw3GabDgmnpzvvfpF+hiULfQ5HqDgIGCYz16nvnJIx9yRBlvcjP6unMNtVCTt3cB+PUvv0UfbBqsK4XWgcEWIOQB/MUZXArdH0JD7Yw+atoZVuOmpnqCSOWS3PKNm8ZDADSPifTUPo2oT5FKqBcAUMB4odEEUL5bafQyGEreNIACAzAYAizs0Hp+bTdIlbrXSzzPNYGmpx+jwbR2ACGB3mIg/fvDFO08+DKABjROfRd6G7rVWBJNf+rox6wf0K1ASqJ3olkKYgzb582TP6ADkH5S6H3onaShDUhW4w7OZ4IoAAyCgGCNhzG3BGR1//w7NNyjaGVVkSV0A9AIISTrWXU9tKAJzniY6uhSLQTgk8ILAeFKs1rH+jvRy+xdZJSa+6csQfmdNLdZk0DYgtbCSa3p1kd6ej96v8YwOUEqWtFjJGEtkfcdfBVAaXWxfpb6BHorRmMYLAHowNFPPCAbD9BbJ3q7/9wASSLdW8fGgpgBWCIFS1fkVgxC5uYJHjh2moY6AXAVSKvU1FQ0AHUAAWDy0HEaX09Nn2IAilSB4FNiADC450XdxfoxTFpKouhFSxBm06YX9tJcJzWb2WcAkBmfJDM4gCGXn0XfpFEATvBkxCBhcA1AZvqAB9SG/iApGke3pMU4adtn1/wbXjcAe9h7G8/agBBvgnQnv5oMYtVLnN5FucplucVr0h8GIeU/gSOn/qXhDqhf8RAc94X77YbydQzWstp3/Cea6tBw0OtTEjXdkgCEFJ/J2HOf8tIODGzyKYlVaoA0HQDs73YfRuvgE+llTlEDJK8P0S56wRLQAbxeUpSixiCFSRoyQLlH0HsU0W2aY8dxD2noZpIGp59F72MktRvdPsUx9Dh3UgxQ7uzilE9AFAiOFERIgX4Fwl81j+DEUlqlIAHRy0AiIdVriiyuUoNeG9Th7+o0lwDSRhJw1QOIVEIIKUzMvVfR7ZzPsDaqHPR7Pcp9YhDS6G7hlB5l/Rb0UUyUaDJMUj0EMPM2zScwt1Fb0cvoZRRL0pCtzz/jdYOwl5Mep2tLSYkau8hd/nG0bg9hxt9FA7wr4yFakly9MecvQVUuMpirADjLOIPJC3X90thJcSsNX5aWGKZXALR4Xfq5ps8ulDHWygs3hPBMw6SAoLM1vfR1AuIGoJs6u0zZ1zQMCEgz754nIa3UbPCX7XCQJIn/627htKbQJ1g/ymcygklLiQOgzMDM+5hro6abhPSxj9014ackalz+ea8bhGn07ej2qRlEg/AfgMD6H2ekyGsAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAEyklEQVRIS1WVW2xUVRSG/zOdzkynM5SmpdDSM5dzzp7Ti4gSuYghvsjlSY3RGkMCPpiIIbxI4oUHjAZjTNQQ35UQEwyRN2J4NzEx0Wh8I1GghSqoeEOjIdA5fmvPacGHxaZ7rVmz/2//e00gKUuifiVRTS6uK2nXe2v+t1v9rQqaV9IsqhPX7tRFdUXU7XlAKpIX0WkU5Np5H2pb1Bx6ZqNKukL+kg+3VnKOGvo3qDn+2j5VtEjuYh4L6owGcklVIXWffvSOqvrR5zJdyGuuyFUyhRuqOv/lOdV0Ld//Pl/nqV1UyL9LWlCffsr3lz9v32VnXlSAokwcsJ3UNOVWKU0IZxBsXaWw+BUlBaKfvTKABlir/D3IOqhk6DpgAgUZANp97JfZH2CtAmgQQBPqRIGK2QKoAdAAQFxRQk2LmoN7dyttSaUMSNkFjmwgqWmXATSg468fVtoMVOkuKiNvPZRdlFsPAFfW2VMf+nx1CUhd8l1A+bp5heGSzn/9hdJQCpauSksIt7A63+cSAPY8AgAOp+uaQPBMUte0B1FXh3XX9J9qcsAASClfmHIzqRtUJ7Goq125prgVKAaSi4sIL3G7gIoqHoQb6vL/wEPqOcnqSh5UBIjdW2fUacrnPSRzCYKSdr9a5A/uexIBvc+XyGcIMze4sAugko4fOwoMKeU7yhlOAo7MKYgLJ7s6e+ZjpRP0bwfsWd6E5wDoE+jQ8zmAH/jgDQlRD+GAGZwwzfri42Na3cjU5fBlXdU9yQD7Jt4cU9OeDXU1aZ4AoQDITlICUIXVoqqp2m21EBRR42JzSJGVJ9cGFI6Kh3EDABwCUlfwPVyr57gIgbu2bVIHAD6f3IGU4JIWfV54dq8XuJzvOaln8Uajq/feekOddQBsAyEp5BDuBvD+25k8+cuEvZV/6YYLALEFB5x8abuElcxSvZrr2gaAWRwwA4DDT9yvYW5/tkkb6PbzXqdwSgdQU66qR+9tKkR8HHPzHtJlnNW/AmrDUFmTiDFAvafWlzsJULipMzqkaJJ7IW8CLJadFOG4XTu2yY3bkwEQLrF8X+6kFmAPPrdfyVr2cbHlEw/BdPSeUqBzZ3AA4vymueBX4qZ3ggCgD/ZL62/1hoZvbAPpd4bUoDYD4NSrc5y+oI1A6gKgi8AqQ2nWO2VALz+1U2vscNSkLYM0z9Bc9ACmcMrcplmNczuRF0+sOAlIgNoCgPH1AfOCI5GP2/aElp1UVLpmRM0cgMMhDtDLTopw0u6HtysZYx8AzgDZReC0nhabAd99AwCb0ADwEMwFfxCIxgn67Jg0AZAVADbRGSj6m3xNOnHEAxgF0k363KTxbQQ29Iu24oDTRw70AJlLGksegA26CpDMKa88/ZjGsXeCMH+43EkGacqVtH/zJo0CpZU75P9OKmrHuhGtYQbYM4sRaLPobifNrhtTyC+PzSmbIwmRJgA0J3COQNmNHMDyM7Ab/pn4i7gNj9PSWp5F/lNnvxg9p1jNP9LnJ7xAjRskA3l3n9+kk+/6/DACd0ze8rPEAHTpUwP2J0cP+/x95Gfs9iaBRJ+MPmXc9ubeOY1w+LYN2VycQbLzFOlx4MGtGuZ2GzaI+fwKgNxJO8MxjYwHCnkOMaB93upyJ/0HOBGQJypfZzsAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAElUlEQVRIS02V22tdRRTG125NCYoiliRNT25nn71PbkYRLOINXyxpUkEpBd+rUsWTFlPEB198FjRNpLSC/4AXBGljowUfpVopatKanHPS9GKorYqapiTNuYy/b/ZO0sAwOfOtWTPrN9/MDszMWRSZb/nYLEcfp7/j2KK40cqEWJRjHF294tRHse0Z2mUX0K+RyOIuxrL0m7GFQ6/YLPqPyEs+TwadmDRubGLM5tB+RfteOXyeHejt9KGd+nrK5gJnMwyfI0a9/4ua0dtstjhvs4HZb2jnGf5ca2zkabKaq6Chk0Nr/MT/p72exAV5C11JPzc2LQCbIPJxg9WBU6EtMf7POhwB4/dw1Gh15l4kx79oSx6QAApSZIeHnrBa3O4hnCVmOQpTQAnkj0ZeRW9FvwuCB6S40KYmxq1KsSpyJi3AQ0gBlSe/sWrc5CHpIH5B+nQDQJu54gL72+7Xv0COafpz6FNpTPCC7XYlhDKtpqJy6emlQPbu6fUbLTKhQmHL/P+XiktB7I23mWNOnd8VgNyhv0X/B2M36N+K7kULfROkVQ8ysqvk/488xwaftHq+DQhZf1LTNOllAKwy/0zhNQ+oFndyiuaL/IGYWXStuTA+jtYMpHZ/ylpDED7TCbOmm/yWvonYjF1E1xoCKUcKQjBqr7vSlgTAPE0A1jyI5CqMjrzo7V5EE4Qq/6+w8espoNGhfg9ADpKVq8y5w8ZvM3aTfn++0SxkI+g1rk6V3Gv0AiGYg9n7zXV3miNvDcDa4Bo5VmjSDw8+xdyMB1TL57xT5IAV4m8Rc+zNg+g7OLyORPdOkJsEMmeTRyc2rks9n/VOki6QghCcsPcBEFhxKwAAcVWDYc4qYWSrbOj42BFghCZIglBGr7GwCvib9oEAEe9YXADkpiqFrwHgNv2B4X6zbKLXyechAkCQlePp+D5z2S6uTaLLhZpfEUhAP9P1oLmedorMcooxa+cSSAAQ6AO7n7V6904AdnkA67reBDnovcIbCQAAWT45CDlFOQQp+M6+9A4oNlAcEC5RwCJtSwcbwgVfnDzuARQFKb0qZRJI00l9cvQIBST33rsETb0Kkf7uyEtmndznnggICQCdQo0CKhT48vCA1123IMX+PVl3kq7U4/EDZh0A6CEm1WuMy0nSd2W2m/Vl0ABE/rp3UuydIoj7nn/OrJtHVQ80V0IPtPYhXdcl+N1+diquvM1sDghywQIbvEHb2pazs9PcIU64BJxielV0ygLlgHD65Im0wJDCAu+A9abH8+NxHARMFWDdsQcwl14nWf6dAoBYx/UKQswJRR6AYuS0/UOPmMvwKPYlG9e9v9tJj0YPme3ky9KXZf6mvu6k3pYWs4FW1pbLdK31xiXXWy7gvJbdIgBKXNVSg/MuEITLbOBP2pWbl7BwaIv34ADG/XtBm2fmAgnOz5zxBVpvzq6peMWoT6/DV6dwUAadAowNKkYOUYxgfDj+tlkrcPoTQNrkFcblJIEoHNpn1oL2MPN70s1zwpe9kxyf4cfMmiluQPP1KU8/43pIiYnyAGjCAQPE4EIPQJ/x9A37H9Jl4SYYwSaSAAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAACYElEQVRIS51Vu1JUQRQ8s+wuS1laBgSKhQr8AJGvn/EH+AJ/wBwDM80slKJICYgMzC1U1BL/Qk2wlu57pu85d3ZNDC5z7+np091nBihmNl/Hj008Ozaya1hXu6d06779tdtY7+F7s9aITVGbYX1pl3YH71t4X6/1jL8Cfhf1HTyz2ldc9n8D/D6wjdp7mjSIHwPfgq+bjS9pnMDfdsOlL2qQ/x74rSW+hJddDGAbAtcrgQZoVEZO0YABnOBD0craB+AMrrrCaf9H4GtdP+fJnL4/Adf7kOseiLN364vf3O/4oi/tP+v6O54H47Vi5amN5mEugrcCy8yxqQf4l4FiZzjBbDAPUgGHNQ04ArZDzQOj/mIwz8F9n9OA+O2DKTaph1L2bGWeT1xEXbH/ERCXvb7UAYR4mJsAP683IIbgxvlkXD1zb4YgXzdEq7SIf+37D4PTG/uXZzbubkA+RYlzlcG49m6QZHLOu4Diy7wmXGDgsj+N1jy/yc/afjJujjrfml8R1TOeg6vuPZwfuuFbGcpzm/S/Ajn4sMHw1HRLFgUiOHuNYeJ7cwMioJv5AYO6jjk4a8KzrzyAMfZc1AG1wanN2kU34MXg5HJPeWHT/gZQlNPi6g1cIJvWYNice35CoD01x1yUuDhDrtkDqB3Z78GJh3axR0AO7U8KEL6o/QT8dx1ft8Zxaj8Etob3t8BjaO6Je9ibeHltq/NlwXex4Qb+O1CgPTU14B+ToUAEfwz+DPwD+9UPQINhcIpz2Ac1gIKzt3PdqALqQBSc3BGCcoDBjeActuE5hr4OIwdfqfgVGtt+FRgQnlgAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAADXUlEQVRIS12V8U4TQRDG56gan8On8WV8GZ9CY2KMRvEPE0PUPxBFQQXaQu8OegUhIK0Vabnu+H0zu9fWJpM97rezM/PN7JEpfnsiQvsG2xSVZ1jTT6UEU9mN/DPW5ws8GJcFrvJikeuR7GVz/w2c9XKJD8Dpr7KN959gc64S9NT4Djjz24C9wnP6BR1Z/B3EcK7g81/QmwWu8hFo1bCfkWm31gMKYEFchDXAw3iGaiH75BbE+Rvwk8RDKft4T/6DReD5NZ4vFng3chbBIingGO8sjdCXrsVX+Ivxp7BJTFL1ZIlv4YwnYLMmv0twtfwZfwvvH2NNEikEcM7znT9aEmB1ihJF2thgRcK+wqiU4FCd5ZJj7eDP3SjSJp45CV5AAa7SJqc/9pB9SQVAoByB29ZlJuldolDufyS9GH/OXWh2ScNAetjb5hTGIpnb9yb+BTjjk7uI63jm6udPwcOS/7rlkSbg4bWy250YhIlSBG4a8wAIcBgFoMoMxMPfNgEKXAKN/j5JTG4tcfiX9I8C21XD3+8aXjqPXUxX7X1MUEMF7gWyi/TnlHxo4p/9x33K5vwa+UEA8/UztrEmnumDv9rHS44pi+c4spsshFdD61zIOQHkXNN1oXDkR8k/7knfk4HxHngUOJ7DKeEonhovzd8aECeJDeCUXXAC68PIvXgKSc5vxaU16CcaFJC/F+gNVPtWjIxfOYcIe5wE8/dvwW9YpvevtGIBK54kBaAYHMsKdj7pSQXWCBSL4XeBe67B+5HTnwnaymSZwNQF5PkMbgKDsxgTeFqYf+OXrhP25MZLb8BKOtfvOyelMH4M/wB/FMc9jQhik6nTMfjMecaVIgWbYjYw03t/dHALBTIJ2D4Njrz37FB/lEtF3mISYBSJAsHY4TPjKKzl/mQMcoCVAUZD8NvOmWASmgJyz+SyMN5BDBbpQs0nUYcQiP6IYSLERpnAiKPDATg63EKByJGTQKFTM3U4BK/hPwPHChGcsxkKAQQCMPG7sJjoAf4ukMQZrDzNUWhM/A73uEgU6AR2/AsTwqlhQiwAnMX2sMcmaJy4XyMTAJwxSo7hBAKZv39IuSahTaAaAvGdWeRxSil2jf8iFca7Y+ZF8Xth+cACLkolN3iuzbr4/+GcH0aRfyr+o1L6Opf/AAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAB00lEQVRIS32V4W3CMBCFkxGSjEBnoCOgroC6AVJHQOoGtIUFQKQL0BIWACVdgLZhASroBBU9O3nmcr7kB3LE8V587z6bMAiCSxzHQRxFQZIk3vo0ndJPgtb6fJnaekgfTf+WZa6u+WzzolGXPp9l6dW5z/F0Vuvw+bPVan/qSs1fuho0AdiA6JMo6+RlSo3H1lyrL9JXq8XLpc9qnTk9Nsl9dsVHQy999t+lp+c+P+dfVQ+fsHfTswG0TXC+XFJjSWuDEwoIG9ZCep7NiB4TYFR7EGX0bDzNagKCHhvnPu+bTUMvQzIBST0P6etwUPWOiP5t3wWgkWAQ7ppgNeHIvsRSQDSYZ6w2AH7EBEkgCE1LkkAQjqgkAARxPQ8JBEm9I2BwN2gEIEnY5rkjQEN0RQF1TXCRpvW0qyMkG+QEaSRxgkBN5eETpO2DE8T1joDh/dALgJNgLiFOgJxAlfCVABmS3QAjQOo5QaCGk+QRhMu6JskRBOrq7xG0JEiSEI4eRmoAIOF4OnkE8Cb3FFDXGdwVhUcA13OCtAleCcK90SRJI4iTpBHUIGH8OG4NwKRo/kY0AjDJ6pb1CUCT9hJSCICeE8QJgF4SJCeoEcR9WgmqSfoHqy297CyhZKsAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAD0ElEQVRIS+WU+28UVRSAv9lOd7ZPiu3WtpTaLLSNfVg3tKDQEiovixAjgmLQgCRqMLXxxSKgBEJYiQH5xUfib4YEkgYiakyIxMQQDE0U67NQ7FKxRR59bLfd7mN2dsa7s6W1drf8AZ5kktl8Z+/c+91zjgQY4vnfhmSdm2mwwI7l+hh6fwB9REUf0zAiBoYedyNnp6IHNXRN/E6gKyUrlehoJKnElEzB/TNxWXAt+f8zBBd7ShaWdBk9MANPE1zsP1FIuOuNOU1luIpW0hHw8MNoH795+6HHB13DWD7uRFrvIPr0PLgyDJe8KJ5RuB3E8IZRbwaRLBJKvR19IITuEwL9KoY6KRAJbHX5RDqH0MNRjJjIf8c4V38XPNFBYtyZh3p5OClXHswlctmX9KBx7kUP6VM//VLXfmOzvZmarApy5Gx0QyeghxjR/AyogyzasJr73atoLVxD0+xF3FBvcy34N53Bq3T4e/jygaMoNfcQPvwwrzoa+Gmsl299N+CaFzwjsP9H84PWgjTUPU4h0Yftkg/jVgBjKIR6PWDy1Pw0Im87sR3rxhgIEvWFzUrUw/ENm3xXrcljIoyYyOikSNluQ3PVohzvJtIlRPxHpJyrxPkJT5yPV4T0Z6DPmGsrxCJZEpfI+Y1cqNlNdWYFmSnpU3LEHZPmmEX4YD0nml6jIaeOIls+oajKSHSUQdVLtRAr51jRXq7Ete1ZNthXmgJ/Dfwhnr/4rPqwuaYlVUJ+rJTF+5rjAvtEBcYqblxgjKeuKqHuwKN8d7bDrE6le5TwOZErQpIlrCuKcbqbaT/TgdJ2FWNQVGivf4IrjxRTJS7z4pmfsbX1oF7xIhkiZpqAZwfPsyJ3iahiUYcJQvpgCR8+vp3n52wkzaJMy0jJEPNjk4NNb6zn6PzXudeaN2UtSRIrixayNhRQ8t5yTlbupiLDgV8bY1AbFu+i9cZDKRey313IF40uPMFevh/r5nile5LPF/zQQk4v3cGhvpO0j9yCZZ9PcOu8bFR3PaeWuXD3tnHx61/uLkAzNGRJTupop+cIu+57wWyfRGFbW4rzwGo+rdhJebpjWoo5P2pzCR9ZzDnnOzTOrp+SExNktkCRaIG9C/hkbQtbCp/AarHGb3acx97NYby1nJaWZ9hXun2aQHMYbynjxdanOFj6Ct8MXbi7gJmqI8Zuqv0UWO1J04rbN/NV1R5qsyoTC6rIMW/1dOMO1uUtn9aKsQOa/dtaxd7ntvJmyTayUjIm1rojwKJYkJ50sOatdXxU5qLYVjBN0J1hHHp/qdnWD81y8g/5bJgXFalsYwAAAABJRU5ErkJggg== data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAABTklEQVRIS+WUTU4CQRCFq3oYTZANG+LChKUnYKsuNCbyM5PIMIAbjHoWr+CGC3g3d8Zo4swI9d7AwhQXmAU8ur9+3Z1XRauIVJuPLCRsReZyZDqRE1OVD1OPx+HCeFaabPxKP/aLQ3GQd9uJ8SGWSf4DHXOfbtuu5/J+LzV+xfOzb5w/+sQ+/R78Ht+ubngAGSKaMvGHMrLE0gKdoPGXqc8HxjMELssKFUgLdIC22AEej0dGcvIF/UmBfbSF0nq8c4wOSlBoyakT+jsxJjyu0vgA3gcW0TUr8FKhcjOqhl8b+/zc+A39z+ykWckO4Bvg8ujWnPgWeWIFM3aCBky4PBobH9K34vlTjmu/y6XxAVT3dVaW5JoJPrICQfk8c/4/P2Pt8J9dc7T383ne+bFgzy9tjBdH5I3rVrxVUPzw+Z3xU/pfa//uVvAf4M0O4A92eNe5n4UIVQAAAABJRU5ErkJggg== data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAD10lEQVRIS21TS2hUZxT+buZ9J2Ym87p3HomvuHHluosuXbhQQ2uT+qC1Ig0KQVwr7hTaTSlIN4VCV+5KcaeYqK21D9CFoPRBaRcWkWhijKkzk8z1fOf//8lknMAlmXz3fK9zxgMQbRnxUCjGUQlTCOs+6o0samNZ1Md8fHr4V+TyQyiVE6jUMqgSF6zW8NGoZ/HJ9F2MFmIoVZIIBa/1zNZrPj56/w6KRcHDtMFkzs3Xqj6OTt5CUWaDKmd9fYe6deGuyv+OHLyJUpBCINy9vjhbDTOYPjgvvtPqSz2TnzqCB0Ea05Pzhpv4OHF55G/OVsppeFu3xSOaC8UshY0BEkhYeWnqwJwSdAUoQgIRCCtpTE3O6awWYwVq/GwFPnxvXkt1wTlLM0Elg3IxhcNTN/VzVXQbMs9ZalcEL+WTOHb0tmJaOH1Zbs4Wckl8fPxHwU2pDfmtvgKZHU0iP5zAyZm7qLJQF5zFlFMoymzOj8PbN1mO3GacAAlUYCSB4yfumM1ocFNM4ASycZw89fNG8xIklOCBNEtzuUwMp87+1sW5lVC2Qu7RLQn4iSGcPX/fbI3B5OEszeeyCQiMc5ceKK7BWUyR3AmMpGNyvMDFLx8pzsKr9FUw3Om4p/gXX/9huBlcFlaUUvMSfIjwegTvwme7I3cyNO+CZ5OiLj+ff/V7dyu9wZMxYYiAy9/+pXh/cJVfi/DNd//arWwOruTNDq5c/0+D9QdHB/D+X8f3vzzVjVZKm4OT21tZw7VHSxqsLMHzEjxjg+N1B97LNn54/EpPncG5cYXJvboGLLfhXZ17N9oInsRwygRHmwJt3Phz2ZijwHAcKRvce70OvFzDT09WVYBbyWfkpFyzq4K/aOPearu7cVcqWmJOzGOpjYdxmI2LOVcqg9McFlv4u5DUS+Q16Q+DvzLm8byFx+M+RsVXhudiS2VwchNf2D2iG48RtqU6bjxrwvvn6YGoIM31B6d5PGvhycTwwOA0R4LFPXkx93Zwh6+8U8Kg4HjeBBZaaO4Noccm16TBaV6M6yP60f7awOCc5TvRocbA4JxV/Mj4wOCKL8oFdDofiLTdOJvV4GLOEUyNGQF7UtrsguDWZHRsq/ku0TxntRgbgAZObIdunNx2Kzov4nw3mtm5EZy403b46Ql7rjKvmqY4nV+S+dld5pr6fBtcnjO7TKl9vhSTx+s0D0VqjgQkd+YdwewEYM+1txhHoAL2XHuDK/5CeM/IvHL3FEMzxPh/4gOCY0lw6s7uNGGdN1sMlqVw+j69YzM3ufiOfD3BpczIAnoW0vW9Iph8jd8AGXkDBBF2wzEAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAACoklEQVRIS32UTWgTQRTHXxCF1pa6CYiIYt1sJIpeetngrUoRNnoWqyl4EMFLcvJSvKTgQY9JLoooIR8IpeAhJDlJhUpIDqLXJApFEISQ+gGStFjfm+YNs7uzLgzDzv+9NzO/+c+EAGAfrLMgWiyKjfrJv2VCOBLHEICZE3OwfdU6iDtnYj+PzQQrtix0+iKRCBw6MwvvlzHuwkEtO/FU6hxDcX/NKSjfjoKT2XTpHBMOh0W9brfr02mA9cFgoNW5TqA4EUJYaF8tSJPuXDwGvfh1+L6wAOErl8VkY9z4z5gJOwIQASBIBMAWOn1TJw3YXESN9AlEO/FA6jzPkdMz8JIgXTLBSb4AwzC0kMaxadiuf/LpKqRer+eqrxaidQ2HQ20+x4UsyxIA1NMhCEy4WCzKCdTxHwjp2/kb8PnuLaFT28WNjxDML3TIV+wHCMhOXJM6zTF7fA62lqLwJTYPv1F3kqtigQyR13H41FFYvWNB6t6GT1cPrN1ui1wvRK7T7/e1+RKAbdsSgAqBAdRqNd8JEgiGUSqVXBvkPOpH8WlYf/Rc6jS2h2DGCOgP9gRgL3lTLlB10sdFBIlAjZUnPl110tbGWwlAhch76XQ62nwJwHEcFwDvHWy1WoEWpQnr9br2BBlEuVz2LUB1Ui6Xc+kCEm58F6/QCAH1Vu77dHbShyUThplnLgBeJzWbTW2+BJBKpXwAVIvRIxRkL5qMLOi1sJrfaDQCT5BAVCoV7QIZYD6f9+nsJLpy7zIPfQBUJ7159VqbLwGk02ktAHYCvbJea3EyjfMjFARJvaM6ixIgvsP8lqhvEgHy6lyHABIgnc5OWl97rAXANULZbDYQAC9EtznW+JUNgqQ+QroY7x31xugsrMZUq9X/brBQKATqVOcfWDzWBBi0sj0AAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAE10lEQVRIS1WVz28VVRTHv3fmta9A6e8f0J/vzcx7ry2lVWmxYEAiRqkCGlkQEzf+ZAHEf8CF7tyyMCYm7vwbXLiUBApUFrIw8Jo2mjRSKKWEtrZ9pePnzLwKTnI6b+73nHvP+dxzb52kuMifgpyK8jAfy/CdUa9qGGnkt+lSCZ/nfk49qBmvR1GMjj2fx36b7pTN5BSgmU9xO12nVF2vh/febF59vEO04jP07bg6j0d8rNb6UF3E2hwF9KhCHsk8Qpf2N4fqRMvbGjaOXti0tWJ1s1Z/R6g2tBxma0S2RoU61onHxymqiSMrHodS7JGAzwK+ClsAqGTkGhsUsdDpmTkSZxwwBsjgqH2fXFOXaucCXdyyomfRV/F7RnKs1tFGfE71fwU6wefpSoz+EL9V9A2ps07ZJvT5QKPor5P8Mayox+j/UN2mGhrz2rMQkps0TvKHCTu6acU9lboX1d4YaPfDQP3k+DJzHKK4MUKHWEt9s+ppCNWBlsOimHINUtV6tgzAqea4F/GA7QwORSAYiGLsqxcQrnYPkWu6iD50d03Fp7FK6069Gz4JdqLvZ8ZIp8oz+vyXaY1tb7KjwGntlEbzcllSiwPt+61V363FGl+dBt4D4NVKIy3E51SzEqj1TqCPgPjlSkzxd4DzUBp2xOfVtByooZxCPLfhdBYfdd+WBpe0Kxuq6RHzw+MQw4epYYJ5RgxAYVat6F3UF1jX2dDOm7l6+Xa63BfX8zqMMFSFMMAkBdq7HxDO3w2ALU2gnzcIf2+o9HRb/WsM7GpGp9DIumFeP+H/2rVF5ebJINsMhD65DA0e0kPtbbp8fUqfXr2l0XmyPcieDNB7GQDVk95qoKM3Hut7S37+Fsms0pIN6Ggu0J4HeRXhcuGZ04V16/cpWmUNPS9tBCqRT2mJDkIyUGOYolm5mjApfsA6fOcoV49kXwLgyjAv2gobqZ7PwW07px7nhh3w65jIHNkd/p5k7MCjTeVXCdvYJee1p4ePLjmPz9dAGLj9RFrI8MUR8brRGhOIWv5D122HrtEBK8TtzaEDIAoxFlle1pWpG/ri1ynVdaAXAeRRYAslZIFwX3p/6rF+NL5t0+hskAfIulBZjsZxuB64H+sMqb1hAApz6BwRkrcNHLJ7rAqiSB52bJx+PpIAMPFVPgftN6J1QZgAoFUj2r3aASd5H2e89IQsFjgifksVAN88PzDHJ0Dwb7Ili43oNGCUTQDJLegrfL5B966S1cp+EuQqi9owOk2PFC7/rpvoLdfpKlJ0zgABx8w5jQDpWzpp8u4MALhSHQA6AERnjHL5jXM8RsvbukSOilIA9oxT5UsMWZ0DCQgn0JLtvbcSADsFjiYwDEDq5DwDYLspHcHOoh3DJtD8cgW9KQXgKsmt/LF1ifmge/dq0bkjIlZ2bBGX3yX+nkF/M9GbAGQAuGdE9lrT21rSZ+gfmF7uIJ4jFO1D4wZURZP4jOtPOo3cyl3PAQHHnjPYGPEflsvJeU/L5LxjJ7Bh/BIIdgwSPT5XBcB9mASnR2GQUQPhOys+ndz0cezg//SGRNvR7S4ZfqGTfGd3cPpMvhjPb1vDd3ZF2eP0zn/royU6EJylnj7v4mP5HTStal7yTzR9Tifxrqqn3eyS+z993sNeYWT4hfh/ASIGdLzkBWWRAAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAACGUlEQVRIS41UzytEURS+L2yMhcdojEfKno218gco/gNZSFmQzSyU8qP8KMKCWfgxmiz8SKZJyUIWM0pKShIWrGxIVtbMd59z577z7n05det1v3vvO9/3nXMcIcRPaYn2xgrR5iVEazJeWnXCa6gtLVd0jWUAW/HhhazEEab7i7tnCscHf//w/CaA+2fK/79+eA3h2KD83j6+jLh/xrViBDj/EUAXpyXhCiw8Hqv3RH9qThInchyfWt2WpCk4vnOQl+/pob9/UShKsjzo/8+P91aiyO/7803maQunRE5WgM1BOBxFkAQASSTejPUnTizuidTEjBSASHJ8bT2t7lEe+v2T433ltk4CpPD+bfFMmcFJAn9/upYC4NsUTm9nkxKAXNRLECUc5SA5bCOoC6A7i4Rq4k1iYXoiIBxyoISB720sKwF0J+l+IZdRAnCSuP9ymQu8x0VwRno6AgL4IpR7ED0aVaJUwnDW5KDuMJzlBLkAinx9Ugq0OZ8KCEAka/7w063ZgADYp8D9u3w6IICO45yzNNgdEgAADRkMoagepB7lA4eI6CVscpA7zAmaBAAxEKmuTYijpdGQAMARwK+ykyEBsE/h7I33GQXwRXAFpqxtmoIQDSHToOE9aipRXsLcQZPDOkGbACBZWZcUxZUhowDAZAUUlgesApBKUVOUpqxtyOhDiBLX+5D3KC9RUwnrDtocJoLRAlSJXzPjvXzSk6dAAAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAFmklEQVRIS22VaXBTZRSGn6RNmqQtTbc0TRcEBRQUlUVBUAuyuMDoiCJWGdfxB/4RR0cdl9Hxh6PiuAwD6kABgY6yKVbBUVlkp6VQUBFq9422aW1paZM2aa7vbS1U8f7M991z3uc977mxGCQbDH1muiA3He7y0uSJIc22+9Kp1QqPu2GRD6alcNJu5fqh52NtOvPAAh/B0fHsMgzuse+59P68OHhIte/0Uue28W13mCUJ+wbO41X7sSR40IcxJYXiKPiyuYdlvoMD5xNi4NE0mJ9O5xWx/NQXYV1NgO2jj+rQAverdm4GzPRQER/N9gshPq4MUDXhGGREw8OqvTAD48ZEDuj6l+eCrKjqwXLRgOlOeMQLd3tp8Tn5IRQhr6qb3WMLBxosThCcGtyWymmHlW3ne3m9MogxWQ1GmeAp8EAGobHD2Ks38usDrK3qxcgphrmxAldtmdqYEkNBsI+86gBH6g2M+3S+OHEAfLpMtVnY1NLDOxJHix3jNdU3Tb3XR9dVceyWqSb41poQdCdgrCoaMHVWGtUytUCmrhT46XPSbPFi/HikfyDG5CSOyONNTUE+ki7aZKjrShkwNcPgYTk7L532LBc/hiOslbiddX3Qk4SxUQ4v1MRneCh1RfFNR4h3qwL81aQRRcvRXw7L/XT6xrvZp55fNQT4zGzQIej4URilSoDA/WkOdvQIXOL31Sl04WRIHo/RvgME/rvStLmtl7eqguCXofYs8E7CsG7uT5OZow213eTXhOFCPCSM0WRvwYj7nIZEOwWBsPoGONGgi4Z4UsdD9mwiCW/3p2mzv4f3TFNb7eAcCemTdGeODKicZ7RnOvvB10jcD7UmuCaSOE4FcjCGfUip83JwPBMkYA4h98vs/xe4VihuFPhuUo05NLmfZmevaWo3e4eAk5UDtkmcci9i6/+A450tsV6+H5lLfl2AjYPgw0ZD5jSZezsUBVg5/Rk+vwx8FkSkP/8sLyx6hWXVg+AjLoJTr1XOK8SyJbjAWG/ukgke1I/uayDrVrmkJnta+WDWsyyvDlLZqPxYFTXPjRIgccErYfVJljz1JiuqNfF2B8RepQaTNdk5UKYpri1k5nPL2F0XgV7tYPK1qi3h9pthRz18fQL7q5/S26wdtWm9vBP1vmqf1/RXHyf6l1LC76yHTu230kTGFE3+DjipFGw8huNQBcFPvhFsqmpfp4HpLOoGxbAMdv6Kq7iO7lW7wJHdnybS5kKzkre6CNv+Muxn/FruXXMNgtpv99gh4H/B1uO4jlbRvUIRjTLBVThTYCb4mlNY9pzFdaqBrnX7Ba7fzEglq0G5IibwmIPl2Mva6NxaMpAmEzxmELwE17EaEv1B6gvKJU5pMsE7JHR1MdF7S4k53cSobij5uUVp0nuD4PkCP1iBs6qDaYad7w7oW5A9Qxo1mE0C3/GbwGtJVarm98Wz/KS+bR7V9sukVYUD4Gf9jAtayQ0ly4ADbxj9kYrV1A91qkgxzsOVxNZ3MSPiYPNR7WuWIhXSzq0/DT/9QWxJPb7OMPf1JfD+r5pOihrUaC/zjmI/VI6ttJWJoWge703lyVpBOabCrmbYIlOLqhnWGGBWxMnSUBYT/UpF1xUytQSrTHX+1sjICxHVdvNS33Di/II/o73+okjgMrXiPLdE7DzR62Eh6Vj80r29GgpOqXYtSa1B7u6LZWk4i6uJx3JGbHkydd+fxPzRzJiAvpnhJJ6PZBNNlAzwBwwOdyg2/wZfEvKRgxyqV4MNAv9Z4Ccugb8QzsaDA0uRBK4rwn6w7CL4YyY4irTKW/K1FttO/Ac8kwlo3cwbr8VilTjn742M6BwCjlbIPH86jEMDsZe3M1XgT/4DPvjfapnfhut4HUktA+DPCfwagQ8+tik1Avf3gz8QTuTFyPB+8MHnb+qTbKvji/PkAAAAAElFTkSuQmCC".split(" "),
                     d = glfx.filters.colormap.textures, g = 0; g < a.length; g++) glfx.loadResource(d, g, null, h[g], 64, 8, "colormap/" + a[g])
        },
        output: function() {
            for (var h = a.length, d = [], g = 0; g < a.length; g++)!1 === glfx.filters.colormap.loadResource(g, function() {
                if (!--h) for (var b = 0; b < a.length; b++) {
                    var e = glfx.filters.colormap.textures[b].toDataURL();
                    d.push(e)
                }
            }) && --h
        },
        loadResource: function(a, d) {
            var g = glfx.filters.colormap.textures;
            return "string" !== typeof g[a] ? !1 : glfx.loadResource(g, a, d, "./media/colormap/" + g[a] + ".png", 64, 8)
        },
        param: [glfx.param("amount", "float(0,1)", 1), glfx.param("mapId", "int(0," + (a.length - 1) + ")", 1)],
        shaderCode: "uniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform vec2 texSize;\nvarying vec2 texCoord;\nuniform float time;\nuniform float amount;\nvec4 sampleAs3DTexture(sampler2D tex, vec3 texCoord, float size) {\n\tfloat sliceSize = 1.0 / size;\n\tfloat slicePixelSize = sliceSize / size;\n\tfloat sliceInnerSize = slicePixelSize * (size - 1.0);\n\tfloat zSlice0 = min(floor(texCoord.z * size), size - 1.0);\n\tfloat zSlice1 = min(zSlice0 + 1.0, size - 1.0);\n\tfloat xOffset = slicePixelSize * 0.5 + texCoord.x * sliceInnerSize;\n\tfloat s0 = xOffset + (zSlice0 * sliceSize);\n\tfloat s1 = xOffset + (zSlice1 * sliceSize);\n\tvec4 slice0Color = texture2D(tex, vec2(s0, texCoord.y));\n\tvec4 slice1Color = texture2D(tex, vec2(s1, texCoord.y));\n\tfloat zOffset = mod(texCoord.z * size, 1.0);\n\treturn mix(slice0Color, slice1Color, zOffset);\n}\nvoid main(void) {\n\tvec2 imageWarp = gl_FragCoord.xy;\n\tvec2 uv = imageWarp / texSize;\n\tvec4 point = texture2D(texture0, uv);\n\tvec4 colorMap = sampleAs3DTexture(texture1, point.rgb, 8.0);\n\tgl_FragColor = amount * colorMap + point * (1.0 - amount);\n}",
        shader: function(a, d) {
            var g = glfx.filters.colormap;
            g.dirty && delete gl.colormap;
            gl.colormap = gl.colormap || new Shader(null, g.shaderCode);
            g = glfx.filters.colormap.textures;
            if ("string" === typeof g[d]) return console.log("string");
            this._.extraTexture.loadContentsOf(g[d]);
            this._.extraTexture.use(1);
            gl.colormap.textures({
                texture0: 0,
                texture1: 1
            });
            glfx.simpleShader.call(this, gl.colormap, {
                time: (this.now - this.startTime) / 1E3,
                amount: Math.max(0, isFinite(a) ? a : 1),
                texSize: [this.width, this.height]
            });
            this._.extraTexture.unuse(1);
            return this
        }
    })
})();
glfx.addFilter({
    type: "colorMatrixOld",
    param: [glfx.param("hue", "int(0,360)", 100)],
    shaderCode: "\t\tuniform sampler2D texture;\n\t\tuniform mat4 matrix;\n\t\tuniform float hue;\n\t\tvarying vec2 texCoord;\n\t\tvoid main() {\n\t\t\tvec3 z = texture2D(texture, texCoord).rgb;\n\t\t\tfloat n = hue * 0.01745;\n\t\t\tfloat r = 0.212671, g = 0.715160, b = 0.072169, c = cos(n), s = sin(n);\n\t\t\tfloat m0 = (r+(c*(1.0-r)))+(s*(-r)), m1 = (g+(c*(-g)))+(s*(-g)), m2 = (b+(c*(-b)))+(s*(1.0-b)), m3 = 0.0, m4 = 0.0,\n\t\t\t\t  m5 = (r+(c*(-r)))+(s*0.143), m6 = (g+(c*(1.0-g)))+(s*0.14), m7 = (b+(c*(-b)))+(s*-0.283), m8 = 0.0, m9 = 0.0,\n\t\t\t\t  m10 = (r+(c*(-r)))+(s*(-(1.0-r))), m11 = (g+(c*(-g)))+(s*g), m12 = (b+(c*(1.0-b)))+(s*b), m13 = 0.0, m14 = 0.0,\n\t\t\t\t  m15 = 0.0, m16 = 0.0, m17 = 0.0, m18 = 1.0, m19 = 0.0,\n\t\t\t\t  m20 = 0.0, m21 = 0.0, m22 = 0.0, m23 = 0.0, m24 = 1.0;\n\t\t\tz.r = clamp((z.r * m0) + (z.g * m1) + (z.b * m2) + (1.0 * m3) + m4, 0.0, 1.0);\n\t\t\tz.g = clamp((z.r * m5) + (z.g * m6) + (z.b * m7) + (1.0 * m8) + m9, 0.0, 1.0);\n\t\t\tz.b = clamp((z.r * m10) + (z.g * m11) + (z.b * m12) + (1.0 * m13) + m14, 0.0, 1.0);\n\t\t\tgl_FragColor = vec4(z, 1.0);\n\t\t}",
    shader: function(a) {
        var h = glfx.filters.colorMatrixOld;
        h.dirty && delete gl.colorMatrixOld;
        gl.colorMatrixOld = gl.colorMatrixOld || new Shader(null, h.shaderCode);
        glfx.simpleShader.call(this, gl.colorMatrixOld, {
            hue: sketch.util.clamp(0, a, 100)
        });
        return this
    }
});
glfx.addFilter({
    type: "hueSaturation",
    param: [glfx.param("hue", "float(-1,1)", 0), glfx.param("saturation", "float(-1,1)", 0)],
    shaderCode: "uniform sampler2D texture;\nuniform float hue;\nuniform float saturation;\nvarying vec2 texCoord;\nvoid main() {\n\tvec4 color = texture2D(texture, texCoord);\n\t\n\t/* hue adjustment, wolfram alpha: RotationTransform[angle, {1, 1, 1}][{x, y, z}] */\n\tfloat angle = hue * 3.14159265;\n\tfloat s = sin(angle), c = cos(angle);\n\tvec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\n\tfloat len = length(color.rgb);\n\tcolor.rgb = vec3(\n\t\tdot(color.rgb, weights.xyz),\n\t\tdot(color.rgb, weights.zxy),\n\t\tdot(color.rgb, weights.yzx)\n\t);\n\t\n\t/* saturation adjustment */\n\tfloat average = (color.r + color.g + color.b) / 3.0;\n\tif (saturation > 0.0) {\n\t\tcolor.rgb += (average - color.rgb) * (1.0 - 1.0 / (1.001 - saturation));\n\t} else {\n\t\tcolor.rgb += (average - color.rgb) * (-saturation);\n\t}\n\t\n\tgl_FragColor = color;\n}",
    shader: function(a,
                     h) {
        var d = glfx.filters.hueSaturation;
        d.dirty && delete gl.hueSaturation;
        gl.hueSaturation = gl.hueSaturation || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.hueSaturation, {
            hue: sketch.util.clamp(-1, a, 1),
            saturation: sketch.util.clamp(-1, h, 1)
        });
        return this
    }
});
glfx.addFilter({
    type: "invert",
    param: [],
    shaderCode: "uniform sampler2D texture;\nvarying vec2 texCoord;\nvoid main() {\n\tgl_FragColor = texture2D(texture, texCoord);\n\tgl_FragColor = vec4(1.0 - gl_FragColor.rgb, gl_FragColor.a);\n}",
    shader: function(a) {
        a = glfx.filters.invert;
        a.dirty && delete gl.invert;
        gl.invert = gl.invert || new Shader(null, a.shaderCode);
        glfx.simpleShader.call(this, gl.invert, {});
        return this
    }
});
glfx.addFilter({
    type: "lumaKey",
    param: [glfx.param("clipBlack", "float(0,2)", 0.9), glfx.param("clipWhite", "float(0,1)", 1)],
    shaderCode: "varying vec2 texCoord;\nuniform sampler2D texture;\nuniform float threshold;\nuniform float clipBlack;\nuniform float clipWhite;\nconst vec3 lumcoeff = vec3(0.2125, 0.7154, 0.0721);\nvoid main (void) {\n\tvec4 pixel = texture2D(texture, texCoord);\n\tfloat luma = dot(pixel.rgb, lumcoeff);\n\tfloat alpha = 1.0 - smoothstep(clipBlack, clipWhite, luma);\n\tgl_FragColor = vec4(pixel.rgb, min(pixel.a, alpha) );\n}",
    shader: function(a, h) {
        var d = glfx.filters.lumaKey;
        d.dirty && delete gl.lumaKey;
        gl.lumaKey = gl.lumaKey || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.lumaKey, {
            clipBlack: a,
            clipWhite: h
        });
        return this
    }
});
glfx.addFilter({
    type: "sepia",
    param: [glfx.param("amount", "float", 0.8)],
    shaderCode: "uniform sampler2D texture;\nuniform float amount;\nvarying vec2 texCoord;\nvoid main() {\n\tvec4 color = texture2D(texture, texCoord);\n\tfloat r = color.r;\n\tfloat g = color.g;\n\tfloat b = color.b;\n\t\n\tcolor.r = min(1.0, (r * (1.0 - (0.607 * amount))) + (g * (0.769 * amount)) + (b * (0.189 * amount)));\n\tcolor.g = min(1.0, (r * 0.349 * amount) + (g * (1.0 - (0.314 * amount))) + (b * 0.168 * amount));\n\tcolor.b = min(1.0, (r * 0.272 * amount) + (g * 0.534 * amount) + (b * (1.0 - (0.869 * amount))));\n\t\n\tgl_FragColor = color;\n}",
    shader: function(a) {
        var h = glfx.filters.sepia;
        h.dirty && delete gl.sepia;
        gl.sepia = gl.sepia || new Shader(null, h.shaderCode);
        glfx.simpleShader.call(this, gl.sepia, {
            amount: sketch.util.clamp(0, a, 1)
        });
        return this
    }
});
glfx.addFilter({
    type: "vibrance",
    param: [glfx.param("amount", "float(-1,1)", 0)],
    shaderCode: "uniform sampler2D texture;\nuniform float amount;\nvarying vec2 texCoord;\nvoid main() {\n\tvec4 color = texture2D(texture, texCoord);\n\tfloat average = (color.r + color.g + color.b) / 3.0;\n\tfloat mx = max(color.r, max(color.g, color.b));\n\tfloat amt = (mx - average) * (-amount * 3.0);\n\tcolor.rgb = mix(color.rgb, vec3(mx), amt);\n\tgl_FragColor = color;\n}",
    shader: function(a) {
        var h = glfx.filters.vibrance;
        h.dirty && delete gl.vibrance;
        gl.vibrance = gl.vibrance || new Shader(null, h.shaderCode);
        glfx.simpleShader.call(this, gl.vibrance, {
            amount: sketch.util.clamp(-1, a, 1),
            resolution: [1 / this.width, 1 / this.height]
        });
        return this
    }
});
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.peer && (sketch.peer = {});
sketch = function(a) {
    var h = {
        "history.undo": !0,
        "history.redo": !0,
        "history.store": !0
    };
    a.peer.registerEvent = function(d) {
        var g = {};
        g.event = d;
        g.sendDataChannel = function(b) {
            var e = JSON.stringify(b),
                f;
            for (f in rtc.dataChannels) {
                var c = rtc.dataChannels[f];
                "open" === c.readyState && c.send(e)
            }
            h[b[0]] && (b.push(!0), a.socket.emit(d, JSON.stringify(b)))
        };
        g.recvDataChannel = function(b, d) {
            a.peer.run(JSON.parse(d))
        };
        g.sendSocket = function(b) {
            if (!a.socket) return console.log("missing socket");
            a.socket.emit(d, JSON.stringify(b))
        };
        g.recvSocket = function(b) {
            a.peer.run(b)
        };
        g.sendGDataChannel = function(a) {
            gapi && gapi.hangout.data && gapi.hangout.data.sendMessage(JSON.stringify(a))
        };
        g.recvGDataChannel = function(b) {
            a.peer.run(JSON.parse(b.message))
        };
        switch (a.feature.stream.tech) {
            case "GDataChannel":
                g.GDataChannel = !0;
                g.sendPriority = g.sendGDataChannel;
                g.send = g.sendGDataChannel;
                g.recv = g.recvGDataChannel;
                break;
            case "RTCDataChannel":
                if (rtc.dataChannelSupport) {
                    g.RTCDataChannel = !0;
                    g.sendPriority = g.sendSocket;
                    g.send = g.sendDataChannel;
                    g.recv = g.recvDataChannel;
                    break
                } else a.feature.stream.tech = "WebSocket";
            default:
                g.WebSocket = !0, g.sendPriority = g.sendSocket, g.send = g.sendSocket, g.recv = g.recvSocket
        }
        return g
    };
    a.peer.detectGetUserMedia = function() {
        return !!(navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia)
    };
    a.peer.detectPeerConnection = function() {
        return !!(window.PeerConnection || window.webkitPeerConnection00 || window.webkitRTCPeerConnection || window.mozRTCPeerConnection || window.RTCPeerConnection)
    };
    a.peer.detectSupport = function() {
        var d = a.peer.detectGetUserMedia(),
            g = a.peer.detectPeerConnection();
        return d && g ? !0 : !1
    };
    a.peer.saved = ['[["brush","arrow","down,235.5736215500837,144.6618284467461,1441398339:A",{"type":"color","color":"#f00"}],["brush","arrow","move,245,148,1441398339:A"],["brush","arrow","move,236,157,1441398339:A"],["brush","arrow","move,182,213,1441398339:A"],["brush","arrow","move,163,228,1441398339:A"],["brush","arrow","move,152,237,1441398339:A"],["brush","arrow","move,144,243,1441398339:A"],["brush","arrow","move,137,252,1441398339:A"],["brush","arrow","move,131,262,1441398339:A"],["brush","arrow","move,126,273,1441398339:A"],["brush","arrow","move,123,284,1441398339:A"],["brush","arrow","move,118,296,1441398339:A"],["brush","arrow","move,117,303,1441398339:A"],["brush","arrow","move,117,311,1441398339:A"],["brush","arrow","move,117,328,1441398339:A"],["brush","arrow","move,120,348,1441398339:A"],["brush","arrow","move,125,363,1441398339:A"],["brush","arrow","move,132,375,1441398339:A"],["brush","arrow","move,140,385,1441398339:A"],["brush","arrow","move,148,394,1441398339:A"],["brush","arrow","move,156,400,1441398339:A"],["brush","arrow","move,168,405,1441398339:A"],["brush","arrow","move,181,412,1441398339:A"],["brush","arrow","move,192,416,1441398339:A"],["brush","arrow","move,207,421,1441398339:A"],["brush","arrow","move,220,424,1441398339:A"],["brush","arrow","move,230,424,1441398339:A"],["brush","arrow","move,241,424,1441398339:A"],["brush","arrow","move,252,424,1441398339:A"],["brush","arrow","move,260,423,1441398339:A"],["brush","arrow","move,267,417,1441398339:A"],["brush","arrow","move,278,406,1441398339:A"],["brush","arrow","move,290,395,1441398339:A"],["brush","arrow","move,295,390,1441398339:A"],["brush","arrow","move,300,384,1441398339:A"],["brush","arrow","move,305,367,1441398339:A"],["brush","arrow","move,306,352,1441398339:A"],["brush","arrow","move,306,336,1441398339:A"],["brush","arrow","move,302,322,1441398339:A"],["brush","arrow","move,295,302,1441398339:A"],["brush","arrow","move,291,287,1441398339:A"],["brush","arrow","move,285,273,1441398339:A"],["brush","arrow","move,282,265,1441398339:A"],["brush","arrow","move,278,257,1441398339:A"],["brush","arrow","move,275,252,1441398339:A"],["brush","arrow","move,272,247,1441398339:A"],["brush","arrow","move,270,245,1441398339:A"],["brush","arrow","move,266,242,1441398339:A"],["brush","arrow","move,265,240,1441398339:A"],["brush","arrow","up,265,240,1441398339:A"],["history.storeAction","add",[{"id":58,"zIndex":54,"bbox":{"x":225.5736215500837,"y":134.6618284467461,"x_":235.5736215500837,"y_":144.6618284467461,"width":49.426378449916314,"height":115.33817155325389,"boxWidth":49.426378449916314,"boxHeight":115.33817155325389,"padding":-10,"units":"objectBoundingBox","viewBox":[0,0,49.426378449916314,115.33817155325389],"scale":{"x":1,"y":1},"rotate":0},"finger":"1441398339:A","type":"arrow","data":[{"cmd":"M","beginPath":true,"interval":0,"x":0,"y":0},{"cmd":"L","x":29.426378449916314,"y":95.33817155325389},{"cmd":"z","x":29.426378449916314,"y":95.33817155325389}],"interval":-3,"seed":1509479258,"composite":"source-over","diameter":15,"opacity":100,"fill":{"type":"color","color":"#f00"},"dataHash":-13033222398}]]]', '[["brush","arrow","down,235.5736215500837,144.6618284467461,144139833:A",{"type":"color","color":"#f00"}],["brush","arrow","move,245,148,144139833:A"],["brush","arrow","move,236,157,144139833:A"],["brush","arrow","move,182,213,144139833:A"],["brush","arrow","move,163,228,144139833:A"],["brush","arrow","move,152,237,144139833:A"],["brush","arrow","move,144,243,144139833:A"],["brush","arrow","move,137,252,144139833:A"],["brush","arrow","move,131,262,144139833:A"],["brush","arrow","move,126,273,144139833:A"],["brush","arrow","move,123,284,144139833:A"],["brush","arrow","move,118,296,144139833:A"],["brush","arrow","move,117,303,144139833:A"],["brush","arrow","move,117,311,144139833:A"],["brush","arrow","move,117,328,144139833:A"],["brush","arrow","move,120,348,144139833:A"],["brush","arrow","move,125,363,144139833:A"],["brush","arrow","move,132,375,144139833:A"],["brush","arrow","move,140,385,144139833:A"],["brush","arrow","move,148,394,144139833:A"],["brush","arrow","move,156,400,144139833:A"],["brush","arrow","move,168,405,144139833:A"],["brush","arrow","move,181,412,144139833:A"],["brush","arrow","move,192,416,144139833:A"],["brush","arrow","move,207,421,144139833:A"],["brush","arrow","move,220,424,144139833:A"],["brush","arrow","move,230,424,144139833:A"],["brush","arrow","move,241,424,144139833:A"],["brush","arrow","move,252,424,144139833:A"],["brush","arrow","move,260,423,144139833:A"],["brush","arrow","move,267,417,144139833:A"],["brush","arrow","move,278,406,144139833:A"],["brush","arrow","move,290,395,144139833:A"],["brush","arrow","move,295,390,144139833:A"],["brush","arrow","move,300,384,144139833:A"],["brush","arrow","move,305,367,144139833:A"],["brush","arrow","move,306,352,144139833:A"],["brush","arrow","move,306,336,144139833:A"],["brush","arrow","move,302,322,144139833:A"],["brush","arrow","move,295,302,144139833:A"],["brush","arrow","move,291,287,144139833:A"],["brush","arrow","move,285,273,144139833:A"],["brush","arrow","move,282,265,144139833:A"],["brush","arrow","move,278,257,144139833:A"],["brush","arrow","move,275,252,144139833:A"],["brush","arrow","move,272,247,144139833:A"],["brush","arrow","move,270,245,144139833:A"],["brush","arrow","move,266,242,144139833:A"],["brush","arrow","move,265,240,144139833:A"],["brush","arrow","up,265,240,144139833:A"],["history.storeAction","add",[{"id":58,"zIndex":54,"bbox":{"x":225.5736215500837,"y":134.6618284467461,"x_":235.5736215500837,"y_":144.6618284467461,"width":49.426378449916314,"height":115.33817155325389,"boxWidth":49.426378449916314,"boxHeight":115.33817155325389,"padding":-10,"units":"objectBoundingBox","viewBox":[0,0,49.426378449916314,115.33817155325389],"scale":{"x":1,"y":1},"rotate":0},"finger":"144139833:A","type":"arrow","data":[{"cmd":"M","beginPath":true,"interval":0,"x":0,"y":0},{"cmd":"L","x":29.426378449916314,"y":95.33817155325389},{"cmd":"z","x":29.426378449916314,"y":95.33817155325389}],"interval":-3,"seed":1509479258,"composite":"source-over","diameter":15,"opacity":100,"fill":{"type":"color","color":"#f00"},"dataHash":-13033222398}]]]'];
    a.peer.runSaved = function(d) {
        var g = JSON.parse(a.peer.saved[d || 0]);
        d = g.shift();
        a.peer.run(sketch.util.clone(d));
        a.dataChannel.send(sketch.util.clone(d));
        g.pop();
        var b = g.length - 1,
            e = 0;
        window.setInterval(function() {
            var d = e = ++e % b,
                d = g[d];
            a.peer.run(sketch.util.clone(d));
            a.dataChannel.send(sketch.util.clone(d))
        }, 100)
    };
    a.peer.run = function(d) {
        if (d && d.length) {
            var g = d.shift();
            console.log("peer:", g, JSON.stringify(d));
            switch (g) {
                case "take-snapshot":
                    a.takeSnapshot(d[0], d[1], d[2], d[3], null, !0);
                    break;
                case "scene.transform":
                    d = d.shift();
                    a.selection.transform(d, !1, !0);
                    break;
                case "scene.reset":
                    a.scene.reset(!0);
                    break;
                case "scene.update":
                    d = d.shift();
                    for (var b, e, f = 0; f < d.length; f++) if (b = d[f], e = a.scene.getById(b.id)) if (sketch.util.mergeObject(b, e), b.fill && (e.fill.color = b.fill.color, e.brush.fill.color = b.fill.color, a.style.updateCache(e.brush), e.dirty = !0), b.bbox) {
                        var c = b.bbox.scaleCache;
                        c && (1 === c.x && 1 === c.y) && (e.dirtyCacheForce = !0);
                        e.dirtyTransform = !0
                    }
                    b && isFinite(b.zIndex) && a.scene.reindex();
                    a.render.dirtyControls = !0;
                    a.render("root.peer.run('" + g + "')");
                    break;
                case "history.store":
                    if (!a.history) break;
                    a.history.storeAction(d[0], d[1], !0);
                    break;
                case "history.undo":
                    if (!a.history) break;
                    d = d.shift();
                    a.history.undoAction(d, !0);
                    break;
                case "history.redo":
                    if (!a.history) break;
                    d = d.shift();
                    a.history.redoAction(d, !0);
                    break;
                case "session.error":
                    a.exec("login");
                    break;
                case "session.change":
                    a.socket.user.room = d[0];
                    break;
                case "session.start":
                    d[0] ? a.getSketchFile("#sketch=" + d[0], !0) : alertify.log("User has entered the room.");
                    break;
                case "session.end":
                    d[0] !== userId && (alertify.log("User has left the room."), sketch.colorPalette.container.style.width = window.innerWidth + "px", sketch.colorPalette.redraw(!0));
                    break;
                case "laserPointer":
                    b = a.toolkit.laserPointer;
                    e = d[0].split(",");
                    b.mouse(null, {
                        state: e[0],
                        x: parseFloat(e[1]),
                        y: parseFloat(e[2]),
                        identifier: e[3]
                    }, d[1]);
                    break;
                default:
                    var h = d.shift();
                    e = d[0].split(",");
                    var f = e[3],
                        c = d[1],
                        m = d[2],
                        l = d[3];
                    if ("brush" === g) {
                        if (!a.toolkit.brush) break;
                        b = a.toolkit.brush
                    } else {
                        if (!a.toolkit.shape) break;
                        b = a.toolkit.shape
                    }
                    c && (d = b.deviceProxy[f] = b.getDevice(h, function(a, b) {
                        a.brush && (a.brush.interval = l, a.brush.seed = m)
                    }), d.brush && (d.brush.fill = c, a.style.updateCache(d.brush)));
                    ("brush" === g ? b.record : new b.record)(null, {
                        state: e[0],
                        x: parseFloat(e[1]),
                        y: parseFloat(e[2]),
                        identifier: f,
                        seed: m,
                        interval: l
                    })
            }
        }
    };
    return a
}(sketch);
"undefined" === typeof glfx && (glfx = {});
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.peer && (sketch.peer = {});
sketch = function(a) {
    a.setup.webRTC = function(d) {
        d = d || {};
        "function" === typeof d && (d = {
            onready: d
        });
        d.onerror = d.onerror || function(a) {};
        d.onready = d.onready || function(a) {};
        if (!a.dataChannel) {
            var g = a.feature.stream.video,
                b = a.feature.stream.audio,
                e = a.feature.stream.audio;
            if (g || b) {
                if (!a.peer.detectGetUserMedia()) return d.onerror();
                a.loader.camera = a.loader.message("loading Camera...", function() {
                    var f = document.getElementById("videos");
                    rtc.createStream({
                        audio: b,
                        video: {
                            mandatory: {},
                            optional: []
                        }
                    }, function(a) {
                        c(a,
                            rtc._me.id || "you", !0)
                    }, function(b) {
                        if (d.onerror) d.onerror(b);
                        a.loader.update(a.loader.camera, "loading Camera...", 100);
                        alertify.log("There was an error loading the camera, please check your browser permissions.")
                    });
                    e && rtc.connect("wss://" + a.location.hostRTC, a.location.getRoomID());
                    rtc.on("close", function() {
                        a.feature.debug && console.log("connection closed");
                        a.dataChannel = !1
                    });
                    rtc.on("connections", function() {
                        if (document.querySelector("#stream-you")) {
                            var b = rtc._me.id,
                                c = a.rtc.videos,
                                d = c.you;
                            d.element.id = "stream-" + b;
                            d.element.setAttribute("data-id", b);
                            var e = c[b] = {};
                            e.id = b;
                            e.element = d.element;
                            e.parent = d.parent;
                            delete c.you;
                            a.rtc.arrange()
                        }
                    });
                    rtc.on("add remote stream", function(a, b) {
                        c(a, b)
                    });
                    rtc.on("disconnect stream", function(b) {
                        if (b = document.getElementById("stream-" + b)) {
                            var c = b.parentNode;
                            c.parentNode.removeChild(c);
                            delete videos[b.id];
                            a.rtc.arrange()
                        }
                    });
                    a.dataChannel = a.peer.registerEvent("data stream data");
                    rtc.on(a.dataChannel.event, function() {
                        a.dataChannel.recv.apply(this, arguments)
                    });
                    eventjs.add(window, "resize", function() {
                        a.rtc.arrange()
                    });
                    var c = function(b, c, e) {
                        if (c && b && !document.getElementById("stream-" + c)) {
                            var p = document.createElement("div");
                            p.className = "videoStream";
                            p.style.background = "#000";
                            f.appendChild(p);
                            var r = document.createElement("video");
                            r.style.display = "none";
                            e && (r.volume = 0);
                            r.setAttribute("autoplay", !0);
                            r.setAttribute("data-id", c);
                            r.id = "stream-" + c;
                            p.appendChild(r);
                            rtc.attachStream(b, r);
                            var q = new a.util.videoStateToggle;
                            p.videoStateToggle = q;
                            p.appendChild(q.element);
                            a.feature.stream.spectrumAnalysis && h(b);
                            var u = a.rtc.videos[c] = {
                                id: c,
                                element: r,
                                parent: p
                            }, v = function() {
                                try {
                                    a.rtc.pause(), a.rtc.arrange(), d.onready("effect"), e && a.loader && a.loader.update(a.loader.camera, "loading Filter", 100)
                                } catch (b) {
                                    setTimeout(v, 100)
                                }
                            }, s = function() {
                                eventjs.remove(r, "playing", s);
                                e && a.loader && a.loader.update(a.loader.camera, "loading Filterâ€¦");
                                if (g && glfx.applyShader) {
                                    var b = glfx.applyShader(r),
                                        c = b.canvas = b.canvas || document.createElement("canvas");
                                    c.className = "videoStream";
                                    u.canvas = c;
                                    u.ctx = c.ctx;
                                    r.gl = b;
                                    d.onready && r.gl.setFilter(glfx.filterStack[glfx.filterId || 0])
                                }
                                v()
                            };
                            eventjs.add(r, "playing", s);
                            return r
                        }
                    }
                })
            }
        }
    };
    a.RTC = function() {
        var d = this;
        this.container = document.getElementById("videos");
        this.arrange = new this.arrange(this);
        this.playing = a.feature.stream.videoAtop;
        this.videos = {};
        this.play = function(a) {
            g(a, !0)
        };
        this.pause = function(a) {
            g(a, !1)
        };
        this.toggle = function(a, e) {
            e = "boolean" === typeof e ? e : !d.playing;
            g(a, e)
        };
        var g = function(a, e) {
            var f = e ? "play" : "pause";
            if ("[object HTMLVideoElement]" === String(a)) {
                var c = {}, g = a.getAttribute("data-id");
                c[g] = a;
                a = c
            } else a = d.videos;
            var c = !1,
                g = d.videos,
                h;
            for (h in g) {
                var l = g[h],
                    p = l.element;
                if (a[l.id] && (e ? l.parent.videoStateToggle.play() : l.parent.videoStateToggle.pause(), p[f](), p.playing = e, p.gl)) p.gl[f]();
                p.playing && (c = !0)
            }
            d.playing = c;
            glfx.animate && glfx.animate(c)
        };
        this.getConnectionCount = function() {
            var a = 0,
                d;
            for (d in rtc.users) a++;
            return a
        };
        this.getFocusVideo = function(b) {
            if (b && a.rtc.videos[b]) return a.rtc.videos[b].element;
            for (var d in rtc.users) if (0 === rtc.users[d].index) {
                if (b = document.querySelector("#stream-" + d)) return b;
                console.log("missing stream", d)
            }
            return (b = document.querySelector("#stream-you")) ? b : document.querySelector("#stream-" + rtc._me.id)
        };
        return this
    };
    a.util.videoStateToggle = function() {
        var d = document.createElement("span"),
            g = document.createElement("span");
        g.className = "pause icon-pause";
        eventjs.add(g, "click", function() {
            a.rtc.playing ? (f.play(), a.rtc.pause()) : (f.pause(), a.rtc.play())
        });
        var b = document.createElement("span");
        b.className = "next icon-right";
        eventjs.add(b, "click", function(b, d) {
            a.util.changeVideoFilter(1)
        });
        var e = document.createElement("span");
        e.className = "prev icon-left";
        eventjs.add(e, "click", function() {
            a.util.changeVideoFilter(-1)
        });
        eventjs.add([e, b], "mousedown", eventjs.cancel);
        d.appendChild(g);
        d.appendChild(b);
        d.appendChild(e);
        var f = {};
        f.element = d;
        f.play = function() {
            dom.setClass(g, "icon-play", !1);
            dom.setClass(g, "icon-pause", !0)
        };
        f.pause = function() {
            dom.setClass(g, "icon-play", !0);
            dom.setClass(g, "icon-pause", !1)
        };
        return f
    };
    a.util.changeVideoFilter = function(d, g) {
        rtc._me.id || (rtc._me.id = "you");
        g = g || a.rtc.getFocusVideo(rtc && rtc._me.id);
        var b = glfx.filterStack;
        if (b) {
            var e = b.length,
                e = Math.abs((glfx.filterId + d + e) % e);
            g.filterId = glfx.filterId = e;
            g.gl && (g.gl.setFilter(b[e]), glfx.render());
            document.querySelector("#filters").innerHTML = '<div style="height: 40px;"></div>'
        }
    };
    a.util.toggleVideo = function(d, g) {
        a.rtc.playing ? a.rtc.pause() : a.rtc.play()
    };
    var h = function(d) {
        var g = a.audioContext = "AudioContext" in window ? new AudioContext : "webkitAudioContext" in window ? new webkitAudioContext : null;
        if (g) {
            d = g.createMediaStreamSource(d);
            var b = g.createJavaScriptNode(2048,
                1, 1);
            b.connect(g.destination);
            b.onaudioprocess = function() {
                var a = new Uint8Array(e.frequencyBinCount);
                e.getByteFrequencyData(a);
                for (var b = 0, d = a.length / 4, g = 0; g < d; g++) b += a[g];
                a = b / d;
                b = glfx.getContextByIndex(0);
                d = sketch.configure.tools.gl_test;
                g = glfx.filters.test && glfx.filters.test.paramIndex;
                b && (b.filters && b.filters.test) && (b.filters.test.values[g.amount] = a / 100);
                d.amount.value = a / 100
            };
            var e = g.createAnalyser();
            e.smoothingTimeConstant = 0.3;
            e.fftSize = 32;
            e.connect(b);
            d.connect(e)
        }
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function(a) {
    a.RTC.prototype.arrange = function(h) {
        h.arrange = function(d) {
            var g = a.rtc.videos,
                b;
            for (b in g);
            if (d !== h.arrange.method) {
                g = a.rtc.playing;
                b = window.innerWidth - 200;
                var e = window.innerHeight;
                "string" === typeof d && (h.arrange.method = d);
                a.feature.stream.videoAtop ? (h.container.style.display = "block", h.arrange[h.arrange.method](b, e)) : h.container.style.display = "none";
                a.rtc.toggle(null, g)
            }
        };
        h.arrange.method = "singleBottomRight";
        h.arrange.grid = function(a, g) {};
        h.arrange.split = function(d, g) {
            var b = rtc.rooms[a.location.getRoomID()] || [],
                e = h.videos,
                f = b && b[0] || "you",
                c = b && b[1],
                k, m;
            for (m in e) {
                var b = e[m],
                    l = b.parent.style,
                    b = b.element;
                m === f ? (h.arrange.setSize(b, d, g, 0, !0, !0), h.play(b), l.display = "block") : m === c ? (k = h.arrange.setSize(b, d / 4, g / 4, 1, !0), h.arrange.setPosition(b, d - k.width - 1, g - k.height), h.play(b), l.display = "block") : (h.pause(b), l.display = "none")
            }
            a.colorPalette.container.style.width = (c && k ? window.innerWidth - k.width : window.innerWidth) + "px";
            a.colorPalette.redraw(!0)
        };
        h.arrange.focus = function(d, g) {
            var b = (rtc.rooms[a.location.getRoomID()] || [])[0],
                e = h.videos,
                f;
            for (f in e) {
                var c = e[f],
                    k = c.element,
                    c = c.parent.style;
                f === b ? (h.arrange.setSize(k, d, g, 0, !0, !0), h.play(k), c.display = "block") : (h.pause(k), c.display = "none")
            }
            a.colorPalette && (a.colorPalette.container.style.width = window.innerWidth + "px", a.colorPalette.redraw(!0))
        };
        h.arrange.singleBottomRight = function(d, g) {
            var b = rtc.rooms[a.location.getRoomID()] || [],
                e = rtc._me.id || "you",
                f, c;
            for (c in h.videos) {
                var b = h.videos[c],
                    k = b.parent.style,
                    b = b.element;
                c === e ? (f = h.arrange.setSize(b, Math.max(200, d / 4), Math.max(200,
                    g / 4), 1, !0), h.arrange.setPosition(b, 0, 0), h.play(b), k.display = "block") : (h.pause(b), k.display = "none")
            }
            f ? (e = window.innerWidth - f.width, h.container.style.width = f.width + "px", h.container.style.height = f.height + "px") : e = window.innerWidth;
            a.colorPalette && (a.colorPalette.container.style.width = e + "px", a.colorPalette.redraw(!0))
        };
        h.arrange.single = function(d, g) {
            var b, e = rtc._me.id || "you",
                f = h.videos,
                c;
            for (c in f) {
                var k = f[c],
                    m = k.element,
                    k = k.parent.style;
                c === e ? (b = h.arrange.setSize(m, d, g, 0, !1, !0), h.play(m), k.display = "block") : (h.pause(m), k.display = "none")
            }
            b && (h.container.style.width = b.width + "px", h.container.style.height = b.height + "px");
            a.colorPalette && (a.colorPalette.container.style.width = window.innerWidth + "px", a.colorPalette.redraw(!0))
        };
        h.arrange.setSize = function(a, g, b, e, f, c) {
            var k = g / a.videoWidth,
                m = b / a.videoHeight;
            f = f ? k > m ? k : m : k > m ? m : k;
            f = {
                width: a.videoWidth * f >> 0,
                height: a.videoHeight * f >> 0
            };
            c && h.arrange.toCenter(a, g, b, f.width, f.height);
            g = a.parentNode;
            g.style.zIndex = e || 0;
            g.style.width = f.width + "px";
            g.style.height = f.height + "px";
            a.width = f.width;
            a.height = f.height;
            return f
        };
        h.arrange.setPosition = function(a, g, b) {
            a.parentNode.style.right = g + "px";
            a.parentNode.style.bottom = b + "px"
        };
        h.arrange.toCenter = function(a, g, b, e, f) {
            g = (g - e) / 2;
            b = (b - f - 40) / 2;
            0 > b && (b *= 2);
            0 > g && (g *= 2);
            h.arrange.setPosition(a, g, b)
        };
        return h.arrange
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function(a) {
    a.setup.add(function() {
        if (a.feature.stream.text) {
            var h = document.createElement("div");
            h.className = "chatbox";
            var d = document.createElement("div"),
                g = document.createElement("input");
            g.type = "text";
            g.placeholder = "enter message...";
            h.appendChild(d);
            h.appendChild(g);
            document.body.appendChild(h);
            var b = function(a, b) {
                    a = a.replace(/</g, "<");
                    d.innerHTML = d.innerHTML + (b ? '<span style="color: ' + b + '; padding-left: 15px">' + a + "</span>" : '<strong style="padding-left: 15px">' + a + "</strong>") + "<br>";
                    d.scrollTop = 1E4
                }, e = createClientEvent("chat_message"),
                f = "#" + (16777215 * Math.random() | 0).toString(16);
            g.addEventListener("keydown", function(c) {
                13 === (c.which || c.keyCode) && (e.send(JSON.stringify({
                    eventName: "chat_message",
                    data: {
                        messages: g.value,
                        room: a.location.getRoomID(),
                        color: f
                    }
                })), b(g.value), g.value = "")
            }, !1);
            rtc.on(e.event, function() {
                var a = e.recv.apply(this, arguments);
                switch (a.type) {
                    case "chat_message":
                        b(a.messages, a.color.toString(16));
                        break;
                    case "test_message":
                        console.log(a);
                        break;
                    default:
                        console.log(a)
                }
            })
        }
    });
    return a
}(sketch);
var PeerConnection = window.PeerConnection || window.webkitPeerConnection00 || window.webkitRTCPeerConnection || window.mozRTCPeerConnection,
    URL = window.URL || window.webkitURL || window.msURL || window.oURL,
    getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia,
    nativeRTCIceCandidate = window.mozRTCIceCandidate || window.RTCIceCandidate,
    nativeRTCSessionDescription = window.mozRTCSessionDescription || window.RTCSessionDescription,
    sdpConstraints = {
        mandatory: {
            OfferToReceiveAudio: !0,
            OfferToReceiveVideo: !0
        }
    };
navigator.webkitGetUserMedia && (webkitMediaStream.prototype.getVideoTracks || (webkitMediaStream.prototype.getVideoTracks = function() {
    return this.videoTracks
}, webkitMediaStream.prototype.getAudioTracks = function() {
    return this.audioTracks
}), webkitRTCPeerConnection.prototype.getLocalStreams || (webkitRTCPeerConnection.prototype.getLocalStreams = function() {
    return this.localStreams
}, webkitRTCPeerConnection.prototype.getRemoteStreams = function() {
    return this.remoteStreams
}));
(function() {
    var a;
    a = "undefined" === typeof module ? this.rtc = {} : module.exports = {};
    a.debug = !1;
    a._socket = null;
    a._me = {};
    a._events = {};
    a.on = function(h, d) {
        a._events[h] = a._events[h] || [];
        a._events[h].push(d)
    };
    a.fire = function(h, d) {
        var g = a._events[h],
            b = Array.prototype.slice.call(arguments, 1);
        if (g) for (var e = 0, f = g.length; e < f; e++) g[e].apply(null, b)
    };
    a.SERVER = function() {
        var a = "",
            a = navigator.mozGetUserMedia ? "stun:23.21.150.121" : "stun:stun.l.google.com:19302";
        return {
            iceServers: [{
                url: a
            }]
        }
    };
    a.users = {};
    a.rooms = {};
    a.peerConnections = {};
    a.connections = [];
    a.streams = [];
    a.numStreams = 0;
    a.initializedStreams = 0;
    a.dataChannels = {};
    a.dataChannelConfig = {
        optional: [{
            RtpDataChannels: !0
        }, {
            DtlsSrtpKeyAgreement: !0
        }]
    };
    a.pc_constraints = {
        optional: [{
            DtlsSrtpKeyAgreement: !0
        }]
    };
    a.checkDataChannelSupport = function() {
        try {
            return (new PeerConnection(a.SERVER(), a.dataChannelConfig)).createDataChannel("supportCheck", {
                reliable: !1
            }).close(), !0
        } catch (h) {
            return !1
        }
    };
    a.dataChannelSupport = a.checkDataChannelSupport();
    a.connect = function(h, d) {
        d = d || "";
        a._socket = new WebSocket(h);
        a._socket.onclose = function(d) {
            a.fire("close")
        };
        a._socket.onopen = function() {
            a._socket.send(JSON.stringify({
                eventName: "join_room",
                data: {
                    room: d
                }
            }));
            a._socket.onmessage = function(d) {
                d = JSON.parse(d.data);
                a.fire(d.eventName, d.data)
            };
            a._socket.onerror = function(a) {
                console.error("onerror");
                console.error(a)
            };
            a._socket.onclose = function(d) {
                d = a._socket.id;
                a.fire("disconnect stream", d);
                "undefined" !== typeof a.peerConnections[d] && a.peerConnections[d].close();
                delete a.peerConnections[d];
                delete a.dataChannels[d];
                delete a.connections[d]
            };
            a.storeUserData = function(g) {
                if (!g.room) return console.log(arguments);
                a.rooms[d] = g.room;
                for (var b = 0; b < g.room.length; b++) {
                    var e = g.room[b];
                    a.users[e] = {
                        index: b
                    };
                    e === g.you && (a._me.id = e, a._me.index = b)
                }
            };
            a.on("get_peers", function(d) {
                a.connections = d.connections;
                a._me.id = d.you;
                a.attemptOffer && (a.createPeerConnections(), a.addStreams(), a.addDataChannels(), a.sendOffers());
                a.storeUserData(d);
                a.fire("connections", a.connections)
            });
            a.on("receive_ice_candidate", function(d) {
                var b = new nativeRTCIceCandidate(d);
                if (d = a.peerConnections[d.socketId]) d.addIceCandidate(b), a.fire("receive ice candidate", b)
            });
            a.on("new_peer_connected", function(d) {
                var b = d.socketId;
                a.connections.push(b);
                delete a.attemptOffer;
                for (var b = a.createPeerConnection(b), e = 0; e < a.streams.length; e++) b.addStream(a.streams[e]);
                a.storeUserData(d)
            });
            a.on("remove_peer_connected", function(d) {
                d = d.socketId;
                a.fire("disconnect stream", d);
                "undefined" !== typeof a.peerConnections[d] && a.peerConnections[d].close();
                delete a.peerConnections[d];
                delete a.dataChannels[d];
                delete a.connections[d]
            });
            a.on("receive_offer", function(d) {
                a.receiveOffer(d.socketId, d.sdp);
                a.fire("receive offer", d)
            });
            a.on("receive_answer", function(d) {
                a.receiveAnswer(d.socketId, d.sdp);
                a.fire("receive answer", d)
            });
            a.fire("connect")
        }
    };
    a.sendOffers = function() {
        for (var h = 0, d = a.connections.length; h < d; h++) a.sendOffer(a.connections[h])
    };
    a.onClose = function(h) {
        a.on("close_stream", function() {
            a.fire("close_stream", h)
        })
    };
    a.createPeerConnections = function() {
        for (var h = 0; h < a.connections.length; h++) a.createPeerConnection(a.connections[h])
    };
    a.createPeerConnection = function(h) {
        var d = a.pc_constraints;
        a.dataChannelSupport && (d = a.dataChannelConfig);
        d = a.peerConnections[h] = new PeerConnection(a.SERVER(), d);
        d.onicecandidate = function(d) {
            d.candidate && a._socket.send(JSON.stringify({
                eventName: "send_ice_candidate",
                data: {
                    label: d.candidate.sdpMLineIndex,
                    candidate: d.candidate.candidate,
                    socketId: h
                }
            }));
            a.fire("ice candidate", d.candidate)
        };
        d.onopen = function() {
            a.fire("peer connection opened")
        };
        d.onaddstream = function(d) {
            a.fire("add remote stream", d.stream,
                h)
        };
        a.dataChannelSupport && (d.ondatachannel = function(d) {
            a.debug && console.log("data channel connecting " + h);
            a.addDataChannel(h, d.channel)
        });
        return d
    };
    a.sendOffer = function(h) {
        var d = a.peerConnections[h],
            g = {
                optional: [],
                mandatory: {
                    MozDontOfferDataChannel: !0
                }
            };
        if (navigator.webkitGetUserMedia) for (var b in g.mandatory) - 1 != b.indexOf("Moz") && delete g.mandatory[b];
        g = mergeConstraints(g, sdpConstraints);
        d.createOffer(function(b) {
            b.sdp = preferOpus(b.sdp);
            d.setLocalDescription(b);
            a._socket.send(JSON.stringify({
                eventName: "send_offer",
                data: {
                    socketId: h,
                    sdp: b
                }
            }))
        }, null, sdpConstraints)
    };
    a.receiveOffer = function(h, d) {
        a.sendAnswer(h, d)
    };
    a.sendAnswer = function(h, d) {
        var g = a.peerConnections[h];
        g && (g.setRemoteDescription(new nativeRTCSessionDescription(d)), g.createAnswer(function(b) {
            g.setLocalDescription(b);
            a._socket.send(JSON.stringify({
                eventName: "send_answer",
                data: {
                    socketId: h,
                    sdp: b
                }
            }))
        }, null, sdpConstraints))
    };
    a.receiveAnswer = function(h, d) {
        a.peerConnections[h].setRemoteDescription(new nativeRTCSessionDescription(d))
    };
    a.createStream = function(h,
                              d, g) {
        d = d || function() {};
        g = g || function() {};
        h = {
            video: !! h.video,
            audio: !! h.audio
        };
        getUserMedia ? (a.numStreams++, getUserMedia.call(navigator, h, function(b) {
            a.streams.push(b);
            a.initializedStreams++;
            d(b);
            a.initializedStreams === a.numStreams && a.fire("ready")
        }, function(b) {
            a.debug && console.log("Could not connect stream (try restarting browser).");
            g(b)
        })) : a.debug && console.log("WebRTC is not yet supported in this browser.")
    };
    a.addStreams = function() {
        for (var h = 0; h < a.streams.length; h++) {
            var d = a.streams[h],
                g;
            for (g in a.peerConnections) a.peerConnections[g].addStream(d)
        }
    };
    a.attachStream = function(h, d) {
        "string" === typeof d && (d = document.getElementById(d));
        navigator.mozGetUserMedia ? (a.debug && console.log("Attaching media stream"), d.mozSrcObject = h, d.play()) : window.URL && (d.src = URL.createObjectURL(h))
    };
    a.createDataChannel = function(h, d) {
        if (a.dataChannelSupport) {
            var g, b;
            if ("string" === typeof h) g = h, b = a.peerConnections[h];
            else {
                b = h;
                g = void 0;
                for (var e in a.peerConnections) a.peerConnections[e] === b && (g = e)
            }
            if (!g) throw Error("attempt to createDataChannel with unknown id");
            if (!(b && b instanceof
                PeerConnection)) throw Error("attempt to createDataChannel without peerConnection");
            d = d || "fileTransfer";
            e = {
                reliable: !1
            };
            var f;
            try {
                a.debug && console.log("createDataChannel " + g), f = b.createDataChannel(d, e)
            } catch (c) {
                throw a.debug && console.log("seems that DataChannel is NOT actually supported!"), c;
            }
            return a.addDataChannel(g, f)
        }
        a.debug && console.log("webRTC data channel is not yet supported in this browser, or you must turn on experimental flags")
    };
    a.addDataChannel = function(h, d) {
        d.onopen = function() {
            a.debug && console.log("data stream open " + h);
            a.fire("data stream open", d)
        };
        d.onclose = function(g) {
            delete a.dataChannels[h];
            delete a.peerConnections[h];
            delete a.connections[h];
            a.debug && console.log("data stream close " + h);
            a.fire("data stream close", d)
        };
        d.onmessage = function(g) {
            a.debug && console.log("data stream message " + h);
            a.fire("data stream data", d, g.data)
        };
        d.onerror = function(g) {
            a.debug && console.log("data stream error " + h + ": " + g);
            a.fire("data stream error", d, g)
        };
        return a.dataChannels[h] = d
    };
    a.addDataChannels = function() {
        if (a.dataChannelSupport) for (var h in a.peerConnections) a.createDataChannel(h)
    };
    a.on("ready", function() {
        a.createPeerConnections();
        a.addStreams();
        a.addDataChannels();
        a.sendOffers();
        a.attemptOffer = !0
    })
}).call(this);

function preferOpus(a) {
    for (var h = a.split("\r\n"), d = null, g = 0; g < h.length; g++) if (-1 !== h[g].search("m=audio")) {
        d = g;
        break
    }
    if (null === d) return a;
    for (a = 0; a < h.length; a++) if (-1 !== h[a].search("opus/48000")) {
        (a = extractSdp(h[a], /:(\d+) opus\/48000/i)) && (h[d] = setDefaultCodec(h[d], a));
        break
    }
    h = removeCN(h, d);
    return a = h.join("\r\n")
}
function extractSdp(a, h) {
    var d = a.match(h);
    return d && 2 == d.length ? d[1] : null
}

function setDefaultCodec(a, h) {
    for (var d = a.split(" "), g = [], b = 0, e = 0; e < d.length; e++) 3 === b && (g[b++] = h), d[e] !== h && (g[b++] = d[e]);
    return g.join(" ")
}
function removeCN(a, h) {
    for (var d = a[h].split(" "), g = a.length - 1; 0 <= g; g--) {
        var b = extractSdp(a[g], /a=rtpmap:(\d+) CN\/\d+/i);
        b && (b = d.indexOf(b), - 1 !== b && d.splice(b, 1), a.splice(g, 1))
    }
    a[h] = d.join(" ");
    return a
}
function mergeConstraints(a, h) {
    for (var d in h.mandatory) a.mandatory[d] = h.mandatory[d];
    a.optional.concat(h.optional);
    return a
}
var GIFEncoder = function() {
    for (var a = 0, h = {}; 256 > a; a++) h[a] = String.fromCharCode(a);
    var d = function() {
        this.bin = []
    };
    d.prototype.getData = function() {
        for (var a = "", b = this.bin.length, c = 0; c < b; c++) a += h[this.bin[c]];
        return a
    };
    d.prototype.writeByte = function(a) {
        this.bin.push(a)
    };
    d.prototype.writeUTFBytes = function(a) {
        for (var b = a.length, c = 0; c < b; c++) this.writeByte(a.charCodeAt(c))
    };
    d.prototype.writeBytes = function(a, b, c) {
        c = c || a.length;
        for (b = b || 0; b < c; b++) this.writeByte(a[b])
    };
    var a = {}, g, b, e = null,
        f, c = -1,
        k = 0,
        m = !1,
        l, p,
        r, q, u, v = [],
        s = 7,
        x = -1,
        w = !0,
        A = !1,
        y = 10;
    a.setDelay = function(a) {
        k = Math.round(a / 10)
    };
    a.setDispose = function(a) {
        0 <= a && (x = a)
    };
    a.setRepeat = function(a) {
        0 <= a && (c = a)
    };
    a.setTransparent = function(a) {
        e = a
    };
    a.addFrame = function(a, d) {
        if (null == a || !m || null == l) throw Error("Please call start method before calling addFrame");
        var h = !0,
            z = sketch.perf();
        try {
            d ? p = a : (p = a.getImageData(0, 0, a.canvas.width, a.canvas.height).data, A || B(a.canvas.width, a.canvas.height));
            var N = g,
                L = b;
            r = [];
            for (var Q = p, K = 0, F = 0; F < L; F++) for (var aa = 0; aa < N; aa++) {
                var U = 4 * F * N + 4 * aa;
                r[K++] = Q[U];
                r[K++] = Q[U + 1];
                r[K++] = Q[U + 2]
            }
            var Z = r.length,
                N = Z / 3;
            q = [];
            var T = new NeuQuant(r, Z, y);
            u = T.process();
            for (L = Z = 0; L < N; L++) {
                var P = T.map(r[Z++] & 255, r[Z++] & 255, r[Z++] & 255);
                v[P] = !0;
                q[L] = P
            }
            r = null;
            s = 7;
            if (null != e) if (null == u) f = -1;
            else {
                for (var T = (e & 16711680) >> 16, P = (e & 65280) >> 8, Z = e & 255, N = 0, L = 16777216, Y = u.length, Q = 0; Q < Y;) {
                    var da = T - (u[Q++] & 255),
                        ia = P - (u[Q++] & 255),
                        na = Z - (u[Q] & 255),
                        K = da * da + ia * ia + na * na,
                        F = Q / 3;
                    v[F] && K < L && (L = K, N = F);
                    Q++
                }
                f = N
            }
            w && (E(g), E(b), l.writeByte(240 | s), l.writeByte(0), l.writeByte(0), D(),
                0 <= c && (l.writeByte(33), l.writeByte(255), l.writeByte(11), l.writeUTFBytes("NETSCAPE2.0"), l.writeByte(3), l.writeByte(1), E(c), l.writeByte(0)));
            l.writeByte(33);
            l.writeByte(249);
            l.writeByte(4);
            var pa, ea;
            null == e ? ea = pa = 0 : (pa = 1, ea = 2);
            0 <= x && (ea = x & 7);
            l.writeByte(ea << 2 | 0 | pa);
            E(k);
            l.writeByte(f);
            l.writeByte(0);
            l.writeByte(44);
            E(0);
            E(0);
            E(g);
            E(b);
            w ? l.writeByte(0) : l.writeByte(128 | s);
            w || D();
            (new LZWEncoder(g, b, q, 8)).encode(l);
            w = !1
        } catch (R) {
            h = !1
        }
        console.log(z());
        return h
    };
    a.finish = function() {
        if (!m) return !1;
        var a = !0;
        m = !1;
        try {
            l.writeByte(59)
        } catch (b) {
            a = !1
        }
        return a
    };
    var z = function() {
        f = 0;
        u = q = r = p = null;
        w = !0
    };
    a.setFrameRate = function(a) {
        15 != a && (k = Math.round(100 / a))
    };
    a.setQuality = function(a) {
        1 > a && (a = 1);
        y = a
    };
    var B = a.setSize = function(a, c) {
        if (!m || w) g = a, b = c, 1 > g && (g = 320), 1 > b && (b = 240), A = !0
    };
    a.start = function() {
        z();
        var a = !0;
        l = new d;
        try {
            l.writeUTFBytes("GIF89a")
        } catch (b) {
            a = !1
        }
        return m = a
    };
    a.cont = function() {
        z();
        l = new d;
        return m = !0
    };
    var D = function() {
        l.writeBytes(u);
        for (var a = 768 - u.length, b = 0; b < a; b++) l.writeByte(0)
    }, E = function(a) {
        l.writeByte(a & 255);
        l.writeByte(a >> 8 & 255)
    };
    a.stream = function() {
        return l
    };
    a.setProperties = function(a, b) {
        m = a;
        w = b
    };
    return a
}, LZWEncoder = function() {
    var a = {}, h, d, g, b, e, f, c, k, m = [],
        l = [],
        p = 0,
        r = !1,
        q, u, v, s = 0,
        x = 0,
        w = [0, 1, 3, 7, 15, 31, 63, 127, 255, 511, 1023, 2047, 4095, 8191, 16383, 32767, 65535],
        A, y = [],
        z = a.LZWEncoder = function(a, c, e, f) {
            h = a;
            d = c;
            g = e;
            b = Math.max(2, f)
        }, B = function(a) {
            for (var b = 0; b < a; ++b) m[b] = -1
        }, D = a.compress = function(a, b) {
            var d, e, f, g, h, s;
            q = a;
            r = !1;
            c = q;
            k = (1 << c) - 1;
            u = 1 << a - 1;
            v = u + 1;
            p = u + 2;
            A = 0;
            g = G();
            s = 0;
            for (d = 5003; 65536 > d; d *= 2)++s;
            s = 8 - s;
            B(5003);
            J(u, b);
            a: for (; - 1 != (f = G());) if (d = (f << 12) + g, e = f << s ^ g, m[e] == d) g = l[e];
            else {
                if (0 <= m[e]) {
                    h = 5003 - e;
                    0 == e && (h = 1);
                    do if (0 > (e -= h) && (e += 5003), m[e] == d) {
                        g = l[e];
                        continue a
                    }
                    while (0 <= m[e])
                }
                J(g, b);
                g = f;
                4096 > p ? (l[e] = p++, m[e] = d) : (d = b, B(5003), p = u + 2, r = !0, J(u, d))
            }
            J(g, b);
            J(v, b)
        };
    a.encode = function(a) {
        a.writeByte(b);
        e = h * d;
        f = 0;
        D(b + 1, a);
        a.writeByte(0)
    };
    var E = function(a) {
        0 < A && (a.writeByte(A), a.writeBytes(y, 0, A), A = 0)
    }, G = function() {
        if (0 == e) return -1;
        --e;
        return g[f++] & 255
    }, J = function(a, b) {
        s &= w[x];
        s = 0 < x ? s | a << x : a;
        for (x += c; 8 <= x;) {
            var d = s & 255,
                e = b;
            y[A++] = d;
            254 <= A && E(e);
            s >>= 8;
            x -= 8
        }
        if (p > k || r) r ? (k = (1 << (c = q)) - 1, r = !1) : (++c, k = 12 == c ? 4096 : (1 << c) - 1);
        if (a == v) {
            for (; 0 < x;) d = s & 255, e = b, y[A++] = d, 254 <= A && E(e), s >>= 8, x -= 8;
            E(b)
        }
    };
    z.apply(this, arguments);
    return a
}, NeuQuant = function() {
    var a = {}, h, d, g, b, e, f = [],
        c = [],
        k = [],
        m = [],
        l = a.NeuQuant = function(a, f, h) {
            d = a;
            g = f;
            b = h;
            console.log(256);
            e = Array(256);
            for (a = 0; 256 > a; a++) e[a] = Array(4), f = e[a], f[0] = f[1] = f[2] = (a << 12) / 256, k[a] = 256, c[a] = 0
        };
    a.map = function(a, b, c) {
        var d, g, h, k, l, m, y;
        l = 1E3;
        y = -1;
        d = f[b];
        for (g = d - 1; 256 > d || 0 <= g;) 256 > d && (m = e[d], h = m[1] - b, h >= l ? d = 256 : (d++, 0 > h && (h = -h), k = m[0] - a, 0 > k && (k = -k), h += k, h < l && (k = m[2] - c, 0 > k && (k = -k), h += k, h < l && (l = h, y = m[3])))), 0 <= g && (m = e[g], h = b - m[1], h >= l ? g = -1 : (g--, 0 > h && (h = -h), k = m[0] - a, 0 > k && (k = -k), h += k, h < l && (k = m[2] - c, 0 > k && (k = -k), h += k, h < l && (l = h, y = m[3]))));
        return y
    };
    a.process = function() {
        var a, l, q, u, v, s, x, w, A, y, z, B, D, E;
        1509 > g && (b = 1);
        h = 30 + (b - 1) / 3;
        B = d;
        D = 0;
        E = g;
        z = g / (3 * b);
        y = z / 100 | 0;
        w = 1024;
        s = 2048;
        x = s >> 6;
        1 >= x && (x = 0);
        for (a = 0; a < x; a++) m[a] = w * (256 * (x * x - a * a) / (x * x));
        A = 1509 > g ? 3 : 0 != g % 499 ? 1497 : 0 != g % 491 ? 1473 : 0 != g % 487 ? 1461 : 1509;
        for (a = 0; a < z;) {
            q = (B[D + 0] & 255) << 4;
            u = (B[D + 1] & 255) << 4;
            v = (B[D + 2] & 255) << 4;
            l = q;
            for (var G = u, J = v, C = void 0, O = void 0, N = void 0, L = O = O = void 0, Q = void 0, K = void 0, F = void 0, aa = void 0, F = K = 2147483647, Q = L = -1, C = 0; 256 > C; C++) aa = e[C], O = aa[0] - l, 0 > O && (O = -O), N = aa[1] - G, 0 > N && (N = -N), O += N, N = aa[2] - J, 0 > N && (N = -N), O += N, O < K && (K = O, L = C), O -= c[C] >> 12, O < F && (F = O, Q = C), O = k[C] >> 10, k[C] -= O, c[C] += O << 10;
            k[L] += 64;
            c[L] -= 65536;
            l = Q;
            G = w;
            J = u;
            C = v;
            L = e[l];
            L[0] -= G * (L[0] - q) / 1024;
            L[1] -= G * (L[1] - J) / 1024;
            L[2] -= G * (L[2] - C) / 1024;
            if (0 != x) for (F = K = Q = L = C = J = G = void 0, C = l - x, - 1 > C && (C = -1), L = l + x, 256 < L && (L = 256), G = l + 1, J = l - 1, K = 1; G < L || J > C;) {
                Q = m[K++];
                if (G < L) {
                    F = e[G++];
                    try {
                        F[0] -= Q * (F[0] - q) / 262144, F[1] -= Q * (F[1] - u) / 262144, F[2] -= Q * (F[2] - v) / 262144
                    } catch (U) {}
                }
                if (J > C) {
                    F = e[J--];
                    try {
                        F[0] -= Q * (F[0] - q) / 262144, F[1] -= Q * (F[1] - u) / 262144, F[2] -= Q * (F[2] - v) / 262144
                    } catch (Z) {}
                }
            }
            D += A;
            D >= E && (D -= g);
            a++;
            0 == y && (y = 1);
            if (0 == a % y) for (w -= w / h, s -= s / 30, x = s >> 6, 1 >= x && (x = 0), l = 0; l < x; l++) m[l] = w * (256 * (x * x - l * l) / (x * x))
        }
        for (a = 0; 256 > a; a++) e[a][0] >>= 4, e[a][1] >>= 4, e[a][2] >>= 4, e[a][3] = a;
        for (a = B = z = 0; 256 > a; a++) {
            A = e[a];
            x = a;
            w = A[1];
            for (s = a + 1; 256 > s; s++) y = e[s], y[1] < w && (x = s, w = y[1]);
            y = e[x];
            a != x && (s = y[0], y[0] = A[0], A[0] = s, s = y[1], y[1] = A[1], A[1] = s, s = y[2], y[2] = A[2], A[2] = s, s = y[3], y[3] = A[3], A[3] = s);
            if (w != z) {
                f[z] = B + a >> 1;
                for (s = z + 1; s < w; s++) f[s] = a;
                z = w;
                B = a
            }
        }
        f[z] = B + 255 >> 1;
        for (s = z + 1; 256 > s; s++) f[s] = 255;
        a = [];
        s = Array(256);
        for (x = 0; 256 > x; x++) s[e[x][3]] = x;
        for (w = x = 0; 256 > w; w++) A = s[w], a[x++] = e[A][0], a[x++] = e[A][1], a[x++] = e[A][2];
        return a
    };
    l.apply(this, arguments);
    return a
};
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.sidebar && (sketch.sidebar = {});
(function(a) {
    a.sidebar = function() {
        var h = this,
            d = document.querySelector(".sk-sidebar"),
            g = document.querySelector(".sk-sidebar-arrow");
        eventjs.add(g, "mousedown", eventjs.cancel);
        eventjs.add(d, "mousedown", eventjs.stop);
        d.style.overflow = "hidden";
        if (d && d.parentNode) return this.opened = !1, this.open = function(a) {
            a && eventjs.cancel(a);
            !1 === h.opened && (h.opened = !0, d.style.display = "block", window.clearTimeout(h.timeoutClose), h.timeoutOpen = setTimeout(function() {
                dom.setClass(document.documentElement, "sk-sidebar-active", !0);
                d.style.overflow = "";
                dom.setClass(g, "icon-right", !1);
                dom.setClass(g, "icon-left", !0);
                sk.windows.lazyloader(".sk-sidebar .lazy")
            }, 1))
        }, this.changePane = function(b, d) {
            var f = a.$("#sk-" + b);
            d && (!1 === a.sidebar.opened ? a.sidebar.toggle() : a.sidebar.type === b && a.sidebar.toggle());
            a.sidebar.type = b;
            a.util.each(a.$$(".sk-pane"), function(a) {
                a.style.display = a === f ? "block" : "none"
            });
            setTimeout(function() {
                dom.setClass({
                    target: f,
                    className: "sk-pane-selected",
                    on: !0,
                    list: ".sk-pane"
                })
            }, 1)
        }, this.close = function(a) {
            a && eventjs.cancel(a);
            !0 === h.opened && (h.opened = !1, dom.setClass(document.documentElement, "sk-sidebar-active", !1), d.style.overflow = "hidden", dom.setClass(g, "icon-right", !0), dom.setClass(g, "icon-left", !1), window.clearTimeout(h.timeoutOpen), h.timeoutClose = setTimeout(function() {
                d.style.display = "none"
            }, 350))
        }, this.toggle = function(a) {
            a && eventjs.cancel(a);
            !0 === h.opened ? h.close() : h.open()
        }, d.parentNode.className += " sk-sidebar-wrapper", eventjs.add(g, "mousedown", eventjs.cancel), eventjs.add(g, "click", this.toggle), eventjs.proxy.wheelPreventElasticBounce(d),
            document.documentElement.className += " sk-sidebar-ready", this
    }
})(sketch);
var EnableContextMenu = function(a, h) {
    function d(b) {
        b = J(b);
        var c, d, e, f;
        a.body.appendChild(b);
        if (C) return b;
        c = b.getElementsByTagName("cmenu");
        d = [b];
        e = 0;
        for (f = c.length; e < f; e++) d.push(c[e]);
        e = 0;
        for (f = d.length; e < f; e++) s(d[e]);
        return b
    }
    function g(a) {
        setTimeout(a, 0)
    }
    function b(a) {
        var b = 0,
            c = 0;
        if (a.getClientRects) return a.getClientRects()[0];
        do b += a.offsetLeft, c += a.offsetTop, a = a.offsetParent;
        while (a);
        return {
            left: b,
            top: c
        }
    }
    function e(a) {
        return a.get ? a.get(0) : a
    }
    function f(a, b) {
        if ("none" !== a.style.display) {
            if (b) throw "no need to fade";
            a.style.display = "none";
            var c = a.launcher;
            c && c.removeAttribute("open");
            d.visible--
        }
    }
    function c() {
        var a = K.pop();
        f(a);
        return a
    }
    function k() {
        Q.style.opacity = "0.0";
        L = setTimeout(function() {
            for (; K.length;) c(!1);
            Q.style.display = "none";
            Q.style.opacity = "1.0";
            B()
        }, aa)
    }
    function m(a) {
        "inline-block" !== a.style.display && (a.style.display = "inline-block", d.visible++)
    }
    function l(a) {
        a.stopPropagation();
        a.preventDefault()
    }
    function p(a, b) {
        return b.nodeName === a ? b : p(a, b.parentNode || {
            nodeName: a
        })
    }
    function r(a) {
        var b = p("CMENU",
            a.target);
        if (F) {
            if (F === b) {
                K.push(b);
                F = void 0;
                return
            }
            console.error("SHOULD NOT BE A PREVIEW")
        }
        a = K.length;
        b = K.indexOf(b);
        for (a -= 1; a > b; a--) c()
    }
    function q(a) {
        if ("CMENU" !== a.target.nodeName || 0 !== a.offsetX) return a.stopPropagation(), a.preventDefault(), !1
    }
    function u(a) {
        Z = clearTimeout(Z);
        if (p("CMENU", a.toElement) === F) return !1;
        F && (f(F), F = void 0)
    }
    function v(a) {
        Z = clearTimeout(Z);
        Z = setTimeout(function() {
            var c = a.srcElement,
                d = c._contextMenu;
            d.launcher = c;
            c.setAttribute("open", !0);
            F && F !== d && f(F);
            F = d;
            c = b(c);
            d.style.top = c.top - 5 + "px";
            d.style.left = c.left + c.width - 1 + "px";
            m(d)
        }, 200)
    }
    function s(b) {
        var c = b.parentNode,
            d;
        eventjs.add(b, "mouseover", r, !1);
        eventjs.add(b, "mousedown", q);
        eventjs.add(b, "contextmenu", l);
        "CMENU" === c.nodeName ? (d = a.createElement("menuitem"), b.classList.add("submenu"), d.className = b.className, d.innerHTML = b.innerHTML, d._contextMenu = b, eventjs.add(d, "mouseover", v), eventjs.add(d, "mouseout", u), c.replaceChild(d, b)) : c.removeChild(b);
        Q.appendChild(b)
    }
    function x(a, b, c) {
        c -= 5;
        U = new Date;
        K.push(a);
        a.style.top = c + "px";
        a.style.left = b + "px";
        m(a);
        Q.style.display = "block";
        T = !1;
        var d = b + a.offsetWidth,
            e = c + a.offsetHeight,
            f = document.body.offsetHeight,
            g = document.body.offsetWidth;
        e > f && (a.style.top = c - (e - f) + "px");
        d > g && (a.style.left = b - (d - g) + "px")
    }
    function w(a, c, d) {
        var e;
        void 0 === d && (d = a.target);
        e = b(d);
        void 0 === c && (c = y(d));
        x(c, e.left, e.top + e.height + 8);
        a && (a.preventDefault(), a.stopPropagation());
        T = !0;
        return !1
    }
    function A(a, b, c) {
        w(a);
        T = !1
    }
    function y(b) {
        if (b && b.hasAttribute) return b._contextMenu ? b._contextMenu : b.hasAttribute("contextmenu") ? (b = a.getElementById(b.getAttribute("contextmenu")), b._contextMenu = b) : y(b.parentNode)
    }
    function z(a) {
        var b = y(a.srcElement),
            c = a.clientX,
            d = a.clientY;
        x(b, a.clientX, a.clientY);
        T = !0;
        O = c;
        N = d;
        a.preventDefault();
        a.stopPropagation();
        return !1
    }
    function B() {
        P.forEach(function(a) {
            try {
                a()
            } catch (b) {
                setTimeout(function() {
                    throw b;
                }, 0)
            }
        });
        P = []
    }
    function D() {
        K = [];
        Q = a.createElement("div");
        var b = "osx10_7",
            c = 0;
        /Mac/.test(navigator.userAgent) ? b = "osx10_7" : /Win/.test(navigator.userAgent) && (b = "win7");
        a.body.classList && (a.body.classList.add(b),
            Q.className = "_contextmenu_screen_", aa = 150, U = 0, a.body.appendChild(Q), eventjs.add(Q, "contextmenu", function(a) {
            a.preventDefault()
        }), eventjs.add(Q, "mousedown", function(a) {
            k(a)
        }), eventjs.add(Q, "mouseup", function(a) {
            a.stopPropagation();
            if (!c) {
                var b = a.target;
                if ("MENUITEM" === b.nodeName) {
                    if (b._contextMenu) return !1;
                    if (T) {
                        var d;
                        document.createEvent && (d = document.createEvent("MouseEvents"));
                        b && (b.dispatchEvent && d && d.initMouseEvent) && (d.initMouseEvent("click", !0, !0, document.defaultView, 1, a.screenX, a.screenY, a.clientX,
                            a.clientY, !1, !1, !1, !1, 0, null), b.dispatchEvent(d))
                    }
                }
                300 > new Date - U ? T = !1 : k(a)
            }
        }), eventjs.add(Q, "mousewheel", function(a) {
            a.preventDefault();
            a.stopPropagation();
            return !1
        }, !0), eventjs.add(Q, "contextmenu", function(b) {
            Q.style.display = "none";
            var d = a.elementFromPoint(b.clientX, b.clientY),
                e = y(d),
                h, l, m;
            if (e) {
                Q.style.display = "block";
                clearTimeout(L);
                b.preventDefault();
                if (K[0] === e && (d = b.clientX, h = b.clientY, l = d - O, m = h - N, O = d, N = h, 50 > l * l + m * m)) {
                    Q.style.opacity = "1.0";
                    Q.style.display = "block";
                    clearTimeout(L);
                    g(k);
                    return
                }
                c++;
                setTimeout(function() {
                    for (; K.length;) {
                        var a = K.pop();
                        f(a)
                    }
                    Q.style.display = "none";
                    Q.style.opacity = "1.0";
                    Q.style.display = "block";
                    g(function() {
                        c--;
                        x(e, b.clientX, b.clientY)
                    })
                }, aa);
                return !1
            }
            Q.style.opacity = "1.0";
            Q.style.display = "block";
            clearTimeout(L);
            g(k)
        }), eventjs.add(Q, "mouseover", function(a) {
            a.target === Q && (Z = clearTimeout(Z), F && (f(F), F = void 0))
        }))
    }
    function E() {
        var b = a.getElementsByTagName("cmenu"),
            c, d, e = [];
        c = 0;
        for (d = b.length; c < d; c++) e[c] = b[c];
        c = 0;
        for (d = e.length; c < d; c++) s(e[c])
    }
    function G() {
        var b = a.querySelectorAll("[contextmenu]"),
            c, d, e;
        d = 0;
        for (e = b.length; d < e; d++) c = b[d], c._contextMenu = a.getElementById(c.getAttribute("contextmenu")), "INPUT" === c.nodeName ? (eventjs.add(c, "mouseup", A), eventjs.add(c, "contextmenu", w)) : eventjs.add(c, "contextmenu", z)
    }
    function J(b) {
        var c = a.createElement("cmenu"),
            d, e, f, g;
        c.setAttribute("type", "context");
        d = 0;
        for (e = b.length; d < e; d++) if (f = b[d]) {
            if (f.children) g = J(f.children), g.setAttribute("label", f.label);
            else if (f.hr) g = a.createElement("hr");
            else {
                g = a.createElement("menuitem");
                g.innerHTML = f.label;
                g.className = f.className || "";
                f.onclick && eventjs.add(g, "mouseup", f.onclick);
                f.icon && (g.icon = f.icon);
                f.checked && g.setAttribute("checked", f.checked ? "checked" : "");
                var h, k = {
                    label: !0,
                    icon: !0,
                    hr: !0,
                    onclick: !0,
                    checked: !0
                };
                for (h in f) f.hasOwnProperty(h) && k[h] && g.dataset && (g.dataset[h] = f[h])
            }
            c.appendChild(g)
        }
        return c
    }
    var C = !1,
        O, N, L, Q, K, F, aa, U, Z, T = !1,
        P = [],
        Y = h.contextmenu;
    d.hide = function(a, b) {
        a = a || d.menu;
        f(a, b)
    };
    d.show = function(b, c, f, g) {
        d.menu = b;
        if (C) throw "Not supported!";
        "string" === typeof b ? b = a.getElementById(b) : (b = e(b),
            b.id = b.id || (0 | 1E4 * Math.random()).toString(30));
        "number" === typeof c ? (x(b, c, f), T = g || T) : (w(null, b, e(c)), T = !1);
        return this
    };
    d.then = function(a) {
        C ? a() : P.push(a)
    };
    d.attach = function(a, b) {
        a = e(a);
        b = e(b);
        b.id = b.id || (0 | 1E4 * Math.random()).toString(30);
        a._contextMenu = b;
        "INPUT" === a.nodeName || "BUTTON" === a.nodeName ? (eventjs.add(a, "mouseup", A), eventjs.add(a, "contextmenu", w)) : eventjs.add(a, "contextmenu", z)
    };
    d.noConflict = function() {
        h.contextmenu = Y;
        return d
    };
    d.visible = 0;
    C || (D(), E(), G());
    return h.contextmenu = d
};
"undefined" === typeof sketch && (sketch = {});
(function(a) {
    a.setup.add(function() {
        var h = function(b, f, c, g) {
            if ("string" === typeof c) {
                var h = c;
                c = function() {
                    a.exec(h)
                }
            }
            d.push({
                label: "<span class='" + b + "'></span> " + f,
                onclick: c,
                className: g
            })
        }, d = [];
        if (a.ui.openProjectWindow) {
            h("icon-file", "Newâ€¦ <span class='code'>â‡§N</span>", function() {
                a.ui.openProjectWindow(".new-project", !0)
            });
            a.supports.fileSystem && h("icon-folder", "My Projectsâ€¦ <span class='code'>â‡§O</span>", function() {
                a.ui.openProjectWindow(".open-project", !0)
            });
            if (a.util.addFileInput) {
                var g = a.util.exists("chrome.fileSystem.chooseEntry") ? " <span class='code'>âŒ˜O</span>" : "";
                h("icon-folder", "Openâ€¦" + g, function() {}, "menu-open")
            }
            a.supports.fileSystem && h("icon-save", "Saveâ€¦ <span class='code'>âŒ˜S</span>", function() {
                a.save.fromQuery()
            })
        }
        h("icon-print", "Printâ€¦ <span class='code'>âŒ˜P</span>", function() {
            a.print()
        }, "menu-print");
        if (a.feature.history.vector || a.feature.history.bitmap) h("icon-undo", "Undoâ€¦ <span class='code'>âŒ˜Z</span>", "undo", "menu-undo"),
            h("icon-redo", "Redoâ€¦ <span class='code'>â‡§âŒ˜Z</span>", "redo", "menu-redo");
        h("icon-configure", "Configureâ€¦ <span class='code'>â‡§,</span>", function() {
            sk.windows.blink("sk-configure")
        }, "menu-configure");
        if (!0 !== a.feature.kiosk) {
            var b;
            sketch.userAgent.nodewebkit ? b = function() {
                require("nw.gui").App.quit()
            } : sketch.util.exists("chrome.app.window") && (b = function() {
                chrome.app.window.current().close()
            });
            b && d.push({
                label: "<span class='icon-close'></span> Quit",
                onclick: function() {
                    a.ui.confirm({
                        message: "exit-app-confirm",
                        callback: function(a) {
                            a && b()
                        },
                        labels: {
                            ok: "Quit",
                            cancel: "Cancel"
                        }
                    })
                }
            })
        }
        a.ui.menuMain = a.ui.contextMenu(d);
        a.util.addFileInput && a.util.addFileInput(document.body.querySelector(".menu-open"));
        g = function(b) {
            var d = b.toLowerCase().replace("google drive", "gdrive");
            h("icon-" + {
                twitter: "twitter",
                facebook: "facebook",
                gdrive: "google-plus",
                pinterest: "pinterest",
                imgur: "image",
                tumblr: "tumblr",
                stumbleupon: "stumbleupon",
                webcamfx: "image",
                gmail: "email",
                myspace: "myspace",
                delicious: "delicious",
                reddit: "reddit"
            }[d], b, function() {
                var b = a.project.title,
                    e = a.project.description;
                a.api.test(d, a.save.canvas(), b, e)
            })
        };
        d = [];
        g("Facebook");
        g("Google Drive");
        g("GMail");
        g("Imgur");
        g("Pinterest");
        g("Tumblr");
        g("Twitter");
        a.api.webcamfx && g("WebcamFX");
        a.ui.menuMainExport = a.ui.contextMenu(d);
        d = [];
        a.actions && h("icon-crop", "Save Regionâ€¦", "snapshot");
        a.supports.io.png && h("icon-image", "Save PNGâ€¦", "save");
        a.supports.io.jpeg && h("icon-image", "Save JPEGâ€¦", "save-jpeg");
        a.supports.io.webp && h("icon-image", "Save WebPâ€¦", "save-webp");
        a.supports.io.blob && a.util.exists("jsPDF") && h("icon-file-pdf", "Save PDFâ€¦", "save-pdf");
        a.supports.io.blob && a.actions && h("icon-file-zip", "Save ZIPâ€¦", "save-zip");
        a.ui.menuMainDownload = a.ui.contextMenu(d);
        d = [];
        d.push({
            label: "<span class='icon-heart'></span> About",
            onclick: function() {
                a.exec("about")
            }
        });
        d.push({
            label: "<span class='icon-google-plus'></span> Community Page",
            onclick: function() {
                window.open("https://plus.google.com/communities/113561358709619167722")
            }
        });
        d.push({
            label: "<span class='icon-keyboard'></span> Keyboard Shortcuts",
            onclick: function() {
                a.exec("help")
            }
        });
        d.push({
            label: "<span class='icon-tutorial'></span> Video Tutorials",
            onclick: function() {
                window.open("https://www.youtube.com/playlist?list=PLm96jkTadzRYoMtRQ1YwyI-cXzDDaWII-")
            }
        });
        a.ui.menuMainAbout = a.ui.contextMenu(d);
        d = [];
        d.push({
            label: "Select all",
            onclick: function() {
                a.exec("select-all")
            }
        });
        d.push({
            label: "Copy all",
            onclick: function() {
                a.exec("select-all");
                a.exec("layer-copy")
            }
        });
        d.push({
            label: "Cut all",
            onclick: function() {
                a.exec("select-all");
                a.exec("layer-cut")
            }
        });
        d.push({
            label: "Paste",
            onclick: function() {
                a.exec("layer-paste")
            }
        });
        d.push({
            label: "Undo",
            onclick: function() {
                a.exec("undo")
            }
        });
        d.push({
            label: "Redo",
            onclick: function() {
                a.exec("redo")
            }
        });
        a.ui.menuSelectDefault = a.ui.contextMenu(d);
        d = [];
        a.convert && a.convert.blobToABR && (a.feature.debug && d.push({
            label: "Merge",
            onclick: function() {
                a.exec("layer-merge")
            }
        }), d.push({
            label: "Convert to Stamp",
            onclick: function() {
                a.exec("layer-to-stamp")
            }
        }));
        d.push({
            label: "Layer To Back",
            onclick: function() {
                a.exec("layer-to-back")
            }
        });
        d.push({
            label: "Layer To Front",
            onclick: function() {
                a.exec("layer-to-front")
            }
        });
        d.push({
            label: "Layer Backwards",
            onclick: function() {
                a.exec("layer-backwards")
            }
        });
        d.push({
            label: "Layer Forwards",
            onclick: function() {
                a.exec("layer-forwards")
            }
        });
        d.push({
            label: "Cut",
            onclick: function() {
                a.exec("layer-cut")
            }
        });
        d.push({
            label: "Copy",
            onclick: function() {
                a.exec("layer-copy")
            }
        });
        d.push({
            label: "Paste",
            onclick: function() {
                a.exec("layer-paste")
            }
        });
        d.push({
            label: "Delete",
            onclick: function() {
                a.exec("layer-delete")
            }
        });
        a.ui.menuSelect = a.ui.menuSelectMultiple = a.ui.contextMenu(d);
        g = function(b) {
            var d = [];
            b = a.toolkit.__icons[b];
            for (var c in b) d.push({
                label: '<span class="' + b[c] + '"></span> ' + STRING.ucwords(c).match(STRING.rxSplitByUppercase).join(" "),
                onclick: function(b) {
                    return function() {
                        a.exec(b.replace(" ", "_"))
                    }
                }(c)
            });
            return a.ui.contextMenu(d)
        };
        a.ui.menuBrushTools = g("brushes");
        a.ui.menuShapeTools = g("shapes")
    })
})(sketch);
(function(a, h) {
    var d = a.document,
        g;
    g = function() {
        var b = {}, e = !1,
            f = [],
            c, g, m, l, p, r, q, u, v, s, x, w;
        w = function() {
            var a, b, c = !1,
                e = d.createElement("fakeelement"),
                f = {
                    WebkitTransition: "webkitTransitionEnd",
                    MozTransition: "transitionend",
                    OTransition: "otransitionend",
                    transition: "transitionend"
                };
            for (a in f) if (e.style[a] !== h) {
                b = f[a];
                c = !0;
                break
            }
            return {
                type: b,
                supported: c
            }
        };
        c = function(a) {
            return d.getElementById(a)
        };
        b = {
            labels: {
                ok: "OK",
                cancel: "Cancel"
            },
            delay: 5E3,
            buttonReverse: !1,
            buttonFocus: "ok",
            transition: h,
            addListeners: function(a) {
                var b = "undefined" !== typeof m,
                    c = "undefined" !== typeof g,
                    e = "undefined" !== typeof x,
                    f = "",
                    h = this,
                    p, q, r, u, v;
                p = function(b) {
                    "undefined" !== typeof b.preventDefault && b.preventDefault();
                    r(b);
                    "undefined" !== typeof x && (f = x.value);
                    "function" === typeof a && ("undefined" !== typeof x ? a(!0, f) : a(!0));
                    return !1
                };
                q = function(b) {
                    "undefined" !== typeof b.preventDefault && b.preventDefault();
                    r(b);
                    "function" === typeof a && a(!1);
                    return !1
                };
                r = function(a) {
                    h.hide();
                    h.unbind(d.body, "keyup", u);
                    h.unbind(l, "focus", v);
                    e && h.unbind(s, "submit", p);
                    b && h.unbind(m, "click", p);
                    c && h.unbind(g, "click", q)
                };
                u = function(a) {
                    var b = a.keyCode;
                    32 !== b || e || p(a);
                    27 === b && c && q(a)
                };
                v = function(a) {
                    e ? x.focus() : !c || h.buttonReverse ? m.focus() : g.focus()
                };
                this.bind(l, "focus", v);
                b && this.bind(m, "click", p);
                c && this.bind(g, "click", q);
                this.bind(d.body, "keyup", u);
                e && this.bind(s, "submit", p);
                this.transition.supported || this.setFocus()
            },
            bind: function(a, b, c) {
                "function" === typeof a.addEventListener ? a.addEventListener(b, c, !1) : a.attachEvent && a.attachEvent("on" + b, c)
            },
            handleErrors: function() {
                if ("undefined" !== typeof a.onerror) {
                    var b = this;
                    a.onerror = function(a, c, d) {
                        b.error("[" + a + " on line " + d + " of " + c + "]", 0)
                    };
                    return !0
                }
                return !1
            },
            appendButtons: function(a, b) {
                return this.buttonReverse ? b + a : a + b
            },
            build: function(a) {
                var c = a.type,
                    e = a.message,
                    f = a.cssClass || "";
                a = d.createElement("div");
                a.className = "alertify-dialog";
                if ("none" === b.buttonFocus) {
                    var g = d.createElement("button");
                    g.id = "alertify-noneFocus";
                    g.className = "alertify-hidden";
                    a.appendChild(g)
                }
                if ("prompt" === c) {
                    var h = d.createElement("form");
                    h.id = "alertify-form";
                    a.appendChild(h)
                }
                g = d.createElement("article");
                g.className = "alertify-inner";
                if ("string" === typeof e) {
                    var e = '<p class="alertify-message">{{message}}</p>'.replace("{{message}}", e),
                        k = d.createElement("span");
                    k.innerHTML = e
                } else k = d.createElement("p"), k.className = "alertify-message", k.appendChild(e);
                g.appendChild(k);
                "prompt" === c && (e = d.createElement("div"), e.className = "alertify-text-wrapper", k = d.createElement("input"), k.type = "text", k.className = "alertify-text", k.id = "alertify-text", e.appendChild(k), g.appendChild(e));
                e = d.createElement("nav");
                e.className = "alertify-buttons";
                g.appendChild(e);
                "prompt" === c ? (h.appendChild(g), a.appendChild(h)) : a.appendChild(g);
                g = d.createElement("button");
                g.id = "alertify-resetFocus";
                g.className = "alertify-resetFocus";
                g.innerHTML = "Reset Focus";
                a.appendChild(g);
                switch (c) {
                    case "confirm":
                        g = d.createElement("button");
                        g.className = "alertify-button alertify-button-ok";
                        g.id = "alertify-ok";
                        g.innerHTML = this.labels.ok;
                        e.appendChild(g);
                        g = d.createElement("button");
                        g.className = "alertify-button alertify-button-cancel";
                        g.id = "alertify-cancel";
                        g.innerHTML = this.labels.cancel;
                        e.appendChild(g);
                        break;
                    case "prompt":
                        g = d.createElement("button");
                        g.className = "alertify-button alertify-button-ok";
                        g.id = "alertify-ok";
                        g.innerHTML = this.labels.ok;
                        e.appendChild(g);
                        g = d.createElement("button");
                        g.type = "submit";
                        g.className = "alertify-button alertify-button-ok";
                        g.id = "alertify-cancel";
                        g.innerHTML = this.labels.ok;
                        e.appendChild(g);
                        break;
                    case "alert":
                        g = d.createElement("button"), g.className = "alertify-button alertify-button-ok", g.id = "alertify-ok", g.innerHTML = this.labels.ok,
                            e.appendChild(g)
                }
                u.className = u.className.replace("alertify-isHidden", "");
                setTimeout(function() {
                    u.className = "alertify alertify-" + c + " " + f
                }, 1);
                q.className = "alertify-cover";
                return a
            },
            close: function(a, b) {
                a = a || this.lastItem;
                var c = b && !isNaN(b) ? +b : this.delay,
                    d = this,
                    e, f;
                this.bind(a, "click", function() {
                    e(a)
                });
                f = function(a) {
                    a.stopPropagation();
                    d.unbind(this, d.transition.type, f);
                    v.removeChild(this);
                    v.hasChildNodes() || (v.className += " alertify-logs-hidden")
                };
                e = function(a) {
                    "undefined" !== typeof a && a.parentNode === v && (d.transition.supported ? (d.bind(a, d.transition.type, f), a.className += " alertify-log-hide") : (v.removeChild(a), v.hasChildNodes() || (v.className += " alertify-logs-hidden")))
                };
                0 !== b && setTimeout(function() {
                    e(a)
                }, c)
            },
            dialog: function(a, b, c, g, h) {
                r = d.activeElement;
                var k = function() {
                    v && null !== v.scrollTop && q && null !== q.scrollTop || k()
                };
                if ("string" !== typeof b) throw Error("type must be a string");
                if ("undefined" !== typeof c && "function" !== typeof c) throw Error("fn must be a function");
                "function" === typeof this.init && (this.init(), k());
                f.push({
                    type: b,
                    message: a,
                    callback: c,
                    placeholder: g,
                    cssClass: h
                });
                e || this.setup();
                return this
            },
            extend: function(a) {
                if ("string" !== typeof a) throw Error("extend method must have exactly one paramter");
                return function(b, c) {
                    this.log(b, a, c);
                    return this
                }
            },
            hide: function() {
                var a, b = this;
                f.splice(0, 1);
                0 < f.length ? this.setup(!0) : (e = !1, a = function(c) {
                    c.stopPropagation();
                    u.className += " alertify-isHidden";
                    b.unbind(u, b.transition.type, a)
                }, this.transition.supported ? (this.bind(u, this.transition.type, a),
                    u.className = "alertify alertify-hide alertify-hidden") : u.className = "alertify alertify-hide alertify-hidden alertify-isHidden", q.className = "alertify-cover alertify-cover-hidden", r.focus())
            },
            init: function() {
                d.createElement("nav");
                d.createElement("article");
                d.createElement("section");
                q = d.createElement("div");
                q.setAttribute("id", "alertify-cover");
                q.className = "alertify-cover alertify-cover-hidden";
                d.body.appendChild(q);
                u = d.createElement("section");
                u.setAttribute("id", "alertify");
                u.className = "alertify alertify-hidden alertify-isHidden";
                d.body.appendChild(u);
                v = d.createElement("section");
                v.setAttribute("id", "alertify-logs");
                v.className = "alertify-logs alertify-logs-hidden";
                d.body.appendChild(v);
                d.body.setAttribute("tabindex", "0");
                this.transition = w();
                delete this.init
            },
            log: function(a, b, c) {
                var d = function() {
                    v && null !== v.scrollTop || d()
                };
                "function" === typeof this.init && (this.init(), d());
                v.className = "alertify-logs";
                this.notify(a, b, c);
                return {
                    lastItem: this.lastItem,
                    close: this.close,
                    hide: this.hide
                }
            },
            notify: function(a, b, c) {
                var e = d.createElement("article");
                e.className = "alertify-log" + ("string" === typeof b && "" !== b ? " alertify-log-" + b : "");
                e.innerHTML = a;
                v.appendChild(e);
                setTimeout(function() {
                    e.className += " alertify-log-show"
                }, 50);
                this.close(e, c);
                this.lastItem = e
            },
            set: function(a) {
                var b;
                if ("object" !== typeof a && a instanceof Array) throw Error("args must be an object");
                for (b in a) a.hasOwnProperty(b) && (this[b] = a[b])
            },
            setFocus: function() {
                x ? (x.focus(), x.select()) : p.focus()
            },
            setup: function(a) {
                var d = f[0],
                    r = this,
                    v;
                e = !0;
                v = function(a) {
                    a.stopPropagation();
                    r.setFocus();
                    r.unbind(u, r.transition.type, v)
                };
                this.transition.supported && !a && this.bind(u, this.transition.type, v);
                q.onclick = function() {
                    b.hide()
                };
                u.innerHTML = "";
                u.appendChild(this.build(d));
                u.firstChild.onclick = function(a) {
                    a.stopPropagation()
                };
                l = c("alertify-resetFocus");
                m = c("alertify-ok") || h;
                g = c("alertify-cancel") || h;
                p = "cancel" === b.buttonFocus ? g : "none" === b.buttonFocus ? c("alertify-noneFocus") : m;
                x = c("alertify-text") || h;
                s = c("alertify-form") || h;
                "string" === typeof d.placeholder && "" !== d.placeholder && (x.value = d.placeholder);
                a && this.setFocus();
                this.addListeners(d.callback)
            },
            unbind: function(a, b, c) {
                "function" === typeof a.removeEventListener ? a.removeEventListener(b, c, !1) : a.detachEvent && a.detachEvent("on" + b, c)
            }
        };
        return {
            close: function(a, c) {
                b.close(a, 1)
            },
            log_visible: function() {
                return !(!d.querySelector(".alertify-logs") || d.querySelector(".alertify-logs.alertify-logs-hidden"))
            },
            hide: function(a, c) {
                b.hide()
            },
            alert: function(a, c, d) {
                b.dialog(a, "alert", c, "", d);
                return this
            },
            confirm: function(a, c, d) {
                b.dialog(a, "confirm", c, "", d);
                return this
            },
            extend: b.extend,
            init: b.init,
            log: function(a, c, d) {
                b.log(a, c, d);
                return this
            },
            prompt: function(a, c, d, e) {
                b.dialog(a, "prompt", c, d, e);
                return this
            },
            success: function(a, c) {
                b.log(a, "success", c);
                return this
            },
            error: function(a, c) {
                b.log(a, "error", c);
                return this
            },
            set: function(a) {
                b.set(a)
            },
            labels: b.labels,
            debug: b.handleErrors
        }
    };
    "function" === typeof define && define.amd ? define([], function() {
        return new g
    }) : "undefined" === typeof a.alertify && (a.alertify = new g)
})(this);
(function() {
    function a(a, g) {
        return (new h(a, g)).beautify()
    }
    function h(a, g) {
        function b(a, b) {
            return {
                mode: b,
                last_text: a ? a.last_text : "",
                last_word: a ? a.last_word : "",
                var_line: !1,
                var_line_tainted: !1,
                var_line_reindented: !1,
                in_html_comment: !1,
                multiline_array: !1,
                if_block: !1,
                do_block: !1,
                do_while: !1,
                in_case_statement: !1,
                in_case: !1,
                case_body: !1,
                indentation_level: a ? a.indentation_level + (a.var_line && a.var_line_reindented ? 1 : 0) : 0,
                ternary_depth: 0
            }
        }
        function e(a) {
            for (a = void 0 === a ? !1 : a; z.length && (" " === z[z.length - 1] || z[z.length - 1] === J || z[z.length - 1] === ba || a && ("\n" === z[z.length - 1] || "\r" === z[z.length - 1]));) z.pop()
        }
        function f(a) {
            return a.replace(/^\s\s*|\s\s*$/, "")
        }
        function c() {
            return z.length && "\n" === z[z.length - 1]
        }
        function h(a) {
            a = void 0 === a ? !1 : a;
            if (R.wrap_line_length && !a) {
                var b = "",
                    b = 0;
                a: {
                    b = z.length - 1;
                    0 > b && (b += z.length);
                    b > z.length - 1 && (b = z.length - 1);
                    for (b++; 0 < b--;) if (b in z && "\n" === z[b]) break a;
                    b = -1
                }
                b += 1;
                b < z.length && (b = z.slice(b).join(""), b = b.length + B.length + (Y ? 1 : 0), b >= R.wrap_line_length && (a = !0))
            }(R.preserve_newlines && T || a) && !c() && (m(!1, !0), q(C.mode) || u(C.mode) || (P = !0))
        }
        function m(a, b) {
            Y = P = !1;
            if (!b && ";" !== C.last_text) for (; C.mode === ea.Statement && !C.if_block;) v();
            C.mode === ea.ArrayLiteral && (C.multiline_array = !0);
            z.length && (!a && c() || z.push("\n"))
        }
        function l(a) {
            void 0 === a ? a = 1 : "number" !== typeof a && (a = a ? 1 : 0);
            if ("" !== C.last_text) for (var b = 0; b < a; b += 1) z.push(J)
        }
        function p(a) {
            a = a || B;
            if (c()) if (R.keep_array_indentation && q(C.mode) && T) for (var b = 0; b < na.length; b += 1) z.push(na[b]);
            else ba && z.push(ba), l(C.indentation_level), l(C.var_line && C.var_line_reindented), l(P);
            P = !1;
            Y && z.length && (b = z[z.length - 1], c() || (" " === b || b === J) || z.push(" "));
            Y = !1;
            z.push(a)
        }
        function r(a) {
            C ? (N.push(C), O = C) : O = b(null, a);
            C = b(O, a)
        }
        function q(a) {
            return a === ea.ArrayLiteral
        }
        function u(a) {
            return w(a, [ea.Expression, ea.ForInitializer, ea.Conditional])
        }
        function v() {
            0 < N.length && (O = C, C = N.pop())
        }
        function s() {
            return "do" === C.last_text || "else" === C.last_text && "if" !== B || "TK_END_EXPR" === E && (O.mode === ea.ForInitializer || O.mode === ea.Conditional) ? (h(), r(ea.Statement), C.indentation_level += 1, P = !1, !0) : !1
        }
        function x(a) {
            return w(a, "case return do if throw else".split(" "))
        }
        function w(a, b) {
            for (var c = 0; c < b.length; c += 1) if (b[c] === a) return !0;
            return !1
        }
        function A() {
            var a;
            ia = 0;
            if (F >= da) return ["", "TK_EOF"];
            T = !1;
            na = [];
            var b = y.charAt(F);
            for (F += 1; w(b, L);) {
                "\n" === b ? (ia += 1, na = []) : ia && (b === J ? na.push(J) : "\r" !== b && na.push(" "));
                if (F >= da) return ["", "TK_EOF"];
                b = y.charAt(F);
                F += 1
            }
            if (w(b, Q)) {
                if (F < da) for (; w(y.charAt(F), Q) && (b += y.charAt(F), F += 1, F !== da););
                if (F !== da && b.match(/^[0-9]+[Ee]$/) && ("-" === y.charAt(F) || "+" === y.charAt(F))) {
                    var c = y.charAt(F);
                    F += 1;
                    var d = A(),
                        b = b + (c + d[0]);
                    return [b, "TK_WORD"]
                }
                return "in" === b ? [b, "TK_OPERATOR"] : [b, "TK_WORD"]
            }
            if ("(" === b || "[" === b) return [b, "TK_START_EXPR"];
            if (")" === b || "]" === b) return [b, "TK_END_EXPR"];
            if ("{" === b) return [b, "TK_START_BLOCK"];
            if ("}" === b) return [b, "TK_END_BLOCK"];
            if (";" === b) return [b, "TK_SEMICOLON"];
            if ("/" === b) {
                c = "";
                d = !0;
                if ("*" === y.charAt(F)) {
                    F += 1;
                    if (F < da) for (; F < da && ("*" !== y.charAt(F) || !y.charAt(F + 1) || "/" !== y.charAt(F + 1));) {
                        b = y.charAt(F);
                        c += b;
                        if ("\n" === b || "\r" === b) d = !1;
                        F += 1;
                        if (F >= da) break
                    }
                    F += 2;
                    return d && 0 === ia ? ["/*" + c + "*/", "TK_INLINE_COMMENT"] : ["/*" + c + "*/", "TK_BLOCK_COMMENT"]
                }
                if ("/" === y.charAt(F)) {
                    for (c = b;
                         "\r" !== y.charAt(F) && "\n" !== y.charAt(F) && !(c += y.charAt(F), F += 1, F >= da););
                    return [c, "TK_COMMENT"]
                }
            }
            if ("'" === b || '"' === b || ("/" === b || R.e4x && "<" === b && y.slice(F - 1).match(/^<[a-zA-Z:0-9]+\s*([a-zA-Z:0-9]+="[^"]*"\s*)*\/?\s*>/)) && ("TK_WORD" === E && x(C.last_text) || "TK_END_EXPR" === E && w(O.mode, [ea.Conditional, ea.ForInitializer]) || w(E, "TK_COMMENT TK_START_EXPR TK_START_BLOCK TK_END_BLOCK TK_OPERATOR TK_EQUALS TK_EOF TK_SEMICOLON TK_COMMA".split(" ")))) {
                var c = b,
                    e = d = !1;
                a = b;
                if (F < da) if ("/" === c) for (b = !1; d || b || y.charAt(F) !== c;) {
                    if (a += y.charAt(F), d ? d = !1 : (d = "\\" === y.charAt(F), "[" === y.charAt(F) ? b = !0 : "]" === y.charAt(F) && (b = !1)), F += 1, F >= da) return [a, "TK_STRING"]
                } else if (R.e4x && "<" === c) {
                    var d = /<(\/?)([a-zA-Z:0-9]+)\s*([a-zA-Z:0-9]+="[^"]*"\s*)*(\/?)\s*>/g,
                        b = y.slice(F - 1),
                        g = d.exec(b);
                    if (g && 0 === g.index) {
                        c = g[2];
                        for (a = 0; g;) {
                            var e = !! g[1],
                                h = !! g[g.length - 1];
                            g[2] !== c || h || (e ? --a : ++a);
                            if (0 >= a) break;
                            g = d.exec(b)
                        }
                        c = g ? g.index + g[0].length : b.length;
                        F += c - 1;
                        return [b.slice(0, c), "TK_STRING"]
                    }
                } else for (; d || y.charAt(F) !== c;) {
                    a += y.charAt(F);
                    if (d) {
                        if ("x" === y.charAt(F) || "u" === y.charAt(F)) e = !0;
                        d = !1
                    } else d = "\\" === y.charAt(F);
                    F += 1;
                    if (F >= da) return [a, "TK_STRING"]
                }
                F += 1;
                a += c;
                if (e && R.unescape_strings) a: {
                    b = a;
                    d = !1;
                    g = "";
                    a = 0;
                    for (var e = "", h = 0, k; d || a < b.length;) if (k = b.charAt(a), a++, d) {
                        d = !1;
                        if ("x" === k) e = b.substr(a, 2), a += 2;
                        else if ("u" === k) e = b.substr(a, 4), a += 4;
                        else {
                            g += "\\" + k;
                            continue
                        }
                        if (!e.match(/^[0123456789abcdefABCDEF]+$/)) {
                            a = b;
                            break a
                        }
                        h = parseInt(e, 16);
                        if (0 <= h && 32 > h) g = "x" === k ? g + ("\\x" + e) : g + ("\\u" + e);
                        else if (34 === h || 39 === h || 92 === h) g += "\\" + String.fromCharCode(h);
                        else if ("x" === k && 126 < h && 255 >= h) {
                            a = b;
                            break a
                        } else g += String.fromCharCode(h)
                    } else "\\" === k ? d = !0 : g += k;
                    a = g
                }
                if ("/" === c) for (; F < da && w(y.charAt(F), Q);) a += y.charAt(F),
                    F += 1;
                return [a, "TK_STRING"]
            }
            if ("#" === b) {
                if (0 === z.length && "!" === y.charAt(F)) {
                    for (a = b; F < da && "\n" !== b;) b = y.charAt(F), a += b, F += 1;
                    return [f(a) + "\n", "TK_UNKNOWN"]
                }
                c = "#";
                if (F < da && w(y.charAt(F), U)) {
                    do b = y.charAt(F), c += b, F += 1;
                    while (F < da && "#" !== b && "=" !== b);
                    "#" !== b && ("[" === y.charAt(F) && "]" === y.charAt(F + 1) ? (c += "[]", F += 2) : "{" === y.charAt(F) && "}" === y.charAt(F + 1) && (c += "{}", F += 2));
                    return [c, "TK_WORD"]
                }
            }
            if ("<" === b && "\x3c!--" === y.substring(F - 1, F + 3)) {
                F += 3;
                for (b = "\x3c!--";
                     "\n" !== y.charAt(F) && F < da;) b += y.charAt(F), F++;
                C.in_html_comment = !0;
                return [b, "TK_COMMENT"]
            }
            if ("-" === b && C.in_html_comment && "--\x3e" === y.substring(F - 1, F + 2)) return C.in_html_comment = !1, F += 2, ["--\x3e", "TK_COMMENT"];
            if ("." === b) return [b, "TK_DOT"];
            if (w(b, K)) {
                for (; F < da && w(b + y.charAt(F), K) && !(b += y.charAt(F), F += 1, F >= da););
                return "," === b ? [b, "TK_COMMA"] : "=" === b ? [b, "TK_EQUALS"] : [b, "TK_OPERATOR"]
            }
            return [b, "TK_UNKNOWN"]
        }
        var y, z, B, D, E, G, J, C, O, N, L, Q, K, F, aa, U, Z, T, P, Y, da, ia, na, pa, ea, R, ba = "";
        L = ["\n", "\r", "\t", " "];
        Q = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split("");
        U = "0123456789".split("");
        K = "+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::";
        K += " <%= <% %> <?= <? ?>";
        K = K.split(" ");
        aa = "continue try throw return var if switch case default for while break function".split(" ");
        ea = {
            BlockStatement: "BlockStatement",
            Statement: "Statement",
            ObjectLiteral: "ObjectLiteral",
            ArrayLiteral: "ArrayLiteral",
            ForInitializer: "ForInitializer",
            Conditional: "Conditional",
            Expression: "Expression"
        };
        pa = {
            TK_START_EXPR: function() {
                s();
                if ("[" === B) {
                    if ("TK_WORD" === E || ")" === C.last_text) {
                        w(C.last_text, aa) && (Y = !0);
                        r(ea.Expression);
                        p();
                        R.space_in_paren && (Y = !0);
                        return
                    }!q(C.mode) || "[" !== C.last_text && ("," !== C.last_text || "]" !== G && "}" !== G) || R.keep_array_indentation || m()
                } else "for" === C.last_text ? r(ea.ForInitializer) : w(C.last_text, ["if", "while"]) ? r(ea.Conditional) : r(ea.Expression);
                ";" === C.last_text || "TK_START_BLOCK" === E ? m() : "TK_END_EXPR" === E || "TK_START_EXPR" === E || "TK_END_BLOCK" === E || "." === C.last_text ? T && m() : "TK_WORD" !== E && "TK_OPERATOR" !== E ? Y = !0 : "function" === C.last_word || "typeof" === C.last_word ? R.jslint_happy && (Y = !0) : (w(C.last_text, aa) || "catch" === C.last_text) && R.space_before_conditional && (Y = !0);
                "(" === B && ("TK_EQUALS" !== E && "TK_OPERATOR" !== E || C.mode === ea.ObjectLiteral || h());
                "[" === B && r(ea.ArrayLiteral);
                p();
                R.space_in_paren && (Y = !0);
                C.indentation_level += 1
            },
            TK_END_EXPR: function() {
                for (; C.mode === ea.Statement;) v();
                "]" === B && (q(C.mode) && C.multiline_array && !R.keep_array_indentation) && m();
                R.space_in_paren && (Y = !0);
                "]" === B && R.keep_array_indentation ? (p(), v()) : (v(), p());
                C.do_while && O.mode === ea.Conditional && (O.mode = ea.Expression, C.do_block = !1, C.do_while = !1)
            },
            TK_START_BLOCK: function() {
                r(ea.BlockStatement);
                var a;
                a: {
                    a = F;
                    for (var b = y.charAt(a); w(b, L) && "}" !== b;) {
                        a++;
                        if (a >= da) {
                            a = !1;
                            break a
                        }
                        b = y.charAt(a)
                    }
                    a = "}" === b
                }
                a = a && "function" === C.last_word && "TK_END_EXPR" === E;
                "expand" === R.brace_style ? "TK_OPERATOR" !== E && (a || "TK_EQUALS" === E || x(C.last_text) && "else" !== C.last_text) ? Y = !0 : m() : "TK_OPERATOR" !== E && "TK_START_EXPR" !== E ? "TK_START_BLOCK" === E ? m() : Y = !0 : q(O.mode) && "," === C.last_text && ("}" === G ? Y = !0 : m());
                p();
                C.indentation_level += 1
            },
            TK_END_BLOCK: function() {
                for (; C.mode === ea.Statement;) v();
                v();
                var a = "TK_START_BLOCK" === E;
                "expand" === R.brace_style ? a || m() : a || (q(C.mode) && R.keep_array_indentation ? (R.keep_array_indentation = !1, m(), R.keep_array_indentation = !0) : m());
                p()
            },
            TK_WORD: function() {
                s() || !T || (u(C.mode) || "TK_OPERATOR" === E && "--" !== C.last_text && "++" !== C.last_text || "TK_EQUALS" === E || !R.preserve_newlines && "var" === C.last_text) || m();
                if (C.do_block && !C.do_while) {
                    if ("while" === B) {
                        Y = !0;
                        p();
                        Y = !0;
                        C.do_while = !0;
                        return
                    }
                    m();
                    C.do_block = !1
                }
                if (C.if_block && "else" !== B) {
                    for (; C.mode === ea.Statement;) v();
                    C.if_block = !1
                }
                if ("function" === B) C.var_line && "TK_EQUALS" !== E && (C.var_line_reindented = !0), !c() && ";" !== C.last_text && "}" !== C.last_text || ("{" === C.last_text || q(C.mode)) || (c() || m(!0), c() && 0 < z.length - 1 && "\n" === z[z.length - 2] || m(!0)), "TK_WORD" === E ? "get" === C.last_text || "set" === C.last_text || "new" === C.last_text || "return" === C.last_text ? Y = !0 : m() : "TK_OPERATOR" === E || "=" === C.last_text ? Y = !0 : u(C.mode) || m(), p(), C.last_word = B;
                else if ("case" === B || "default" === B && C.in_case_statement) {
                    m();
                    if (C.case_body || R.jslint_happy) C.indentation_level -= 1, C.case_body = !1;
                    p();
                    C.in_case = !0;
                    C.in_case_statement = !0
                } else Z = "NONE", "TK_END_BLOCK" === E ? w(B, ["else", "catch", "finally"]) ? "expand" === R.brace_style || "end-expand" === R.brace_style ? Z = "NEWLINE" : (Z = "SPACE", Y = !0) : Z = "NEWLINE" : "TK_SEMICOLON" === E && C.mode === ea.BlockStatement ? Z = "NEWLINE" : "TK_SEMICOLON" === E && u(C.mode) ? Z = "SPACE" : "TK_STRING" === E ? Z = "NEWLINE" : "TK_WORD" === E ? Z = "SPACE" : "TK_START_BLOCK" === E ? Z = "NEWLINE" : "TK_END_EXPR" === E && (Y = !0, Z = "NEWLINE"), w(B, aa) && ")" !== C.last_text && (Z = "else" === C.last_text ? "SPACE" : "NEWLINE"), "TK_COMMA" !== E && "TK_START_EXPR" !== E && "TK_EQUALS" !== E && "TK_OPERATOR" !== E || C.mode === ea.ObjectLiteral || h(), w(B, ["else", "catch", "finally"]) ? "TK_END_BLOCK" !== E || "expand" === R.brace_style || "end-expand" === R.brace_style ? m() : (e(!0), "}" !== z[z.length - 1] && m(), Y = !0) : "NEWLINE" === Z ? x(C.last_text) ? Y = !0 : "TK_END_EXPR" !== E ? "TK_START_EXPR" === E && "var" === B || ":" === C.last_text || ("if" === B && "else" === C.last_word && "{" !== C.last_text ? Y = !0 : (C.var_line = !1, C.var_line_reindented = !1, m())) : w(B, aa) && ")" !== C.last_text && (C.var_line = !1, C.var_line_reindented = !1, m()) : q(C.mode) && "," === C.last_text && "}" === G ? m() : "SPACE" === Z && (Y = !0), p(), C.last_word = B, "var" === B && (C.var_line = !0, C.var_line_reindented = !1, C.var_line_tainted = !1), "do" === B && (C.do_block = !0), "if" === B && (C.if_block = !0)
            },
            TK_SEMICOLON: function() {
                for (; C.mode === ea.Statement && !C.if_block;) v();
                p();
                C.var_line = !1;
                C.var_line_reindented = !1;
                C.mode === ea.ObjectLiteral && (C.mode = ea.BlockStatement)
            },
            TK_STRING: function() {
                s() ? Y = !0 : "TK_WORD" === E ? Y = !0 : "TK_COMMA" === E || "TK_START_EXPR" === E || "TK_EQUALS" === E || "TK_OPERATOR" === E ? C.mode !== ea.ObjectLiteral && h() : m();
                p()
            },
            TK_EQUALS: function() {
                C.var_line && (C.var_line_tainted = !0);
                Y = !0;
                p();
                Y = !0
            },
            TK_OPERATOR: function() {
                var a = !0,
                    b = !0;
                x(C.last_text) ? (Y = !0, p()) : "*" !== B || "TK_DOT" !== E || G.match(/^\d+$/) ? ":" === B && C.in_case ? (C.case_body = !0, C.indentation_level += 1, p(), m(), C.in_case = !1) : "::" === B ? p() : (!T || "--" !== B && "++" !== B || m(), w(B, ["--", "++", "!"]) || w(B, ["-", "+"]) && (w(E, ["TK_START_BLOCK", "TK_START_EXPR", "TK_EQUALS", "TK_OPERATOR"]) || w(C.last_text, aa) || "," === C.last_text) ? (b = a = !1, ";" === C.last_text && u(C.mode) && (a = !0), "TK_WORD" === E && w(C.last_text, aa) && (a = !0), C.mode !== ea.BlockStatement && C.mode !== ea.Statement || "{" !== C.last_text && ";" !== C.last_text || m()) : ":" === B ? 0 === C.ternary_depth ? (C.mode === ea.BlockStatement && (C.mode = ea.ObjectLiteral), a = !1) : C.ternary_depth -= 1 : "?" === B && (C.ternary_depth += 1), Y = Y || a, p(), Y = b) : p()
            },
            TK_COMMA: function() {
                if (C.var_line) {
                    if (u(C.mode) || "TK_END_BLOCK" === E) C.var_line_tainted = !1;
                    C.var_line && (C.var_line_reindented = !0);
                    p();
                    C.var_line_tainted ? (C.var_line_tainted = !1, m()) : Y = !0
                } else "TK_END_BLOCK" === E && C.mode !== ea.Expression ? (p(), C.mode === ea.ObjectLiteral && "}" === C.last_text ? m() : Y = !0) : C.mode === ea.ObjectLiteral ? (p(), m()) : (p(), Y = !0)
            },
            TK_BLOCK_COMMENT: function() {
                for (var a = B, a = a.replace(/\x0d/g, ""), b = [], c = a.indexOf("\n"); - 1 !== c;) b.push(a.substring(0, c)), a = a.substring(c + 1), c = a.indexOf("\n");
                a.length && b.push(a);
                a = !1;
                m(!1, !0);
                if (1 < b.length) {
                    a: {
                        for (var c = b.slice(1), d = 0; d < c.length; d++) if ("*" !== f(c[d]).charAt(0)) {
                            c = !1;
                            break a
                        }
                        c = !0
                    }
                    c && (a = !0)
                }
                p(b[0]);
                for (c = 1; c < b.length; c++) m(!1, !0), a ? p(" " + f(b[c])) : z.push(b[c]);
                m(!1, !0)
            },
            TK_INLINE_COMMENT: function() {
                Y = !0;
                p();
                Y = !0
            },
            TK_COMMENT: function() {
                T ? m(!1, !0) : e(!0);
                Y = !0;
                p();
                m(!1, !0)
            },
            TK_DOT: function() {
                x(C.last_text) ? Y = !0 : h(")" === C.last_text && R.break_chained_methods);
                p()
            },
            TK_UNKNOWN: function() {
                p();
                "\n" === B[B.length - 1] && m()
            }
        };
        g = g ? g : {};
        R = {};
        void 0 !== g.space_after_anon_function && void 0 === g.jslint_happy && (g.jslint_happy = g.space_after_anon_function);
        void 0 !== g.braces_on_own_line && (R.brace_style = g.braces_on_own_line ? "expand" : "collapse");
        R.brace_style = g.brace_style ? g.brace_style : R.brace_style ? R.brace_style : "collapse";
        "expand-strict" === R.brace_style && (R.brace_style = "expand");
        R.indent_size = g.indent_size ? parseInt(g.indent_size, 10) : 4;
        R.indent_char = g.indent_char ? g.indent_char : " ";
        R.preserve_newlines = void 0 === g.preserve_newlines ? !0 : g.preserve_newlines;
        R.break_chained_methods = void 0 === g.break_chained_methods ? !1 : g.break_chained_methods;
        R.max_preserve_newlines = void 0 === g.max_preserve_newlines ? 0 : parseInt(g.max_preserve_newlines, 10);
        R.space_in_paren = void 0 === g.space_in_paren ? !1 : g.space_in_paren;
        R.jslint_happy = void 0 === g.jslint_happy ? !1 : g.jslint_happy;
        R.keep_array_indentation = void 0 === g.keep_array_indentation ? !1 : g.keep_array_indentation;
        R.space_before_conditional = void 0 === g.space_before_conditional ? !0 : g.space_before_conditional;
        R.unescape_strings = void 0 === g.unescape_strings ? !1 : g.unescape_strings;
        R.wrap_line_length = void 0 === g.wrap_line_length ? 0 : parseInt(g.wrap_line_length, 10);
        R.e4x = void 0 === g.e4x ? !1 : g.e4x;
        for (J = ""; 0 < R.indent_size;) J += R.indent_char, R.indent_size -= 1;
        for (; a && (" " === a.charAt(0) || "\t" === a.charAt(0));) ba += a.charAt(0), a = a.substring(1);
        y = a;
        da = a.length;
        E = "TK_START_BLOCK";
        G = "";
        z = [];
        Y = P = !1;
        na = [];
        N = [];
        r(ea.BlockStatement);
        F = 0;
        this.beautify = function() {
            for (var a;;) {
                a = A();
                B = a[0];
                D = a[1];
                if ("TK_EOF" === D) break;
                a = R.keep_array_indentation && q(C.mode);
                T = 0 < ia;
                if (a) for (a = 0; a < ia; a += 1) m(0 < a);
                else if (R.max_preserve_newlines && ia > R.max_preserve_newlines && (ia = R.max_preserve_newlines), R.preserve_newlines && 1 < ia) for (m(), a = 1; a < ia; a += 1) m(!0);
                pa[D]();
                "TK_INLINE_COMMENT" !== D && ("TK_COMMENT" !== D && "TK_UNKNOWN" !== D) && (G = C.last_text, E = D, C.last_text = B)
            }
            return ba + z.join("").replace(/[\r\n ]+$/, "")
        }
    }
    "function" === typeof define ? define(function(d, g, b) {
        g.js_beautify = a
    }) : "undefined" !== typeof exports ? exports.js_beautify = a : "undefined" !== typeof window ? window.js_beautify = a : "undefined" !== typeof global && (global.js_beautify = a)
})();
(function() {
    function a(a, b, d, f) {
        var c, h, m, l, p, r, q, u, v;
        b = b || {};
        void 0 !== b.wrap_line_length && 0 !== parseInt(b.wrap_line_length, 10) || void 0 !== b.max_char && 0 !== parseInt(b.max_char, 10) || (b.wrap_line_length = b.max_char);
        h = b.indent_inner_html || !1;
        m = parseInt(b.indent_size || 4, 10);
        l = b.indent_char || " ";
        r = b.brace_style || "collapse";
        p = 0 === parseInt(b.wrap_line_length, 10) ? 32786 : parseInt(b.wrap_line_length || 250, 10);
        q = b.unformatted || "a span bdo em strong dfn code samp kbd var cite abbr acronym q sub sup tt i b big small u s strike font ins del pre address dt h1 h2 h3 h4 h5 h6".split(" ");
        v = (u = b.preserve_newlines || !0, parseInt(b.max_preserve_newlines || 32786, 10));
        indent_handlebars = b.indent_handlebars || !1;
        c = new function() {
            this.pos = 0;
            this.token = "";
            this.current_mode = "CONTENT";
            this.tags = {
                parent: "parent1",
                parentcount: 1,
                parent1: ""
            };
            this.token_text = this.last_token = this.last_text = this.token_type = this.tag_type = "";
            this.newlines = 0;
            this.indent_content = h;
            this.Utils = {
                whitespace: ["\n", "\r", "\t", " "],
                single_token: "br input link meta !doctype basefont base area hr wbr param img isindex ?xml embed ?php ? ?=".split(" "),
                extra_liners: ["head", "body", "/html"],
                in_array: function(a, b) {
                    for (var c = 0; c < b.length; c++) if (a === b[c]) return !0;
                    return !1
                }
            };
            this.traverse_whitespace = function() {
                var a = "",
                    a = this.input.charAt(this.pos);
                if (this.Utils.in_array(a, this.Utils.whitespace)) {
                    for (this.newlines = 0; this.Utils.in_array(a, this.Utils.whitespace);) u && ("\n" === a && this.newlines <= v) && (this.newlines += 1), this.pos++, a = this.input.charAt(this.pos);
                    return !0
                }
                return !1
            };
            this.get_content = function() {
                for (var a = "", b = [], c = !1;
                     "<" !== this.input.charAt(this.pos);) {
                    if (this.pos >= this.input.length) return b.length ? b.join("") : ["", "TK_EOF"];
                    if (this.traverse_whitespace()) b.length && (c = !0);
                    else {
                        if (indent_handlebars) if (a = this.input.substr(this.pos, 3), "{{#" === a || "{{/" === a) break;
                        else if ("{{" === this.input.substr(this.pos, 2) && "{{else}}" === this.get_tag(!0)) break;
                        a = this.input.charAt(this.pos);
                        this.pos++;
                        c && (this.line_char_count >= this.wrap_line_length ? (this.print_newline(!1, b), this.print_indentation(b)) : (this.line_char_count++, b.push(" ")), c = !1);
                        this.line_char_count++;
                        b.push(a)
                    }
                }
                return b.length ? b.join("") : ""
            };
            this.get_contents_to = function(a) {
                if (this.pos === this.input.length) return ["", "TK_EOF"];
                var b = "";
                a = RegExp("</" + a + "\\s*>", "igm");
                a.lastIndex = this.pos;
                a = (a = a.exec(this.input)) ? a.index : this.input.length;
                this.pos < a && (b = this.input.substring(this.pos, a), this.pos = a);
                return b
            };
            this.record_tag = function(a) {
                this.tags[a + "count"] ? this.tags[a + "count"]++ : this.tags[a + "count"] = 1;
                this.tags[a + this.tags[a + "count"]] = this.indent_level;
                this.tags[a + this.tags[a + "count"] + "parent"] = this.tags.parent;
                this.tags.parent = a + this.tags[a + "count"]
            };
            this.retrieve_tag = function(a) {
                if (this.tags[a + "count"]) {
                    for (var b = this.tags.parent; b && a + this.tags[a + "count"] !== b;) b = this.tags[b + "parent"];
                    b && (this.indent_level = this.tags[a + this.tags[a + "count"]], this.tags.parent = this.tags[b + "parent"]);
                    delete this.tags[a + this.tags[a + "count"] + "parent"];
                    delete this.tags[a + this.tags[a + "count"]];
                    1 === this.tags[a + "count"] ? delete this.tags[a + "count"] : this.tags[a + "count"]--
                }
            };
            this.indent_to_tag = function(a) {
                if (this.tags[a + "count"]) {
                    for (var b = this.tags.parent; b && a + this.tags[a + "count"] !== b;) b = this.tags[b + "parent"];
                    b && (this.indent_level = this.tags[a + this.tags[a + "count"]])
                }
            };
            this.get_tag = function(a) {
                var b = "",
                    c = [],
                    b = "",
                    d = !1,
                    e, f, g = this.pos,
                    h = this.line_char_count;
                a = void 0 !== a ? a : !1;
                do {
                    if (this.pos >= this.input.length) return a && (this.pos = g, this.line_char_count = h), c.length ? c.join("") : ["", "TK_EOF"];
                    b = this.input.charAt(this.pos);
                    this.pos++;
                    if (this.Utils.in_array(b, this.Utils.whitespace)) d = !0;
                    else {
                        if ("'" === b || '"' === b) b += this.get_unformatted(b), d = !0;
                        "=" === b && (d = !1);
                        c.length && ("=" !== c[c.length - 1] && ">" !== b && d) && (this.line_char_count >= this.wrap_line_length ? (this.print_newline(!1, c), this.print_indentation(c)) : (c.push(" "), this.line_char_count++), d = !1);
                        indent_handlebars && "<" === f && "{{" === b + this.input.charAt(this.pos) && (b += this.get_unformatted("}}"), c.length && (" " !== c[c.length - 1] && "<" !== c[c.length - 1]) && (b = " " + b), d = !0);
                        "<" !== b || f || (e = this.pos - 1, f = "<");
                        indent_handlebars && !f && (2 <= c.length && "{" === c[c.length - 1] && "{" == c[c.length - 2]) && (e = "#" === b || "/" === b ? this.pos - 3 : this.pos - 2, f = "{");
                        this.line_char_count++;
                        c.push(b);
                        if (c[1] && "!" === c[1]) {
                            c = [this.get_comment(e)];
                            break
                        }
                        if (indent_handlebars && "{" === f && 2 < c.length && "}" === c[c.length - 2] && "}" === c[c.length - 1]) break
                    }
                } while (">" !== b);
                f = c.join("");
                b = -1 !== f.indexOf(" ") ? f.indexOf(" ") : "{" === f[0] ? f.indexOf("}") : f.indexOf(">");
                b = f.substring("<" !== f[0] && indent_handlebars ? "#" === f[2] ? 3 : 2 : 1, b).toLowerCase();
                "/" === f.charAt(f.length - 2) || this.Utils.in_array(b, this.Utils.single_token) ? a || (this.tag_type = "SINGLE") : indent_handlebars && "{" === f[0] && "else" === b ? a || (this.indent_to_tag("if"), this.tag_type = "HANDLEBARS_ELSE", this.indent_content = !0, this.traverse_whitespace()) : "script" === b ? a || (this.record_tag(b), this.tag_type = "SCRIPT") : "style" === b ? a || (this.record_tag(b), this.tag_type = "STYLE") : this.is_unformatted(b, q) ? (b = this.get_unformatted("</" + b + ">", f), c.push(b), 0 < e && this.Utils.in_array(this.input.charAt(e - 1), this.Utils.whitespace) && c.splice(0, 0, this.input.charAt(e - 1)), e = this.pos - 1, this.Utils.in_array(this.input.charAt(e + 1), this.Utils.whitespace) && c.push(this.input.charAt(e + 1)), this.tag_type = "SINGLE") : "!" === b.charAt(0) ? a || (this.tag_type = "SINGLE", this.traverse_whitespace()) : a || ("/" === b.charAt(0) ? (this.retrieve_tag(b.substring(1)), this.tag_type = "END") : (this.record_tag(b), "html" !== b.toLowerCase() && (this.indent_content = !0), this.tag_type = "START"), this.traverse_whitespace(), this.Utils.in_array(b, this.Utils.extra_liners) && (this.print_newline(!1, this.output), this.output.length && "\n" !== this.output[this.output.length - 2] && this.print_newline(!0, this.output)));
                a && (this.pos = g, this.line_char_count = h);
                return c.join("")
            };
            this.get_comment = function(a) {
                var b = "",
                    c = ">",
                    d = !1;
                this.pos = a;
                input_char = this.input.charAt(this.pos);
                for (this.pos++; this.pos <= this.input.length;) {
                    b += input_char;
                    if (b[b.length - 1] === c[c.length - 1] && -1 !== b.indexOf(c)) break;
                    !d && 10 > b.length && (0 === b.indexOf("<![if") ? (c = "<![endif]>", d = !0) : 0 === b.indexOf("<![cdata[") ? (c = "]]\x3e", d = !0) : 0 === b.indexOf("<![") ? (c = "]>", d = !0) : 0 === b.indexOf("\x3c!--") && (c = "--\x3e", d = !0));
                    input_char = this.input.charAt(this.pos);
                    this.pos++
                }
                return b
            };
            this.get_unformatted = function(a, b) {
                if (b && -1 !== b.toLowerCase().indexOf(a)) return "";
                var c = "",
                    d = "",
                    e = 0,
                    f = !0;
                do {
                    if (this.pos >= this.input.length) break;
                    c = this.input.charAt(this.pos);
                    this.pos++;
                    if (this.Utils.in_array(c, this.Utils.whitespace)) {
                        if (!f) {
                            this.line_char_count--;
                            continue
                        }
                        if ("\n" === c || "\r" === c) {
                            d += "\n";
                            this.line_char_count = 0;
                            continue
                        }
                    }
                    d += c;
                    this.line_char_count++;
                    f = !0;
                    indent_handlebars && ("{" === c && d.length && "{" === d[d.length - 2]) && (d += this.get_unformatted("}}"), e = d.length)
                } while (-1 === d.toLowerCase().indexOf(a, e));
                return d
            };
            this.get_token = function() {
                var a;
                if ("TK_TAG_SCRIPT" === this.last_token || "TK_TAG_STYLE" === this.last_token) {
                    var b = this.last_token.substr(7);
                    a = this.get_contents_to(b);
                    return "string" !== typeof a ? a : [a, "TK_" + b]
                }
                if ("CONTENT" === this.current_mode) return a = this.get_content(), "string" !== typeof a ? a : [a, "TK_CONTENT"];
                if ("TAG" === this.current_mode) return a = this.get_tag(), "string" !== typeof a ? a : [a, "TK_TAG_" + this.tag_type]
            };
            this.get_full_indent = function(a) {
                a = this.indent_level + a || 0;
                return 1 > a ? "" : Array(a + 1).join(this.indent_string)
            };
            this.is_unformatted = function(a, b) {
                if (!this.Utils.in_array(a, b)) return !1;
                if ("a" !== a.toLowerCase() || !this.Utils.in_array("a", b)) return !0;
                var c = (this.get_tag(!0) || "").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);
                return !c || this.Utils.in_array(c, b) ? !0 : !1
            };
            this.printer = function(a, b, c, d, e) {
                this.input = a || "";
                this.output = [];
                this.indent_character = b;
                this.indent_string = "";
                this.indent_size = c;
                this.brace_style = e;
                this.indent_level = 0;
                this.wrap_line_length = d;
                for (a = this.line_char_count = 0; a < this.indent_size; a++) this.indent_string += this.indent_character;
                this.print_newline = function(a, b) {
                    this.line_char_count = 0;
                    b && b.length && (a || "\n" !== b[b.length - 1]) && b.push("\n")
                };
                this.print_indentation = function(a) {
                    for (var b = 0; b < this.indent_level; b++) a.push(this.indent_string), this.line_char_count += this.indent_string.length
                };
                this.print_token = function(a) {
                    (a || "" !== a) && (this.output.length && "\n" === this.output[this.output.length - 1]) && (this.print_indentation(this.output), a = a.replace(/^\s+/g, ""));
                    this.print_token_raw(a)
                };
                this.print_token_raw = function(a) {
                    a && "" !== a && (1 < a.length && "\n" === a[a.length - 1] ? (this.output.push(a.slice(0, - 1)), this.print_newline(!1, this.output)) : this.output.push(a));
                    for (a = 0; a < this.newlines; a++) this.print_newline(0 < a, this.output);
                    this.newlines = 0
                };
                this.indent = function() {
                    this.indent_level++
                };
                this.unindent = function() {
                    0 < this.indent_level && this.indent_level--
                }
            };
            return this
        };
        for (c.printer(a, l, m, p, r);;) {
            a = c.get_token();
            c.token_text = a[0];
            c.token_type = a[1];
            if ("TK_EOF" === c.token_type) break;
            switch (c.token_type) {
                case "TK_TAG_START":
                    c.print_newline(!1,
                        c.output);
                    c.print_token(c.token_text);
                    c.indent_content && (c.indent(), c.indent_content = !1);
                    c.current_mode = "CONTENT";
                    break;
                case "TK_TAG_STYLE":
                case "TK_TAG_SCRIPT":
                    c.print_newline(!1, c.output);
                    c.print_token(c.token_text);
                    c.current_mode = "CONTENT";
                    break;
                case "TK_TAG_END":
                    "TK_CONTENT" === c.last_token && "" === c.last_text && (a = c.token_text.match(/\w+/)[0], m = null, c.output.length && (m = c.output[c.output.length - 1].match(/(?:<|{{#)\s*(\w+)/)), null !== m && m[1] === a || c.print_newline(!1, c.output));
                    c.print_token(c.token_text);
                    c.current_mode = "CONTENT";
                    break;
                case "TK_TAG_SINGLE":
                    (a = c.token_text.match(/^\s*<([a-z]+)/i)) && c.Utils.in_array(a[1], q) || c.print_newline(!1, c.output);
                    c.print_token(c.token_text);
                    c.current_mode = "CONTENT";
                    break;
                case "TK_TAG_HANDLEBARS_ELSE":
                    c.print_token(c.token_text);
                    c.indent_content && (c.indent(), c.indent_content = !1);
                    c.current_mode = "CONTENT";
                    break;
                case "TK_CONTENT":
                    c.print_token(c.token_text);
                    c.current_mode = "TAG";
                    break;
                case "TK_STYLE":
                case "TK_SCRIPT":
                    if ("" !== c.token_text) {
                        c.print_newline(!1, c.output);
                        a = c.token_text;
                        var s;
                        l = 1;
                        "TK_SCRIPT" === c.token_type ? s = "function" === typeof d && d : "TK_STYLE" === c.token_type && (s = "function" === typeof f && f);
                        "keep" === b.indent_scripts ? l = 0 : "separate" === b.indent_scripts && (l = -c.indent_level);
                        m = c.get_full_indent(l);
                        s ? a = s(a.replace(/^\s*/, m), b) : (p = a.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(c.indent_string).length - 1, l = c.get_full_indent(l - p), a = a.replace(/^\s*/, m).replace(/\r\n|\r|\n/g, "\n" + l).replace(/\s+$/, ""));
                        a && (c.print_token_raw(m + a.replace(/^\s+|\s+$/g, "")), c.print_newline(!1,
                            c.output))
                    }
                    c.current_mode = "TAG"
            }
            c.last_token = c.token_type;
            c.last_text = c.token_text
        }
        return c.output.join("")
    }
    if ("function" === typeof define) define(["./beautify.js", "./beautify-css.js"], function(d, b) {
        return {
            html_beautify: function(e, f) {
                return a(e, f, d, b)
            }
        }
    });
    else if ("undefined" !== typeof exports) {
        var h = require("./beautify.js").js_beautify,
            d = require("./beautify-css.js").css_beautify;
        exports.html_beautify = function(g, b) {
            return a(g, b, h, d)
        }
    } else "undefined" !== typeof window ? window.html_beautify = function(d, b) {
        return a(d,
            b, window.js_beautify, window.css_beautify)
    } : "undefined" !== typeof global && (global.html_beautify = function(d, b) {
        return a(d, b, global.js_beautify, global.css_beautify)
    })
})();
(function() {
    function a(h, d) {
        function g() {
            return s = h.charAt(++v)
        }
        function b() {
            return h.charAt(v + 1)
        }
        function e(a) {
            for (var b = v; g();) if ("\\" === s) g(), g();
            else if (s === a) break;
            else if ("\n" === s) break;
            return h.substring(b, v + 1)
        }
        function f() {
            for (var a = v; u.test(b());) v++;
            return v !== a
        }
        function c() {
            var a = v;
            do;
            while (u.test(g()));
            return v !== a + 1
        }
        function k(a) {
            var c = v;
            for (g(); g();) if ("*" === s && "/" === b()) {
                v++;
                break
            } else if (a && "\n" === s) break;
            return h.substring(c, v + 1)
        }
        function m() {
            var a = h.indexOf("\n", v);
            return -1 === a ? !1 : -1 !== h.substring(v, a).indexOf("//")
        }
        d = d || {};
        var l = d.indent_size || 4,
            p = d.indent_char || " ",
            r = !0;
        void 0 !== d.selector_separator_newline && (r = d.selector_separator_newline);
        var q = d.end_with_newline || !1;
        "string" === typeof l && (l = parseInt(l, 10));
        var u = /^\s+$/,
            v = -1,
            s, x = h.match(/^[\r\n]*[\t ]*/)[0],
            p = Array(l + 1).join(p),
            w = 0,
            A = 0,
            y = {
                "{": function(a) {
                    y.singleSpace();
                    z.push(a);
                    y.newLine()
                },
                "}": function(a) {
                    y.newLine();
                    z.push(a);
                    y.newLine()
                },
                _lastCharWhitespace: function() {
                    return u.test(z[z.length - 1])
                },
                newLine: function(a) {
                    if (!a) for (; y._lastCharWhitespace();) z.pop();
                    z.length && z.push("\n");
                    x && z.push(x)
                },
                singleSpace: function() {
                    z.length && !y._lastCharWhitespace() && z.push(" ")
                }
            }, z = [];
        x && z.push(x);
        for (var B = !1, D = !1;;) {
            var E = c();
            if (s) if ("/" === s && "*" === b()) y.newLine(), z.push(k(), "\n", x), "" === h.substring(v - 0, v).toLowerCase() && y.newLine();
            else if ("/" === s && "/" === b()) z.push(k(!0), x);
            else if ("@" === s) E = e(" ").replace(/ $/, ""), z.push(E, s), E in a.NESTED_AT_RULE && (A += 1, E in a.CONDITIONAL_GROUP_RULE && (D = !0));
            else if ("{" === s) f(), "}" === b() ? (g(), z.push(" {}")) : (w++, x += p, y["{"](s),
                D ? (D = !1, B = w > A) : B = w >= A);
            else if ("}" === s) w--, x = x.slice(0, - l), y["}"](s), B = !1, A && A--;
            else if (":" === s) f(), B || D ? z.push(s, " ") : ":" === b() ? (g(), z.push("::")) : z.push(s);
            else if ('"' === s || "'" === s) z.push(e(s));
            else if (";" === s) if (m()) {
                var E = e("/"),
                    G = k(!0);
                z.push(E, G.substring(1, G.length - 1), "\n", x)
            } else z.push(s, "\n", x);
            else "(" === s ? "url" === h.substring(v - 3, v).toLowerCase() ? (z.push(s), f(), g() && (")" !== s && '"' !== s && "'" !== s ? z.push(e(")")) : v--)) : (E && y.singleSpace(), z.push(s), f()) : ")" === s ? z.push(s) : "," === s ? (f(), z.push(s), !B && r ? y.newLine() : y.singleSpace()) : ("]" !== s && ("[" === s || "=" === s ? f() : E && y.singleSpace()), z.push(s));
            else break
        }
        l = z.join("").replace(/[\n ]+$/, "");
        r = /\n$/.test(l);
        q && !r ? l += "\n" : !q && r && (l = l.slice(0, - 1));
        return l
    }
    a.NESTED_AT_RULE = {
        "@page": !0,
        "@font-face": !0,
        "@keyframes": !0,
        "@media": !0,
        "@supports": !0,
        "@document": !0
    };
    a.CONDITIONAL_GROUP_RULE = {
        "@media": !0,
        "@supports": !0,
        "@document": !0
    };
    "function" === typeof define ? define(function(h, d, g) {
        d.css_beautify = a
    }) : "undefined" !== typeof exports ? exports.css_beautify = a : "undefined" !== typeof window ? window.css_beautify = a : "undefined" !== typeof global && (global.css_beautify = a)
})();
(function(a) {
    var h = a.Uint8Array;
    a = a.HTMLCanvasElement;
    var d = /\s*;\s*base64\s*(?:;|$)/i,
        g;
    h && (g = new h([62, - 1, - 1, - 1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, - 1, - 1, - 1, 0, - 1, - 1, - 1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, - 1, - 1, - 1, - 1, - 1, - 1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51]));
    a && !a.prototype.toBlob && (a.toBlob = a.prototype.toBlob = function(a, e) {
        e || (e = "image/png");
        if (this.mozGetAsFile) a(this.mozGetAsFile("canvas", e));
        else {
            var f = Array.prototype.slice.call(arguments,
                    1),
                c = this.toDataURL.apply(this, f),
                k = c.indexOf(","),
                f = c.substring(k + 1),
                c = d.test(c.substring(0, k)),
                m;
            if (Blob.fake) m = new Blob, m.encoding = c ? "base64" : "URI", m.data = f, m.size = f.length;
            else if (h) if (c) {
                m = Blob;
                for (var c = f.length, k = new h(3 * (c / 4) | 0), l = 0, p = 0, r = [0, 0], q = 0, u = 0, v, s; c--;) s = f.charCodeAt(l++), v = g[s - 43], 255 !== v && void 0 !== v && (r[1] = r[0], r[0] = s, u = u << 6 | v, q++, 4 === q && (k[p++] = u >>> 16, 61 !== r[1] && (k[p++] = u >>> 8), 61 !== r[0] && (k[p++] = u), q = 0));
                m = new m([k], {
                    type: e
                })
            } else m = new Blob([decodeURIComponent(f)], {
                type: e
            });
            a(m)
        }
    });
    a && !a.prototype.toBlobURL && (a.prototype.toBlobURL = function(a) {
        a = a || function(a) {
            console.log("no callback", a)
        };
        this.toBlob(function(d) {
            a(URL.createObjectURL(d))
        })
    })
})(self);
document.createElementNS || (document.createElementNS = function(a, h) {
    return document.createElement(h)
});
if (!window.chrome || !window.chrome.fileSystem) var saveAs = saveAs || navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator) || function(a) {
    var h = a.document,
        d = a.URL || a.webkitURL || a,
        g = h.createElementNS("http://www.w3.org/1999/xhtml", "a"),
        b = !a.externalHost && "download" in g,
        e = function(b) {
            var c = h.createEvent("MouseEvents");
            c.initMouseEvent("click", !0, !1, a, 0, 0, 0, 0, 0, !1, !1, !1, !1, 0, null);
            b.dispatchEvent(c)
        }, f = a.webkitRequestFileSystem,
        c = a.requestFileSystem || f || a.mozRequestFileSystem,
        k = function(b) {
            (a.setImmediate || a.setTimeout)(function() {
                throw b;
            }, 0)
        }, m = 0,
        l = [],
        p = function(a, b, c) {
            b = [].concat(b);
            for (var d = b.length; d--;) {
                var e = a["on" + b[d]];
                if ("function" === typeof e) try {
                    e.call(a, c || a)
                } catch (f) {
                    k(f)
                }
            }
        }, r = function(d, h) {
            var k = this,
                q = d.type,
                r = !1,
                A, y, z = function() {
                    var b = (a.URL || a.webkitURL || a).createObjectURL(d);
                    l.push(b);
                    return b
                }, B = function() {
                    p(k, ["writestart", "progress", "write", "writeend"])
                }, D = function() {
                    if (r || !A) A = z(d);
                    y ? y.location.href = A : window.open(A, "_blank");
                    k.readyState = k.DONE;
                    B()
                }, E = function(a) {
                    return function() {
                        if (k.readyState !== k.DONE) return a.apply(this, arguments)
                    }
                }, G = {
                    create: !0,
                    exclusive: !1
                }, J;
            k.readyState = k.INIT;
            h || (h = "download");
            if (b) A = z(d), g.href = A, g.download = h, e(g), k.readyState = k.DONE, B();
            else {
                a.chrome && (q && "application/octet-stream" !== q) && (J = d.slice || d.webkitSlice, d = J.call(d, 0, d.size, "application/octet-stream"), r = !0);
                f && "download" !== h && (h += ".download");
                if ("application/octet-stream" === q || f) y = a;
                c ? (m += d.size, c(a.TEMPORARY, m, E(function(a) {
                    a.root.getDirectory("saved", G, E(function(a) {
                        var b = function() {
                            a.getFile(h, G, E(function(a) {
                                a.createWriter(E(function(b) {
                                    b.onwriteend = function(b) {
                                        y.location.href = a.toURL();
                                        l.push(a);
                                        k.readyState = k.DONE;
                                        p(k, "writeend", b)
                                    };
                                    b.onerror = function() {
                                        var a = b.error;
                                        a.code !== a.ABORT_ERR && D()
                                    };
                                    ["writestart", "progress", "write", "abort"].forEach(function(a) {
                                        b["on" + a] = k["on" + a]
                                    });
                                    b.write(d);
                                    k.abort = function() {
                                        b.abort();
                                        k.readyState = k.DONE
                                    };
                                    k.readyState = k.WRITING
                                }), D)
                            }), D)
                        };
                        a.getFile(h, {
                            create: !1
                        }, E(function(a) {
                            a.remove();
                            b()
                        }), E(function(a) {
                            a.code === a.NOT_FOUND_ERR ? b() : D()
                        }))
                    }), D)
                }), D)) : D()
            }
        }, q = r.prototype;
    q.abort = function() {
        this.readyState = this.DONE;
        p(this, "abort")
    };
    q.readyState = q.INIT = 0;
    q.WRITING = 1;
    q.DONE = 2;
    q.error = q.onwritestart = q.onprogress = q.onwrite = q.onabort = q.onerror = q.onwriteend = null;
    a.addEventListener("unload", function() {
        for (var a = l.length; a--;) {
            var b = l[a];
            "string" === typeof b ? d.revokeObjectURL(b) : b.remove()
        }
        l.length = 0
    }, !1);
    return function(a, b) {
        return new r(a, b)
    }
}(self);
(function(a) {
    function h() {
        var a = -1,
            b = this;
        b.append = function(c) {
            var d, e = b.table;
            for (d = 0; d < c.length; d++) a = a >>> 8 ^ e[(a ^ c[d]) & 255]
        };
        b.get = function() {
            return~a
        }
    }
    function d(a, b, c) {
        if (a.slice) return a.slice(b, b + c);
        if (a.webkitSlice) return a.webkitSlice(b, b + c);
        if (a.mozSlice) return a.mozSlice(b, b + c);
        if (a.msSlice) return a.msSlice(b, b + c)
    }
    function g(a, b) {
        var c, d;
        c = new ArrayBuffer(a);
        d = new Uint8Array(c);
        b && d.set(b, 0);
        return {
            buffer: c,
            array: d,
            view: new DataView(c)
        }
    }
    function b() {}
    function e(a) {
        var b = this,
            d;
        b.size = 0;
        b.init = function(e, f) {
            var g = new Blob([a], {
                type: aa
            });
            d = new c(g);
            d.init(function() {
                b.size = d.size;
                e()
            }, f)
        };
        b.readUint8Array = function(a, b, c, e) {
            d.readUint8Array(a, b, c, e)
        }
    }
    function f(b) {
        var c = this,
            d;
        c.size = 0;
        c.init = function(a) {
            for (var e = b.length;
                 "=" == b.charAt(e - 1);) e--;
            d = b.indexOf(",") + 1;
            c.size = Math.floor(0.75 * (e - d));
            a()
        };
        c.readUint8Array = function(c, e, f) {
            var h = g(e),
                k = 4 * Math.floor(c / 3),
                l = 4 * Math.ceil((c + e) / 3),
                l = a.atob(b.substring(k + d, l + d));
            for (c = k = c - 3 * Math.floor(k / 4); c < k + e; c++) h.array[c - k] = l.charCodeAt(c);
            f(h.array)
        }
    }
    function c(a) {
        this.size = 0;
        this.init = function(b) {
            this.size = a.size;
            b()
        };
        this.readUint8Array = function(b, c, e, f) {
            var g = new FileReader;
            g.onload = function(a) {
                e(new Uint8Array(a.target.result))
            };
            g.onerror = f;
            g.readAsArrayBuffer(d(a, b, c))
        }
    }
    function k() {}
    function m(a) {
        var b;
        this.init = function(a) {
            b = new Blob([], {
                type: aa
            });
            a()
        };
        this.writeUint8Array = function(a, c) {
            b = new Blob([b, Z ? a : a.buffer], {
                type: aa
            });
            c()
        };
        this.getData = function(c, d) {
            var e = new FileReader;
            e.onload = function(a) {
                c(a.target.result)
            };
            e.onerror = d;
            e.readAsText(b, a)
        }
    }
    function l(b) {
        var c = "",
            d = "";
        this.init = function(a) {
            c += "data:" + (b || "") + ";base64,";
            a()
        };
        this.writeUint8Array = function(b, e) {
            var f, g = d.length,
                h = d;
            d = "";
            for (f = 0; f < 3 * Math.floor((g + b.length) / 3) - g; f++) h += String.fromCharCode(b[f]);
            for (; f < b.length; f++) d += String.fromCharCode(b[f]);
            2 < h.length ? c += a.btoa(h) : d = h;
            e()
        };
        this.getData = function(b) {
            b(c + a.btoa(d))
        }
    }
    function p(a) {
        var b;
        this.init = function(c) {
            b = new Blob([], {
                type: a
            });
            c()
        };
        this.writeUint8Array = function(c, d) {
            b = new Blob([b, Z ? c : c.buffer], {
                type: a
            });
            d()
        };
        this.getData = function(a) {
            a(b)
        }
    }
    function r(a, b, c, d, e, f, g, h, k, l) {
        function m(b) {
            b = b.data;
            var d = b.data;
            b.onappend && (u += d.length, c.writeUint8Array(d, function() {
                f(!1, d);
                p()
            }, l));
            b.onflush && (d ? (u += d.length, c.writeUint8Array(d, function() {
                f(!1, d);
                a.removeEventListener(U, m, !1);
                h(u)
            }, l)) : (a.removeEventListener(U, m, !1), h(u)));
            b.progress && g && g(r + b.current, e)
        }
        function p() {
            r = q * Q;
            r < e ? b.readUint8Array(d + r, Math.min(Q, e - r), function(b) {
                a.postMessage({
                    append: !0,
                    data: b
                });
                q++;
                g && g(r, e);
                f(!0, b)
            }, k) : a.postMessage({
                flush: !0
            })
        }
        var q = 0,
            r, u;
        u = 0;
        a.addEventListener(U, m, !1);
        p()
    }
    function q(a, b, c, d, e, f, g, h, k, l) {
        function m() {
            var u;
            q = p * Q;
            q < e ? b.readUint8Array(d + q, Math.min(Q, e - q), function(b) {
                var h = a.append(b, function() {
                    g && g(d + q, e)
                });
                r += h.length;
                f(!0, b);
                c.writeUint8Array(h, function() {
                    f(!1, h);
                    p++;
                    setTimeout(m, 1)
                }, l);
                g && g(q, e)
            }, k) : (u = a.flush()) ? (r += u.length, c.writeUint8Array(u, function() {
                f(!1, u);
                h(r)
            }, l)) : h(r)
        }
        var p = 0,
            q, r = 0;
        m()
    }
    function u(b, c, d, e, f, g, k, l, m) {
        function p(a, b) {
            f && !a && s.append(b)
        }
        function u(a) {
            g(a, s.get())
        }
        var v, s = new h;
        a.zip.useWebWorkers ? (v = new Worker(a.zip.workerScriptsPath + K), r(v, b, c, d, e, p, k, u, l, m)) : q(new a.zip.Inflater, b, c, d, e, p, k, u, l, m);
        return v
    }
    function v(b, c, d, e, f, g, k) {
        function l(a, b) {
            a && v.append(b)
        }
        function m(a) {
            e(a, v.get())
        }
        function p() {
            u.removeEventListener(U, p, !1);
            r(u, b, c, 0, b.size, l, f, m, g, k)
        }
        var u, v = new h;
        a.zip.useWebWorkers ? (u = new Worker(a.zip.workerScriptsPath + F), u.addEventListener(U, p, !1), u.postMessage({
            init: !0,
            level: d
        })) : q(new a.zip.Deflater, b, c, 0, b.size, l, f, m, g, k);
        return u
    }
    function s(a, b, c, d, e, f,
               g, k, l) {
        function m() {
            var h = p * Q;
            h < d ? a.readUint8Array(c + h, Math.min(Q, d - h), function(a) {
                e && q.append(a);
                g && g(h, d, a);
                b.writeUint8Array(a, function() {
                    p++;
                    m()
                }, l)
            }, k) : f(d, q.get())
        }
        var p = 0,
            q = new h;
        m()
    }
    function x(a) {
        var b, c = "",
            d, e = "\u00c7\u00fc\u00e9\u00e2\u00e4\u00e0\u00e5\u00e7\u00ea\u00eb\u00e8\u00ef\u00ee\u00ec\u00c4\u00c5\u00c9\u00e6\u00c6\u00f4\u00f6\u00f2\u00fb\u00f9\u00ff\u00d6\u00dc\u00f8\u00a3\u00d8\u00d7\u0192\u00e1\u00ed\u00f3\u00fa\u00f1\u00d1\u00aa\u00ba\u00bf\u00ae\u00ac\u00bd\u00bc\u00a1\u00ab\u00bb___\u00a6\u00a6\u00c1\u00c2\u00c0\u00a9\u00a6\u00a6++\u00a2\u00a5++--+-+\u00e3\u00c3++--\u00a6-+\u00a4\u00f0\u00d0\u00ca\u00cb\u00c8i\u00cd\u00ce\u00cf++__\u00a6\u00cc_\u00d3\u00df\u00d4\u00d2\u00f5\u00d5\u00b5\u00fe\u00de\u00da\u00db\u00d9\u00fd\u00dd\u00af\u00b4\u00ad\u00b1_\u00be\u00b6\u00a7\u00f7\u00b8\u00b0\u00a8\u00b7\u00b9\u00b3\u00b2_ ".split("");
        for (b = 0; b < a.length; b++) d = a.charCodeAt(b) & 255, c = 127 < d ? c + e[d - 128] : c + String.fromCharCode(d);
        return c
    }
    function w(a) {
        var b, c = "";
        for (b = 0; b < a.length; b++) c += String.fromCharCode(a[b]);
        return c
    }
    function A(a, b, c, d, e) {
        a.version = b.view.getUint16(c, !0);
        a.bitFlag = b.view.getUint16(c + 2, !0);
        a.compressionMethod = b.view.getUint16(c + 4, !0);
        a.lastModDateRaw = b.view.getUint32(c + 6, !0);
        var f;
        a: {
            var g = a.lastModDateRaw,
                h = (g & 4294901760) >> 16,
                g = g & 65535;
            try {
                f = new Date(1980 + ((h & 65024) >> 9), ((h & 480) >> 5) - 1, h & 31, (g & 63488) >> 11, (g & 2016) >> 5, 2 * (g & 31), 0);
                break a
            } catch (k) {}
            f = void 0
        }
        a.lastModDate = f;
        if (1 === (a.bitFlag & 1)) e(E);
        else {
            if (d || 8 != (a.bitFlag & 8)) a.crc32 = b.view.getUint32(c + 10, !0), a.compressedSize = b.view.getUint32(c + 14, !0), a.uncompressedSize = b.view.getUint32(c + 18, !0);
            4294967295 === a.compressedSize || 4294967295 === a.uncompressedSize ? e(G) : (a.filenameLength = b.view.getUint16(c + 22, !0), a.extraFieldLength = b.view.getUint16(c + 24, !0))
        }
    }
    function y(a, b) {
        function c() {}
        function d(c, e) {
            a.readUint8Array(a.size - c, c, function(a) {
                a = g(a.length, a).view;
                1347093766 != a.getUint32(0) ? d(c + 1, e) : e(a)
            }, function() {
                b(J)
            })
        }
        c.prototype.getData = function(c, d, e, f) {
            function h(a, b) {
                r && r.terminate();
                r = null;
                a && a(b)
            }
            function k(a) {
                var b = g(4);
                b.view.setUint32(0, a);
                return q.crc32 == b.view.getUint32(0)
            }
            function l(a, b) {
                f && !k(b) ? m() : c.getData(function(a) {
                    h(d, a)
                })
            }
            function m() {
                h(b, N)
            }
            function p() {
                h(b, O)
            }
            var q = this,
                r;
            a.readUint8Array(q.offset, 30, function(d) {
                d = g(d.length, d);
                var h;
                1347093252 != d.view.getUint32(0) ? b(D) : (A(q, d, 4, !1, b), h = q.offset + 30 + q.filenameLength + q.extraFieldLength, c.init(function() {
                    0 === q.compressionMethod ? s(a, c, h, q.compressedSize, f, l, e, m, p) : r = u(a, c, h, q.compressedSize, f, l, e, m, p)
                }, p))
            }, m)
        };
        return {
            getEntries: function(e) {
                22 > a.size ? b(D) : d(22, function(d) {
                    var f, h;
                    f = d.getUint32(16, !0);
                    h = d.getUint16(8, !0);
                    a.readUint8Array(f, a.size - f, function(a) {
                        var d = 0,
                            f = [],
                            k, l, m = g(a.length, a);
                        for (a = 0; a < h; a++) {
                            k = new c;
                            if (1347092738 != m.view.getUint32(d)) {
                                b(D);
                                return
                            }
                            A(k, m, d + 6, !0, b);
                            k.commentLength = m.view.getUint16(d + 32, !0);
                            k.directory = 16 == (m.view.getUint8(d + 38) & 16);
                            k.offset = m.view.getUint32(d + 42, !0);
                            l = w(m.array.subarray(d + 46, d + 46 + k.filenameLength));
                            k.filename = 2048 === (k.bitFlag & 2048) ? decodeURIComponent(escape(l)) : x(l);
                            k.directory || "/" != k.filename.charAt(k.filename.length - 1) || (k.directory = !0);
                            l = w(m.array.subarray(d + 46 + k.filenameLength + k.extraFieldLength, d + 46 + k.filenameLength + k.extraFieldLength + k.commentLength));
                            k.comment = 2048 === (k.bitFlag & 2048) ? decodeURIComponent(escape(l)) : x(l);
                            f.push(k);
                            d += 46 + k.filenameLength + k.extraFieldLength + k.commentLength
                        }
                        e(f)
                    }, function() {
                        b(J)
                    })
                })
            },
            close: function(a) {
                a && a()
            }
        }
    }
    function z(a) {
        var b,
            c = [];
        for (b = 0; b < a.length; b++) c.push(a.charCodeAt(b));
        return c
    }
    function B(a, b, c) {
        function d(a, b) {
            h && h.terminate();
            h = null;
            a && a(b)
        }
        function e() {
            d(b, C)
        }
        function f() {
            d(b, N)
        }
        var h, k = {}, l = [],
            m = 0;
        return {
            add: function(p, q, r, u, w) {
                function x(b) {
                    var d;
                    D = w.lastModDate || new Date;
                    C = g(26);
                    k[p] = {
                        headerArray: C.array,
                        directory: w.directory,
                        filename: B,
                        offset: m,
                        comment: z(unescape(encodeURIComponent(w.comment || "")))
                    };
                    C.view.setUint32(0, 335546376);
                    w.version && C.view.setUint8(0, w.version);
                    c || (0 === w.level || w.directory) || C.view.setUint16(4,
                        2048);
                    C.view.setUint16(6, (D.getHours() << 6 | D.getMinutes()) << 5 | D.getSeconds() / 2, !0);
                    C.view.setUint16(8, (D.getFullYear() - 1980 << 4 | D.getMonth() + 1) << 5 | D.getDate(), !0);
                    C.view.setUint16(22, B.length, !0);
                    d = g(30 + B.length);
                    d.view.setUint32(0, 1347093252);
                    d.array.set(C.array, 4);
                    d.array.set(B, 30);
                    m += d.array.length;
                    a.writeUint8Array(d.array, b, e)
                }
                function y(b, c) {
                    var f = g(16);
                    m += b || 0;
                    f.view.setUint32(0, 1347094280);
                    "undefined" != typeof c && (C.view.setUint32(10, c, !0), f.view.setUint32(4, c, !0));
                    q && (f.view.setUint32(8, b, !0),
                        C.view.setUint32(14, b, !0), f.view.setUint32(12, q.size, !0), C.view.setUint32(18, q.size, !0));
                    a.writeUint8Array(f.array, function() {
                        m += 16;
                        d(r)
                    }, e)
                }
                function A() {
                    w = w || {};
                    p = p.trim();
                    w.directory && "/" != p.charAt(p.length - 1) && (p += "/");
                    k.hasOwnProperty(p) ? b(L) : (B = z(unescape(encodeURIComponent(p))), l.push(p), x(function() {
                        q ? c || 0 === w.level ? s(q, a, 0, q.size, !0, y, u, f, e) : h = v(q, a, w.level, y, u, f, e) : y()
                    }, e))
                }
                var C, B, D;
                q ? q.init(A, f) : A()
            },
            close: function(b) {
                var c, f = 0,
                    h = 0,
                    p, q;
                for (p = 0; p < l.length; p++) q = k[l[p]], f += 46 + q.filename.length + q.comment.length;
                c = g(f + 22);
                for (p = 0; p < l.length; p++) q = k[l[p]], c.view.setUint32(h, 1347092738), c.view.setUint16(h + 4, 5120), c.array.set(q.headerArray, h + 6), c.view.setUint16(h + 32, q.comment.length, !0), q.directory && c.view.setUint8(h + 38, 16), c.view.setUint32(h + 42, q.offset, !0), c.array.set(q.filename, h + 46), c.array.set(q.comment, h + 46 + q.filename.length), h += 46 + q.filename.length + q.comment.length;
                c.view.setUint32(h, 1347093766);
                c.view.setUint16(h + 8, l.length, !0);
                c.view.setUint16(h + 10, l.length, !0);
                c.view.setUint32(h + 12,
                    f, !0);
                c.view.setUint32(h + 16, m, !0);
                a.writeUint8Array(c.array, function() {
                    d(function() {
                        a.getData(b)
                    })
                }, e)
            }
        }
    }
    var D = "File format is not recognized.",
        E = "File contains encrypted entry.",
        G = "File is using Zip64 (4gb+ file size).",
        J = "Error while reading zip file.",
        C = "Error while writing zip file.",
        O = "Error while writing file data.",
        N = "Error while reading file data.",
        L = "File already exists.",
        Q = 524288,
        K = "inflate.js",
        F = "deflate.js",
        aa = "text/plain",
        U = "message",
        Z;
    try {
        Z = 0 === (new Blob([new DataView(new ArrayBuffer(0))])).size
    } catch (T) {}
    h.prototype.table = function() {
        var a, b, c, d = [];
        for (a = 0; 256 > a; a++) {
            c = a;
            for (b = 0; 8 > b; b++) c = c & 1 ? c >>> 1 ^ 3988292384 : c >>> 1;
            d[a] = c
        }
        return d
    }();
    e.prototype = new b;
    e.prototype.constructor = e;
    f.prototype = new b;
    f.prototype.constructor = f;
    c.prototype = new b;
    c.prototype.constructor = c;
    k.prototype.getData = function(a) {
        a(this.data)
    };
    m.prototype = new k;
    m.prototype.constructor = m;
    l.prototype = new k;
    l.prototype.constructor = l;
    p.prototype = new k;
    p.prototype.constructor = p;
    a.zip = {
        Reader: b,
        Writer: k,
        BlobReader: c,
        Data64URIReader: f,
        TextReader: e,
        BlobWriter: p,
        Data64URIWriter: l,
        TextWriter: m,
        createReader: function(a, b, c) {
            a.init(function() {
                b(y(a, c))
            }, c)
        },
        createWriter: function(a, b, c, d) {
            a.init(function() {
                b(B(a, c, d))
            }, c)
        },
        workerScriptsPath: "inc/file/Zip/",
        useWebWorkers: !! window.ArrayBuffer
    }
})(this);
(function() {
    function a(a) {
        function b(e) {
            c.data ? e() : a.getData(new x, function(a) {
                c.data = a;
                d = new y(a);
                e()
            }, null, c.checkCrc32)
        }
        var c = this,
            d;
        c.size = 0;
        c.init = function(b) {
            this.size = a.uncompressedSize;
            b()
        };
        c.readUint8Array = function(a, c, e, f) {
            b(function() {
                d.readUint8Array(a, c, e, f)
            }, f)
        }
    }
    function h(a) {
        function b(a) {
            c += a.uncompressedSize || 0;
            a.children.forEach(b)
        }
        var c = 0;
        b(a);
        return c
    }
    function d(a, b, c) {
        function e() {
            g++;
            g < a.children.length ? f(a.children[g]) : b()
        }
        function f(a) {
            a.directory ? d(a, e, c) : (a.reader = new a.Reader(a.data,
                c), a.reader.init(function() {
                a.uncompressedSize = a.reader.size;
                e()
            }))
        }
        var g = 0;
        a.children.length ? f(a.children[g]) : b()
    }
    function g(a) {
        var b = a.parent.children;
        b.forEach(function(c, d) {
            c.id == a.id && b.splice(d, 1)
        })
    }
    function b(a, b, c, d, e) {
        function f(a, b, c, d, e) {
            function h() {
                var l = b.children[k];
                l ? a.add(l.getFullname(), l.reader, function() {
                    g += l.uncompressedSize || 0;
                    f(a, l, function() {
                        k++;
                        h()
                    }, d, e)
                }, function(a) {
                    d && d(g + a, e)
                }, {
                    directory: l.directory,
                    version: l.zipVersion
                }) : c()
            }
            var k = 0;
            h()
        }
        var g = 0;
        f(a, b, c, d, e)
    }
    function e(a,
               b, c, d) {
        function e(a, b) {
            a.isDirectory && a.createReader().readEntries(b);
            a.isFile && b([])
        }
        function f(a, b, c) {
            e(b, function(b) {
                function e(b) {
                    function c(a) {
                        f(a, b, function() {
                            h++;
                            g()
                        })
                    }
                    b.isDirectory && c(a.addDirectory(b.name));
                    b.isFile && b.file(function(d) {
                        var e = a.addBlob(b.name, d);
                        e.uncompressedSize = d.size;
                        c(e)
                    }, d)
                }
                function g() {
                    var a = b[h];
                    a ? e(a) : c()
                }
                var h = 0;
                g()
            })
        }
        b.isDirectory ? f(a, b, c) : b.file(function(d) {
            a.addBlob(b.name, d);
            c()
        }, d)
    }
    function f(a, b, c, d, e, f, g) {
        function h(a, b, c, d, e, f) {
            function l(b) {
                function c(a) {
                    k += b.uncompressedSize || 0;
                    h(a, b, function() {
                        p++;
                        m()
                    }, d, e, f)
                }
                b.directory ? a.getDirectory(b.name, {
                    create: !0
                }, c, e) : a.getFile(b.name, {
                    create: !0
                }, function(a) {
                    b.getData(new zip.FileWriter(a, zip.getMimeType(b.name)), c, function(a) {
                        d && d(k + a, f)
                    }, g)
                }, e)
            }
            function m() {
                var a = b.children[p];
                a ? l(a) : c()
            }
            var p = 0;
            m()
        }
        var k = 0;
        b.directory ? h(a, b, c, d, e, f) : b.getData(new zip.FileWriter(a, zip.getMimeType(b.name)), c, d, g)
    }
    function c(a) {
        a.entries = [];
        a.root = new q(a)
    }
    function k(a, b, c, d, e) {
        function f() {
            var h = g * v;
            d && d(h, a.size);
            h < a.size ? a.readUint8Array(h, Math.min(v, a.size - h), function(a) {
                b.writeUint8Array(new Uint8Array(a), function() {
                    g++;
                    f()
                })
            }, e) : b.getData(c)
        }
        var g = 0;
        f()
    }
    function m(a, b, c, d) {
        var e = this;
        !a || a.constructor == e.Writer && e.data ? b(e.data) : (e.reader || (e.reader = new e.Reader(e.data, d)), e.reader.init(function() {
            a.init(function() {
                k(e.reader, a, b, c, d)
            }, d)
        }))
    }
    function l(a, b, c, d) {
        if (a.directory) return d ? new q(a.fs, b, c, a) : new r(a.fs, b, c, a);
        throw "Parent entry is not a directory.";
    }
    function p() {}
    function r(a, b, c, d) {
        p.prototype.init.call(this,
            a, b, c, d);
        this.Reader = c.Reader;
        this.Writer = c.Writer;
        this.data = c.data;
        this.getData = c.getData || m
    }
    function q(a, b, c, d) {
        p.prototype.init.call(this, a, b, c, d);
        this.directory = !0
    }
    function u() {
        c(this)
    }
    var v = 524288,
        s = zip.TextWriter,
        x = zip.BlobWriter,
        w = zip.Data64URIWriter,
        A = zip.TextReader,
        y = zip.BlobReader,
        z = zip.Data64URIReader,
        B = zip.createReader,
        D = zip.createWriter;
    a.prototype = new zip.Reader;
    a.prototype.constructor = a;
    a.prototype.checkCrc32 = !1;
    p.prototype = {
        init: function(a, b, c, d) {
            if (a.root && d && d.getChildByName(b)) throw "Entry filename already exists.";
            c || (c = {});
            this.fs = a;
            this.name = b;
            this.id = a.entries.length;
            this.parent = d;
            this.children = [];
            this.zipVersion = c.zipVersion || 20;
            this.uncompressedSize = 0;
            a.entries.push(this);
            d && this.parent.children.push(this)
        },
        getFileEntry: function(a, b, c, e, g) {
            var k = this;
            d(k, function() {
                f(a, k, b, c, e, h(k), g)
            }, e)
        },
        moveTo: function(a) {
            if (a.directory) {
                if (a.isDescendantOf(this)) throw "Entry is a ancestor of target entry.";
                if (this != a) {
                    if (a.getChildByName(this.name)) throw "Entry filename already exists.";
                    g(this);
                    this.parent = a;
                    a.children.push(this)
                }
            } else throw "Target entry is not a directory.";
        },
        getFullname: function() {
            for (var a = this.name, b = this.parent; b;) a = (b.name ? b.name + "/" : "") + a, b = b.parent;
            return a
        },
        isDescendantOf: function(a) {
            for (var b = this.parent; b && b.id != a.id;) b = b.parent;
            return !!b
        }
    };
    p.prototype.constructor = p;
    var E;
    r.prototype = E = new p;
    E.constructor = r;
    E.getText = function(a, b, c, d) {
        this.getData(new s(d), a, b, c)
    };
    E.getBlob = function(a, b, c, d) {
        this.getData(new x(a), b, c, d)
    };
    E.getData64URI = function(a, b, c, d) {
        this.getData(new w(a), b, c, d)
    };
    q.prototype = E = new p;
    E.constructor = q;
    E.addDirectory = function(a) {
        return l(this,
            a, null, !0)
    };
    E.addText = function(a, b) {
        return l(this, a, {
            data: b,
            Reader: A,
            Writer: s
        })
    };
    E.addBlob = function(a, b) {
        return l(this, a, {
            data: b,
            Reader: y,
            Writer: x
        })
    };
    E.addData64URI = function(a, b) {
        return l(this, a, {
            data: b,
            Reader: z,
            Writer: w
        })
    };
    E.addFileEntry = function(a, b, c) {
        e(this, a, b, c)
    };
    E.addData = function(a, b) {
        return l(this, a, b)
    };
    E.importBlob = function(a, b, c) {
        this.importZip(new y(a), b, c)
    };
    E.importText = function(a, b, c) {
        this.importZip(new A(a), b, c)
    };
    E.importData64URI = function(a, b, c) {
        this.importZip(new z(a), b, c)
    };
    E.exportBlob = function(a, b, c) {
        this.exportZip(new x("application/zip"), a, b, c)
    };
    E.exportText = function(a, b, c) {
        this.exportZip(new s, a, b, c)
    };
    E.exportFileEntry = function(a, b, c, d) {
        this.exportZip(new zip.FileWriter(a, "application/zip"), b, c, d)
    };
    E.exportData64URI = function(a, b, c) {
        this.exportZip(new w("application/zip"), a, b, c)
    };
    E.importZip = function(b, c, d) {
        var e = this;
        B(b, function(b) {
            b.getEntries(function(b) {
                b.forEach(function(b) {
                    var c = e,
                        d = b.filename.split("/"),
                        f = d.pop();
                    d.forEach(function(a) {
                        c = c.getChildByName(a) || new q(e.fs,
                            a, null, c)
                    });
                    b.directory || l(c, f, {
                        data: b,
                        Reader: a
                    })
                });
                c()
            })
        }, d)
    };
    E.exportZip = function(a, c, e, f) {
        var g = this;
        d(g, function() {
            D(a, function(a) {
                b(a, g, function() {
                    a.close(c)
                }, e, h(g))
            }, f)
        }, f)
    };
    E.getChildByName = function(a) {
        var b, c;
        for (b = 0; b < this.children.length; b++) if (c = this.children[b], c.name == a) return c
    };
    u.prototype = {
        remove: function(a) {
            g(a);
            this.entries[a.id] = null
        },
        find: function(a) {
            var b = a.split("/"),
                c = this.root;
            for (a = 0; c && a < b.length; a++) c = c.getChildByName(b[a]);
            return c
        },
        getById: function(a) {
            return this.entries[a]
        },
        importBlob: function(a, b, d) {
            c(this);
            this.root.importBlob(a, b, d)
        },
        importText: function(a, b, d) {
            c(this);
            this.root.importText(a, b, d)
        },
        importData64URI: function(a, b, d) {
            c(this);
            this.root.importData64URI(a, b, d)
        },
        exportBlob: function(a, b, c) {
            this.root.exportBlob(a, b, c)
        },
        exportText: function(a, b, c) {
            this.root.exportText(a, b, c)
        },
        exportFileEntry: function(a, b, c, d) {
            this.root.exportFileEntry(a, b, c, d)
        },
        exportData64URI: function(a, b, c) {
            this.root.exportData64URI(a, b, c)
        }
    };
    zip.fs = {
        FS: u,
        ZipDirectoryEntry: q,
        ZipFileEntry: r
    };
    zip.getMimeType = function() {
        return "application/octet-stream"
    }
})();
(function(a) {
    function h() {
        var a = this;
        a.build_tree = function(b) {
            var c = a.dyn_tree,
                d = a.stat_desc.static_tree,
                e = a.stat_desc.elems,
                f, g = -1,
                h;
            b.heap_len = 0;
            b.heap_max = q;
            for (f = 0; f < e; f++) 0 !== c[2 * f] ? (b.heap[++b.heap_len] = g = f, b.depth[f] = 0) : c[2 * f + 1] = 0;
            for (; 2 > b.heap_len;) h = b.heap[++b.heap_len] = 2 > g ? ++g : 0, c[2 * h] = 1, b.depth[h] = 0, b.opt_len--, d && (b.static_len -= d[2 * h + 1]);
            a.max_code = g;
            for (f = Math.floor(b.heap_len / 2); 1 <= f; f--) b.pqdownheap(c, f);
            h = e;
            do f = b.heap[1], b.heap[1] = b.heap[b.heap_len--], b.pqdownheap(c, 1), d = b.heap[1],
                b.heap[--b.heap_max] = f, b.heap[--b.heap_max] = d, c[2 * h] = c[2 * f] + c[2 * d], b.depth[h] = Math.max(b.depth[f], b.depth[d]) + 1, c[2 * f + 1] = c[2 * d + 1] = h, b.heap[1] = h++, b.pqdownheap(c, 1);
            while (2 <= b.heap_len);
            b.heap[--b.heap_max] = b.heap[1];
            f = a.dyn_tree;
            for (var g = a.stat_desc.static_tree, l = a.stat_desc.extra_bits, m = a.stat_desc.extra_base, p = a.stat_desc.max_length, r, u, v = 0, e = 0; e <= k; e++) b.bl_count[e] = 0;
            f[2 * b.heap[b.heap_max] + 1] = 0;
            for (h = b.heap_max + 1; h < q; h++) d = b.heap[h], e = f[2 * f[2 * d + 1] + 1] + 1, e > p && (e = p, v++), f[2 * d + 1] = e, d > a.max_code || (b.bl_count[e]++, r = 0, d >= m && (r = l[d - m]), u = f[2 * d], b.opt_len += u * (e + r), g && (b.static_len += u * (g[2 * d + 1] + r)));
            if (0 !== v) {
                do {
                    for (e = p - 1; 0 === b.bl_count[e];) e--;
                    b.bl_count[e]--;
                    b.bl_count[e + 1] += 2;
                    b.bl_count[p]--;
                    v -= 2
                } while (0 < v);
                for (e = p; 0 !== e; e--) for (d = b.bl_count[e]; 0 !== d;) g = b.heap[--h], g > a.max_code || (f[2 * g + 1] != e && (b.opt_len += (e - f[2 * g + 1]) * f[2 * g], f[2 * g + 1] = e), d--)
            }
            f = a.max_code;
            h = b.bl_count;
            b = [];
            d = 0;
            for (e = 1; e <= k; e++) b[e] = d = d + h[e - 1] << 1;
            for (h = 0; h <= f; h++) if (l = c[2 * h + 1], 0 !== l) {
                d = c;
                e = 2 * h;
                g = b[l]++;
                m = 0;
                do m |= g & 1, g >>>= 1, m <<= 1;
                while (0 < --l);
                d[e] = m >>> 1
            }
        }
    }
    function d(a, b, c, d, e) {
        this.static_tree = a;
        this.extra_bits = b;
        this.extra_base = c;
        this.elems = d;
        this.max_length = e
    }
    function g(a, b, c, d, e) {
        this.good_length = a;
        this.max_lazy = b;
        this.nice_length = c;
        this.max_chain = d;
        this.func = e
    }
    function b(a, b, c, d) {
        var e = a[2 * b];
        a = a[2 * c];
        return e < a || e == a && d[b] <= d[c]
    }
    function e() {
        function a() {
            var b;
            for (b = 0; b < r; b++) La[2 * b] = 0;
            for (b = 0; b < m; b++) Pa[2 * b] = 0;
            for (b = 0; b < l; b++) Aa[2 * b] = 0;
            La[2 * u] = 1;
            Ha = gb = la.opt_len = la.static_len = 0
        }
        function c(a, b) {
            var d, e = -1,
                f, g = a[1],
                h = 0,
                k = 7,
                l = 4;
            0 === g && (k = 138, l = 3);
            a[2 * (b + 1) + 1] = 65535;
            for (d = 0; d <= b; d++) f = g, g = a[2 * (d + 1) + 1], ++h < k && f == g || (h < l ? Aa[2 * f] += h : 0 !== f ? (f != e && Aa[2 * f]++, Aa[2 * v]++) : 10 >= h ? Aa[2 * s]++ : Aa[2 * x]++, h = 0, e = f, 0 === g ? (k = 138, l = 3) : f == g ? (k = 6, l = 3) : (k = 7, l = 4))
        }
        function e(a) {
            la.pending_buf[la.pending++] = a
        }
        function f(a) {
            e(a & 255);
            e(a >>> 8 & 255)
        }
        function g(a, b) {
            wa > w - b ? (Da |= a << wa & 65535, f(Da), Da = a >>> w - wa, wa += b - w) : (Da |= a << wa & 65535, wa += b)
        }
        function k(a, b) {
            var c = 2 * a;
            g(b[c] & 65535, b[c + 1] & 65535)
        }
        function q(a, b) {
            var c, d = -1,
                e, f = a[1],
                h = 0,
                l = 7,
                m = 4;
            0 === f && (l = 138, m = 3);
            for (c = 0; c <= b; c++) if (e = f, f = a[2 * (c + 1) + 1], !(++h < l && e == f)) {
                if (h < m) {
                    do k(e, Aa);
                    while (0 !== --h)
                } else 0 !== e ? (e != d && (k(e, Aa), h--), k(v, Aa), g(h - 3, 2)) : 10 >= h ? (k(s, Aa), g(h - 3, 3)) : (k(x, Aa), g(h - 11, 7));
                h = 0;
                d = e;
                0 === f ? (l = 138, m = 3) : e == f ? (l = 6, m = 3) : (l = 7, m = 4)
            }
        }
        function F() {
            16 == wa ? (f(Da), wa = Da = 0) : 8 <= wa && (e(Da & 255), Da >>>= 8, wa -= 8)
        }
        function Xa(a, b) {
            var c, d, e;
            la.pending_buf[Ya + 2 * Ha] = a >>> 8 & 255;
            la.pending_buf[Ya + 2 * Ha + 1] = a & 255;
            la.pending_buf[hb + Ha] = b & 255;
            Ha++;
            0 === a ? La[2 * b]++ : (gb++, a--, La[2 * (h._length_code[b] + p + 1)]++,
                Pa[2 * h.d_code(a)]++);
            if (0 === (Ha & 8191) && 2 < Ba) {
                c = 8 * Ha;
                d = ga - Ia;
                for (e = 0; e < m; e++) c += Pa[2 * e] * (5 + h.extra_dbits[e]);
                if (gb < Math.floor(Ha / 2) && c >>> 3 < Math.floor(d / 2)) return !0
            }
            return Ha == Sa - 1
        }
        function nb(a, b) {
            var c, d, e = 0,
                f, l;
            if (0 !== Ha) {
                do c = la.pending_buf[Ya + 2 * e] << 8 & 65280 | la.pending_buf[Ya + 2 * e + 1] & 255, d = la.pending_buf[hb + e] & 255, e++, 0 === c ? k(d, a) : (f = h._length_code[d], k(f + p + 1, a), l = h.extra_lbits[f], 0 !== l && (d -= h.base_length[f], g(d, l)), c--, f = h.d_code(c), k(f, b), l = h.extra_dbits[f], 0 !== l && (c -= h.base_dist[f], g(c, l)));
                while (e < Ha)
            }
            k(u, a);
            Za = a[2 * u + 1]
        }
        function qa() {
            8 < wa ? f(Da) : 0 < wa && e(Da & 255);
            wa = Da = 0
        }
        function ob(a, b, c) {
            g((ca << 1) + (c ? 1 : 0), 3);
            qa();
            Za = 8;
            f(b);
            f(~b);
            la.pending_buf.set(ja.subarray(a, a + b), la.pending);
            la.pending += b
        }
        function Oa(b) {
            var e = 0 <= Ia ? Ia : -1,
                f = ga - Ia,
                k, m, p = 0;
            if (0 < Ba) {
                $a.build_tree(la);
                ab.build_tree(la);
                c(La, $a.max_code);
                c(Pa, ab.max_code);
                ib.build_tree(la);
                for (p = l - 1; 3 <= p && 0 === Aa[2 * h.bl_order[p] + 1]; p--);
                la.opt_len += 3 * (p + 1) + 14;
                k = la.opt_len + 3 + 7 >>> 3;
                m = la.static_len + 3 + 7 >>> 3;
                m <= k && (k = m)
            } else k = m = f + 5;
            if (f + 4 <= k && -1 != e) ob(e,
                f, b);
            else if (m == k) g((sa << 1) + (b ? 1 : 0), 3), nb(d.static_ltree, d.static_dtree);
            else {
                g((V << 1) + (b ? 1 : 0), 3);
                e = $a.max_code + 1;
                f = ab.max_code + 1;
                p += 1;
                g(e - 257, 5);
                g(f - 1, 5);
                g(p - 4, 4);
                for (k = 0; k < p; k++) g(Aa[2 * h.bl_order[k] + 1], 3);
                q(La, e - 1);
                q(Pa, f - 1);
                nb(La, Pa)
            }
            a();
            b && qa();
            Ia = ga;
            ta.flush_pending()
        }
        function db() {
            var a, b, c, d;
            do {
                d = qb - ma - ga;
                if (0 === d && 0 === ga && 0 === ma) d = ra;
                else if (-1 == d) d--;
                else if (ga >= ra + ra - fa) {
                    ja.set(ja.subarray(ra, ra + ra), 0);
                    Ta -= ra;
                    ga -= ra;
                    Ia -= ra;
                    c = a = Ua;
                    do b = ua[--c] & 65535, ua[c] = b >= ra ? b - ra : 0;
                    while (0 !== --a);
                    c = a = ra;
                    do b = Ja[--c] & 65535, Ja[c] = b >= ra ? b - ra : 0;
                    while (0 !== --a);
                    d += ra
                }
                if (0 === ta.avail_in) break;
                a = ta.read_buf(ja, ga + ma, d);
                ma += a;
                ma >= X && (oa = ja[ga] & 255, oa = (oa << Ma ^ ja[ga + 1] & 255) & Na)
            } while (ma < fa && 0 !== ta.avail_in)
        }
        function sb(a) {
            var b = 65535,
                c;
            for (b > eb - 5 && (b = eb - 5);;) {
                if (1 >= ma) {
                    db();
                    if (0 === ma && a == D) return ia;
                    if (0 === ma) break
                }
                ga += ma;
                ma = 0;
                c = Ia + b;
                if (0 === ga || ga >= c) if (ma = ga - c, ga = c, Oa(!1), 0 === ta.avail_out) return ia;
                if (ga - Ia >= ra - fa && (Oa(!1), 0 === ta.avail_out)) return ia
            }
            Oa(a == J);
            return 0 === ta.avail_out ? a == J ? pa : ia : a == J ? ea : na
        }
        function pb(a) {
            var b = jb,
                c = ga,
                d, e = Ga,
                f = ga > ra - fa ? ga - (ra - fa) : 0,
                g = kb,
                h = Qa,
                k = ga + W,
                l = ja[c + e - 1],
                m = ja[c + e];
            Ga >= lb && (b >>= 2);
            g > ma && (g = ma);
            do if (d = a, ja[d + e] == m && ja[d + e - 1] == l && ja[d] == ja[c] && ja[++d] == ja[c + 1]) {
                c += 2;
                d++;
                do;
                while (ja[++c] == ja[++d] && ja[++c] == ja[++d] && ja[++c] == ja[++d] && ja[++c] == ja[++d] && ja[++c] == ja[++d] && ja[++c] == ja[++d] && ja[++c] == ja[++d] && ja[++c] == ja[++d] && c < k);
                d = W - (k - c);
                c = k - W;
                if (d > e) {
                    Ta = a;
                    e = d;
                    if (d >= g) break;
                    l = ja[c + e - 1];
                    m = ja[c + e]
                }
            }
            while ((a = Ja[a & h] & 65535) > f && 0 !== --b);
            return e <= ma ? e : ma
        }
        function tb(a) {
            for (var b = 0, c, d;;) {
                if (ma < fa) {
                    db();
                    if (ma < fa && a == D) return ia;
                    if (0 === ma) break
                }
                ma >= X && (oa = (oa << Ma ^ ja[ga + (X - 1)] & 255) & Na, b = ua[oa] & 65535, Ja[ga & Qa] = ua[oa], ua[oa] = ga);
                Ga = xa;
                rb = Ta;
                xa = X - 1;
                0 !== b && (Ga < cb && (ga - b & 65535) <= ra - fa) && (bb != z && (xa = pb(b)), 5 >= xa && (bb == y || xa == X && 4096 < ga - Ta) && (xa = X - 1));
                if (Ga >= X && xa <= Ga) {
                    d = ga + ma - X;
                    c = Xa(ga - 1 - rb, Ga - X);
                    ma -= Ga - 1;
                    Ga -= 2;
                    do ++ga <= d && (oa = (oa << Ma ^ ja[ga + (X - 1)] & 255) & Na, b = ua[oa] & 65535, Ja[ga & Qa] = ua[oa], ua[oa] = ga);
                    while (0 !== --Ga);
                    Va = 0;
                    xa = X - 1;
                    ga++;
                    if (c && (Oa(!1), 0 === ta.avail_out)) return ia
                } else if (0 !== Va) {
                    if ((c = Xa(0, ja[ga - 1] & 255)) && Oa(!1), ga++, ma--, 0 === ta.avail_out) return ia
                } else Va = 1, ga++, ma--
            }
            0 !== Va && (Xa(0, ja[ga - 1] & 255), Va = 0);
            Oa(a == J);
            return 0 === ta.avail_out ? a == J ? pa : ia : a == J ? ea : na
        }
        var la = this,
            ta, Fa, eb, Ra, ra, fb, Qa, ja, qb, Ja, ua, oa, Ua, mb, Na, Ma, Ia, xa, rb, Va, ga, Ta, ma, Ga, jb, cb, Ba, bb, lb, kb, La, Pa, Aa, $a = new h,
            ab = new h,
            ib = new h;
        la.depth = [];
        var hb, Sa, Ha, Ya, gb, Za, Da, wa;
        la.bl_count = [];
        la.heap = [];
        La = [];
        Pa = [];
        Aa = [];
        la.pqdownheap = function(a, c) {
            for (var d = la.heap, e = d[c], f = c << 1; f <= la.heap_len;) {
                f < la.heap_len && b(a,
                    d[f + 1], d[f], la.depth) && f++;
                if (b(a, e, d[f], la.depth)) break;
                d[c] = d[f];
                c = f;
                f <<= 1
            }
            d[c] = e
        };
        la.deflateInit = function(b, c, e, f, g, h) {
            f || (f = ha);
            g || (g = U);
            h || (h = B);
            b.msg = null;
            c == A && (c = 6);
            if (1 > g || g > aa || f != ha || 9 > e || 15 < e || 0 > c || 9 < c || 0 > h || h > z) return L;
            b.dstate = la;
            fb = e;
            ra = 1 << fb;
            Qa = ra - 1;
            mb = g + 7;
            Ua = 1 << mb;
            Na = Ua - 1;
            Ma = Math.floor((mb + X - 1) / X);
            ja = new Uint8Array(2 * ra);
            Ja = [];
            ua = [];
            Sa = 1 << g + 6;
            la.pending_buf = new Uint8Array(4 * Sa);
            eb = 4 * Sa;
            Ya = Math.floor(Sa / 2);
            hb = 3 * Sa;
            Ba = c;
            bb = h;
            b.total_in = b.total_out = 0;
            b.msg = null;
            la.pending = 0;
            la.pending_out = 0;
            Fa = ya;
            Ra = D;
            $a.dyn_tree = La;
            $a.stat_desc = d.static_l_desc;
            ab.dyn_tree = Pa;
            ab.stat_desc = d.static_d_desc;
            ib.dyn_tree = Aa;
            ib.stat_desc = d.static_bl_desc;
            wa = Da = 0;
            Za = 8;
            a();
            qb = 2 * ra;
            for (b = ua[Ua - 1] = 0; b < Ua - 1; b++) ua[b] = 0;
            cb = Y[Ba].max_lazy;
            lb = Y[Ba].good_length;
            kb = Y[Ba].nice_length;
            jb = Y[Ba].max_chain;
            ma = Ia = ga = 0;
            xa = Ga = X - 1;
            oa = Va = 0;
            return C
        };
        la.deflateEnd = function() {
            if (Fa != ba && Fa != ya && Fa != ka) return L;
            ja = Ja = ua = la.pending_buf = null;
            la.dstate = null;
            return Fa == ya ? Q : C
        };
        la.deflateParams = function(a, b, c) {
            var d = C;
            b == A && (b = 6);
            if (0 > b || 9 < b || 0 > c || c > z) return L;
            Y[Ba].func != Y[b].func && 0 !== a.total_in && (d = a.deflate(E));
            Ba != b && (Ba = b, cb = Y[Ba].max_lazy, lb = Y[Ba].good_length, kb = Y[Ba].nice_length, jb = Y[Ba].max_chain);
            bb = c;
            return d
        };
        la.deflateSetDictionary = function(a, b, c) {
            a = c;
            var d = 0;
            if (!b || Fa != ba) return L;
            if (a < X) return C;
            a > ra - fa && (a = ra - fa, d = c - a);
            ja.set(b.subarray(d, d + a), 0);
            Ia = ga = a;
            oa = ja[0] & 255;
            oa = (oa << Ma ^ ja[1] & 255) & Na;
            for (b = 0; b <= a - X; b++) oa = (oa << Ma ^ ja[b + (X - 1)] & 255) & Na, Ja[b & Qa] = ua[oa], ua[oa] = b;
            return C
        };
        la.deflate = function(a, b) {
            var c,
                f, h;
            if (b > J || 0 > b) return L;
            if (!a.next_out || !a.next_in && 0 !== a.avail_in || Fa == ka && b != J) return a.msg = da[N - L], L;
            if (0 === a.avail_out) return a.msg = da[N - K], K;
            ta = a;
            c = Ra;
            Ra = b;
            Fa == ba && (f = ha + (fb - 8 << 4) << 8, h = (Ba - 1 & 255) >> 1, 3 < h && (h = 3), f |= h << 6, 0 !== ga && (f |= R), Fa = ya, f += 31 - f % 31, e(f >> 8 & 255), e(f & 255));
            if (0 !== la.pending) {
                if (ta.flush_pending(), 0 === ta.avail_out) return Ra = -1, C
            } else if (0 === ta.avail_in && b <= c && b != J) return ta.msg = da[N - K], K;
            if (Fa == ka && 0 !== ta.avail_in) return a.msg = da[N - K], K;
            if (0 !== ta.avail_in || 0 !== ma || b != D && Fa != ka) {
                c = -1;
                switch (Y[Ba].func) {
                    case Z:
                        c = sb(b);
                        break;
                    case T:
                        a: {
                            for (c = 0;;) {
                                if (ma < fa) {
                                    db();
                                    if (ma < fa && b == D) {
                                        c = ia;
                                        break a
                                    }
                                    if (0 === ma) break
                                }
                                ma >= X && (oa = (oa << Ma ^ ja[ga + (X - 1)] & 255) & Na, c = ua[oa] & 65535, Ja[ga & Qa] = ua[oa], ua[oa] = ga);
                                0 !== c && (ga - c & 65535) <= ra - fa && bb != z && (xa = pb(c));
                                if (xa >= X) if (f = Xa(ga - Ta, xa - X), ma -= xa, xa <= cb && ma >= X) {
                                    xa--;
                                    do ga++, oa = (oa << Ma ^ ja[ga + (X - 1)] & 255) & Na, c = ua[oa] & 65535, Ja[ga & Qa] = ua[oa], ua[oa] = ga;
                                    while (0 !== --xa);
                                    ga++
                                } else ga += xa, xa = 0, oa = ja[ga] & 255, oa = (oa << Ma ^ ja[ga + 1] & 255) & Na;
                                else f = Xa(0, ja[ga] & 255), ma--, ga++;
                                if (f && (Oa(!1), 0 === ta.avail_out)) {
                                    c = ia;
                                    break a
                                }
                            }
                            Oa(b == J);
                            c = 0 === ta.avail_out ? b == J ? pa : ia : b == J ? ea : na
                        }
                        break;
                    case P:
                        c = tb(b)
                }
                if (c == pa || c == ea) Fa = ka;
                if (c == ia || c == pa) return 0 === ta.avail_out && (Ra = -1), C;
                if (c == na) {
                    if (b == E) g(sa << 1, 3), k(u, d.static_ltree), F(), 9 > 1 + Za + 10 - wa && (g(sa << 1, 3), k(u, d.static_ltree), F()), Za = 7;
                    else if (ob(0, 0, !1), b == G) for (c = 0; c < Ua; c++) ua[c] = 0;
                    ta.flush_pending();
                    if (0 === ta.avail_out) return Ra = -1, C
                }
            }
            return b != J ? C : O
        }
    }
    function f() {
        this.total_out = this.avail_out = this.total_in = this.avail_in = this.next_out_index = this.next_in_index = 0
    }
    function c(a) {
        var b = new f,
            c = D,
            d = new Uint8Array(512);
        "undefined" == typeof a && (a = A);
        b.deflateInit(a);
        b.next_out = d;
        this.append = function(a, e) {
            var f, g = [],
                h = 0,
                k = 0,
                l = 0,
                m;
            if (a.length) {
                b.next_in_index = 0;
                b.next_in = a;
                b.avail_in = a.length;
                do {
                    b.next_out_index = 0;
                    b.avail_out = 512;
                    f = b.deflate(c);
                    if (f != C) throw "deflating: " + b.msg;
                    b.next_out_index && (512 == b.next_out_index ? g.push(new Uint8Array(d)) : g.push(new Uint8Array(d.subarray(0, b.next_out_index))));
                    l += b.next_out_index;
                    e && (0 < b.next_in_index && b.next_in_index != h) && (e(b.next_in_index), h = b.next_in_index)
                } while (0 < b.avail_in || 0 === b.avail_out);
                m = new Uint8Array(l);
                g.forEach(function(a) {
                    m.set(a, k);
                    k += a.length
                });
                return m
            }
        };
        this.flush = function() {
            var a, c = [],
                e = 0,
                f = 0,
                g;
            do {
                b.next_out_index = 0;
                b.avail_out = 512;
                a = b.deflate(J);
                if (a != O && a != C) throw "deflating: " + b.msg;
                0 < 512 - b.avail_out && c.push(new Uint8Array(d.subarray(0, b.next_out_index)));
                f += b.next_out_index
            } while (0 < b.avail_in || 0 === b.avail_out);
            b.deflateEnd();
            g = new Uint8Array(f);
            c.forEach(function(a) {
                g.set(a, e);
                e += a.length
            });
            return g
        }
    }
    var k = 15,
        m = 30,
        l = 19,
        p = 256,
        r = p + 1 + 29,
        q = 2 * r + 1,
        u = 256,
        v = 16,
        s = 17,
        x = 18,
        w = 16,
        A = -1,
        y = 1,
        z = 2,
        B = 0,
        D = 0,
        E = 1,
        G = 3,
        J = 4,
        C = 0,
        O = 1,
        N = 2,
        L = -2,
        Q = -3,
        K = -5,
        F = [0, 1, 2, 3, 4, 4, 5, 5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14,
            14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 16, 17, 18, 18, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
            24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29,
            29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29];
    h._length_code = [0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23,
        23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28];
    h.base_length = [0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 16, 20, 24, 28, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224,
        0];
    h.base_dist = [0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64, 96, 128, 192, 256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096, 6144, 8192, 12288, 16384, 24576];
    h.d_code = function(a) {
        return 256 > a ? F[a] : F[256 + (a >>> 7)]
    };
    h.extra_lbits = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0];
    h.extra_dbits = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13];
    h.extra_blbits = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7];
    h.bl_order = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
    d.static_ltree = [12, 8, 140, 8, 76, 8, 204, 8, 44, 8, 172,
        8, 108, 8, 236, 8, 28, 8, 156, 8, 92, 8, 220, 8, 60, 8, 188, 8, 124, 8, 252, 8, 2, 8, 130, 8, 66, 8, 194, 8, 34, 8, 162, 8, 98, 8, 226, 8, 18, 8, 146, 8, 82, 8, 210, 8, 50, 8, 178, 8, 114, 8, 242, 8, 10, 8, 138, 8, 74, 8, 202, 8, 42, 8, 170, 8, 106, 8, 234, 8, 26, 8, 154, 8, 90, 8, 218, 8, 58, 8, 186, 8, 122, 8, 250, 8, 6, 8, 134, 8, 70, 8, 198, 8, 38, 8, 166, 8, 102, 8, 230, 8, 22, 8, 150, 8, 86, 8, 214, 8, 54, 8, 182, 8, 118, 8, 246, 8, 14, 8, 142, 8, 78, 8, 206, 8, 46, 8, 174, 8, 110, 8, 238, 8, 30, 8, 158, 8, 94, 8, 222, 8, 62, 8, 190, 8, 126, 8, 254, 8, 1, 8, 129, 8, 65, 8, 193, 8, 33, 8, 161, 8, 97, 8, 225, 8, 17, 8, 145, 8, 81, 8, 209, 8, 49, 8, 177, 8, 113, 8, 241,
        8, 9, 8, 137, 8, 73, 8, 201, 8, 41, 8, 169, 8, 105, 8, 233, 8, 25, 8, 153, 8, 89, 8, 217, 8, 57, 8, 185, 8, 121, 8, 249, 8, 5, 8, 133, 8, 69, 8, 197, 8, 37, 8, 165, 8, 101, 8, 229, 8, 21, 8, 149, 8, 85, 8, 213, 8, 53, 8, 181, 8, 117, 8, 245, 8, 13, 8, 141, 8, 77, 8, 205, 8, 45, 8, 173, 8, 109, 8, 237, 8, 29, 8, 157, 8, 93, 8, 221, 8, 61, 8, 189, 8, 125, 8, 253, 8, 19, 9, 275, 9, 147, 9, 403, 9, 83, 9, 339, 9, 211, 9, 467, 9, 51, 9, 307, 9, 179, 9, 435, 9, 115, 9, 371, 9, 243, 9, 499, 9, 11, 9, 267, 9, 139, 9, 395, 9, 75, 9, 331, 9, 203, 9, 459, 9, 43, 9, 299, 9, 171, 9, 427, 9, 107, 9, 363, 9, 235, 9, 491, 9, 27, 9, 283, 9, 155, 9, 411, 9, 91, 9, 347, 9, 219, 9, 475, 9,
        59, 9, 315, 9, 187, 9, 443, 9, 123, 9, 379, 9, 251, 9, 507, 9, 7, 9, 263, 9, 135, 9, 391, 9, 71, 9, 327, 9, 199, 9, 455, 9, 39, 9, 295, 9, 167, 9, 423, 9, 103, 9, 359, 9, 231, 9, 487, 9, 23, 9, 279, 9, 151, 9, 407, 9, 87, 9, 343, 9, 215, 9, 471, 9, 55, 9, 311, 9, 183, 9, 439, 9, 119, 9, 375, 9, 247, 9, 503, 9, 15, 9, 271, 9, 143, 9, 399, 9, 79, 9, 335, 9, 207, 9, 463, 9, 47, 9, 303, 9, 175, 9, 431, 9, 111, 9, 367, 9, 239, 9, 495, 9, 31, 9, 287, 9, 159, 9, 415, 9, 95, 9, 351, 9, 223, 9, 479, 9, 63, 9, 319, 9, 191, 9, 447, 9, 127, 9, 383, 9, 255, 9, 511, 9, 0, 7, 64, 7, 32, 7, 96, 7, 16, 7, 80, 7, 48, 7, 112, 7, 8, 7, 72, 7, 40, 7, 104, 7, 24, 7, 88, 7, 56, 7, 120, 7, 4,
        7, 68, 7, 36, 7, 100, 7, 20, 7, 84, 7, 52, 7, 116, 7, 3, 8, 131, 8, 67, 8, 195, 8, 35, 8, 163, 8, 99, 8, 227, 8];
    d.static_dtree = [0, 5, 16, 5, 8, 5, 24, 5, 4, 5, 20, 5, 12, 5, 28, 5, 2, 5, 18, 5, 10, 5, 26, 5, 6, 5, 22, 5, 14, 5, 30, 5, 1, 5, 17, 5, 9, 5, 25, 5, 5, 5, 21, 5, 13, 5, 29, 5, 3, 5, 19, 5, 11, 5, 27, 5, 7, 5, 23, 5];
    d.static_l_desc = new d(d.static_ltree, h.extra_lbits, p + 1, r, k);
    d.static_d_desc = new d(d.static_dtree, h.extra_dbits, 0, m, k);
    d.static_bl_desc = new d(null, h.extra_blbits, 0, l, 7);
    var aa = 9,
        U = 8,
        Z = 0,
        T = 1,
        P = 2,
        Y = [new g(0, 0, 0, 0, Z), new g(4, 4, 8, 4, T), new g(4, 5, 16, 8, T), new g(4, 6, 32,
            32, T), new g(4, 4, 16, 16, P), new g(8, 16, 32, 32, P), new g(8, 16, 128, 128, P), new g(8, 32, 128, 256, P), new g(32, 128, 258, 1024, P), new g(32, 258, 258, 4096, P)],
        da = "need dictionary;stream end;;;stream error;data error;;buffer error;;".split(";"),
        ia = 0,
        na = 1,
        pa = 2,
        ea = 3,
        R = 32,
        ba = 42,
        ya = 113,
        ka = 666,
        ha = 8,
        ca = 0,
        sa = 1,
        V = 2,
        X = 3,
        W = 258,
        fa = W + X + 1;
    f.prototype = {
        deflateInit: function(a, b) {
            this.dstate = new e;
            b || (b = k);
            return this.dstate.deflateInit(this, a, b)
        },
        deflate: function(a) {
            return this.dstate ? this.dstate.deflate(this, a) : L
        },
        deflateEnd: function() {
            if (!this.dstate) return L;
            var a = this.dstate.deflateEnd();
            this.dstate = null;
            return a
        },
        deflateParams: function(a, b) {
            return this.dstate ? this.dstate.deflateParams(this, a, b) : L
        },
        deflateSetDictionary: function(a, b) {
            return this.dstate ? this.dstate.deflateSetDictionary(this, a, b) : L
        },
        read_buf: function(a, b, c) {
            var d = this.avail_in;
            d > c && (d = c);
            if (0 === d) return 0;
            this.avail_in -= d;
            a.set(this.next_in.subarray(this.next_in_index, this.next_in_index + d), b);
            this.next_in_index += d;
            this.total_in += d;
            return d
        },
        flush_pending: function() {
            var a = this.dstate.pending;
            a > this.avail_out && (a = this.avail_out);
            0 !== a && (this.next_out.set(this.dstate.pending_buf.subarray(this.dstate.pending_out, this.dstate.pending_out + a), this.next_out_index), this.next_out_index += a, this.dstate.pending_out += a, this.total_out += a, this.avail_out -= a, this.dstate.pending -= a, 0 === this.dstate.pending && (this.dstate.pending_out = 0))
        }
    };
    var qa;
    a.zip ? a.zip.Deflater = c : (qa = new c, a.addEventListener("message", function(b) {
        b = b.data;
        b.init && (qa = new c(b.level), a.postMessage({
            oninit: !0
        }));
        b.append && a.postMessage({
            onappend: !0,
            data: qa.append(b.data, function(b) {
                a.postMessage({
                    progress: !0,
                    current: b
                })
            })
        });
        b.flush && a.postMessage({
            onflush: !0,
            data: qa.flush()
        })
    }, !1))
})(this);
(function(a) {
    function h() {
        function a(b, d, e, l, m, r, u, s, w, x, y) {
            var V, A, z, B, D, C, za, G, R, F;
            za = 0;
            z = e;
            do f[b[d + za]]++, za++, z--;
            while (0 !== z);
            if (f[0] == e) return u[0] = -1, s[0] = 0, c;
            C = s[0];
            for (B = 1; B <= E && 0 === f[B]; B++);
            D = B;
            C < B && (C = B);
            for (z = E; 0 !== z && 0 === f[z]; z--);
            A = z;
            C > z && (C = z);
            s[0] = C;
            for (s = 1 << B; B < z; B++, s <<= 1) if (0 > (s -= f[B])) return p;
            if (0 > (s -= f[z])) return p;
            f[z] += s;
            k[1] = B = 0;
            za = 1;
            for (G = 2; 0 !== --z;) k[G] = B += f[za], G++, za++;
            za = z = 0;
            do 0 !== (B = b[d + za]) && (y[k[B]++] = z), za++;
            while (++z < e);
            e = k[A];
            za = k[0] = z = 0;
            d = -1;
            R = -C;
            for (F = G = h[0] = 0; D <= A; D++) for (b = f[D]; 0 !== b--;) {
                for (; D > R + C;) {
                    d++;
                    R += C;
                    F = A - R;
                    F = F > C ? C : F;
                    if ((V = 1 << (B = D - R)) > b + 1 && (V -= b + 1, G = D, B < F)) for (; ++B < F && !((V <<= 1) <= f[++G]);) V -= f[G];
                    F = 1 << B;
                    if (x[0] + F > v) return p;
                    h[d] = G = x[0];
                    x[0] += F;
                    0 !== d ? (k[d] = z, g[0] = B, g[1] = C, B = z >>> R - C, g[2] = G - h[d - 1] - B, w.set(g, 3 * (h[d - 1] + B))) : u[0] = G
                }
                g[1] = D - R;
                za >= e ? g[0] = 192 : y[za] < l ? (g[0] = 256 > y[za] ? 0 : 96, g[2] = y[za++]) : (g[0] = r[y[za] - l] + 16 + 64, g[2] = m[y[za++] - l]);
                V = 1 << D - R;
                for (B = z >>> R; B < F; B += V) w.set(g, 3 * (G + B));
                for (B = 1 << D - 1; 0 !== (z & B); B >>>= 1) z ^= B;
                z ^= B;
                for (B = (1 << R) - 1;
                     (z & B) != k[d];) d--,
                    R -= C, B = (1 << R) - 1
            }
            return 0 !== s && 1 != A ? q : c
        }
        function b(a) {
            var c;
            d || (d = [], e = [], f = new Int32Array(E + 1), g = [], h = new Int32Array(E), k = new Int32Array(E + 1));
            e.length < a && (e = []);
            for (c = 0; c < a; c++) e[c] = 0;
            for (c = 0; c < E + 1; c++) f[c] = 0;
            for (c = 0; 3 > c; c++) g[c] = 0;
            h.set(f.subarray(0, E), 0);
            k.set(f.subarray(0, E + 1), 0)
        }
        var d, e, f, g, h, k;
        this.inflate_trees_bits = function(c, f, g, h, k) {
            b(19);
            d[0] = 0;
            c = a(c, 0, 19, 19, null, null, g, f, h, d, e);
            if (c == p) k.msg = "oversubscribed dynamic bit lengths tree";
            else if (c == q || 0 === f[0]) k.msg = "incomplete dynamic bit lengths tree",
                c = p;
            return c
        };
        this.inflate_trees_dynamic = function(f, g, h, k, l, m, u, v, s) {
            b(288);
            d[0] = 0;
            m = a(h, 0, f, 257, y, z, m, k, v, d, e);
            if (m != c || 0 === k[0]) return m == p ? s.msg = "oversubscribed literal/length tree" : m != r && (s.msg = "incomplete literal/length tree", m = p), m;
            b(288);
            m = a(h, f, g, 0, B, D, u, l, v, d, e);
            return m != c || 0 === l[0] && 257 < f ? (m == p ? s.msg = "oversubscribed distance tree" : m == q ? (s.msg = "incomplete distance tree", m = p) : m != r && (s.msg = "empty distance tree with lengths", m = p), m) : c
        }
    }
    function d() {
        var a, b = 0,
            d, e = 0,
            f = 0,
            g = 0,
            h = 0,
            m = 0,
            q = 0,
            r = 0,
            s,
            v = 0,
            w, x = 0;
        this.init = function(b, c, e, f, g, h) {
            a = G;
            q = b;
            r = c;
            s = e;
            v = f;
            w = g;
            x = h;
            d = null
        };
        this.proc = function(y, V, A) {
            var z, B, D = 0,
                E = 0,
                R = 0,
                X, W, ba, R = V.next_in_index;
            X = V.avail_in;
            D = y.bitb;
            E = y.bitk;
            W = y.write;
            for (ba = W < y.read ? y.read - W - 1 : y.end - W;;) switch (a) {
                case G:
                    if (258 <= ba && 10 <= X) {
                        y.bitb = D;
                        y.bitk = E;
                        V.avail_in = X;
                        V.total_in += R - V.next_in_index;
                        V.next_in_index = R;
                        y.write = W;
                        a: {
                            A = s;
                            D = v;
                            E = w;
                            R = x;
                            X = y;
                            W = V;
                            var fa = void 0,
                                P = void 0,
                                T = void 0,
                                ca = B = z = ba = void 0,
                                ka = void 0,
                                ha = void 0,
                                qa = void 0,
                                ya = void 0,
                                Z = void 0,
                                U = void 0,
                                Y = fa = fa = void 0,
                                ca = W.next_in_index,
                                ka = W.avail_in;
                            z = X.bitb;
                            B = X.bitk;
                            ha = X.write;
                            qa = ha < X.read ? X.read - ha - 1 : X.end - ha;
                            ya = u[q];
                            Z = u[r];
                            do {
                                for (; 20 > B;) ka--, z |= (W.read_byte(ca++) & 255) << B, B += 8;
                                fa = z & ya;
                                P = A;
                                T = D;
                                Y = 3 * (T + fa);
                                if (0 === (ba = P[Y])) z >>= P[Y + 1], B -= P[Y + 1], X.window[ha++] = P[Y + 2], qa--;
                                else {
                                    do {
                                        z >>= P[Y + 1];
                                        B -= P[Y + 1];
                                        if (0 !== (ba & 16)) {
                                            ba &= 15;
                                            U = P[Y + 2] + (z & u[ba]);
                                            z >>= ba;
                                            for (B -= ba; 15 > B;) ka--, z |= (W.read_byte(ca++) & 255) << B, B += 8;
                                            fa = z & Z;
                                            P = E;
                                            T = R;
                                            Y = 3 * (T + fa);
                                            ba = P[Y];
                                            do if (z >>= P[Y + 1], B -= P[Y + 1], 0 !== (ba & 16)) {
                                                for (ba &= 15; B < ba;) ka--, z |= (W.read_byte(ca++) & 255) << B, B += 8;
                                                fa = P[Y + 2] + (z & u[ba]);
                                                z >>= ba;
                                                B -= ba;
                                                qa -= U;
                                                if (ha >= fa) fa = ha - fa, 0 < ha - fa && 2 > ha - fa ? (X.window[ha++] = X.window[fa++], X.window[ha++] = X.window[fa++]) : (X.window.set(X.window.subarray(fa, fa + 2), ha), ha += 2, fa += 2), U -= 2;
                                                else {
                                                    fa = ha - fa;
                                                    do fa += X.end;
                                                    while (0 > fa);
                                                    ba = X.end - fa;
                                                    if (U > ba) {
                                                        U -= ba;
                                                        if (0 < ha - fa && ba > ha - fa) {
                                                            do X.window[ha++] = X.window[fa++];
                                                            while (0 !== --ba)
                                                        } else X.window.set(X.window.subarray(fa, fa + ba), ha), ha += ba;
                                                        fa = 0
                                                    }
                                                }
                                                if (0 < ha - fa && U > ha - fa) {
                                                    do X.window[ha++] = X.window[fa++];
                                                    while (0 !== --U)
                                                } else X.window.set(X.window.subarray(fa,
                                                    fa + U), ha), ha += U;
                                                break
                                            } else if (0 === (ba & 64)) fa += P[Y + 2], fa += z & u[ba], Y = 3 * (T + fa), ba = P[Y];
                                            else {
                                                W.msg = "invalid distance code";
                                                U = W.avail_in - ka;
                                                U = B >> 3 < U ? B >> 3 : U;
                                                ka += U;
                                                ca -= U;
                                                B -= U << 3;
                                                X.bitb = z;
                                                X.bitk = B;
                                                W.avail_in = ka;
                                                W.total_in += ca - W.next_in_index;
                                                W.next_in_index = ca;
                                                X.write = ha;
                                                A = p;
                                                break a
                                            }
                                            while (1);
                                            break
                                        }
                                        if (0 === (ba & 64)) {
                                            if (fa += P[Y + 2], fa += z & u[ba], Y = 3 * (T + fa), 0 === (ba = P[Y])) {
                                                z >>= P[Y + 1];
                                                B -= P[Y + 1];
                                                X.window[ha++] = P[Y + 2];
                                                qa--;
                                                break
                                            }
                                        } else {
                                            0 !== (ba & 32) ? (U = W.avail_in - ka, U = B >> 3 < U ? B >> 3 : U, ka += U, ca -= U, B -= U << 3, X.bitb = z, X.bitk = B,
                                                W.avail_in = ka, W.total_in += ca - W.next_in_index, W.next_in_index = ca, X.write = ha, A = k) : (W.msg = "invalid literal/length code", U = W.avail_in - ka, U = B >> 3 < U ? B >> 3 : U, ka += U, ca -= U, B -= U << 3, X.bitb = z, X.bitk = B, W.avail_in = ka, W.total_in += ca - W.next_in_index, W.next_in_index = ca, X.write = ha, A = p);
                                            break a
                                        }
                                    } while (1)
                                }
                            } while (258 <= qa && 10 <= ka);
                            U = W.avail_in - ka;
                            U = B >> 3 < U ? B >> 3 : U;
                            ka += U;
                            ca -= U;
                            B -= U << 3;
                            X.bitb = z;
                            X.bitk = B;
                            W.avail_in = ka;
                            W.total_in += ca - W.next_in_index;
                            W.next_in_index = ca;
                            X.write = ha;
                            A = c
                        }
                        R = V.next_in_index;
                        X = V.avail_in;
                        D = y.bitb;
                        E = y.bitk;
                        W = y.write;
                        ba = W < y.read ? y.read - W - 1 : y.end - W;
                        if (A != c) {
                            a = A == k ? K : aa;
                            break
                        }
                    }
                    f = q;
                    d = s;
                    e = v;
                    a = J;
                case J:
                    for (z = f; E < z;) {
                        if (0 !== X) A = c;
                        else return y.bitb = D, y.bitk = E, V.avail_in = X, V.total_in += R - V.next_in_index, V.next_in_index = R, y.write = W, y.inflate_flush(V, A);
                        X--;
                        D |= (V.read_byte(R++) & 255) << E;
                        E += 8
                    }
                    z = 3 * (e + (D & u[z]));
                    D >>>= d[z + 1];
                    E -= d[z + 1];
                    B = d[z];
                    if (0 === B) {
                        g = d[z + 2];
                        a = Q;
                        break
                    }
                    if (0 !== (B & 16)) {
                        h = B & 15;
                        b = d[z + 2];
                        a = C;
                        break
                    }
                    if (0 === (B & 64)) {
                        f = B;
                        e = z / 3 + d[z + 2];
                        break
                    }
                    if (0 !== (B & 32)) {
                        a = K;
                        break
                    }
                    a = aa;
                    V.msg = "invalid literal/length code";
                    A = p;
                    y.bitb = D;
                    y.bitk = E;
                    V.avail_in = X;
                    V.total_in += R - V.next_in_index;
                    V.next_in_index = R;
                    y.write = W;
                    return y.inflate_flush(V, A);
                case C:
                    for (z = h; E < z;) {
                        if (0 !== X) A = c;
                        else return y.bitb = D, y.bitk = E, V.avail_in = X, V.total_in += R - V.next_in_index, V.next_in_index = R, y.write = W, y.inflate_flush(V, A);
                        X--;
                        D |= (V.read_byte(R++) & 255) << E;
                        E += 8
                    }
                    b += D & u[z];
                    D >>= z;
                    E -= z;
                    f = r;
                    d = w;
                    e = x;
                    a = O;
                case O:
                    for (z = f; E < z;) {
                        if (0 !== X) A = c;
                        else return y.bitb = D, y.bitk = E, V.avail_in = X, V.total_in += R - V.next_in_index, V.next_in_index = R, y.write = W, y.inflate_flush(V,
                            A);
                        X--;
                        D |= (V.read_byte(R++) & 255) << E;
                        E += 8
                    }
                    z = 3 * (e + (D & u[z]));
                    D >>= d[z + 1];
                    E -= d[z + 1];
                    B = d[z];
                    if (0 !== (B & 16)) {
                        h = B & 15;
                        m = d[z + 2];
                        a = N;
                        break
                    }
                    if (0 === (B & 64)) {
                        f = B;
                        e = z / 3 + d[z + 2];
                        break
                    }
                    a = aa;
                    V.msg = "invalid distance code";
                    A = p;
                    y.bitb = D;
                    y.bitk = E;
                    V.avail_in = X;
                    V.total_in += R - V.next_in_index;
                    V.next_in_index = R;
                    y.write = W;
                    return y.inflate_flush(V, A);
                case N:
                    for (z = h; E < z;) {
                        if (0 !== X) A = c;
                        else return y.bitb = D, y.bitk = E, V.avail_in = X, V.total_in += R - V.next_in_index, V.next_in_index = R, y.write = W, y.inflate_flush(V, A);
                        X--;
                        D |= (V.read_byte(R++) & 255) << E;
                        E += 8
                    }
                    m += D & u[z];
                    D >>= z;
                    E -= z;
                    a = L;
                case L:
                    for (z = W - m; 0 > z;) z += y.end;
                    for (; 0 !== b;) {
                        if (0 === ba && (W == y.end && 0 !== y.read && (W = 0, ba = W < y.read ? y.read - W - 1 : y.end - W), 0 === ba && (y.write = W, A = y.inflate_flush(V, A), W = y.write, ba = W < y.read ? y.read - W - 1 : y.end - W, W == y.end && 0 !== y.read && (W = 0, ba = W < y.read ? y.read - W - 1 : y.end - W), 0 === ba))) return y.bitb = D, y.bitk = E, V.avail_in = X, V.total_in += R - V.next_in_index, V.next_in_index = R, y.write = W, y.inflate_flush(V, A);
                        y.window[W++] = y.window[z++];
                        ba--;
                        z == y.end && (z = 0);
                        b--
                    }
                    a = G;
                    break;
                case Q:
                    if (0 === ba && (W == y.end && 0 !== y.read && (W = 0, ba = W < y.read ? y.read - W - 1 : y.end - W), 0 === ba && (y.write = W, A = y.inflate_flush(V, A), W = y.write, ba = W < y.read ? y.read - W - 1 : y.end - W, W == y.end && 0 !== y.read && (W = 0, ba = W < y.read ? y.read - W - 1 : y.end - W), 0 === ba))) return y.bitb = D, y.bitk = E, V.avail_in = X, V.total_in += R - V.next_in_index, V.next_in_index = R, y.write = W, y.inflate_flush(V, A);
                    A = c;
                    y.window[W++] = g;
                    ba--;
                    a = G;
                    break;
                case K:
                    7 < E && (E -= 8, X++, R--);
                    y.write = W;
                    A = y.inflate_flush(V, A);
                    W = y.write;
                    if (y.read != y.write) return y.bitb = D, y.bitk = E, V.avail_in = X, V.total_in += R - V.next_in_index, V.next_in_index = R, y.write = W, y.inflate_flush(V, A);
                    a = F;
                case F:
                    return A = k, y.bitb = D, y.bitk = E, V.avail_in = X, V.total_in += R - V.next_in_index, V.next_in_index = R, y.write = W, y.inflate_flush(V, A);
                case aa:
                    return A = p, y.bitb = D, y.bitk = E, V.avail_in = X, V.total_in += R - V.next_in_index, V.next_in_index = R, y.write = W, y.inflate_flush(V, A);
                default:
                    return A = l, y.bitb = D, y.bitk = E, V.avail_in = X, V.total_in += R - V.next_in_index, V.next_in_index = R, y.write = W, y.inflate_flush(V, A)
            }
        };
        this.free = function() {}
    }
    function g(a, b) {
        var e = this,
            f = Z,
            g = 0,
            m = 0,
            r = 0,
            s, w = [0],
            x = [0],
            y = new d,
            V = 0,
            A = new Int32Array(3 * v),
            z = new h;
        e.bitk = 0;
        e.bitb = 0;
        e.window = new Uint8Array(b);
        e.end = b;
        e.read = 0;
        e.write = 0;
        e.reset = function(a, b) {
            b && (b[0] = 0);
            f == na && y.free(a);
            f = Z;
            e.bitk = 0;
            e.bitb = 0;
            e.read = e.write = 0
        };
        e.reset(a, null);
        e.inflate_flush = function(a, b) {
            var d, f, g;
            f = a.next_out_index;
            g = e.read;
            d = (g <= e.write ? e.write : e.end) - g;
            d > a.avail_out && (d = a.avail_out);
            0 !== d && b == q && (b = c);
            a.avail_out -= d;
            a.total_out += d;
            a.next_out.set(e.window.subarray(g, g + d), f);
            f += d;
            g += d;
            g == e.end && (g = 0, e.write == e.end && (e.write = 0), d = e.write - g, d > a.avail_out && (d = a.avail_out), 0 !== d && b == q && (b = c), a.avail_out -= d, a.total_out += d, a.next_out.set(e.window.subarray(g, g + d), f), f += d, g += d);
            a.next_out_index = f;
            e.read = g;
            return b
        };
        e.proc = function(a, b) {
            var d, q, v, B, D, C, E;
            B = a.next_in_index;
            D = a.avail_in;
            q = e.bitb;
            v = e.bitk;
            C = e.write;
            for (E = C < e.read ? e.read - C - 1 : e.end - C;;) switch (f) {
                case Z:
                    for (; 3 > v;) {
                        if (0 !== D) b = c;
                        else return e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a,
                            b);
                        D--;
                        q |= (a.read_byte(B++) & 255) << v;
                        v += 8
                    }
                    d = q & 7;
                    V = d & 1;
                    switch (d >>> 1) {
                        case 0:
                            q >>>= 3;
                            v -= 3;
                            d = v & 7;
                            q >>>= d;
                            v -= d;
                            f = T;
                            break;
                        case 1:
                            d = [];
                            var X = [],
                                W = [
                                    []
                                ],
                                G = [
                                    []
                                ];
                            h.inflate_trees_fixed(d, X, W, G);
                            y.init(d[0], X[0], W[0], 0, G[0], 0);
                            q >>>= 3;
                            v -= 3;
                            f = na;
                            break;
                        case 2:
                            q >>>= 3;
                            v -= 3;
                            f = Y;
                            break;
                        case 3:
                            return q >>>= 3, v -= 3, f = R, a.msg = "invalid block type", b = p, e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b)
                    }
                    break;
                case T:
                    for (; 32 > v;) {
                        if (0 !== D) b = c;
                        else return e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b);
                        D--;
                        q |= (a.read_byte(B++) & 255) << v;
                        v += 8
                    }
                    if ((~q >>> 16 & 65535) != (q & 65535)) return f = R, a.msg = "invalid stored block lengths", b = p, e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b);
                    g = q & 65535;
                    q = v = 0;
                    f = 0 !== g ? P : 0 !== V ? pa : Z;
                    break;
                case P:
                    if (0 === D || 0 === E && (C == e.end && 0 !== e.read && (C = 0, E = C < e.read ? e.read - C - 1 : e.end - C), 0 === E && (e.write = C, b = e.inflate_flush(a, b), C = e.write,
                        E = C < e.read ? e.read - C - 1 : e.end - C, C == e.end && 0 !== e.read && (C = 0, E = C < e.read ? e.read - C - 1 : e.end - C), 0 === E))) return e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b);
                    b = c;
                    d = g;
                    d > D && (d = D);
                    d > E && (d = E);
                    e.window.set(a.read_buf(B, d), C);
                    B += d;
                    D -= d;
                    C += d;
                    E -= d;
                    if (0 !== (g -= d)) break;
                    f = 0 !== V ? pa : Z;
                    break;
                case Y:
                    for (; 14 > v;) {
                        if (0 !== D) b = c;
                        else return e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b);
                        D--;
                        q |= (a.read_byte(B++) & 255) << v;
                        v += 8
                    }
                    m = d = q & 16383;
                    if (29 < (d & 31) || 29 < (d >> 5 & 31)) return f = R, a.msg = "too many length or distance symbols", b = p, e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b);
                    d = 258 + (d & 31) + (d >> 5 & 31);
                    if (!s || s.length < d) s = [];
                    else for (E = 0; E < d; E++) s[E] = 0;
                    q >>>= 14;
                    v -= 14;
                    r = 0;
                    f = da;
                case da:
                    for (; r < 4 + (m >>> 10);) {
                        for (; 3 > v;) {
                            if (0 !== D) b = c;
                            else return e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b);
                            D--;
                            q |= (a.read_byte(B++) & 255) << v;
                            v += 8
                        }
                        s[U[r++]] = q & 7;
                        q >>>= 3;
                        v -= 3
                    }
                    for (; 19 > r;) s[U[r++]] = 0;
                    w[0] = 7;
                    d = z.inflate_trees_bits(s, w, x, A, a);
                    if (d != c) return b = d, b == p && (s = null, f = R), e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b);
                    r = 0;
                    f = ia;
                case ia:
                    for (;;) {
                        d = m;
                        if (!(r < 258 + (d & 31) + (d >> 5 & 31))) break;
                        for (d = w[0]; v < d;) {
                            if (0 !== D) b = c;
                            else return e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b);
                            D--;
                            q |= (a.read_byte(B++) & 255) << v;
                            v += 8
                        }
                        d = A[3 * (x[0] + (q & u[d])) + 1];
                        W = A[3 * (x[0] + (q & u[d])) + 2];
                        if (16 > W) q >>>= d, v -= d, s[r++] = W;
                        else {
                            E = 18 == W ? 7 : W - 14;
                            for (X = 18 == W ? 11 : 3; v < d + E;) {
                                if (0 !== D) b = c;
                                else return e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b);
                                D--;
                                q |= (a.read_byte(B++) & 255) << v;
                                v += 8
                            }
                            q >>>= d;
                            v -= d;
                            X += q & u[E];
                            q >>>= E;
                            v -= E;
                            E = r;
                            d = m;
                            if (E + X > 258 + (d & 31) + (d >> 5 & 31) || 16 == W && 1 > E) return s = null, f = R, a.msg = "invalid bit length repeat", b = p, e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b);
                            W = 16 == W ? s[E - 1] : 0;
                            do s[E++] = W;
                            while (0 !== --X);
                            r = E
                        }
                    }
                    x[0] = -1;
                    E = [];
                    X = [];
                    W = [];
                    G = [];
                    E[0] = 9;
                    X[0] = 6;
                    d = m;
                    d = z.inflate_trees_dynamic(257 + (d & 31), 1 + (d >> 5 & 31), s, E, X, W, G, A, a);
                    if (d != c) return d == p && (s = null, f = R), b = d, e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b);
                    y.init(E[0], X[0], A, W[0], A, G[0]);
                    f = na;
                case na:
                    e.bitb = q;
                    e.bitk = v;
                    a.avail_in = D;
                    a.total_in += B - a.next_in_index;
                    a.next_in_index = B;
                    e.write = C;
                    if ((b = y.proc(e, a, b)) != k) return e.inflate_flush(a,
                        b);
                    b = c;
                    y.free(a);
                    B = a.next_in_index;
                    D = a.avail_in;
                    q = e.bitb;
                    v = e.bitk;
                    C = e.write;
                    E = C < e.read ? e.read - C - 1 : e.end - C;
                    if (0 === V) {
                        f = Z;
                        break
                    }
                    f = pa;
                case pa:
                    e.write = C;
                    b = e.inflate_flush(a, b);
                    C = e.write;
                    if (e.read != e.write) return e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b);
                    f = ea;
                case ea:
                    return b = k, e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b);
                case R:
                    return b = p, e.bitb = q, e.bitk = v, a.avail_in = D,
                        a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b);
                default:
                    return b = l, e.bitb = q, e.bitk = v, a.avail_in = D, a.total_in += B - a.next_in_index, a.next_in_index = B, e.write = C, e.inflate_flush(a, b)
            }
        };
        e.free = function(a) {
            e.reset(a, null);
            A = e.window = null
        };
        e.set_dictionary = function(a, b, c) {
            e.window.set(a.subarray(b, b + c), 0);
            e.read = e.write = c
        };
        e.sync_point = function() {
            return f == T ? 1 : 0
        }
    }
    function b() {
        function a(b) {
            if (!b || !b.istate) return l;
            b.total_in = b.total_out = 0;
            b.msg = null;
            b.istate.mode = fa;
            b.istate.blocks.reset(b,
                null);
            return c
        }
        var b = this;
        b.mode = 0;
        b.method = 0;
        b.was = [0];
        b.need = 0;
        b.marker = 0;
        b.wbits = 0;
        b.inflateEnd = function(a) {
            b.blocks && b.blocks.free(a);
            b.blocks = null;
            return c
        };
        b.inflateInit = function(d, e) {
            d.msg = null;
            b.blocks = null;
            if (8 > e || 15 < e) return b.inflateEnd(d), l;
            b.wbits = e;
            d.istate.blocks = new g(d, 1 << e);
            a(d);
            return c
        };
        b.inflate = function(a, b) {
            var d, e;
            if (!a || !a.istate || !a.next_in) return l;
            b = b == x ? q : c;
            for (d = q;;) switch (a.istate.mode) {
                case ka:
                    if (0 === a.avail_in) return d;
                    d = b;
                    a.avail_in--;
                    a.total_in++;
                    if (((a.istate.method = a.read_byte(a.next_in_index++)) & 15) != ya) {
                        a.istate.mode = Ea;
                        a.msg = "unknown compression method";
                        a.istate.marker = 5;
                        break
                    }
                    if ((a.istate.method >> 4) + 8 > a.istate.wbits) {
                        a.istate.mode = Ea;
                        a.msg = "invalid window size";
                        a.istate.marker = 5;
                        break
                    }
                    a.istate.mode = ha;
                case ha:
                    if (0 === a.avail_in) return d;
                    d = b;
                    a.avail_in--;
                    a.total_in++;
                    e = a.read_byte(a.next_in_index++) & 255;
                    if (0 !== ((a.istate.method << 8) + e) % 31) {
                        a.istate.mode = Ea;
                        a.msg = "incorrect header check";
                        a.istate.marker = 5;
                        break
                    }
                    if (0 === (e & ba)) {
                        a.istate.mode = fa;
                        break
                    }
                    a.istate.mode = ca;
                case ca:
                    if (0 === a.avail_in) return d;
                    d = b;
                    a.avail_in--;
                    a.total_in++;
                    a.istate.need = (a.read_byte(a.next_in_index++) & 255) << 24 & 4278190080;
                    a.istate.mode = sa;
                case sa:
                    if (0 === a.avail_in) return d;
                    d = b;
                    a.avail_in--;
                    a.total_in++;
                    a.istate.need += (a.read_byte(a.next_in_index++) & 255) << 16 & 16711680;
                    a.istate.mode = V;
                case V:
                    if (0 === a.avail_in) return d;
                    d = b;
                    a.avail_in--;
                    a.total_in++;
                    a.istate.need += (a.read_byte(a.next_in_index++) & 255) << 8 & 65280;
                    a.istate.mode = X;
                case X:
                    if (0 === a.avail_in) return d;
                    a.avail_in--;
                    a.total_in++;
                    a.istate.need += a.read_byte(a.next_in_index++) & 255;
                    a.istate.mode = W;
                    return m;
                case W:
                    return a.istate.mode = Ea, a.msg = "need dictionary", a.istate.marker = 0, l;
                case fa:
                    d = a.istate.blocks.proc(a, d);
                    if (d == p) {
                        a.istate.mode = Ea;
                        a.istate.marker = 0;
                        break
                    }
                    d == c && (d = b);
                    if (d != k) return d;
                    a.istate.blocks.reset(a, a.istate.was);
                    a.istate.mode = qa;
                case qa:
                    return k;
                case Ea:
                    return p;
                default:
                    return l
            }
        };
        b.inflateSetDictionary = function(a, b, d) {
            var e = 0,
                f = d;
            if (!a || !a.istate || a.istate.mode != W) return l;
            f >= 1 << a.istate.wbits && (f = (1 << a.istate.wbits) - 1, e = d - f);
            a.istate.blocks.set_dictionary(b, e, f);
            a.istate.mode = fa;
            return c
        };
        b.inflateSync = function(b) {
            var d, e, f;
            if (!b || !b.istate) return l;
            b.istate.mode != Ea && (b.istate.mode = Ea, b.istate.marker = 0);
            if (0 === (d = b.avail_in)) return q;
            e = b.next_in_index;
            for (f = b.istate.marker; 0 !== d && 4 > f;) b.read_byte(e) == Wa[f] ? f++ : f = 0 !== b.read_byte(e) ? 0 : 4 - f, e++, d--;
            b.total_in += e - b.next_in_index;
            b.next_in_index = e;
            b.avail_in = d;
            b.istate.marker = f;
            if (4 != f) return p;
            d = b.total_in;
            e = b.total_out;
            a(b);
            b.total_in = d;
            b.total_out = e;
            b.istate.mode = fa;
            return c
        };
        b.inflateSyncPoint = function(a) {
            return a && a.istate && a.istate.blocks ? a.istate.blocks.sync_point() : l
        }
    }
    function e() {}
    function f() {
        var a = new e,
            b = s,
            d = new Uint8Array(512),
            f = !1;
        a.inflateInit();
        a.next_out = d;
        this.append = function(e, g) {
            var h, l = [],
                m = 0,
                p = 0,
                r = 0,
                u;
            if (0 !== e.length) {
                a.next_in_index = 0;
                a.next_in = e;
                a.avail_in = e.length;
                do {
                    a.next_out_index = 0;
                    a.avail_out = 512;
                    0 !== a.avail_in || f || (a.next_in_index = 0, f = !0);
                    h = a.inflate(b);
                    if (f && h == q) return -1;
                    if (h != c && h != k) throw "inflating: " + a.msg;
                    if ((f || h == k) && a.avail_in == e.length) return -1;
                    a.next_out_index && (512 == a.next_out_index ? l.push(new Uint8Array(d)) : l.push(new Uint8Array(d.subarray(0, a.next_out_index))));
                    r += a.next_out_index;
                    g && (0 < a.next_in_index && a.next_in_index != m) && (g(a.next_in_index), m = a.next_in_index)
                } while (0 < a.avail_in || 0 === a.avail_out);
                u = new Uint8Array(r);
                l.forEach(function(a) {
                    u.set(a, p);
                    p += a.length
                });
                return u
            }
        };
        this.flush = function() {
            a.inflateEnd()
        }
    }
    var c = 0,
        k = 1,
        m = 2,
        l = -2,
        p = -3,
        r = -4,
        q = -5,
        u = [0, 1, 3, 7, 15, 31, 63, 127, 255, 511, 1023, 2047, 4095, 8191, 16383, 32767, 65535],
        v = 1440,
        s = 0,
        x = 4,
        w = [96, 7, 256, 0, 8, 80, 0, 8, 16, 84, 8, 115, 82, 7, 31, 0, 8, 112, 0, 8, 48, 0, 9, 192, 80, 7, 10, 0, 8, 96, 0, 8, 32, 0, 9, 160, 0, 8, 0, 0, 8, 128, 0, 8, 64, 0, 9, 224, 80, 7, 6, 0, 8, 88, 0, 8, 24, 0, 9, 144, 83, 7, 59, 0, 8, 120, 0, 8, 56, 0, 9, 208, 81, 7, 17, 0, 8, 104, 0, 8, 40, 0, 9, 176, 0, 8, 8, 0, 8, 136, 0, 8, 72, 0, 9, 240, 80, 7, 4, 0, 8, 84, 0, 8, 20, 85, 8, 227, 83, 7, 43, 0, 8, 116, 0, 8, 52, 0, 9, 200, 81, 7, 13, 0, 8, 100, 0, 8, 36, 0, 9, 168, 0, 8, 4, 0, 8, 132, 0, 8, 68, 0, 9, 232, 80, 7, 8, 0, 8, 92, 0, 8, 28, 0, 9, 152, 84, 7, 83, 0, 8, 124, 0, 8, 60, 0, 9, 216, 82, 7, 23, 0, 8, 108, 0, 8, 44, 0, 9, 184, 0, 8, 12, 0, 8, 140, 0, 8, 76, 0, 9, 248,
            80, 7, 3, 0, 8, 82, 0, 8, 18, 85, 8, 163, 83, 7, 35, 0, 8, 114, 0, 8, 50, 0, 9, 196, 81, 7, 11, 0, 8, 98, 0, 8, 34, 0, 9, 164, 0, 8, 2, 0, 8, 130, 0, 8, 66, 0, 9, 228, 80, 7, 7, 0, 8, 90, 0, 8, 26, 0, 9, 148, 84, 7, 67, 0, 8, 122, 0, 8, 58, 0, 9, 212, 82, 7, 19, 0, 8, 106, 0, 8, 42, 0, 9, 180, 0, 8, 10, 0, 8, 138, 0, 8, 74, 0, 9, 244, 80, 7, 5, 0, 8, 86, 0, 8, 22, 192, 8, 0, 83, 7, 51, 0, 8, 118, 0, 8, 54, 0, 9, 204, 81, 7, 15, 0, 8, 102, 0, 8, 38, 0, 9, 172, 0, 8, 6, 0, 8, 134, 0, 8, 70, 0, 9, 236, 80, 7, 9, 0, 8, 94, 0, 8, 30, 0, 9, 156, 84, 7, 99, 0, 8, 126, 0, 8, 62, 0, 9, 220, 82, 7, 27, 0, 8, 110, 0, 8, 46, 0, 9, 188, 0, 8, 14, 0, 8, 142, 0, 8, 78, 0, 9, 252, 96, 7, 256, 0, 8, 81, 0, 8,
            17, 85, 8, 131, 82, 7, 31, 0, 8, 113, 0, 8, 49, 0, 9, 194, 80, 7, 10, 0, 8, 97, 0, 8, 33, 0, 9, 162, 0, 8, 1, 0, 8, 129, 0, 8, 65, 0, 9, 226, 80, 7, 6, 0, 8, 89, 0, 8, 25, 0, 9, 146, 83, 7, 59, 0, 8, 121, 0, 8, 57, 0, 9, 210, 81, 7, 17, 0, 8, 105, 0, 8, 41, 0, 9, 178, 0, 8, 9, 0, 8, 137, 0, 8, 73, 0, 9, 242, 80, 7, 4, 0, 8, 85, 0, 8, 21, 80, 8, 258, 83, 7, 43, 0, 8, 117, 0, 8, 53, 0, 9, 202, 81, 7, 13, 0, 8, 101, 0, 8, 37, 0, 9, 170, 0, 8, 5, 0, 8, 133, 0, 8, 69, 0, 9, 234, 80, 7, 8, 0, 8, 93, 0, 8, 29, 0, 9, 154, 84, 7, 83, 0, 8, 125, 0, 8, 61, 0, 9, 218, 82, 7, 23, 0, 8, 109, 0, 8, 45, 0, 9, 186, 0, 8, 13, 0, 8, 141, 0, 8, 77, 0, 9, 250, 80, 7, 3, 0, 8, 83, 0, 8, 19, 85, 8, 195, 83, 7, 35,
            0, 8, 115, 0, 8, 51, 0, 9, 198, 81, 7, 11, 0, 8, 99, 0, 8, 35, 0, 9, 166, 0, 8, 3, 0, 8, 131, 0, 8, 67, 0, 9, 230, 80, 7, 7, 0, 8, 91, 0, 8, 27, 0, 9, 150, 84, 7, 67, 0, 8, 123, 0, 8, 59, 0, 9, 214, 82, 7, 19, 0, 8, 107, 0, 8, 43, 0, 9, 182, 0, 8, 11, 0, 8, 139, 0, 8, 75, 0, 9, 246, 80, 7, 5, 0, 8, 87, 0, 8, 23, 192, 8, 0, 83, 7, 51, 0, 8, 119, 0, 8, 55, 0, 9, 206, 81, 7, 15, 0, 8, 103, 0, 8, 39, 0, 9, 174, 0, 8, 7, 0, 8, 135, 0, 8, 71, 0, 9, 238, 80, 7, 9, 0, 8, 95, 0, 8, 31, 0, 9, 158, 84, 7, 99, 0, 8, 127, 0, 8, 63, 0, 9, 222, 82, 7, 27, 0, 8, 111, 0, 8, 47, 0, 9, 190, 0, 8, 15, 0, 8, 143, 0, 8, 79, 0, 9, 254, 96, 7, 256, 0, 8, 80, 0, 8, 16, 84, 8, 115, 82, 7, 31, 0, 8, 112, 0, 8, 48, 0,
            9, 193, 80, 7, 10, 0, 8, 96, 0, 8, 32, 0, 9, 161, 0, 8, 0, 0, 8, 128, 0, 8, 64, 0, 9, 225, 80, 7, 6, 0, 8, 88, 0, 8, 24, 0, 9, 145, 83, 7, 59, 0, 8, 120, 0, 8, 56, 0, 9, 209, 81, 7, 17, 0, 8, 104, 0, 8, 40, 0, 9, 177, 0, 8, 8, 0, 8, 136, 0, 8, 72, 0, 9, 241, 80, 7, 4, 0, 8, 84, 0, 8, 20, 85, 8, 227, 83, 7, 43, 0, 8, 116, 0, 8, 52, 0, 9, 201, 81, 7, 13, 0, 8, 100, 0, 8, 36, 0, 9, 169, 0, 8, 4, 0, 8, 132, 0, 8, 68, 0, 9, 233, 80, 7, 8, 0, 8, 92, 0, 8, 28, 0, 9, 153, 84, 7, 83, 0, 8, 124, 0, 8, 60, 0, 9, 217, 82, 7, 23, 0, 8, 108, 0, 8, 44, 0, 9, 185, 0, 8, 12, 0, 8, 140, 0, 8, 76, 0, 9, 249, 80, 7, 3, 0, 8, 82, 0, 8, 18, 85, 8, 163, 83, 7, 35, 0, 8, 114, 0, 8, 50, 0, 9, 197, 81, 7, 11, 0, 8, 98,
            0, 8, 34, 0, 9, 165, 0, 8, 2, 0, 8, 130, 0, 8, 66, 0, 9, 229, 80, 7, 7, 0, 8, 90, 0, 8, 26, 0, 9, 149, 84, 7, 67, 0, 8, 122, 0, 8, 58, 0, 9, 213, 82, 7, 19, 0, 8, 106, 0, 8, 42, 0, 9, 181, 0, 8, 10, 0, 8, 138, 0, 8, 74, 0, 9, 245, 80, 7, 5, 0, 8, 86, 0, 8, 22, 192, 8, 0, 83, 7, 51, 0, 8, 118, 0, 8, 54, 0, 9, 205, 81, 7, 15, 0, 8, 102, 0, 8, 38, 0, 9, 173, 0, 8, 6, 0, 8, 134, 0, 8, 70, 0, 9, 237, 80, 7, 9, 0, 8, 94, 0, 8, 30, 0, 9, 157, 84, 7, 99, 0, 8, 126, 0, 8, 62, 0, 9, 221, 82, 7, 27, 0, 8, 110, 0, 8, 46, 0, 9, 189, 0, 8, 14, 0, 8, 142, 0, 8, 78, 0, 9, 253, 96, 7, 256, 0, 8, 81, 0, 8, 17, 85, 8, 131, 82, 7, 31, 0, 8, 113, 0, 8, 49, 0, 9, 195, 80, 7, 10, 0, 8, 97, 0, 8, 33, 0, 9, 163, 0,
            8, 1, 0, 8, 129, 0, 8, 65, 0, 9, 227, 80, 7, 6, 0, 8, 89, 0, 8, 25, 0, 9, 147, 83, 7, 59, 0, 8, 121, 0, 8, 57, 0, 9, 211, 81, 7, 17, 0, 8, 105, 0, 8, 41, 0, 9, 179, 0, 8, 9, 0, 8, 137, 0, 8, 73, 0, 9, 243, 80, 7, 4, 0, 8, 85, 0, 8, 21, 80, 8, 258, 83, 7, 43, 0, 8, 117, 0, 8, 53, 0, 9, 203, 81, 7, 13, 0, 8, 101, 0, 8, 37, 0, 9, 171, 0, 8, 5, 0, 8, 133, 0, 8, 69, 0, 9, 235, 80, 7, 8, 0, 8, 93, 0, 8, 29, 0, 9, 155, 84, 7, 83, 0, 8, 125, 0, 8, 61, 0, 9, 219, 82, 7, 23, 0, 8, 109, 0, 8, 45, 0, 9, 187, 0, 8, 13, 0, 8, 141, 0, 8, 77, 0, 9, 251, 80, 7, 3, 0, 8, 83, 0, 8, 19, 85, 8, 195, 83, 7, 35, 0, 8, 115, 0, 8, 51, 0, 9, 199, 81, 7, 11, 0, 8, 99, 0, 8, 35, 0, 9, 167, 0, 8, 3, 0, 8, 131, 0, 8, 67,
            0, 9, 231, 80, 7, 7, 0, 8, 91, 0, 8, 27, 0, 9, 151, 84, 7, 67, 0, 8, 123, 0, 8, 59, 0, 9, 215, 82, 7, 19, 0, 8, 107, 0, 8, 43, 0, 9, 183, 0, 8, 11, 0, 8, 139, 0, 8, 75, 0, 9, 247, 80, 7, 5, 0, 8, 87, 0, 8, 23, 192, 8, 0, 83, 7, 51, 0, 8, 119, 0, 8, 55, 0, 9, 207, 81, 7, 15, 0, 8, 103, 0, 8, 39, 0, 9, 175, 0, 8, 7, 0, 8, 135, 0, 8, 71, 0, 9, 239, 80, 7, 9, 0, 8, 95, 0, 8, 31, 0, 9, 159, 84, 7, 99, 0, 8, 127, 0, 8, 63, 0, 9, 223, 82, 7, 27, 0, 8, 111, 0, 8, 47, 0, 9, 191, 0, 8, 15, 0, 8, 143, 0, 8, 79, 0, 9, 255],
        A = [80, 5, 1, 87, 5, 257, 83, 5, 17, 91, 5, 4097, 81, 5, 5, 89, 5, 1025, 85, 5, 65, 93, 5, 16385, 80, 5, 3, 88, 5, 513, 84, 5, 33, 92, 5, 8193, 82, 5, 9, 90, 5, 2049, 86, 5, 129,
            192, 5, 24577, 80, 5, 2, 87, 5, 385, 83, 5, 25, 91, 5, 6145, 81, 5, 7, 89, 5, 1537, 85, 5, 97, 93, 5, 24577, 80, 5, 4, 88, 5, 769, 84, 5, 49, 92, 5, 12289, 82, 5, 13, 90, 5, 3073, 86, 5, 193, 192, 5, 24577],
        y = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0],
        z = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 112, 112],
        B = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577],
        D = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12,
            13, 13],
        E = 15;
    h.inflate_trees_fixed = function(a, b, d, e) {
        a[0] = 9;
        b[0] = 5;
        d[0] = w;
        e[0] = A;
        return c
    };
    var G = 0,
        J = 1,
        C = 2,
        O = 3,
        N = 4,
        L = 5,
        Q = 6,
        K = 7,
        F = 8,
        aa = 9,
        U = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],
        Z = 0,
        T = 1,
        P = 2,
        Y = 3,
        da = 4,
        ia = 5,
        na = 6,
        pa = 7,
        ea = 8,
        R = 9,
        ba = 32,
        ya = 8,
        ka = 0,
        ha = 1,
        ca = 2,
        sa = 3,
        V = 4,
        X = 5,
        W = 6,
        fa = 7,
        qa = 12,
        Ea = 13,
        Wa = [0, 0, 255, 255];
    e.prototype = {
        inflateInit: function(a) {
            this.istate = new b;
            a || (a = 15);
            return this.istate.inflateInit(this, a)
        },
        inflate: function(a) {
            return this.istate ? this.istate.inflate(this, a) : l
        },
        inflateEnd: function() {
            if (!this.istate) return l;
            var a = this.istate.inflateEnd(this);
            this.istate = null;
            return a
        },
        inflateSync: function() {
            return this.istate ? this.istate.inflateSync(this) : l
        },
        inflateSetDictionary: function(a, b) {
            return this.istate ? this.istate.inflateSetDictionary(this, a, b) : l
        },
        read_byte: function(a) {
            return this.next_in.subarray(a, a + 1)[0]
        },
        read_buf: function(a, b) {
            return this.next_in.subarray(a, a + b)
        }
    };
    var Ka;
    a.zip ? a.zip.Inflater = f : (Ka = new f, a.addEventListener("message", function(b) {
        b = b.data;
        b.append && a.postMessage({
            onappend: !0,
            data: Ka.append(b.data,

                function(b) {
                    a.postMessage({
                        progress: !0,
                        current: b
                    })
                })
        });
        b.flush && (Ka.flush(), a.postMessage({
            onflush: !0
        }))
    }, !1))
})(this);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.color && (sketch.color = {});
(function(a) {
    a.color.picker = function(f) {
        "undefined" === typeof f && (f = {});
        var c = this,
            g = {
                light: {
                    arrow: "000",
                    interlace: {
                        size: 8,
                        color1: "#fff",
                        color2: "#eee"
                    }
                },
                dark: {
                    arrow: "#fff",
                    interlace: {
                        size: 8,
                        color1: "#fff",
                        color2: "#eee"
                    }
                }
            };
        this.init = function() {
            window.zIndexGlobal || (window.zIndexGlobal = 100);
            this.pixelRatio = 1;
            this.state = "colorPicker";
            this.color = e(f.color || "#000");
            this.container = f.container || document.body;
            this.margin = f.margin || 10;
            this.offset = this.margin / 2;
            this.strokeColor = f.strokeColor || "rgba(255,255,255,0.15)";
            this.recordId = f.recordId;
            this.feature = f.feature || {};
            this.eyeDropper = this.feature.eyeDropper || {};
            this.theme = g[f.theme || "dark"];
            var a = this.theme.arrow,
                c = document.createElement("canvas"),
                m = c.getContext("2d"),
                q = 16 / 3;
            c.width = 16;
            c.height = 16;
            for (var u = 0; 20 > u; u++) m.beginPath(), m.fillStyle = a, m.moveTo(0, 4), m.lineTo(4, 0), m.lineTo(4, 8), m.fill();
            m.translate(-q, - 16);
            this.arrow = c;
            a = document.createElement("canvas");
            a.width = 10;
            a.height = 10;
            c = a.getContext("2d");
            c.lineWidth = 1;
            c.beginPath();
            m = a.width / 2;
            q = a.width / 2;
            c.arc(m,
                q, 4.5, 0, 2 * Math.PI, !0);
            c.strokeStyle = "#000";
            c.stroke();
            c.beginPath();
            c.arc(m, q, 3.5, 0, 2 * Math.PI, !0);
            c.strokeStyle = "#FFF";
            c.stroke();
            this.circle = a;
            m = this.theme.interlace;
            a = m.size;
            c = m.color1;
            q = m.color2;
            m = document.createElement("canvas").getContext("2d");
            m.canvas.width = 2 * a;
            m.canvas.height = 2 * a;
            m.fillStyle = c;
            m.fillRect(0, 0, a, a);
            m.fillStyle = q;
            m.fillRect(a, 0, a, a);
            m.fillStyle = q;
            m.fillRect(0, a, a, a);
            m.fillStyle = c;
            m.fillRect(a, a, a, a);
            a = m.createPattern(m.canvas, "repeat");
            try {
                a.data = m.canvas.toDataURL()
            } catch (v) {}
            this.interlace = a;
            this.onChange = f.onChange || f.onchange;
            this.onClose = f.onClose || f.onclose;
            this.onMouseDown = f.onMouseDown || f.onmousedown;
            this.onMouseUp = f.onMouseUp || f.onmousedown;
            this.modules = f.modules || {
                hue: !0,
                satval: !0,
                alpha: !0
            };
            this.conf = {};
            this.modules.hue && (a = this.modules.hue, this.conf.hue = {
                column: 0,
                enable: !! a.enable || !1,
                width: isFinite(a.width) ? a.width : 30,
                height: isFinite(a.height) ? a.height : 200
            });
            this.modules.satval && (a = this.modules.satval, this.conf.satval = {
                column: 1,
                enable: !! a.enable || !1,
                width: isFinite(a.width) ? a.width : 30,
                height: isFinite(a.height) ? a.height : 200
            });
            this.modules.alpha && (a = this.modules.alpha, this.conf.alpha = {
                column: 2,
                enable: !! a.enable || !1,
                width: isFinite(a.width) ? a.width : 30,
                height: isFinite(a.height) ? a.height : 200
            });
            a = this.element = document.createElement("div");
            a.id = f.id || "ColorPicker";
            f.className && (a.className = f.className);
            f.style && (a.style.cssText = f.style);
            this.container.appendChild(a);
            this.feature.hexInput && d(this);
            this.feature.closeButton && b(this);
            h(this);
            this.update();
            "undefined" !== typeof f.display && (f.display ? this.open() : this.close());
            return this
        };
        this.update = function(a, b, d) {
            a && (c.color = e(a));
            "number" === typeof b && (c.color.A = b);
            b = a = 0;
            var f = -1,
                g;
            for (g in c.conf) {
                var h = c.conf[g];
                !1 !== h.enable && (a += h.width + c.margin + c.offset - 5, f !== h.row && (b += h.height + 2 * c.margin, f = h.row))
            }
            a *= c.pixelRatio;
            b *= c.pixelRatio;
            g = c.canvas;
            f = c.element;
            if (g.width !== a || g.height !== b) g.width = a, g.height = b, g.style.cssText = "left: " + -(c.offset - 1) + "px;", f.style.height = b + "px", f.style.width = a + "px";
            c.render(d || "update", !0);
            return c
        };
        this.render = function(b, d) {
            var e = c.conf.satval,
                f = c.conf.hue,
                g = c.conf.alpha,
                h = c.canvas,
                k = c.ctx;
            k.clearRect(0, 0, h.width, h.height);
            var x = a.color.space({
                H: c.color.H,
                S: 100,
                V: 100
            }, "HSV>RGB>HEX24>W3");
            a.color.space.HEX_RGB("0x" + x);
            var h = c.offset,
                w = c.conf.satval.width,
                A = c.conf.satval.height,
                y = c.ctx;
            y.save();
            y.fillStyle = c.interlace;
            y.fillRect(h, c.offset, c.conf.satval.width, c.conf.satval.height);
            y.globalAlpha = c.color.A / 255;
            y.fillStyle = m(x, "satval");
            y.fillRect(h, h, w, A);
            x = y.createLinearGradient(h, h, w + h, 0);
            x.addColorStop(0,
                m("rgba(255, 255, 255, 1)", "satval"));
            x.addColorStop(1, m("rgba(255, 255, 255, 0)", "satval"));
            y.fillStyle = x;
            y.fillRect(h, h, w, A);
            x = y.createLinearGradient(0, h, 0, A + h);
            x.addColorStop(0, "rgba(0, 0, 0, 0)");
            x.addColorStop(1, "rgba(0, 0, 0, 1)");
            y.fillStyle = x;
            y.fillRect(h, h, w, A);
            y.strokeStyle = m(c.strokeColor, "satval");
            y.strokeRect(h + 0.5, h + 0.5, w - 1, A - 1);
            y.restore();
            h = c.ctx;
            w = c.conf.satval.width + c.margin + c.offset;
            h.fillStyle = c.interlace;
            h.fillRect(w, c.offset, c.conf.hue.width, c.conf.hue.height);
            A = h.createLinearGradient(0,
                0, 0, c.conf.hue.height + c.offset);
            A.addColorStop(0, m("rgba(255, 0, 0, 1)", "hue"));
            A.addColorStop(5 / 6, m("rgba(255, 255, 0, 1)", "hue"));
            A.addColorStop(4 / 6, m("rgba(0, 255, 0, 1)", "hue"));
            A.addColorStop(0.5, m("rgba(0, 255, 255, 1)", "hue"));
            A.addColorStop(2 / 6, m("rgba(0, 0, 255, 1)", "hue"));
            A.addColorStop(1 / 6, m("rgba(255, 0, 255, 1)", "hue"));
            A.addColorStop(1, m("rgba(255, 0, 0, 1)", "hue"));
            h.save();
            h.globalAlpha = c.color.A / 255;
            h.fillStyle = A;
            h.fillRect(w, c.offset, c.conf.hue.width, c.conf.hue.height);
            h.strokeStyle = m(c.strokeColor, "hue");
            h.strokeRect(w + 0.5, c.offset + 0.5, c.conf.hue.width - 1, c.conf.hue.height - 1);
            h.restore();
            g.enable && (h = c.ctx, w = c.conf.satval.width + 2 * c.margin + c.conf.hue.width + c.offset, h.fillStyle = c.interlace, h.fillRect(w, c.offset, c.conf.alpha.width, c.conf.satval.height), A = a.color.space.HSV_RGB({
                H: c.color.H,
                S: c.color.S,
                V: c.color.V
            }), y = h.createLinearGradient(0, 0, 0, c.conf.satval.height), A.A = 255, y.addColorStop(0, m(a.color.space.RGBA_W3(A), "alpha")), A.A = 0, y.addColorStop(1, m(a.color.space.RGBA_W3(A), "alpha")),
                h.fillStyle = y, h.fillRect(w, c.offset, c.conf.alpha.width, c.conf.satval.height), h.strokeStyle = c.strokeColor, h.strokeRect(w + 0.5, c.offset + 0.5, c.conf.alpha.width - 1, c.conf.satval.height - 1));
            h = a.color.space(c.color, "HSVA>RGBA");
            w = a.color.space(h, "RGB>HEX24>W3");
            c.feature.hexInput && (c.hexInput.value = w.substr(1), c.hexBox.style.backgroundColor = a.color.space(h, "RGBA>W3"));
            k.save();
            g.enable && (k.globalAlpha = g.enable ? 1 : 0, g = e.width + 2 * c.margin + f.width + g.width + c.offset, w = (255 - c.color.A) / 255 * e.height - 2, k.drawImage(c.arrow,
                g + 2, Math.round(w) + c.offset - 1));
            f && (k.globalAlpha = f.enable ? 1 : 0, g = e.width + c.margin + c.offset + f.width, w = (360 - c.color.H) / 362 * e.height - 2, w = Math.round(w) + c.offset - 1, k.drawImage(c.arrow, g + 2, w), k.beginPath(), k.moveTo(g - f.width, w + 3.5), k.lineTo(g, w + 3.5), k.strokeStyle = "rgba(255,255,255,0.5)", k.stroke(), k.beginPath(), k.moveTo(g - f.width, w + 4.5), k.lineTo(g, w + 4.5), k.strokeStyle = "rgba(0,0,0,0.5)", k.stroke());
            e && (k.globalAlpha = e.enable ? 1 : 0, g = c.color.S / 100 * e.width, w = (1 - c.color.V / 100) * e.height, g -= c.circle.width / 2, w -= c.circle.height / 2, k.drawImage(c.circle, Math.round(g) + c.offset, Math.round(w) + c.offset));
            k.restore();
            c.onChange && (b && d) && (e = c.toString(h), c.onChange(h, b, e))
        };
        var m = function(b, d) {
            if (!0 === c.conf[d].enable) return b;
            b = "rgba" === b.substr(0, 4) ? a.color.space(b, "W3>RGBA") : a.color.space(b, "W3>HEX32>RGBA");
            var e = Math.round(0.33 * b.R + 0.33 * b.G + 0.33 * b.B);
            return "rgba(" + e + "," + e + "," + e + "," + 0.42 * (b.A / 255) + ")"
        };
        this.toggle = function(a) {
            return "boolean" === typeof a ? a ? c.open() : c.close() : -1 === (" " + c.element.className + " ").indexOf(" opened ") ? c.open() : c.close()
        };
        this.open = function() {
            var a = c.element,
                a = c.recordId || a.id,
                b = document.getElementById(a);
            f.recordWindow && f.recordWindow && f.recordWindow({
                id: a,
                display: "block"
            }); - 1 === (" " + b.className + " ").indexOf(" opened ") && (b.className = (b.className + " opened").trim());
            b.style.display = "block";
            b.style.zIndex = window.zIndexGlobal++;
            window.clearTimeout(b.interval);
            return c
        };
        this.close = function() {
            var a = c.element,
                a = c.recordId || a.id,
                b = document.getElementById(a);
            f.recordWindow && f.recordWindow({
                id: a,
                display: "none"
            });
            b.className = (" " + b.className + " ").replace(" opened ", " ").trim();
            b.interval = setTimeout(function() {
                b.style.display = "none"
            }, 250);
            return c
        };
        this.destory = function() {
            document.body.removeChild(c.element);
            for (var a in c) delete c[a];
            return c
        };
        this.toString = function(b) {
            b = b || c.color;
            isFinite(b.H) && (b = a.color.space(b, "HSVA>RGBA"));
            return 255 === b.A ? a.color.space(b, "RGB>HEX24>W3") : a.color.space(b, "RGBA>W3")
        };
        return this.init()
    };
    var h = function(a) {
        var b = a.element,
            d = document.createElement("canvas"),
            e = d.getContext("2d");
        a.canvas = d;
        a.ctx = e;
        b.appendChild(d);
        eventjs.add(d, "drag", function(e, g) {
            eventjs.stop(e);
            var h = "down" === g.state,
                m = "up" === g.state;
            if (h && ("function" === typeof a.mouseLayerExit && a.mouseLayerExit(), a.onMouseDown)) a.onMouseDown(e);
            if (m && a.onMouseUp) a.onMouseUp(e);
            var u = a.margin / 2,
                v = g.x - u,
                u = g.y - u,
                s = 0 > v ? 0 : v > d.width ? d.width : v,
                x = 0 > u ? 0 : u > d.height ? d.height : u;
            if ("hexInput" === g.target.className) h && eventjs.stop(e), b.style.cursor = "text";
            else {
                if (s !== v || x !== u) a.feature.drag ? (b.style.cursor = "move", b.title = "Move", h && eventjs.proxy.drag({
                    position: "move",
                    event: e,
                    target: b,
                    animationFrame: !0,
                    listener: function(d, e) {
                        var g = window.innerWidth,
                            h = window.innerHeight,
                            k = e.target.offsetWidth,
                            l = e.target.offsetHeight;
                        e.x + k > g && (e.x = g - k);
                        e.y + l > h && (e.y = h - l);
                        0 > e.x && (e.x = 0);
                        0 > e.y && (e.y = 0);
                        b.style.left = e.x + "px";
                        b.style.top = e.y + "px";
                        "down" === e.state ? b.style.zIndex = window.zIndexGlobal++ : "up" === e.state && conf.recordWindow && conf.recordWindow({
                            id: a.recordId || b.id,
                            left: e.x / g,
                            top: e.y / h,
                            display: "block"
                        });
                        eventjs.prevent(d)
                    }
                })) : b.style.cursor = "default";
                else if (s <= a.conf.satval.width) {
                    if (!1 === a.conf.satval.enable) return;
                    h && eventjs.stop(e);
                    b.style.cursor = "default";
                    b.title = "Saturation + Value";
                    h && eventjs.proxy.drag({
                        position: "relative",
                        event: e,
                        target: d,
                        animationFrame: !0,
                        listener: function(b, c) {
                            var d = 0 > c.y - a.offset ? 0 : c.y - a.offset > a.conf.satval.height ? a.conf.satval.height : c.y - a.offset;
                            a.color.S = 100 * ((0 > c.x - a.offset ? 0 : c.x - a.offset > a.conf.satval.width ? a.conf.satval.width : c.x - a.offset) / a.conf.satval.width);
                            a.color.V = 100 - 100 * (d / a.conf.satval.height);
                            a.render(c.state, !0);
                            eventjs.prevent(b)
                        }
                    })
                } else if (s > a.conf.satval.width + a.margin && s <= a.conf.satval.width + a.margin + a.offset + a.conf.hue.width) {
                    if (!1 === a.conf.hue.enable) return;
                    h && eventjs.stop(e);
                    b.style.cursor = "crosshair";
                    b.title = "Hue";
                    h && eventjs.proxy.drag({
                        position: "relative",
                        event: e,
                        target: d,
                        animationFrame: !0,
                        listener: function(b, c) {
                            a.color.H = 360 - 360 * Math.min(1, (0 > c.y - a.offset ? 0 : c.y - a.offset > a.conf.satval.height ? a.conf.satval.height : c.y - a.offset) / a.conf.satval.height);
                            a.render(c.state, !0);
                            eventjs.prevent(b)
                        }
                    })
                } else if (a.conf.alpha && s > a.conf.satval.width + a.conf.alpha.width + 2 * a.margin && s <= a.conf.satval.width + 2 * a.margin + a.offset + 2 * a.conf.alpha.width) {
                    if (!1 === a.conf.alpha.enable) return;
                    h && eventjs.stop(e);
                    b.style.cursor = "crosshair";
                    b.title = "Alpha";
                    h && eventjs.proxy.drag({
                        position: "relative",
                        event: e,
                        target: d,
                        animationFrame: !0,
                        listener: function(b, c) {
                            a.color.A = 255 * (1 - Math.min(1, (0 > c.y - a.offset ? 0 : c.y - a.offset > a.conf.satval.height ? a.conf.satval.height : c.y - a.offset) / a.conf.satval.height));
                            a.render(c.state, !0);
                            eventjs.prevent(b)
                        }
                    })
                } else b.style.cursor = "default";
                m && (b.style.cursor = "default");
                return !1
            }
        })
    }, d = function(b) {
        var c = b.hexBoxContainer = document.createElement("div");
        b.interlace.data && (c.style.backgroundImage = "url(" + b.interlace.data + ")");
        c.className = "hexBox";
        c.title = "Eyedropper";
        var d = b.element,
            e = b.hexBox = document.createElement("div");
        c.appendChild(e);
        d.appendChild(c);
        b.eyeDropper.target && g(b);
        var h = /[^a-f0-9]/gi,
            p = b.hexInput = document.createElement("input");
        p.title = "HEX Code";
        p.className = "hexInput";
        p.size = 6;
        p.type = "text";
        eventjs.add(p, "mousedown", eventjs.stop);
        eventjs.add(p, "keydown keyup change", function(c) {
            var d = c.keyCode;
            eventjs.proxy.metaTracker(c);
            setTimeout(function() {
                var e = p.value.replace(h, "").substr(0, 6),
                    e = a.color.space(e, "W3>HEX24");
                if ("NaN" !== String(e)) {
                    if ("keydown" === c.type || "keyup" === c.type) if (40 === d) e = Math.max(0, e - (c.shiftKey ? 10 : 1)), p.value = a.color.space(e, "HEX24>W3").substr(1);
                    else if (38 === d) e = Math.min(16777215, e + (c.shiftKey ? 10 : 1)), p.value = a.color.space(e, "HEX24>W3").substr(1);
                    else if (!eventjs.metaKey || 86 !== d) return;
                    16777215 < e && (e = 16777215);
                    0 > e && (e = 0);
                    b.update(a.color.space(e, "HEX24>RGB"), "RGB", "up")
                }
            }, 50);
            27 === d && this.blur()
        });
        d.appendChild(p)
    }, g = function(b) {
        var c = b.element,
            d = b.modules,
            e = document.createElement("span");
        e.className = "icon-eyedropper";
        b.feature.closeButton && (e.style.marginRight = "16px");
        c.appendChild(e);
        var g = b.eyeDropper.target,
            h = null,
            r;
        b.mouseLayerUpdate = function(c) {
            eventjs.prevent(c);
            c = eventjs.proxy.getCoord(c);
            var e = eventjs.proxy.getBoundingBox(g);
            c.x += e.scrollLeft - e.x1;
            c.y += e.scrollTop - e.y1;
            c = b.eyeDropper.canvas.getContext("2d").getImageData(c.x,
                c.y, 1, 1);
            0 !== c.data[3] && (h = a.color.space(c.data, "RGBA>HSVA"), d.alpha || (h.A = 255), b.update(h, "HSVA"))
        };
        b.mouseLayerExit = function() {
            h && b.update(h, "HSVA", "up");
            b.hexBoxContainer.className = "hexBox";
            g.style.cursor = "default";
            g.title = r;
            eventjs.remove(document.body, "mouseup", b.mouseLayerExit);
            eventjs.remove(g, "mousemove", b.mouseLayerUpdate);
            setTimeout(function() {
                b.state = "colorPicker"
            }, 50)
        };
        eventjs.add({
            target: e,
            mouseover: function(b) {
                a.setTooltip("Eye Dropper");
                eventjs.stop(b)
            },
            mouseout: function(b) {
                a.setTooltip("");
                eventjs.stop(b)
            },
            click: function(a) {
                if ("eyeDropper" === b.state) return b.mouseLayerExit();
                h = null;
                b.state = "eyeDropper";
                r = g.title;
                b.hexBoxContainer.className = "hexBox active";
                g.style.cursor = "crosshair";
                g.title = "Pick color";
                setTimeout(function() {
                    eventjs.add(document.body, "mouseup", b.mouseLayerExit);
                    eventjs.add(g, "mousemove", b.mouseLayerUpdate)
                }, 0)
            }
        })
    }, b = function(b) {
        var c = b.element,
            d = document.createElement("div");
        d.title = "Close";
        d.className = "hexClose icon-close";
        eventjs.add({
            target: d,
            mousedown: eventjs.cancel,
            mouseover: function(b) {
                a.setTooltip("Close Color Picker");
                eventjs.stop(b)
            },
            mouseout: function(b) {
                a.setTooltip("");
                eventjs.stop(b)
            },
            click: b.onClose || function(a) {
                eventjs.cancel(a);
                b.close()
            }
        });
        c.appendChild(d)
    }, e = function(b) {
        "string" === typeof b ? b = "hsla" === b.substr(0, 4) ? a.color.space(b, "W3>HSLA>RGBA>HSVA") : "rgba" === b.substr(0, 4) ? a.color.space(b, "W3>RGBA>HSVA") : "rgb" === b.substr(0, 3) ? a.color.space(b, "W3>RGB>HSV") : a.color.webcolors[b] ? a.color.space(a.color.webcolors[b], "W3>HEX24>RGB>HSV") : a.color.space(b, "W3>HEX24>RGB>HSV") : "undefined" !== typeof b.R && (b = a.color.space(b, "RGB>HSV"));
        "undefined" === typeof b.A && (b.A = 255);
        return b
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function(a) {
    a.Palette = function() {
        var h = this,
            d = "fill",
            g = "color";
        this.visible = !1;
        this.fill = this.stroke = "#000";
        this.init = function(a) {
            a = a || {};
            "function" === typeof a && (a = {
                onload: a
            });
            var b = a.onload;
            m(a);
            h.update(null, !0, !0, b);
            h.setIndicator()
        };
        this.setPane = function(b, d) {
            !1 === a.feature.palette[b] && (a.feature.palette[b] = !0, a.feature.palette.grid = !0, a.feature.palette.header = "", c(), this.init());
            this.update(b, !1, !1, d)
        };
        this.setPaintMethod = function(b) {
            d = b;
            this.update(a.style[b].type);
            this.setIndicator()
        };
        this.toggle = function(b) {
            var c = a.$("#sk-palette");
            sk.windows.isOpen(c) ? this.hide() : this.show(b)
        };
        this.show = function(b) {
            this.visible = !0;
            b = b || {};
            var c = b.aside;
            (b = b.style) && a.style.apply({
                paintMethod: d,
                dna: b,
                useColorPicker: !0
            });
            if (c) {
                var e = b = 0;
                if (c.target) {
                    var f = sk.util.getMetrics(c.target);
                    b += f.x1;
                    e += f.y1
                }
                if (c.position) {
                    var g = a.$("#sk-palette"),
                        h = g.style.display;
                    g.style.display = "block";
                    var f = sk.util.getMetrics(g),
                        k = a.util.array2object(c.position.split(" "));
                    k.bottom && (e -= f.height);
                    k.right && (b -= f.width);
                    g.style.display = h
                }
                c.top && (e += c.top);
                c.bottom && (e -= c.bottom);
                c.left && (b += c.left);
                c.right && (b -= c.right);
                g.style.left = b + "px";
                g.style.top = e + "px";
                sk.windows.record({
                    id: "sk-palette",
                    x: b,
                    y: e,
                    left: b / window.innerWidth,
                    top: e / window.innerHeight,
                    display: "block"
                });
                a.windows.open("sk-palette", !1)
            } else a.windows.open("sk-palette")
        };
        this.hide = function() {
            this.visible = !1;
            a.windows.close("sk-palette")
        };
        this.deselect = function() {
            dom.setClass("#sk-palette .sk-palette-scroller .selected", "selected", !1)
        };
        this.update = function(c,
                               m, r, q) {
            var u = a.style[d];
            c = c || u.type;
            if (g !== c || m) {
                g = c;
                u.type = c;
                switch (a.style[d].type) {
                    case "color":
                        b.style.display = "block";
                        break;
                    case "gradient":
                    case "pattern":
                        b.style.display = "none"
                }
                if (a.feature.palette.grid) {
                    h.queue && h.queue.cancel();
                    (m = a.$("." + c + "-indicator")) && dom.setClass(m, "selected", !0, "canvas");
                    c = u.type;
                    var v = "color" === c,
                        s = "gradient" === c,
                        x = "pattern" === c,
                        w = c + a.style.hashDNA(u[c]);
                    f.style.display = "none";
                    dom.setClass(f, "color", v);
                    dom.setClass(f, "gradient", s);
                    dom.setClass(f, "pattern", x);
                    dom.setClass(e, "color", v);
                    dom.setClass(e, "gradient", s);
                    dom.setClass(e, "pattern", x);
                    var A = function(b, d, e, g) {
                        a.style[c + "Official"][d] && (f.style.display = "block", dom.setClass(b, "official", !0));
                        g === e && dom.setClass(b, "selected", !0)
                    };
                    r && (e.innerHTML = "");
                    r && (f.innerHTML = "");
                    var y = a.style[c];
                    if (y) {
                        var z = a.perf();
                        h.queue = new a.util.Queue({
                            items: y,
                            flatten: !0,
                            oncancel: q,
                            oncomplete: function() {
                                a.feature.debug && console.log("build palette", c, z());
                                h.setIndicator();
                                q && q()
                            },
                            next: function(b, g, h) {
                                var m = y[h];
                                b = a.style.hashDNA(m);
                                g = c + b;
                                var q = a.style[c + "Official"][b] ? f : e,
                                    p = q.querySelector("#" + g);
                                if (p && !r) return A(p, b, w, g), this.next();
                                var u = document.createElement("canvas");
                                u.getContext("2d");
                                p = document.createElement("li");
                                p.id = g;
                                p.className = c;
                                p.setAttribute("data-type", c);
                                p.setAttribute("data-dna", "" + m);
                                p.appendChild(u);
                                q.appendChild(p);
                                v ? a.style.renderSwatch(d, u, "color", m) : s ? a.style.renderSwatch(d, u, "gradient", m) : x && a.style.renderSwatch(d, u, "pattern", m);
                                A(p, b, w, g);
                                b = {
                                    target: u,
                                    mousedown: eventjs.stop,
                                    click: k
                                };
                                "color" === c && (b.mouseover = function(b) {
                                    eventjs.stop(b);
                                    a.setTooltip(m.toUpperCase())
                                }, b.mouseout = function(b) {
                                    eventjs.stop(b);
                                    a.setTooltip("")
                                });
                                eventjs.add(b);
                                a.feature.palette.gridInstantLoad || 0 !== h % 10 ? this.next() : setTimeout(this.next, 0)
                            }
                        })
                    }
                }
            }
        };
        this.rebuild = function(a) {
            a = sketch.$$("#sk-palette .sk-palette-scroller " + (a ? "." + a : "li"));
            dom.removeNodes(a);
            h.update(null, !0)
        };
        this.updateAndRecord = function(b) {
            h.setPane(b);
            a.style.apply({
                paintMethod: d,
                paintType: g,
                dna: a.style[d][g],
                useRender: !0,
                useRecord: !0
            })
        };
        this.setIndicator = function() {
            var b = a.style[d] || a.tool.device[d];
            if (a.actions && 1 === a.selection.length) {
                var c = a.scene.getOneSelected();
                c && "clipart" !== c.type && (c = c && c[d]) && (b = c)
            }
            for (var c = b.type, e = a.$$(".color-indicator"), f = 0; f < e.length; f++) a.style.renderSwatch(d, e[f], "color", b.color);
            e = a.$$(".gradient-indicator");
            for (f = 0; f < e.length; f++) a.style.renderSwatch(d, e[f], "gradient", b.gradient);
            e = a.$$(".pattern-indicator");
            for (f = 0; f < e.length; f++) a.style.renderSwatch(d, e[f], "pattern", b.pattern);
            e = a.$$(".style-indicator");
            for (f = 0; f < e.length; f++) e[f].style.cssText = "color" === b.type ? "background: " + b.color : a.style.getGradientCSS(b.gradient, "left top");
            sk.windows.isOpen("sk-palette") && (b = a.style.hashDNA(b[c]), (b = document.querySelector("#" + c + b)) && dom.setClass({
                target: b,
                list: b.parentNode.querySelectorAll("li"),
                className: "selected",
                on: !0
            }))
        };
        var b, e, f, c = function() {
            var c = a.$("#sk-palette");
            if (!c) {
                var d = a.$(".sketchapi"),
                    c = dom.create('<div class="sk-window" id="sk-palette"></div>');
                d.appendChild(c)
            }
            dom.removeChildNodes(c);
            d = document.createElement("div");
            d.className = "sk-header";
            var g = a.feature.palette.gradient && "Gradients",
                k = a.feature.palette.pattern && "Patterns",
                m = a.feature.palette.color && "Colors";
            if (!1 !== a.feature.palette.header) {
                var v = a.feature.palette.header,
                    s = document.createElement("div");
                s.className = "sk-header-content";
                s.innerHTML = g && k || k && m || m && g ? v || "" : v || g || m || k;
                d.appendChild(s);
                g = document.createElement("span");
                g.className = "sk-close icon-close";
                eventjs.add({
                    target: g,
                    mousedown: eventjs.cancel,
                    click: function(a, b) {
                        eventjs.cancel(a);
                        setTimeout(function() {
                                sk.windows.close(b.target.parentNode.parentNode.id)
                            },
                            1)
                    }
                });
                d.appendChild(g);
                c.appendChild(d)
            }
            g = document.createElement("div");
            g.className = "sk-palette-content";
            a.feature.palette.grid && (f = document.createElement("div"), f.className = "scroller scroller-official sk-palette-scroller", eventjs.proxy.wheelPreventElasticBounce(f), g.appendChild(f), e = document.createElement("div"), e.className = "scroller sk-palette-scroller", eventjs.proxy.wheelPreventElasticBounce(e), g.appendChild(e));
            b = document.createElement("div");
            b.className = "editor";
            g.appendChild(b);
            c.appendChild(g);
            if (a.feature.palette.gradient) {
                var x = document.createElement("ol");
                x.className = "tabs";
                d.appendChild(x);
                a.gen.interlace({
                    size: 12,
                    innerColor: "#fff",
                    outerColor: "#d9d9d9",
                    callback: function(b) {
                        var c = b.css;
                        b = function(b) {
                            var d = document.createElement("canvas");
                            d.innerHTML = "";
                            d.className = b + "-indicator";
                            d.style.background = c;
                            eventjs.add({
                                target: d,
                                mousedown: eventjs.prevent,
                                mouseover: function(c) {
                                    eventjs.stop(c);
                                    a.setTooltip(STRING.ucwords(b))
                                },
                                mouseout: function(b) {
                                    eventjs.stop(b);
                                    a.setTooltip("")
                                },
                                click: function() {
                                    h.updateAndRecord(b)
                                }
                            });
                            x.appendChild(d)
                        };
                        a.feature.palette.color && b("color");
                        a.feature.palette.gradient && b("gradient");
                        a.feature.palette.pattern && b("pattern")
                    }
                });
                a.feature.palette.blend && (c = document.createElement("div"), c.id = "light-mode", c.style.cssText = "position: relative; top: -6px; left: 5px;", d.appendChild(c), a.ui.blendSelectMenu = a.ui.buildSelect({
                    label: "Blend Mode",
                    element: c,
                    selected: "test",
                    style: "width: 110px;top:5px;",
                    data: {
                        Normal: "normal",
                        Multiply: "multiply",
                        Screen: "screen",
                        Overlay: "overlay",
                        Darken: "darken",
                        Lighten: "lighten",
                        "Color-dodge": "color-dodge",
                        "Color-burn": "color-burn",
                        "Hard-light": "hard-light",
                        "Soft-light": "soft-light",
                        Difference: "difference",
                        Exclusion: "exclusion",
                        Hue: "hue",
                        Saturation: "saturation",
                        Color: "color",
                        Luminosity: "luminosity"
                    },
                    onchange: function() {
                        var b = a.ui.blendSelectMenu.getValue();
                        a.style.setBlendMode(b);
                        a.selection.length && a.toolkit.setActionData({
                            tool: "*",
                            param: "composite",
                            data: b,
                            selection: a.selection.items
                        })
                    }
                }))
            }
        }, k = function(b, c) {
            eventjs.cancel(b);
            var g = c.target.parentNode,
                k = g.getAttribute("data-type"),
                m = g.getAttribute("data-dna");
            h[d] = m;
            var v = "." + k + ".selected";
            dom.setClass(e.querySelector(v), "selected", !1);
            dom.setClass(f.querySelector(v), "selected", !1);
            dom.setClass(g, "selected", !0);
            "pattern" === k ? a.style.loadPattern(m, function(b) {
                a.style.apply({
                    paintMethod: d,
                    paintType: k,
                    dna: m,
                    useRender: !0,
                    useRecord: !0,
                    useColorPicker: !0
                })
            }) : "color" === k && a.colorPicker.update ? a.colorPicker.update(m, null, "up") : a.style.apply({
                paintMethod: d,
                paintType: k,
                dna: m,
                useRender: !0,
                useRecord: !0,
                useColorPicker: !0
            });
            a.feature.debug && console.log("dna", m)
        }, m = function(b) {
            if (a.feature.palette.colorPicker) {
                if (a.util.exists("sk.color.picker")) {
                    var c = b.onchange || function(b, c, e) {
                        h.deselect();
                        a.style.apply({
                            paintMethod: d,
                            paintType: "color",
                            dna: e,
                            useRender: !0,
                            useRecord: c,
                            selection: a.selection.items
                        })
                    };
                    b.color && (a.style[d].color = b.color);
                    var e = a.$("#sk-palette .editor");
                    a.colorPicker = new a.color.picker({
                        recordId: "sk-palette",
                        recordWindow: sk.windows.record,
                        color: b.color,
                        onchange: c,
                        onclose: b.onclose,
                        theme: b.theme,
                        container: e,
                        feature: {
                            closeButton: a.feature.palette.closeButton || !! b.onclose,
                            hexInput: a.feature.palette.hexInput,
                            eyeDropper: a.feature.palette.eyeDropper ? {
                                canvas: a.canvas2d.layers.layer0,
                                target: a.canvas2d.layers.active
                            } : null
                        },
                        modules: {
                            hue: {
                                column: 2,
                                enable: !0,
                                width: 30,
                                height: 196
                            },
                            satval: {
                                column: 1,
                                enable: !0,
                                width: 196,
                                height: 196
                            },
                            alpha: {
                                column: 3,
                                enable: !1,
                                width: 30,
                                height: 196
                            }
                        }
                    });
                    b = document.createElement("div");
                    b.className = "clear";
                    a.colorPicker.element.appendChild(b);
                    return a.colorPicker
                }
                a.feature.debug && console.log("missing sketch.color.picker module")
            }
        };
        c();
        return this
    };
    return sketch
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.gen && (sketch.gen = {});
(function(a) {
    a.gen.preview = function(h, d) {
        a = a.gen.__self || a;
        h = h || {};
        var g = h.pixelRatio || 1,
            b = h.type || "stamp",
            e = (h.width || 52) * g,
            f = (h.height || 52) * g,
            c = h.oncomplete ? [] : {}, k = h.background || "none";
        d = h.src ? [{
            filepath: h.src
        }] : h.resource ? [{
            resource: h.resource
        }] : d || a.lib[b].paths;
        var m = h.canvas || document.createElement("canvas"),
            l = m.getContext("2d");
        a.feature.debugCache && document.body.appendChild(m);
        var p = function(b, d, g) {
            a.util.thumbnailer({
                src: b,
                crop: "edge",
                width: e,
                height: f,
                background: k,
                croparea: !1,
                onload: function(a) {
                    g ? g.push({
                        filename: d,
                        canvas: a
                    }) : c.push && c.push(a);
                    r.next()
                }
            })
        }, r = new a.util.Queue({
            items: d,
            flatten: !0,
            onprogress: function(a) {
                1 < d.length && console.log("load", a)
            },
            oncomplete: function() {
                if (h.oncomplete) if (h.src || h.resource) h.oncomplete(c[0]);
                else h.oncomplete(c);
                else a.io.zip && a.io.zip.encode(c, function(c) {
                    a.download.blob(c, b + "-preview.zip")
                }, function(a) {
                    console.log("zip", a)
                })
            },
            next: function(d) {
                r = this;
                if (d.filepath && "#" === d.filepath[0]) return this.next();
                var g = "",
                    k = [];
                if (h.src || h.resource) c = k;
                else {
                    var s = d.filepath.replace("", "").substr(1).split("/");
                    if (1 < s.length) {
                        for (var x = [c], g = s.pop(); s.length;) {
                            var w = s.shift();
                            if (w) {
                                var A = x[x.length - 1];
                                A[w] || (A[w] = []);
                                x.push(A[w])
                            }
                        }
                        k = A[w]
                    } else c.length || (c = []), g = s[0], k = c
                }
                g = g.replace("svg", "png");
                s = function(a) {
                    m.width = e;
                    m.height = f;
                    a.render && (a.render({
                        ctx: l,
                        placement: "crop",
                        width: e,
                        height: f
                    }), p(m, g, k))
                };
                switch (b) {
                    case "clipart":
                        d.resource ? s(d.resource) : new a.vector.SVG({
                            ctx: l,
                            src: d.filepath,
                            useCache: isFinite(h.useCache) ? h.useCache : !0,
                            onerror: function(a) {
                                console.log(a, "error loading svg", d);
                                r.next()
                            },
                            onload: s
                        });
                        break;
                    case "stamp":
                        p(d.filepath, g, k)
                }
            }
        })
    };
    a.gen.preview.stamp = function(h, d, g) {
        h = h || {};
        h.type = "stamp";
        a.gen.preview(h, d, g)
    };
    a.gen.preview.clipart = function(h, d, g) {
        h = h || {};
        h.type = "clipart";
        a.gen.preview(h, d, g)
    };
    a.gen.preview.text = function(h) {
        var d = a.canvas2d.layers.cache,
            g = d.getContext("2d");
        d.style.cssText = "";
        var b = [],
            e = [],
            f = [];
        if (h) {
            for (var c in a.lib.text.byName) break;
            e.push(a.lib.text.byName[c]);
            f.push(c)
        } else for (c in a.lib.text.byName) f.push(c), e.push(a.lib.text.byName[c]);
        var k = function(c) {
            d.width = 600;
            d.height = 100;
            d.style.width = "300px";
            d.style.height = "50px";
            g.textAlign = "center";
            g.font = "60px '" + c.name + "', Arial, Helvetica";
            g.textBaseline = "middle";
            var e = g.measureText(c.name).width,
                f = a.vector.text.measureTextHeight(c.name, g.font),
                e = Math.min(d.width / (e + 40), d.height / (f + 10));
            1 > e && (g.font = 60 * e + "px '" + c.name + "', Arial, Helvetica");
            g.fillStyle = "#fff";
            g.fillText(c.name, d.width / 2, d.height / 2);
            d.toBlob(function(a) {
                b.push({
                    filename: c.name + ".png",
                    blob: a
                });
                m.next()
            })
        }, m = new sketch.util.Queue({
            items: e,
            flatten: !0,
            oncomplete: function() {
                a.io.zip.encode(b, function(b) {
                    a.download.blob(b, "font-preview.zip")
                })
            },
            onprogress: function(a) {
                console.log(a)
            },
            next: function(b) {
                m = this;
                a.vector.text.detectFont(b.name) ? k(b) : a.vector.text.attach({
                    family: b.name,
                    filename: b.filename,
                    timeout: 1E3,
                    callback: function(a) {
                        a && console.log("missing: " + b.name);
                        k(b)
                    }
                })
            }
        })
    }
})(sketch);
"undefined" !== typeof module && module.exports && (module.exports = sketch.gen);
if ("undefined" === typeof widget) var widget = {};
widget.Growl = function(a) {
    a = a || this;
    a.close = function() {
        h.style.opacity = 0;
        h.style.bottom = "-" + h.firstChild.offsetHeight + "px";
        setTimeout(function() {
            h.style.display = "none"
        }, 300)
    };
    a.message = function(d) {
        if (!a.timeout) {
            document.body.appendChild(h);
            h.style.display = "block";
            h.firstChild.innerHTML = d;
            var g = window.getComputedStyle(h),
                b = g.getPropertyValue("font").replace("/0px", "");
            d = h.offsetWidth / sketch.vector.text.measureTextWidth(d, b);
            1 > d && (b = g.getPropertyValue("font-size"), g = b.replace(/[0-9.-]*/g, ""), b = parseInt(b),
                g && "px" !== g && (b *= ConvertMetrics[g + ">px"]), d *= a.fontsize || b, a.fontsize || (a.fontsize = b), h.style.fontSize = d + "px");
            a.timeout = setTimeout(function() {
                h.style.opacity = 1;
                h.style.bottom = 0;
                a.timeout = setTimeout(function() {
                    a.close();
                    delete a.timeout
                }, 2E3)
            }, 1)
        }
    };
    var h = document.createElement("div");
    h.onclick = a.close;
    h.id = "growl";
    h.appendChild(document.createElement("div"));
    return a
};
"undefined" === typeof widget && (widget = {});
(function() {
    var a, h = {
        id: "loader",
        bars: 12,
        radius: 0,
        lineWidth: 14,
        lineHeight: 40,
        timeout: 0,
        display: !0
    };
    widget.Loader = function(b) {
        "undefined" === typeof a && (a = !! document.createElement("canvas").getContext);
        if (a) {
            var e = this;
            "string" === typeof b && (b = {
                message: b
            });
            "boolean" === typeof b && (b = {
                display: !1
            });
            "undefined" === typeof b && (b = {});
            b.container = b.container || document.body;
            if (b.container) {
                for (var f in h) "undefined" === typeof b[f] && (b[f] = h[f]);
                var c = document.getElementById(b.id);
                if (c) this.span = c.parentNode.getElementsByTagName("span")[0];
                else {
                    var k = document.createElement("div");
                    f = document.createElement("span");
                    f.className = "message";
                    k.className = h.id;
                    k.style.cssText = d("opacity", 400);
                    this.span = f;
                    this.div = k;
                    c = document.createElement("canvas");
                    c.id = b.id;
                    c.style.cssText = "opacity: 1; position: absolute; z-index: 10000;";
                    k.appendChild(c);
                    k.appendChild(f);
                    var m = document.createElement("div");
                    m.className = "meter";
                    m.style.padding = "10px";
                    f = document.createElement("span");
                    f.style.width = "3%";
                    m.appendChild(f);
                    this.meter = f;
                    this.meterContainer = m;
                    this.span.appendChild(m);
                    b.container.appendChild(k)
                }
                var l = b.bars,
                    p = b.radius,
                    r = 2 * (b.lineHeight + 20) + 2 * b.radius;
                g(b.container);
                var q = window.devicePixelRatio || 1;
                c.width = r * q;
                c.height = r * q;
                var u = 0,
                    v = c.getContext("2d");
                v.globalCompositeOperation = "lighter";
                v.shadowOffsetX = 1;
                v.shadowOffsetY = 1;
                v.shadowBlur = 0;
                v.shadowColor = "rgba(0, 0, 0, 0.5)";
                this.messages = {};
                this.message = function(a, b) {
                    if (!this.interval) return this.start(b, a);
                    this.update(null, a);
                    b && b()
                };
                this.update = function(a, b, c) {
                    if (!isFinite(a)) for (a in this.messages);
                    if (a = this.messages[a]) a.message = b = b || a.message, "number" === typeof c && (a.span.innerHTML = c + "%"), "..." === b.substr(-3) ? (a._message = b.substr(0, b.length - 3), a.messageAnimate = [".  ", ".. ", "..."].reverse()) : (a._message = b, a.messageAnimate = !1), a.element.innerHTML = b
                };
                this.add = function(a) {
                    "string" === typeof a && (a = {
                        message: a
                    });
                    this.span.style.cssText = "background: " + (b.background ? b.background : "rgba(0,0,0,1)") + ";";
                    this.div.style.cssText = d("opacity", 400);
                    this.stopPropagation ? this.div.style.cssText += "background: rgba(0,0,0,0.25);" : (this.div.style.pointerEvents = "none", this.div.style.height = 0);
                    this.div.style.opacity = 1;
                    this.div.style.display = "block";
                    b.background && (this.div.style.background = b.backgrond);
                    var c = (new Date).getTime(),
                        e = Math.abs(c * Math.random() >> 0),
                        f = a.message,
                        g = document.createElement("div");
                    g.style.cssText = d("opacity", 500);
                    var h = document.createElement("span");
                    h.style.cssText = "float: right; width: 50px;";
                    var k = document.createElement("span");
                    k.innerHTML = f;
                    g.appendChild(k);
                    g.appendChild(h);
                    g.appendChild(document.createElement("br"));
                    c = this.messages[e] = {
                        seed: e,
                        container: g,
                        element: k,
                        span: h,
                        message: f,
                        timeout: 1E3 * (a.timeout || b.timeout),
                        timestamp: c,
                        getProgress: a.getProgress
                    };
                    this.span.appendChild(g);
                    this.span.style.display = "block";
                    this.update(c.seed, f);
                    a.onstart && setTimeout(a.onstart, 150);
                    this.center();
                    this.interval || a.delay || x();
                    clearInterval(this.interval);
                    this.interval = setInterval(x, 30);
                    return e
                };
                this.remove = function(a) {
                    u += 0.07;
                    (new Date).getTime();
                    sketch.loader.thread === a && delete sketch.loader.thread;
                    "object" === typeof a && (a = a.join(":"));
                    a && (a = ":" + a + ":");
                    for (var b in this.messages) {
                        var c = this.messages[b];
                        a && -1 === a.indexOf(":" + c.seed + ":") || (delete this.messages[c.seed], c.container.style.color = "#99ff88", s(c), c.getProgress && (c.span.innerHTML = "100%"))
                    }
                };
                this.start = function(a, c) {
                    if (c || b.message) return e.add({
                        message: c || b.message,
                        onstart: a
                    })
                };
                this.stop = function(a) {
                    if (isFinite(a)) this.update(a, null, 100);
                    else {
                        e.remove();
                        clearInterval(e.interval);
                        delete e.interval;
                        delete sketch.loader.thread;
                        if (b.oncomplete) b.oncomplete();
                        c && c.style && (setTimeout(function() {
                            e.div.style.opacity = 0
                        }, 1), setTimeout(function() {
                            e.interval || (e.stopPropagation = !1, k.style.display = "none", v.clearRect(0, 0, r, r))
                        }, 400))
                    }
                };
                this.center = function() {
                    var a = g(b.container),
                        d = a.width - r,
                        a = (document.documentElement && document.documentElement.scrollTop || document.body.scrollTop) + (a.height - r) / 2 - Math.max(70, e.span.offsetHeight / 2) + r;
                    c.style.left = d / 2 + "px";
                    c.style.top = a - r + "px";
                    c.style.width = r + "px";
                    c.style.height = r + "px";
                    e.span.style.top = a + "px"
                };
                f = document.createElement("style");
                document.getElementsByTagName("head")[0].appendChild(f);
                f.styleSheet ? f.styleSheet.cssText = ".loader { color: #fff; position: fixed; left: 0; top: 0; width: 100%; height: 100%; z-index: 100000; opacity: 0; display: none; font-size: 1em; }.loader span { overflow: hidden; white-space: nowrap; }.loader span.message { margin: auto; opacity: 1; display: none; border-radius: 10px; padding: 0; width: 300px; text-align: center; position: absolute; z-index: 10000; left: 0; right: 0; }.loader span.message div { border-bottom: 1px solid rgba(255,255,255,0.15); padding: 7px 10px; clear: both; text-align: left; opacity: 1; }.loader span.message span { text-overflow: ellipsis; -o-text-overflow: ellipsis; width: 80%; float: left }.loader span.message div:last-child { border-bottom: none; }" : f.innerHTML = ".loader { color: #fff; position: fixed; left: 0; top: 0; width: 100%; height: 100%; z-index: 100000; opacity: 0; display: none; font-size: 1em; }.loader span { overflow: hidden; white-space: nowrap; }.loader span.message { margin: auto; opacity: 1; display: none; border-radius: 10px; padding: 0; width: 300px; text-align: center; position: absolute; z-index: 10000; left: 0; right: 0; }.loader span.message div { border-bottom: 1px solid rgba(255,255,255,0.15); padding: 7px 10px; clear: both; text-align: left; opacity: 1; }.loader span.message span { text-overflow: ellipsis; -o-text-overflow: ellipsis; width: 80%; float: left }.loader span.message div:last-child { border-bottom: none; }";
                var s = function(a) {
                    setTimeout(function() {
                        a.container.style.opacity = 0
                    }, 1);
                    setTimeout(function() {
                        a.container.parentNode.removeChild(a.container)
                    }, 250)
                }, x = function() {
                    var a = (new Date).getTime();
                    e.center();
                    for (var c in e.messages) {
                        var d = e.messages[c],
                            f = u / 0.07 >> 0,
                            g = parseInt(d.span.innerHTML);
                        if (isFinite(g) && 100 <= g) e.remove(d.seed);
                        else {
                            if (0 === f % 5 && d.getProgress) {
                                if (d.timeout && d.timestamp && a - d.timestamp > d.timeout) {
                                    e.remove(d.seed);
                                    continue
                                }
                                g = d.getProgress();
                                if (100 <= g) {
                                    e.remove(d.seed);
                                    continue
                                }
                                d.span.innerHTML = (g >> 0) + "%"
                            }
                            0 === f % 10 && d.messageAnimate && (d.element.innerHTML = d._message + d.messageAnimate[f / 10 % d.messageAnimate.length])
                        }
                    }
                    c || e.stop();
                    if (isFinite(e.percent)) e.meterContainer.style.display = "", e.meter.style.width = e.percent + "%";
                    else {
                        e.meterContainer.style.display = "none";
                        v.save();
                        v.clearRect(0, 0, r * q, r * q);
                        v.scale(q, q);
                        v.translate(r / 2, r / 2);
                        a = 360 - 360 / l;
                        for (c = 0; c < l; c++) {
                            d = 2 * (c / l) * Math.PI + u;
                            v.save();
                            v.translate(p * Math.sin(-d), p * Math.cos(-d));
                            v.rotate(d);
                            var d = -b.lineWidth / 2,
                                f = b.lineWidth,
                                g = b.lineHeight,
                                h = f / 2;
                            v.beginPath();
                            v.moveTo(d + h, 0);
                            v.lineTo(d + f - h, 0);
                            v.quadraticCurveTo(d + f, 0, d + f, 0 + h);
                            v.lineTo(d + f, 0 + g - h);
                            v.quadraticCurveTo(d + f, 0 + g, d + f - h, 0 + g);
                            v.lineTo(d + h, 0 + g);
                            v.quadraticCurveTo(d, 0 + g, d, 0 + g - h);
                            v.lineTo(d, 0 + h);
                            v.quadraticCurveTo(d, 0, d + h, 0);
                            v.fillStyle = "hsla(" + c / (l - 1) * a + ", 100%, 50%, 0.85)";
                            v.fill();
                            v.restore()
                        }
                        v.restore();
                        u += 0.07
                    }
                };
                if (!1 === b.display) return this;
                this.start();
                return this
            }
        }
    };
    var d = function(a, d) {
        return "\t\t-webkit-transition-property: " + a + ";\t\t-webkit-transition-duration: " + d + "ms;\t\t-moz-transition-property: " + a + ";\t\t-moz-transition-duration: " + d + "ms;\t\t-o-transition-property: " + a + ";\t\t-o-transition-duration: " + d + "ms;\t\t-ms-transition-property: " + a + ";\t\t-ms-transition-duration: " + d + "ms;"
    }, g = function(a) {
        if (window.innerWidth && window.innerHeight) var d = window.innerWidth,
            f = window.innerHeight;
        else "CSS1Compat" === document.compatMode && document.documentElement && document.documentElement.offsetWidth ? (d = document.documentElement.offsetWidth, f = document.documentElement.offsetHeight) : document.body && document.body.offsetWidth && (d = document.body.offsetWidth, f = document.body.offsetHeight);
        a && (d = a.offsetWidth);
        return {
            width: d,
            height: f
        }
    }
})();
"undefined" === typeof widget && (widget = {});
widget.Range = function(a) {
    function h(a) {
        var b = [];
        if (!a) return [];
        for ("number" === typeof a ? a = [a] : "string" === typeof a && (a = -1 !== a.indexOf(",") ? a.split(",") : a.split(" ")); a.length;) {
            var d = parseFloat(a.shift());
            b.push(d)
        }
        return b
    }
    function d(a, b) {
        return "number" === typeof a ? a : "NaN" === String(parseFloat(a)) ? b : parseFloat(a)
    }
    return function(a) {
        var b = this,
            e = a.onchange;
        this.target = a.target;
        this.setValue = function(a, c) {
            1 === b.thumbs.length && "undefined" === typeof c && (c = a, a = 0);
            b.thumbs[a].value = c;
            b.update(a, "set")
        };
        this.target && (this.target.onchange && (e = this.target.onchange), this.target.setValue = this.setValue, a.value = this.target.value, a.min = this.target.getAttribute("min"), a.max = this.target.getAttribute("max"), a.step = this.target.getAttribute("step"));
        this.value = h(a.value, 0);
        this.min = d(a.min, 0);
        this.max = d(a.max, 100);
        this.step = d(a.step, 1);
        this.thumbs = [];
        this.format = a.format;
        !0 === a.canCross ? (this.canCross = !0, this.canPush = !1) : !1 === a.canPush ? this.canPush = this.canCross = !1 : (this.canCross = !1, this.canPush = !0);
        for (var f = document.createElement("div"),
                 c = 0, k = this.value.length, m = 0; m < k; m++) {
            var l = document.createElement("div");
            f.appendChild(l);
            this.thumbs.push({
                index: m,
                element: l,
                left: 0,
                value: this.value[m]
            })
        }
        if (2 === k) {
            var p = document.createElement("div");
            p.className = "sk-range-span";
            f.appendChild(p);
            var r = document.createElement("div");
            r.className = "sk-range-span";
            r.style.display = "none";
            f.appendChild(r)
        }
        this.element = f;
        this.setup = function() {
            a.parent && a.parent.appendChild(f);
            if ("object" !== typeof a.css && (a.css = {}, a.className ? (a.css.slider = "", a.css.thumb = "") : (a.css.slider = "background: #000 -webkit-radial-gradient(45px 45px, cover, rgb(0, 0, 0) 0%, rgb(255, 255, 255) 100%); border: 1px solid #000; border-radius: 25px; width: 500px; height: 40px; top: 0; position: relative; z-index: 100", a.css.thumb = "background: #fff -webkit-radial-gradient(45px 45px, cover, rgb(0, 100, 255) 0%, rgb(255, 255, 255) 100%); border: 2px solid rgba(0,100,255,1); top: -2px; border-radius: 25px; width: 40px; height: 40px; position: absolute;"), sketch.gen && sketch.gen.rangeBar)) {
                var b = sketch.gen.rangeBar({
                    gradient: a.gradient,
                    barWidth: f.offsetWidth
                });
                a.css.slider += "background-image: url(" + b.toDataURL() + ");\t\t\t\t\tbackground-size:" + b.style.width + " " + b.style.height + ";"
            }
            f.className = a.className;
            f.style.cssText = a.css.slider;
            for (b = 0; b < k; b++) this.thumbs[b].element.style.cssText = a.css.thumb
        };
        this.setAnimate = function(b, c) {
            var d = this.thumbs[b].element,
                e = d.style.left;
            d.style.cssText = a.css.thumb;
            d.style.left = e
        };
        this.update = function(c, d) {
            var h = b.thumbs[c || 0],
                l = h.element,
                m = f.offsetWidth || 236,
                w = l.offsetWidth || 10,
                A = Math.max(0, Math.min(m - w, (h.value - b.min) / (b.max - b.min) * (m - w))),
                w = w / 2;
            if (this.canPush) {
                var y = A + w;
                if (y < h.left) for (var z = h.index - 1; - 1 < z; z--) {
                    var B = this.thumbs[z];
                    B.left > y && (B.element.style.cssText = a.css.thumb, B.element.style.left = Math.round(A) + "px", B.left = y, B.value = h.value, b.state = d || "change", e(b, B))
                } else for (z = h.index + 1; z < k; z++) B = this.thumbs[z], B.left < y && (B.element.style.cssText = a.css.thumb, B.element.style.left = Math.round(A) + "px", B.left = y, B.value = h.value, b.state = d || "change", e(b,
                    B));
                l.style.left = Math.round(A) + "px";
                h.left = y
            } else if (this.canCross) l.style.left = Math.round(A) + "px", h.left = A + w;
            else {
                y = A + w;
                if (y < h.left) for (z = h.index - 1; - 1 < z; z--) {
                    if (B = this.thumbs[z], B.left > y) {
                        A = B.left - w;
                        y = B.left;
                        B.value = h.value;
                        b.state = d || "change";
                        e(b, B);
                        break
                    }
                } else for (z = h.index + 1; z < k; z++) if (B = this.thumbs[z], B.left < y) {
                    A = B.left - w;
                    y = B.left;
                    B.value = h.value;
                    b.state = d || "change";
                    e(b, B);
                    break
                }
                l.style.left = Math.round(A) + "px";
                h.left = y
            }
            b.state = d || "change";
            e(b, h);
            2 === k && (h = b.thumbs[0].left, l = b.thumbs[1].left,
                h <= l ? (p.style.left = Math.min(h, l) + "px", p.style.width = Math.abs(h - l) + "px", r.style.display = "none") : (p.style.left = "0px", p.style.width = l + "px", r.style.left = h + "px", r.style.width = m - h + "px", r.style.display = "block"))
        };
        this.wheel = function(a, c) {
            var d = b.thumbs[0],
                e = (d.value - b.min) / (b.max - b.min),
                e = Math.min(1, Math.max(0, e - c.wheelDelta / 5E3));
            d.value = e * (b.max - b.min) + b.min;
            b.update(0, c.state)
        };
        this.mousedown = function(a, d) {
            for (var e = eventjs.proxy.getCoord(a), g = eventjs.proxy.getBoundingBox(f), h = Infinity, l, e = e.x - g.x1, g = 0; g < k; g++) {
                var m = b.thumbs[g],
                    p = m.left - e,
                    r = Math.abs(p);
                if (0 > p && r <= h || -1 < p && r < h) h = r, l = m
            }
            if (l) {
                var B = l.element,
                    D = l.index;
                B.style.zIndex = ++c;
                eventjs.proxy.drag({
                    event: a,
                    target: f,
                    position: "relative",
                    animationFrame: !0,
                    listener: function(a, c) {
                        var e = f.offsetWidth;
                        b.setAnimate(D, "move" !== c.state);
                        var g = B.offsetWidth,
                            e = Math.max(0, Math.min(e - g, c.x - g / 2)) / (e - g);
                        "down" === c.state ? (eventjs.blur(), eventjs.cancel(a), g = "start") : "up" === c.state ? (eventjs.cancel(a), g = "end") : (eventjs.cancel(a), g = "change");
                        l.value = e * (b.max - b.min) + b.min;
                        b.update(D, g);
                        d && d(c)
                    }
                })
            }
        };
        eventjs.add(f, "wheel", this.wheel);
        eventjs.add(f, "mousedown", this.mousedown);
        this.target && this.target.parentNode && (this.target.parentNode.insertBefore(f, this.target), this.target.style.display = "none");
        this.setup();
        for (m = k - 1; - 1 < m; m--) b.setAnimate(m, !0), b.update(m, "load"), b.state = "load";
        return this
    }
}({});
"undefined" === typeof widget && (widget = {});
widget.Thumbnailer = function(a) {
    var h = {
        background: "",
        width: 300,
        height: 100,
        useCache: !0,
        center: !0,
        crop: "edge",
        src: "path.to.image"
    };
    a = function(a) {
        var b = this;
        a || (a = {});
        for (var e in h) "undefined" === typeof a[e] && (a[e] = h[e]);
        this.images = {};
        this.conf = a;
        this.height = a.height;
        this.width = a.width;
        this.generate = function(e) {
            "string" === typeof e && (e = {
                src: e
            });
            var c, h = e.src,
                m = e.canvas,
                l = "function" === typeof FlashCanvas,
                p;
            for (p in e) a[p] = e[p];
            var r = isFinite(e.useCache) ? e.useCache : a.useCache,
                q = isFinite(e.center) ? e.center : a.center,
                u = (e.crop || a.crop).toLowerCase(),
                v = isFinite(e.croparea) ? e.croparea : a.croparea,
                s = e.background || a.background;
            "none" === s && (s = "");
            var x = isFinite(e.width) ? e.width : a.width,
                w = isFinite(e.height) ? e.height : a.height,
                A = e.onload || a.onload;
            v && v.length && (v = {
                x1: v[0],
                y1: v[1],
                x2: v[2],
                y2: v[3]
            });
            if ("undefined" === typeof m) if (r && b.images[h]) m = b.images[h].canvas;
            else if (m = document.createElement("canvas"), "undefined" !== typeof Event && eventjs.add) {
                var y = {};
                for (p in a) "function" === typeof a[p] && (y[p] = a[p]);
                for (p in e) "function" === typeof e[p] && (y[p] = e[p]);
                eventjs.add(m, y)
            }
            var z = m.getContext("2d");
            e = function() {
                if (c.width || c.height) {
                    v || (v = {
                        x1: 0,
                        y1: 0,
                        x2: c.width,
                        y2: c.height
                    });
                    var a = v.x2 - v.x1 || x,
                        b = v.y2 - v.y1 || w;
                    "auto" === x ? (m.height = w, m.width = x = a / b * w) : (m.height = "auto" === w ? w = b / a * x : w, m.width = x);
                    var d = 1,
                        e = 0,
                        f = 0;
                    "none" !== u && (d = x / w < a / b, d = (e = "fit" === u) && d || !e && !d ? w / b : x / a);
                    b = Math.round(v.x2 * d) || 1;
                    a = Math.round(v.y2 * d) || 1;
                    e = Math.round(q ? (x - b) / 2 : 0);
                    f = Math.round(q ? (w - a) / 2 : 0);
                    m.width = x;
                    m.height = w;
                    z.save();
                    z.rect(0, 0, x, w);
                    s && (z.save(), z.scale(0.25,
                        0.25), z.fillStyle = s, z.fill(), z.restore());
                    z.drawImage(c, 0, 0, c.width, c.height, e, f, c.width * d, c.height * d);
                    z.restore()
                }
                A && A(m, c)
            };
            p = String(h);
            d[p] || l && "[object]" === p ? (c = h, e()) : r && b.images[h] ? (c = b.images[h], e()) : (m.src = h, c = new Image, b.images[h] = c, b.images[h].canvas = m, l ? (c.src = h, z.loadImage(c, e)) : (c.onload = e, c.src = h));
            return m
        };
        this.regenerate = function(a, b) {
            for (var d in this.images) thumb.generate({
                src: d,
                canvas: this.images[d].canvas
            })
        };
        return this
    };
    var d = {
        "[object HTMLImageElement]": !0,
        "[object HTMLCanvasElement]": !0,
        "[object Canvas]": !0
    };
    return a
}({});
if ("undefined" !== typeof module && module.exports && (module.exports = widget.Thumbnailer, "undefined" === typeof document)) {
    var canvas = require("canvas");
    document = {
        createElement: function() {
            return new canvas
        }
    };
    Image = canvas.Image
}
"undefined" === typeof widget && (widget = {});
widget.Tooltip = new function() {
    var a = this,
        h, d, g, b;
    this.enabled = !1;
    this.create = function() {
        var a = document.createElement("style");
        a.innerHTML = "\t\t#tooltip {\t\t\ttransition-property: opacity;\t\t\ttransition-duration: 0.2s;\t\t\tposition:absolute;\t\t\tdisplay:block;\t\t\tbackground: #808080; \t\t\tborder-radius: 7px;\t\t\tcolor: #fff;\t\t\tfont-size: 14px;\t\t\tpadding: 0 10px;\t\t\tz-index: 99999;\t\t\tbox-shadow: 2px 2px 3px rgba(0,0,0,0.5);\t\t\twhite-space:nowrap;\t\t\tpointer-events: none;\t\t}";
        document.body.appendChild(a);
        h = document.createElement("div");
        h.setAttribute("id", "tooltip");
        h.style.opacity = 0;
        h.style.filter = "alpha(opacity=0)";
        eventjs.add(document, "mousemove", e);
        eventjs.add(h, "mousedown", eventjs.cancel);
        document.body.appendChild(h)
    };
    this.show = function(e, c) {
        clearTimeout(b);
        h || a.create();
        a.enabled = !0;
        h.innerHTML = e;
        h.style.width = c ? c + "px" : "auto";
        h.style.display = "block";
        setTimeout(function() {
            h.style.opacity = 1
        }, 1);
        g = h.offsetWidth;
        d = h.offsetHeight
    };
    this.hide = function() {
        h || a.create();
        a.enabled && (a.enabled = !1, h.style.opacity = 0, clearTimeout(b), b = setTimeout(function() {
            h.style.display = "none"
        }, 250))
    };
    var e = function(b) {
        if (a.enabled) {
            var c = eventjs.proxy.getCoord(b);
            b = Math.max(0, c.x + 3);
            var c = Math.max(0, c.y - (d + 3)),
                e = Math.max(0, g - (window.innerWidth - b)),
                m = Math.max(0, d - (window.innerHeight - c));
            h.style.left = b - e + "px";
            h.style.top = c - m + "px"
        }
    };
    return this
};
"undefined" === typeof widget && (widget = {});
widget.Uploader = function(a) {
    var h = this;
    a = a || {};
    this.debug = !1;
    this.action = a.action || "./filemanager.php?upload=true";
    this.confirm = a.confirm || "text";
    this.onUpload = a.onUpload || a.onupload;
    this.onProgress = a.onProgress || a.onprogress;
    this.onLoad = a.onLoad || a.onload;
    this.onInputReady = a.onInputReady || a.oninputready;
    this.onError = a.onError || a.onerror;
    this.onAbort = a.onAbort || a.onabort;
    this.onChangeDefault = this.onChange = a.onChange || a.onchange;
    this.mode = a.mode || "read";
    this.maxFiles = a.maxFiles || 1;
    this.maxFileSize = a.maxFileSize || 104857600;
    this.directory = a.directory || !1;
    "object" === typeof a.fakeInput ? (this.fakeInput = a.fakeInput, this.fakeInputParent = a.fakeInputParent || null) : "object" === typeof a.fileInput && (this.fileInput = a.fileInput);
    this.dropAreaContainer = a.dropArea || document.body;
    this.dropAreaMessage = a.dropAreaMessage || "Drop File(s) Here";
    this.dropAreaStyle = a.dropAreaStyle || "";
    this.files = {};
    this.filesByName = {};
    this.filesByPath = {};
    this.formats = {};
    var d = (a.formats || "jpg,jpeg,gif,png").split(",");
    for (a = 0; a < d.length; a++) this.formats[d[a].trim().toLowerCase()] = !0;
    this.createFileInput = function(a) {
        a = a || {};
        var b = a.element || a,
            c = b && b.parentNode;
        if (c) {
            if ("fakeInputContainer" === c.className) return;
            h.fakeInput = b;
            h.fileInput = null
        }
        if (h.fileInput) var f = h.fileInput;
        else if (h.fakeInput) {
            f = h.fileInput = document.createElement("input");
            f.style.cssText = "position: absolute; top: 0; z-index: 1000; font-size: 1000px; text-align: right; width: inherit; height: inherit; cursor: pointer; right: 0; filter: alpha(opacity: 0); opacity: 0;";
            var g = function(a, b) {
                h.onChange = h.onChangeDefault || h.onChange;
                eventjs.remove(document.body, "focus", g)
            };
            eventjs.add(f, "mousedown", function(b) {
                h.onChange = a.onChange || h.onChange
            });
            eventjs.add(f, "click", function(a, b) {
                eventjs.add(document.body, "focus", g)
            });
            d.length && sketch.supports.chooseEntry ? eventjs.add(f, "click", function(a) {
                sketch.open.chooseEntry(function(b) {
                    e([b], a)
                })
            }) : f.setAttribute("type", "file");
            1 < h.maxFiles ? (f.setAttribute("name", "files[]"), f.setAttribute("multiple", "multiple")) : f.setAttribute("name", "file");
            h.directory && (f.setAttribute("directory", ""), f.setAttribute("mozdirectory", ""), f.setAttribute("webkitdirectory", ""));
            var k = {
                    A: !0,
                    SPAN: !0
                }, l = h.fakeInput,
                m = h.fakeInputContainer = document.createElement("div"),
                c = h.fakeInputParent || l.parentNode;
            m.className = "fakeInputContainer";
            m.style.cssText = "position: relative; overflow: hidden; z-index: 0;";
            l.style.cssText && (m.style.cssText += l.style.cssText);
            k[l.nodeName] && (m.style.display = "inline-block");
            var p = !0,
                b = function() {
                    p && (p = !1, h.fakeInputParent ? h.fakeInputParent.appendChild(m) : l.parentNode && l.parentNode.replaceChild(m,
                        l), m.appendChild(l), m.appendChild(f));
                    var a = sk.util.getMetrics(l),
                        b = a.width,
                        a = a.height;
                    !k[l.nodeName] && (b && a) && (m.style.width = b + "px", m.style.height = a + "px");
                    if (h.onInputReady) h.onInputReady()
                }, c = sk.util.getMetrics(l),
                r = c.height;
            c.width || r ? window.setTimeout(b, 0) : window.setTimeout(b, 250)
        }
        this.initFileInput(f)
    };
    this.initFileInput = function(a) {
        a && (a.onchange = function(b) {
            if (a.files && a.files.length) e(b.target.files, b, function() {
                a.value = ""
            });
            else {
                var c = a.value,
                    d = c.replace(/\\/g, "/").replace(/.*\//, "");
                e([{
                    src: c,
                    name: d
                }], b)
            }
        })
    };
    var g = document.createElement("form");
    g.style.cssText = "z-index: 999; background: rgba(0,200,0, 0.5); position: fixed; width: 100%; height: 100%; left: 0; top: 0; display: none; font-weight: bold; font-size: 2.5em; color: #fff; line-height: 1em; text-align: center; text-shadow: 0 0 15px #000;";
    g.id = "sk-uploader";
    this.createDropArea = function(a) {
        var b = !! a;
        a = a || this.dropAreaContainer;
        h.dropAreaStyle && (g.style.cssText += h.dropAreaStyle);
        g.innerHTML = h.dropAreaMessage;
        g.onclick = function() {
            g.style.display = "none"
        };
        g.ondragenter = function(a) {
            a.preventDefault();
            a.stopPropagation();
            return !1
        };
        g.ondragover = function(a) {
            a.preventDefault();
            a.stopPropagation();
            return !1
        };
        g.ondrop = function(a) {
            a.preventDefault();
            a.stopPropagation();
            g.style.display = "none";
            var b = a.dataTransfer;
            "undefined" !== typeof b && ("undefined" !== typeof b.items ? new r(b.items, function(b) {
                b.length && e(b, a)
            }) : "undefined" !== typeof b.files && (b = b.files, 0 !== b.length && e(b, a)))
        };
        g.ondragleave = function(a) {
            if (0 !== a.x || 0 !== a.y) for (var b = document.elementFromPoint(a.x,
                a.y); b !== document && b;) {
                if ("sk-uploader" === b.id) return;
                b = b.parentNode
            }
            a.preventDefault();
            a.stopPropagation();
            setTimeout(function() {
                g.style.display = "none"
            }, 100)
        };
        a === window && (a = document.body);
        b || a.appendChild(g);
        a.ondragenter = function(a) {
            a.dataTransfer && a.dataTransfer.files && p(a.dataTransfer.types, "Files") && setTimeout(function() {
                g.style.display = "table"
            }, 10)
        };
        a === document.body && (window.onresize = function(a) {
            window.innerWidth && window.innerHeight && (g.style.width = window.innerWidth + "px", g.style.height = window.innerHeight + "px")
        })()
    };
    var b = {
        length: 0
    }, e = function(a, c, d) {
        if (h.onProgress) h.onProgress({
            transferPercent: 0
        }, c);
        var e = 0,
            f = function(a, b) {
                b.src && (b = [b]);
                for (var c in b) {
                    var d = h.files[c],
                        e = b[c];
                    d.src = e.src;
                    d.size = e.size;
                    d.type = e.type;
                    d.name = e.name
                }
                l()
            }, g = {
                jpg: !0,
                jpeg: !0,
                gif: !0,
                png: !0
            }, k = function(a) {
                var b = a.hash;
                if (a.type && !g[a.type.substr(6).toLowerCase()]) {
                    var c = new FileReader;
                    c.onload = function(a) {
                        h.files[b].src = a.target.result;
                        h.files[b].isRead = !0;
                        return l()
                    };
                    c.readAsText(a)
                } else try {
                    var d = (window.URL || window.webkitURL).createObjectURL(a);
                    h.files[b].src = d;
                    h.files[b].isRead = !0;
                    return l()
                } catch (e) {
                    try {
                        c = new FileReader, c.onload = function(a) {
                            h.files[b].src = a.target.result;
                            h.files[b].isRead = !0;
                            return l()
                        }, c.readAsDataURL(a)
                    } catch (k) {
                        a.upload = new h.upload({
                            file: a,
                            onUpload: f
                        })
                    }
                }
            }, l = function(a) {
                a ? m() : setTimeout(m, 30)
            }, m = function() {
                if (h.onProgress) h.onProgress({
                    transferPercent: 100 * (e / a.length) >> 0
                }, c);
                var g = a[e];
                if (++e > h.maxFiles || !g) {
                    d && d();
                    if (h.onLoad) h.onLoad();
                    if (1 === h.maxFiles) {
                        if ("undefined" === typeof a[0]) {
                            if (h.onError) h.onError(h, "UPLOAD_ERR_FORMAT");
                            return
                        }
                        h.file = a[0];
                        return h.onChange(h, c)
                    }
                    for (var m in h.files);
                    return h.files[m] ? h.onChange(h, c) : void 0
                }
                m = g.name || g.fileName || "";
                var p = g.path || m,
                    r = m.substr(m.lastIndexOf(".") + 1).toLowerCase(),
                    w = h.createFileHash(g),
                    z = h.files[w];
                if (z && (h.changedFiles[w] = z, h.changedFilesByName[m] = z, h.changedFilesByPath[p] = z, "upload" === h.mode && z.isUploaded || "read" === h.mode && z.isRead)) return l(!0);
                b[w] = b.length++;
                if (!h.formats[r]) {
                    if (h.onError) h.onError(h, "UPLOAD_ERR_FORMAT");
                    return l(!0)
                }
                r = g.fileSize || g.size;
                if (0 === r) {
                    if (h.onError) h.onError(h, "UPLOAD_ERR_NO_FILE");
                    return l(!0)
                }
                if (r && r > h.maxFileSize) {
                    if (h.onError) h.onError(h, "UPLOAD_ERR_FORM_SIZE");
                    return l(!0)
                }
                g.hash = w;
                h.files[w] = g;
                h.filesByName[m] = g;
                h.filesByPath[p] = g;
                h.changedFiles[w] = g;
                h.changedFilesByName[m] = g;
                h.changedFilesByPath[p] = g;
                if ("upload" === h.mode) g.upload = new h.upload({
                    file: g,
                    onUpload: f
                });
                else if ("read" === h.mode) k(g);
                else return l(!0)
            };
        h.changedFiles = {};
        h.changedFilesByName = {};
        h.changedFilesByPath = {};
        l()
    };
    this.createFileHash = function(a) {
        var b = {};
        b.name = a.name || a.fileName;
        b.src = a.src;
        b.size = a.size || a.fileSize;
        b.type = a.type;
        a = JSON.stringify(b);
        for (var b = 5381, c = 0, d = a.length; c < d; c++) var e = a.substr(c, 1).charCodeAt(),
            b = (b << 5) + b + e;
        return b
    };
    this.setLanguage = function(a) {
        for (var b in a) this.translation[b] = a[b]
    };
    this.translation = {
        UPLOAD_ERR_INI_SIZE: "The uploaded file exceeds the upload_max_filesize directive",
        UPLOAD_ERR_FORM_SIZE: "The uploaded file exceeds the MAX_FILE_SIZE directive",
        UPLOAD_ERR_PARTIAL: "The uploaded file was only partially uploaded",
        UPLOAD_ERR_NO_FILE: "No file was uploaded",
        UPLOAD_ERR_NO_TMP_DIR: "Missing a temporary folder",
        UPLOAD_ERR_CANT_WRITE: "Failed to write file to disk",
        UPLOAD_ERR_EXTENSION: "A PHP extension stopped the file upload",
        UPLOAD_ERR_FORMAT: "The uploaded file was an invalid format",
        UPLOAD_ERR_XHTTP: ""
    };
    this.upload = function(a) {
        this.onAbort = a.onAbort;
        this.onUpload = a.onUpload;
        this.onProgress = a.onProgress;
        this.action = a.action || h.action;
        this.confirm = a.confirm || h.confirm;
        this.files = 0 === String(a.file).indexOf("[object") ? [a.file] : a.files;
        this.bytes = this.timeLapse = this.timeRemaining = this.transferPercent = this.transferTotal = this.transferSpeed = 0;
        if (h.onUpload) h.onUpload(this);
        window.FormData ? c(this, a.onUpload) : k(this, a.onUpload)
    };
    var f = function(a, b) {
        var c = Object.prototype.toString.call(a);
        "[object Object]" === c && a.src && (c = "");
        switch (c) {
            case "[object Array]":
                for (var c = 0, d = a.length; c < d; c++) b(a[c]);
                break;
            case "[object Object]":
                for (d in a) b(a[d], d);
                break;
            default:
                b(a)
        }
    }, c = function(a, b) {
        if ("[object Blob]" === String(a.files)) var c = a.files;
        else c = new FormData, f(a.files, function(a, b) {
            if ("undefined" !== typeof a.data) c.append(b || a.name || a.fileName, a.data);
            else if (a.src && "data:" === a.src.substr(0, 5)) {
                var d = JSON.stringify(a);
                c.append(b || a.name || a.fileName, d)
            } else c.append(b || a.hash, a)
        });
        var d = new XMLHttpRequest;
        d.upload.onprogress = function(b) {
            if (b.lengthComputable) {
                var c = b.loaded;
                a.transferPercent = Math.round(100 * c / b.total);
                a.transferTotal = m(c);
                var d = 2 * (c - a.bytes);
                0 !== d && (a.bytes = c, a.transferSpeed = m(d), a.timeRemaining = l((b.total - a.bytes) / d), a.timeLapse = l(Date.now() - b.timeStamp));
                if (a.onProgress) a.onProgress(a, b);
                else if (h.onProgress) h.onProgress(a, b)
            } else a.transferSpeed = 0, a.transferTotal = 0, a.transferPercent = 0, a.timeRemaining = 0
        };
        d.onload = function(c) {
            "[object Blob]" !== String(a.files) && f(a.files, function(a, b) {
                "undefined" === typeof a.date && (a.isUploaded = !0)
            });
            var d = c.target.responseText;
            if ("json" === a.confirm) try {
                d = JSON.parse(d)
            } catch (e) {
                console.log(c.target.responseText)
            }
            if (h.translation[d]) {
                if (h.onError) h.onError(h, d)
            } else {
                if (h.onLoad) h.onLoad(a,
                    d);
                b && b(a, d)
            }
        };
        d.onerror = function(a) {
            if (h.onError) h.onError(h, "UPLOAD_ERR_XHTTP", a)
        };
        d.onabort = function(b) {
            if (h.onAbort) h.onAbort(a, "UPLOAD_ERR_XHTTP", b)
        };
        d.open("POST", a.action, !0);
        d.send(c)
    }, k = function(a, b) {
        var c = document.createElement("form");
        document.body.appendChild(c);
        var d = document.createElement("iframe");
        d.setAttribute("id", "upload_iframe");
        d.setAttribute("name", "upload_iframe");
        d.setAttribute("width", "0");
        d.setAttribute("height", "0");
        d.setAttribute("border", "0");
        d.setAttribute("style", "width: 0; height: 0; border: none;");
        var e = function() {
            try {
                var e = d.contentDocument.body
            } catch (g) {
                try {
                    e = d.contentWindow.document.body
                } catch (k) {
                    e = d.document.body
                }
            }
            if (e.innerHTML) {
                f(a.files, function(a) {
                    "undefined" === typeof a.date && (a.isUploaded = !0)
                });
                e = e.innerHTML;
                if ("json" === a.confirm) try {
                    e = JSON.parse(e)
                } catch (l) {
                    console.log && console.log(e)
                }
                if (h.translation[e]) {
                    if (h.onError) h.onError(h, e)
                } else {
                    if (h.onLoad) h.onLoad(a, e);
                    b && b(a, e)
                }
            }
            setTimeout(function() {
                    c.parentNode && c.parentNode.removeChild(c);
                    h.fileInput.parent && h.fileInput.parent.appendChild(h.fileInput)
                },
                250)
        };
        d.addEventListener ? d.addEventListener("load", e, !0) : d.attachEvent && d.attachEvent("onload", e);
        c.appendChild(d);
        window.frames.upload_iframe.name = "upload_iframe";
        f(a.files, function(a, b) {
            if ("undefined" !== typeof a.data) {
                var d = document.createElement("input");
                d.type = "hidden";
                d.value = a.data;
                d.name = b || a.name || a.fileName
            } else a.src && "data:image/" === a.src.substr(0, 11) ? (d = document.createElement("input"), d.type = "hidden", d.value = JSON.stringify(a), d.name = b || a.name || a.fileName) : "string" === typeof a ? (d = document.createElement("input"),
                d.type = "hidden", d.value = a, d.name = b) : (d = h.fileInput, d.parent = d.parentNode, d.name = b || a.hash);
            c.appendChild(d)
        });
        c.setAttribute("target", "upload_iframe");
        c.setAttribute("action", a.action);
        c.setAttribute("method", "post");
        c.setAttribute("enctype", "multipart/form-data");
        c.setAttribute("encoding", "multipart/form-data");
        c.submit()
    }, m = function(a) {
        return 1048576 < a ? Math.round(100 * a / 1048576) / 100 + "MB" : 1024 < a ? Math.round(a / 1024) + "KB" : a + "B"
    }, l = function(a) {
        var b = a / 3600 >> 0,
            c = (a - 3600 * b) / 60 >> 0;
        a = a - 3600 * b - 60 * c;
        10 > b && (b = "0" + b);
        10 > c && (c = "0" + c);
        10 > a && (a = "0" + a);
        return b + ":" + c + ":" + a
    }, p = function(a, b) {
        for (var c = a.length; c--;) if (a[c] === b) return !0;
        return !1
    }, r = function(a, b, c) {
        c = isFinite(c) ? c : Infinity;
        var d = this;
        this.files = [];
        this.pending = 0;
        this.recurse = function(a, b, c) {
            this.pending++;
            if (!a) return d.runCallback();
            a.isFile ? a.file(function(a) {
                a.path = b + a.name;
                d.files.push(a);
                d.runCallback()
            }) : a.isDirectory && a.createReader().readEntries(function(e) {
                for (var f = 0; f < e.length; f++) d.recurse(e[f], b + a.name + "/", c + 1);
                d.runCallback()
            })
        };
        this.runCallback = function() {
            --this.pending || b(this.files)
        };
        for (c = 0; c < a.length; c++) if (a[c].webkitGetAsEntry) {
            var e = a[c].webkitGetAsEntry();
            this.recurse(e, "", 0)
        }
        return this
    };
    this.dropAreaContainer && this.createDropArea();
    (this.fakeInput || this.fileInput) && this.createFileInput();
    return this
};
"undefined" === typeof zIndexGlobal && (zIndexGlobal = 1E3);
"undefined" === typeof sketch && (sketch = {});
(function(a) {
    var h = a.windows = [];
    h.focused = [];
    var d = h.idToIndex = {};
    h.add = function(b, e, f, c) {
        var g = b.id;
        e = document.querySelector("#" + g);
        if ("undefined" === typeof e) return console.log("element does not exist"), this;
        if (isFinite(d[g])) return console.log("element already exists"), this;
        if (g) "px" === b.format && (b.x = b.left, b.y = b.top, b.left /= window.innerWidth, b.top /= window.innerHeight);
        else {
            for (var m in b) e = b[m], e.id = m, h.add(e);
            return h.restore()
        }
        c = b.display;
        m = (b.position || "top left").split(" ");
        !0 === c && (c = "block");
        !1 === c && (c = "none");
        b.vAlign = m[0] || "top";
        b.hAlign = m[1] || "left";
        b.element = e;
        if (b.autoclose) {
            var l = b.ghost = document.createElement("div");
            l.id = g + "-ghost";
            l.style.cssText = "width: 100%; height: 100%; position: fixed; top: 0; z-index: 100;";
            e.parentNode.insertBefore(l, e);
            eventjs.add({
                target: l,
                mousemove: function(b) {
                    "eyeDropper" === a.colorPicker.state && a.colorPicker.mouseLayerUpdate(b)
                },
                mousedown: function(b, c) {
                    "eyeDropper" === a.colorPicker.state ? a.colorPicker.mouseLayerExit(b) : h.close(g)
                }
            })
        }
        d[g] = h.length;
        h.push(b);
        a.getItem(g, function(d) {
            d && (d = JSON.parse(d), "boolean" === typeof c && c ? d.display = "block" : c && (d.display = c), "NONE" === b.display && (d.display = "none"), "BLOCK" === b.display && (d.display = "block"), b.autoclose && (l.style.display = d.display), a.util.mergeObject(d, b))
        });
        return this
    };
    h.setCurrentTab = function(a, d) {
        a && d && (dom.setClass({
            className: "selected",
            list: "div",
            target: document.querySelector("#" + a + " " + d)
        }), h.record({
            id: a,
            className: d
        }))
    };
    h.byId = function(a) {
        a = d[a];
        return "undefined" === typeof a ? !1 : h[a]
    };
    h.record = function(b) {
        var d = h.byId(b.id);
        if (d) {
            "undefined" !== typeof b.x && (d.x = b.x);
            "undefined" !== typeof b.y && (d.y = b.y);
            "undefined" !== typeof b.left && (d.left = b.left);
            "undefined" !== typeof b.top && (d.top = b.top);
            "undefined" !== typeof b.display && (d.display = b.display);
            "undefined" !== typeof b.index && (d.index = b.index);
            "undefined" !== typeof b.className && (d.className = b.className);
            var f = JSON.stringify(d, a.util.json.filterCircular);
            a.setItem(b.id, f);
            h.focusElement(b.id, d.display)
        }
    };
    h.restore = function() {
        var a = document.documentElement.scrollTop,
            d = document.documentElement.scrollLeft,
            f = window.innerWidth,
            c = window.innerHeight;
        g.element && h.setContainer(g.element);
        for (var k = [], m = {}, l = 0; l < h.length; l++) {
            var p = h[l],
                r = p.vAlign,
                q = p.hAlign,
                u = document.getElementById(p.id);
            if (u && u.style) {
                u.style.display = "block";
                var u = sk.util.getMetrics(u),
                    v = g[r || "top"],
                    s = g[q || "left"];
                p.objectBoundingBox && (p.x = 0.5 * f - u.width / 2, p.y = 0.5 * c - u.height / 2 + 20);
                var v = (isFinite(p.y) ? p.y : p.top * c) + v,
                    p = (isFinite(p.x) ? p.x : p.left * f) + s,
                    v = v + a,
                    p = p + d,
                    s = Math.min(v, c),
                    x = Math.min(p, f);
                m.BOTTOM = v + u.height - c;
                m.TOP = s - v;
                m.RIGHT = p + u.width - f;
                m.LEFT = x - p;
                m[r] = Math.max(m[r] || 0, m[r.toUpperCase()]);
                m[q] = Math.max(m[q] || 0, m[q.toUpperCase()]);
                v -= Math.max(0, m.BOTTOM);
                p -= Math.max(0, m.RIGHT);
                k.push({
                    top: Math.max(g.y, v),
                    left: Math.max(g.x, p)
                })
            }
        }
        a = 100;
        for (l = 0; l < h.length; l++) p = h[l], p.display && !0 !== p.display || (p.display = "block"), (u = document.getElementById(p.id)) && u.style && (f = k[l], d = "bottom" === p.vAlign ? f.top - m.bottom : f.top + m.top, f = "right" === p.hAlign ? f.left - m.right : f.left + m.left, d = Math.ceil(d), f = Math.ceil(f),
            u.style.top = d + "px", u.style.left = f + "px", u.style.display = p.display || "block", u.style.zIndex = p.zIndexFixed || p.index || ++a, zIndexGlobal = Math.max(zIndexGlobal, p.index || 0), "block" === p.display && -1 === u.className.indexOf("opened") && (u.className += " opened"));
        return this
    };
    h.blink = function(a, d) {
        var f = document.getElementById(a);
        if (f) if (h.isOpen(f) || h.open(a), setTimeout(function() {
            f.blinking = !1
        }, 250), f.blinking) d && d(!0);
        else return f.blinking = !0, f.className = (" " + f.className + " ").split(" blink ").join(" blink-stall ").trim(),
                setTimeout(function() {
                    f.className = (" " + f.className + " ").split(" blink-stall ").join(" ").trim(); - 1 === f.className.indexOf("opened") ? h.open(a) : f.className += " blink";
                    d && d(!0)
                }, 0), this
    };
    h.open = function(a, d) {
        d = !1 !== d;
        var f = document.getElementById(a);
        if (f) {
            var c = f.className;
            if (-1 !== c.indexOf("sk-window")) {
                -1 === (" " + c + " ").indexOf(" opened ") && (f.className = (c + " opened").trim());
                var c = h.byId(a),
                    g = c.zIndexFixed ? c.zIndexFixed : ++zIndexGlobal;
                f.style.display = "block";
                f.style.zIndex = g;
                f.style.opacity = 1;
                clearTimeout(f.interval);
                h.record({
                    id: a,
                    display: "block",
                    index: g
                });
                c.autoclose && (c.ghost.style.display = "block");
                d && setTimeout(h.restore, 500);
                return this
            }
        }
    };
    h.close = function(a) {
        var d = h.byId(a),
            f = document.getElementById(a);
        f.style.opacity = 0;
        f.className = (" " + f.className + " ").split(" opened ").join(" ").trim();
        f.interval = setTimeout(function() {
            f.style.opacity = 1;
            f.style.display = "none";
            h.record({
                id: a,
                display: "none"
            })
        }, 250);
        d.autoclose && (d.ghost.style.display = "none");
        return this
    };
    h.focus = function(a) {
        var d = document.getElementById(a);
        if (d) {
            var f = h.byId(a),
                f = f.zIndexFixed ? f.zIndexFixed : ++zIndexGlobal;
            d.style.zIndex = f;
            h.record({
                id: a,
                index: f
            });
            return this
        }
    };
    h.clearFocus = function() {
        h.focused = []
    };
    h.focusElement = function(a, d) {
        if ("none" !== d) {
            var f = h.focused.slice(-1)[0],
                c = " " + h.focused.join(" ") + " ";
            f !== a && -1 === c.indexOf(a) && h.focused.push(a)
        }
    };
    h.hasFocus = function() {
        return !!d[h.focused.slice(-1)[0]]
    };
    h.closeFocused = function() {
        var a = h.focused.pop();
        h.close(a)
    };
    h.isOpen = function(a) {
        "string" === typeof a && (-1 === a.indexOf("#") && (a = "#" + a),
            a = document.querySelector(a));
        if (a) return "none" === a.style.display ? !1 : -1 !== (" " + a.className + " ").indexOf(" opened ")
    };
    h.isClosed = function(a) {
        return !h.isOpen(a)
    };
    h.toggle = function(a, d) {
        var f, c = document.getElementById(a);
        if (!c) return console.log("missing", arguments);
        h.isOpen(c) ? (h.close(a), f = !1) : (h.open(a), h.restore(), f = !0);
        d && setTimeout(function() {
            d(f)
        }, 1)
    };
    var g = {
        x: 0,
        y: 0,
        left: 0,
        right: 0,
        top: 0,
        bottom: 0,
        vAlign: "top",
        hAlign: "left"
    };
    h.setClamp = function(a, d, f, c, k) {
        "object" === typeof a && (a.element && h.setContainer(a.element),
            k = a.format, c = a.height, f = a.width, d = a.y, a = a.x);
        g.x = a || null;
        g.y = d || null;
        g.width = f || null;
        g.height = c || null;
        g.format = k
    };
    h.setContainer = function(a) {
        var d = sk.util.getMetrics(a);
        g.element = a;
        g.metrics = d;
        g.left = d.x1;
        g.right = d.x2;
        g.top = d.y1;
        g.bottom = d.y2
    };
    h.drag = function(a, d) {
        var f = document.documentElement.scrollTop,
            c = document.documentElement.scrollLeft;
        return eventjs.proxy.drag({
            event: d,
            target: a,
            position: "move",
            listener: function(d, e) {
                eventjs.cancel(d);
                var l = sk.util.getMetrics(e.target),
                    p = l.border[0],
                    r = l.border[2];
                e.target.state = e.state;
                e.width = l.width;
                e.height = l.height;
                var l = g.x || 0,
                    q = g.y || 0,
                    u = g.width || window.innerWidth,
                    v = g.height || window.innerHeight;
                e.x + e.width > u && (e.x = u - e.width);
                e.x < l && (e.x = l);
                e.y + e.height > v && (e.y = v - e.height);
                e.y < q && (e.y = q);
                e.target.moved = !0;
                a.style.left = Math.ceil(e.x - p) + "px";
                a.style.top = Math.ceil(e.y - r) + "px";
                q = h.byId(a.id);
                "down" === e.state ? (p = q.zIndexFixed ? q.zIndexFixed : ++zIndexGlobal, a.style.zIndex = p) : "up" === e.state && (l = "bottom" === q.vAlign ? e.y - g.bottom : e.y - g.top - f, q = "right" === q.hAlign ? e.x - g.right : e.x - g.left - c, h.record({
                    id: a.id,
                    x: q - p,
                    y: l - r,
                    left: q / window.innerWidth,
                    top: l / window.innerHeight,
                    index: zIndexGlobal
                }), h.restore())
            }
        })
    };
    h.write = function(a) {
        h.createWindow(a);
        (a = document.querySelector("#sketch-help .content")) && eventjs.proxy.wheelPreventElasticBounce(a);
        h.restore()
    };
    h.createWindow = function(b, d) {
        var f = document.querySelector("#avgrund-" + b);
        if (f || d) {
            var c = "sketch-" + b,
                g = document.querySelector("#" + c);
            if (g) h.toggle(c);
            else {
                g = document.createElement("div");
                g.className = "sk-window";
                g.id = c;
                var m = document.createElement("div");
                m.className = "sk-header";
                var l = document.createElement("div");
                l.className = "sk-header-text sk-" + b + "-header";
                var p = document.createElement("span");
                p.className = "sk-close icon-close";
                var r = document.createElement("div");
                r.className = "content";
                eventjs.add(r, "mousedown", eventjs.stop);
                m.appendChild(l);
                m.appendChild(p);
                g.appendChild(m);
                g.appendChild(r);
                document.querySelector(".sketchapi .sk-viewport").appendChild(g);
                h.add({
                    id: c,
                    left: 0,
                    top: 0,
                    display: !0
                });
                h.record({
                    id: c,
                    left: 0.5 - g.offsetWidth / window.innerWidth,
                    top: 0.1,
                    index: ++zIndexGlobal
                });
                h.addWindowEvent(g);
                h.lazyloader("#avgrund-" + b + " .lazy");
                r = g.querySelector(".content");
                r.innerHTML = d || f && f.innerHTML;
                eventjs.proxy.wheelPreventElasticBounce(r);
                l = g.querySelector(".sk-" + b + "-header");
                (c = document.getElementById("avgrund-" + b + "-tabs")) ? (dom.removeChildNodes(l), l.appendChild(c.cloneNode(!0))) : (b = STRING.ucwords(b), "About" === b && (b = "about-version"), l.innerHTML = "<span>" + a.language.translate(b) + "</span>");
                c = Math.min(420, 0.75 * window.innerWidth) + "px";
                l = Math.min(500, Math.round(0.75 * window.innerHeight)) + "px";
                g.style.width = c;
                r.style.width = "100%";
                r.style.maxHeight = l;
                g.querySelector("input") && a.uploader.initFileInput(g.querySelector("input"));
                h.restore()
            }
        } else if (f = document.querySelector("#sketch-file ." + b)) {
            var g = document.querySelector("#sketch-file"),
                r = g.querySelectorAll(".data"),
                l = b.split("-"),
                c = l[0],
                l = l[1];
            l || (b = g.getAttribute("data-" + c) || c + "-computer", l = b.split("-")[1]);
            g.setAttribute("data-" + c, b);
            if (f = g.querySelector(".tabs .selected")) f.className = (" " + f.className + " ").replace(" selected ", "");
            g.querySelector(".tab-" + c).className += " selected";
            if (f = g.querySelector(".leftBar .selected.option")) f.className = (" " + f.className + " ").replace(" selected ", "");
            if (l) {
                if (f = g.querySelector(".leftBar .link-" + b)) f.className += " selected";
                g.className = ((" " + g.className + " ").replace(" subcontent ", "") + " subcontent").trim()
            } else g.className = (" " + g.className + " ").replace(" subcontent ", "").trim();
            f = g.querySelectorAll(".leftBar .text");
            for (m = 0; m < f.length; m++) f[m].style.display = l ? "none" : "inline-block";
            for (m = 0; m < r.length; m++) r[m].style.display = "none";
            (r = g.querySelector("." + c + " .innerContent")) && l && (l = g.querySelector("." + b), l.style.display = "block", r.appendChild(l));
            g.querySelector("." + c).style.display = "block";
            r && (g.style.minHeight = "230px");
            a.loader.stop();
            a.uploader.createFileInput(document.querySelector(".sk-window .file-input"))
        }
    };
    h.addWindowEvent = function(b) {
        var d, f = b.id;
        eventjs.add({
            target: b,
            contextmenu: function(a) {
                d && d.remove && d.remove()
            },
            mousedown: function(a) {
                d = h.drag(this,
                    a)
            },
            mouseover: function(a) {
                eventjs.stop(a);
                sk.setTooltip("")
            }
        });
        "sk-canvas" === f && eventjs.add(b, "dbltap", function(a) {
            b.className = ""
        });
        "sketch-tools" !== f && ((f = b.querySelector("span.sk-close")) && eventjs.add({
            target: f,
            mousedown: eventjs.stop,
            click: function(a, b) {
                eventjs.cancel(a);
                window.setTimeout(function() {
                    h.close(b.target.parentNode.parentNode.id)
                }, 1)
            }
        }), a.util.each(b.querySelectorAll(".tree"), function(a) {
            eventjs.add(a, "click", function(a, b) {
                h.setCurrentTab("sk-open", ".start")
            })
        }))
    };
    h.lazyloader = function(a) {
        a = document.querySelectorAll(a);
        for (var d = 0; d < a.length; d++) {
            var f = a[d];
            f.src = f.getAttribute("data-src");
            f.className = (" " + f.className + " ").replace(" lazy ", " ").trim()
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.configure && (sketch.configure = {});
"undefined" === typeof sketch.configure.tools && (sketch.configure.tools = {});
(function(a) {
    var h = function(b, c, d) {
            b = a.util.clone("object" === typeof b ? b : a.configure.tools[b]);
            b.type = c;
            a.configure.tools[c] = b;
            if (d) for (var e in d) null === d[e] ? delete b[e] : b[e] = d[e]
        }, d = a.ui.vars,
        g = function() {
            if (a.style) return new a.style.Fill
        }, b = function() {
            if (a.style) return new a.style.Stroke({
                lineWidth: 0
            })
        };
    a.configure.tools.select = {
        toolkit: "select",
        type: "select",
        opacity: new d.clamp(100, 0, 100, "%")
    };
    a.configure.tools.crop = {
        toolkit: "crop",
        type: "crop",
        ratio: new d.select("ratio", "377 x 197 (Facebook)",

            function() {
                return a.ui.PROJECT.param.presets
            }, function(b, c) {
                var d = a.ui.PROJECT.getPresetData(c),
                    e = {};
                e[b] = d;
                a.tool.update(e)
            }),
        constrain: new d.checkbox("constrain", !0)
    };
    a.configure.tools.zoom = {
        toolkit: "zoom",
        type: "zoom",
        amount: new d.clamp(100, 10, 500, "%")
    };
    var e = {
        toolkit: "shape",
        composite: "source-over",
        movement: "placement",
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(100, 0, 100, "%")
    };
    h(e, "rectangle", {
        roundness: new d.clamp(0, 0, 100, "float")
    });
    h(e, "regularPolygon", {
        sides: new d.clamp(5, 3, 25, "int")
    });
    h(e, "gear", {
        sides: new d.clamp(30, 2, 100, "int"),
        slope: new d.clamp(1.1, 0.001, 1, "float")
    });
    h(e, "star", {
        sides: new d.clamp(5, 2, 100, "int"),
        slope: new d.clamp(0.5, 1, 10, "float")
    });
    h(e, "burst", {
        sides: new d.clamp(5, 2, 100, "int"),
        slope: new d.clamp(0.001, 0.001, 10, "float")
    });
    h(e, "radialBurst", {
        sides: new d.clamp(12, 1, 100, "int"),
        spread: new d.clamp(0.5, - 1, 1, "float")
    });
    h(e, "spiral", {
        sides: new d.clamp(10, 1, 50, "int"),
        coils: new d.clamp(1, 1, 10, "int"),
        spread: new d.clamp(25, 0.5, 50, "%")
    });
    h(e, "supershape", {
        points: new d.clamp(500, 50, 1E3, "int"),
        m: new d.clamp(39, 0.1, 50, "int"),
        n1: new d.clamp(1, 0.1, 15, "float"),
        n2: new d.clamp(0.9, 0.1, 15, "float"),
        n3: new d.clamp(0.25, 0.1, 15, "float")
    });
    h(e, "ellipse");
    h(e, "circle");
    h("rectangle", "square");
    h("regularPolygon", "triangle", {
        sides: null
    });
    a.configure.tools.text = {
        toolkit: "text",
        type: "text",
        composite: "source-over",
        opacity: new d.clamp(100, 1, 100, "%"),
        fontWeight: "normal",
        fontSize: new d.clamp(30, 1, 120, "float"),
        fontFamily: "Arial",
        fontVariant: "normal",
        fontStyle: "normal",
        lineHeight: new d.clamp(30, 1, 120, "float"),
        letterSpacing: new d.clamp(0, 0, 20, "float"),
        textAlign: "center",
        textDecoration: "none",
        textTransform: "none",
        whiteSpace: "normal",
        fill: g(),
        stroke: b()
    };
    a.configure.tools.image = {
        toolkit: "media",
        type: "image",
        composite: "source-over",
        src: "./media/stamp/Basic/0-live.png",
        opacity: new d.clamp(100, 1, 100, "%")
    };
    a.configure.tools.clipart = {
        toolkit: "media",
        type: "clipart",
        composite: "source-over",
        color: "rgba(0,0,0,1)",
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(100, 1, 100, "%"),
        filePicker: new d.filePicker
    };
    e = {
        toolkit: "brush",
        composite: "source-over",
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(100, 0, 100, "%"),
        spacing: {
            min: 3,
            max: a.util.INFINITY
        }
    };
    h(e, "pencil", {
        diameter: new d.clamp(2, 1, 100, "px")
    });
    h(e, "textbrush", {
        diameter: new d.clamp(10, 1, 100, "px"),
        content: new d.textarea('"The quick brown fox jumps over the lazy dog" is an English-language pangram \u2013 a phrase that contains all of the letters of the English alphabet.')
    });
    h(e, "path", {
        diameter: new d.clamp(1, 1, 100, "px")
    });
    h(e, "scissor", {
        diameter: new d.clamp(1, 1, 100, "px")
    });
    h(e, "eraser", {
        composite: "erase",
        diameter: new d.clamp(40, 1, 250, "px"),
        blur: new d.clamp(0, 0, 100, "%")
    });
    h(e, "paintbrush", {
        diameter: new d.clamp(100, 1, 250, "px"),
        blur: new d.clamp(20, 0, 100, "%")
    });
    h(e, "streamer", {
        spacing: {
            min: 1,
            max: 50
        }
    });
    h(e, "calligraphy", {
        diameter: new d.clamp(17, 1, 50, "px")
    });
    a.configure.tools.chrome = {
        toolkit: "brush",
        type: "chrome",
        composite: "source-over",
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(25, 1, 100, "%"),
        spacing: {
            min: 1,
            max: 100
        },
        lineWidth: new d.clamp(1, 0.1, 5, "px"),
        spread: new d.clamp(20, 1, 50, "float"),
        lookback: 2E3
    };
    a.configure.tools.shader = {
        toolkit: "brush",
        type: "shader",
        composite: "source-over",
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(75, 1, 100, "%"),
        spacing: {
            min: 1,
            max: 100
        },
        lineWidth: new d.clamp(0.5, 0.1, 5, "px"),
        spread: new d.clamp(40, 1, 50, "float"),
        lookback: 2E3
    };
    a.configure.tools.sketchy = {
        toolkit: "brush",
        type: "sketchy",
        composite: "source-over",
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(50, 1, 100, "%"),
        spacing: {
            min: 1,
            max: 100
        },
        lineWidth: new d.clamp(1, 0.1, 5, "px"),
        spread: new d.clamp(40, 1, 50, "float"),
        lookback: 2E3
    };
    a.configure.tools.web = {
        toolkit: "brush",
        type: "web",
        composite: "source-over",
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(25, 1, 100, "%"),
        spacing: {
            min: 1,
            max: 100
        },
        lineWidth: new d.clamp(1, 0.1, 5, "px"),
        spread: new d.clamp(70, 1, 100, "int"),
        lookback: 2E3
    };
    a.configure.tools.fur = {
        toolkit: "brush",
        type: "fur",
        composite: "source-over",
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(100, 1, 100, "%"),
        spacing: {
            min: 1,
            max: 10
        },
        lineWidth: new d.clamp(0.5, 0.1, 5, "px"),
        diameter: new d.clamp(250, 1, 500, "px"),
        lookback: 2E3
    };
    a.configure.tools.hair = {
        toolkit: "brush",
        type: "hair",
        composite: "source-over",
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(100, 1, 100, "%"),
        spacing: {
            min: 1,
            max: 10
        },
        lineWidth: new d.clamp(0.5, 0.1, 10, "px"),
        diameter: new d.clamp(50, 1, 100, "px"),
        lookback: 20
    };
    a.configure.tools.spirograph = {
        toolkit: "brush",
        type: "spirograph",
        composite: "source-over",
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(60, 1, 100, "%"),
        spacing: {
            min: 1,
            max: a.util.INFINITY
        },
        lineWidth: new d.clamp(0.1, 0.1, 2, "px"),
        distance: new d.clamp(100, 1, 250, "float"),
        contract: 0.005,
        outerRadius: new d.clamp(35.16814159292035,
            1, 100, "float"),
        innerRadius: new d.clamp(43.92920353982301, 1, 100, "float"),
        increment: new d.clamp(0.576991150442478, 0.1, 5, "float")
    };
    a.configure.tools.spraypaint = {
        toolkit: "brush",
        type: "spraypaint",
        composite: "source-over",
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(25, 1, 100, "%"),
        spacing: {
            min: 1,
            max: 100
        },
        diameter: new d.clamp(50, 25, 250, "px")
    };
    a.configure.tools.crayon = {
        toolkit: "brush",
        type: "crayon",
        composite: "source-over",
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(100, 1, 100, "%"),
        rotate: {
            hidden: !0,
            min: 0,
            max: 360
        },
        diameter: new d.clamp(19,
            3, 42, "px")
    };
    a.configure.tools.stamp = {
        toolkit: "brush",
        type: "stamp",
        composite: "source-over",
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(100, 1, 100, "%"),
        diameter: new d.clamp(100, 5, 500, "px"),
        rotate: new d.clamp([1, 360], 1, 360, "degree"),
        scale: new d.clamp([0.05, 1.5], 0.05, 3, "px"),
        translate: new d.clamp([0, 0], 0, 250, "px"),
        spacing: new d.clamp([15, a.util.INFINITY], 1, 250, "px"),
        pollock: !1,
        src: "./media/stamp/Water Colors/0-live.png"
    };
    a.configure.tools.floodfill = {
        toolkit: "brush",
        type: "floodfill",
        composite: "source-over",
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(100, 1, 100, "%"),
        tolerance: new d.clamp(60, 1, 100, "%"),
        antialias: !1,
        contiguous: !0,
        click: !0
    };
    a.configure.tools.oil = {
        toolkit: "brush",
        type: "oil",
        composite: "source-over",
        blend: 0.98,
        bristles: 8,
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(100, 1, 100, "%"),
        spacing: {
            min: 1,
            max: 1
        },
        diameter: new d.clamp(50, 1, 100, "px")
    };
    a.configure.tools.pastel = {
        toolkit: "brush",
        type: "pastel",
        composite: "source-over",
        blend: 0.97,
        bristles: 35,
        fill: g(),
        stroke: b(),
        opacity: new d.clamp(100, 1, 100, "%"),
        rotate: {
            hidden: !0,
            min: 0,
            max: 360
        },
        diameter: new d.clamp(25, 3, 42, "px")
    };
    h("pencil", "arrow");
    a.configure.tools.arrow.diameter.value = 14;
    h("pencil", "rainbow");
    h("path", "polygon");
    h("path", "polyline");
    h("clipart", "symbol");
    (function() {
        var b = a.util.clone(a.configure.tools);
        a.reset.configure = function(c) {
            a.configure.tools[c] = a.util.clone(b[c])
        }
    })()
})(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function(a) {
    var h, d, g = function(b) {
        var d = b.ctx,
            f = d.canvas,
            c = d.createPattern(f, "repeat");
        a.supports.io.blob ? f.toBlob(function(a) {
            a = URL.createObjectURL(a);
            c.css = "url('" + a + "')";
            c.data = a;
            c.canvas = f;
            b.callback && b.callback(c)
        }) : (d = f.toDataURL(), c.css = "url('" + d + "')", c.data = d, b.callback && b.callback(c));
        return c
    };
    a.gen.paper = function(b, d) {
        var f = (a.convert.metrics || sketch.util.getScreenMetrics())["in>px"],
            f = {
                notebook: {
                    lineStartTop: 0.85 * f,
                    lineHeight: 30,
                    lineColor: "#8CA6BD",
                    marginLeft: 0.85 * f,
                    marginColor: "#FF7088",
                    fillColor: "#F8F9B3"
                },
                looseLeaf: {
                    lineStartTop: 0.85 * f,
                    lineHeight: 30,
                    lineColor: "#CAEAFB",
                    marginLeft: 0.85 * f,
                    marginColor: "#FF7088",
                    fillColor: "#FAFAFA"
                },
                lined: {
                    lineStartTop: -0.5,
                    gutter: 0.25 * f,
                    lineHeight: 30,
                    lineColor: "#8CA6BD",
                    fillColor: "#FAFAFA"
                }
            };
        b = f[b] || b || f.notebook;
        b.callback = d;
        var c = b.grid || 0,
            h = b.gutter || 0,
            m = b.lineStartTop || 0,
            l = b.lineStartLeft || 0,
            f = b.lineHeight || 1,
            p = b.lineColor || "#8CA6BD",
            r = b.marginLeft || 0,
            q = b.marginColor || "#C37F9B",
            u = document.createElement("canvas").getContext("2d");
        u.canvas.width = 1024;
        u.canvas.height = 1024;
        u.fillStyle = b.fillColor || "#fff";
        u.fillRect(0, 0, 1024, 1024);
        c && (u.save(), u.translate(h, h), c = a.gen.grid({
            size: c,
            strokeColor: p,
            fillColor: "none"
        }), u.fillStyle = c, u.fillRect(0, 0, 1024, 1024), u.restore());
        c = 1024 / f;
        u.save();
        u.translate(l, m);
        for (m = 0; m < c; m++) u.beginPath(), u.moveTo(0, m * f), u.lineTo(1024, m * f), u.lineWidth = 1, u.strokeStyle = p, u.stroke();
        u.restore();
        r && (u.save(), u.beginPath(), u.moveTo(r, 0), u.lineTo(r, 1024), u.lineWidth = 1, u.strokeStyle = q, u.stroke(), u.restore());
        b.ctx = u;
        return g(b)
    };
    a.gen.grid = function(a, d) {
        var f = {
            grid: {
                size: 20,
                strokeColor: "#ddd",
                fillColor: "#fff"
            },
            graphPaper: {
                size: 20,
                strokeColor: "#BEE0BD",
                fillColor: "#F0FCE1"
            },
            bluePrint: {
                size: 20,
                strokeColor: "#2893e0",
                fillColor: "#0078CF"
            }
        }, c = document.createElement("canvas").getContext("2d");
        a = f[a] || a || f.grid;
        a.callback = d || a.callback;
        a.ctx = c;
        var f = a.size || 12,
            h = a.strokeColor || "#000",
            m = a.fillColor || "#1f1f1f";
        c.canvas.width = f;
        c.canvas.height = f;
        c.fillStyle = m;
        c.fillRect(0, 0, f, f);
        c.moveTo(0, 0);
        c.lineTo(0, f);
        c.moveTo(0, 0);
        c.lineTo(f, 0);
        c.lineWidth = 1;
        c.strokeStyle = h;
        c.stroke();
        return g(a)
    };
    a.gen.interlace = function(a, d) {
        var f = {
            transparent: {
                size: 12,
                innerColor: "#fff",
                outerColor: "#d9d9d9"
            },
            transparentDark: {
                size: 12,
                innerColor: "#000",
                outerColor: "#1f1f1f"
            }
        }, c = document.createElement("canvas").getContext("2d");
        a = f[a] || a || f.grid;
        a.callback = d || a.callback;
        a.ctx = c;
        var f = a.size || 12,
            h = a.innerColor || "#000",
            m = a.outerColor || "#1f1f1f";
        c.canvas.width = 2 * f;
        c.canvas.height = 2 * f;
        c.fillStyle = h;
        c.fillRect(0, 0, f, f);
        c.fillStyle = m;
        c.fillRect(f, 0, f, f);
        c.fillStyle = m;
        c.fillRect(0, f, f, f);
        c.fillStyle = h;
        c.fillRect(f, f, f, f);
        return g(a)
    };
    a.gen.rangeBar = function(b) {
        b = b || {};
        b.dash = b.dash || {};
        a.ui.rangeStyle ? sketch.util.mergeObject(sketch.ui.rangeStyle, b) : b.top = 8;
        h || (h = document.createElement("canvas"), d = h.getContext("2d"));
        var e = a.canvas2d.pixelRatio,
            f = (b.top || 0) * e,
            c = (b.left || 0) * e,
            g = (b.barWidth || 233) * e,
            m = (b.barHeight || 6) * e,
            l = b.fillStyle || "#555",
            p = b.gradient,
            r = f + m;
        b = b.dash;
        b.height = b.height || 4;
        b.heightSmall = b.heightSmall || 3;
        b.strokeStyle = b.strokeStyle || "#666";
        b.lineWidth = b.lineWidth || 1;
        b.globalAlpha = b.globalAlpha || 1;
        b.position = b.position || "top";
        h.width = g + 1;
        h.height = m + b.height + f;
        h.style.width = h.width / e + "px";
        h.style.height = h.height / e + "px";
        d.clearRect(c, f, g, 30);
        var e = 0,
            q = g - 9;
        d.save();
        d.beginPath();
        d.lineWidth = b.lineWidth;
        d.globalAlpha = b.globalAlpha;
        var u;
        u = "bottom" === b.position ? r - 5 : f - 1;
        for (var v = b.height, s = b.heightSmall, r = 0; r <= q + 1; r += q / 10) {
            var x = Math.round(r) + c + 4.5,
                w = e % 5 ? s : v;
            d.moveTo(x, u);
            "bottom" === b.position ? d.lineTo(x, u + w) : d.lineTo(x, u - w);
            d.strokeStyle = b.strokeStyle;
            d.stroke();
            d.beginPath();
            e++
        }
        d.restore();
        if (p) for (l = d.createLinearGradient(0, 0, g, 0), r = 0, b = p.length; r < b; r++) l.addColorStop(r / (b - 1 || 1), p[r]);
        d.fillStyle = l;
        x = c + 0.5;
        d.lineWidth = 0.25;
        d.strokeStyle = "#000";
        sketch.vector.shape ? sketch.vector.shape.roundRect(d, x, f, x + g, m, m / 2) : d.rect(x, f, x + g, m);
        d.fill();
        d.stroke();
        return h
    };
    return a
}(sketch);
(function() {
    sketch.debugTest = function() {
        var a = sketch;
        a.loc.search.debug && a.scene.add({
            scale: 1,
            data: [],
            onload: function() {}
        })
    }
})();
"undefined" === typeof sketch && (sketch = {});
(function(a) {
    var h = function() {
        dom.setCSS("#window-container", "display", "block");
        var b = a.util.parseUri(window.location.search).queryKey,
            c;
        for (c in b) "" === b[c] && (b[c] = !0);
        a.util.exists("chrome.fileSystem.chooseEntry") && (dom.setCSS("#tool-menu-export", "display", "none"), dom.setCSS(".export-project-cloud", "display", "none"));
        a.construct({
            onready: function() {
                e();
                if (a.windows.isOpen("sk-open")) {
                    var b = a.windows.byId("sk-open");
                    a.ui.openProjectWindow(b.className)
                }
                a.feature.kiosk && require("nw.gui").Window.get().enterKioskMode();
                a.palette.init(function() {
                    alertify.log("Welcome to Sketchpad v" + a.__version);
                    a.$("#filters").style.display = "none";
                    a.$("#sk-canvas").style.display = "block";
                    eventjs.proxy.wheelPreventElasticBounce("#filters");
                    a.feature.stream.videoAtop ? (a.$("#videos").style.display = "block", a.rtc.arrange("singleBottomRight")) : (a.$("#videos").style.display = "none", a.rtc.pause());
                    a.open.fromQuery(window.location.search, function() {
                        if (a.feature.debug) a.debugTest();
                        else {
                            var b = a.scene.getLast() || {};
                            a.exec(b.type || "streamer");
                            a.style.updateFromObject("fill", b)
                        }
                    })
                })
            },
            onsupport: function() {
                b.beta && (sk.toolkit.__icons.brushes.oil = "icon-oil", sk.toolkit.__icons.brushes.textbrush = "icon-textbrush", sk.toolkit.__icons.brushes.shader = "icon-shader", sk.toolkit.__icons.shapes.rectangle = "icon-square", sk.toolkit.__icons.shapes.ellipse = "icon-ellipse", sk.toolkit.__icons.shapes.supershape = "icon-supershape", d.right.floodfill = "");
                a.windows.setClamp({
                    element: document.body,
                    format: "px",
                    x: a.canvas2d.bounds.x1 = 0,
                    y: a.canvas2d.bounds.y1 = 40
                });
                a.windows.add({
                    "sk-configure": {
                        format: "px",
                        position: "top right",
                        left: -258,
                        top: 40
                    },
                    "sk-open": {
                        format: "%",
                        position: "top left",
                        left: 0.5 - 260 / window.innerWidth,
                        top: 0.5 - 112.5 / window.innerHeight
                    },
                    "sk-palette": {
                        format: "px",
                        position: "top left",
                        left: 20,
                        top: 40
                    }
                });
                !1 === a.supports.fileSystem && dom.setCSS(".open-project-start", "display", "none")
            },
            container: "#sk-canvas .sk-canvas-content",
            configure: {
                lang: "en",
                defaultSketch: "sketch=new",
                prefix: "sketch-src",
                background: "transparent",
                defaultFill: {
                    type: "color"
                }
            },
            icons: {
                brushes: {
                    arrow: "icon-arrow",
                    calligraphy: "icon-calligraphy",
                    crayon: "icon-crayon",
                    paintbrush: "icon-paintbrush",
                    pencil: "icon-pencil",
                    spraypaint: "icon-spraypaint",
                    streamer: "icon-brush",
                    chrome: "icon-chrome",
                    fur: "icon-fur",
                    sketchy: "icon-sketchy",
                    web: "icon-web",
                    spirograph: "icon-spirograph"
                },
                shapes: {
                    square: "icon-square",
                    circle: "icon-circle",
                    regularPolygon: "icon-polygon",
                    triangle: "icon-triangle",
                    star: "icon-star",
                    burst: "icon-burst",
                    gear: "icon-gear",
                    radialBurst: "icon-radial-burst",
                    spiral: "icon-spiral"
                }
            },
            feature: {
                log: b.debug,
                cache257: !0,
                cache2D: !0,
                debug: b.debug,
                preventScroll: !b.debug,
                kiosk: !1,
                exportDrop: !0,
                project: {
                    title: "Drawing",
                    description: "made with Sketchpad - https://sketch.io/sketchpad",
                    format: "sketch",
                    bounds: {
                        style: {
                            lineWidth: 1
                        }
                    }
                },
                vector: {
                    record: !0,
                    edit: !0
                },
                canvas: {
                    zoom: {
                        min: 0.25,
                        max: 100,
                        increment: 0.1
                    },
                    scaleContainer: !0,
                    openDefaultProject: !0,
                    clearWithBackground: !1,
                    saveWithBackground: !1
                },
                fileSystem: !0,
                ui: {
                    mediaSelect: !0,
                    tooltips: !0
                },
                hotkeys: "select text pencil stamp star floodfill clipart eraser camera".split(" "),
                history: {
                    vector: !0,
                    limit: a.util.INFINITY,
                    autoSelect: !0
                },
                tools: {
                    controls: {
                        mouse: {
                            width: 21,
                            height: 21,
                            padding: 10
                        },
                        touch: {
                            width: 21,
                            height: 21,
                            padding: 10
                        },
                        anchor: {
                            command: "move",
                            title: "Click To Select",
                            "title:selected": "Drag to Move",
                            "title.text": "Double Click To Edit",
                            padding: 0
                        },
                        ne: {
                            title: "Drag To Resize",
                            command: "rotateScale"
                        },
                        nw: {
                            title: "Drag To Resize",
                            command: "rotateScale"
                        },
                        se: {
                            title: "Drag To Resize",
                            command: "rotateScale"
                        },
                        sw: {
                            title: "Drag To Resize",
                            command: "rotateScale"
                        }
                    },
                    drawBoundingBox: !0,
                    usePointInPath: !1,
                    usePointInBoundingBox: !0,
                    usePointInImageData: !0,
                    usePointNearest: !0,
                    movable: !0,
                    text: {
                        minWidth: 2,
                        minHeight: 2,
                        defaultWidth: 50,
                        defaultHeight: 50,
                        clickToPlace: !0,
                        dragToPlace: !0
                    },
                    image: {
                        filter: !0
                    }
                },
                placement: {
                    drag: !0,
                    click: !1,
                    mediaClick: !1,
                    mediaDrag: !0,
                    maxWidth: 2048,
                    maxHeight: 2048,
                    minWidth: 5,
                    minHeight: 5,
                    constrainToCanvas: !1
                },
                palette: {
                    blend: !0,
                    hexInput: !0,
                    colorPicker: !0,
                    eyeDropper: !0,
                    gradient: !0,
                    pattern: !0,
                    grid: !0,
                    gridInstantLoad: !1,
                    header: ""
                },
                stream: {
                    maxFileSize: 0,
                    audio: !1,
                    video: !0,
                    videoAtop: !0,
                    sketch: !1,
                    sketchLive: !1,
                    text: !1,
                    tech: "WebSocket"
                },
                sync: {
                    folder: !0,
                    thumb: {
                        format: "png",
                        toBlob: !0,
                        suffix: "thumb",
                        compress: 1,
                        width: 480,
                        height: 480,
                        getBoundingBox: !1,
                        clampToLayer: !0,
                        center: !0,
                        crop: "fit"
                    }
                }
            },
            hosts: {
                localhost: {
                    pathWeb: "localhost/sketch.io/sketch-src/www/",
                    pathJS: "localhost/sketch.io/sketch-src/www/js/",
                    hostIO: "localhost:4000",
                    hostRTC: "localhost:3001",
                    alias: ["192.168.0.3", "mud.local"]
                },
                "localhost:3001": {
                    feature: {
                        stream: {
                            sketch: !0,
                            sketchLive: !0,
                            videoAtop: !1
                        }
                    },
                    pathWeb: "localhost:3001/",
                    pathJS: "localhost:3001/js/",
                    pathGet: "localhost:4000/get/",
                    pathPost: "localhost:4000/save/",
                    hostIO: "localhost:4000",
                    hostRTC: "localhost:3001",
                    alias: "192.168.0.3"
                },
                "spectra.nodejitsu.com": {
                    pathWeb: "spectra.nodejitsu.com/",
                    pathJS: "spectra.nodejitsu.com/js/",
                    pathGet: "spectra0.nodejitsu.com/get/",
                    pathPost: "spectra0.nodejitsu.com/save/",
                    hostIO: "spectra0.nodejitsu.com",
                    hostRTC: "spectra.nodejitsu.com"
                },
                "sketch.io": {
                    pathWeb: "sketch.io/",
                    pathJS: "sketch.io/js/",
                    hostIO: "sketch.io:4000",
                    hostRTC: "sketch.io",
                    alias: "spectra.mudcu.be"
                }
            }
        })
    }, d = "localhost:3001" === window.location.host ? {
        left: {
            menu: "",
            "menu-download": "download",
            "menu-export": "upload",
            "menu-about": "help",
            palette: "./media/ux/tools/ColorPicker.png"
        },
        right: {
            select: "",
            text: "",
            streamer: "",
            stamp: "",
            star: "",
            eraser: ""
        }
    } : {
        left: {
            menu: "",
            "menu-download": "download",
            "menu-export": "upload",
            "menu-about": "help",
            palette: "./media/ux/tools/ColorPicker.png"
        },
        right: {
            crop: "",
            select: "",
            text: "",
            streamer: "",
            stamp: "",
            star: "",
            clipart: "",
            eraser: "",
            camera: ""
        }
    }, g = function(a, b, c) {
        if (a = a[c]) window.innerWidth <= b ? (a.display = !1, dom.setCSS(".sk-toolbar #tool-" + c, "display", "none")) : a.display = !0
    };
    sketch.on.resize = function() {
        dom.setCSS(".sk-toolbar .sk-button", "display", "");
        g(d.right, 210, "select");
        g(d.right, 240, "stamp");
        g(d.right, 270, "clipart");
        g(d.right, 300, "text");
        g(d.right, 330, "eraser");
        g(d.right, 360, "camera");
        g(d.left, 390, "menu-download");
        g(d.left, 420, "menu-export");
        g(d.left, 450, "menu-about");
        b()
    };
    var b = function() {
        var b = sketch.$("#sk-canvas .sk-canvas-content"),
            c = b.querySelector(".sk-toolset-stylesheet") || document.createElement("style"),
            e = a.util.count(d.left, "display", !0),
            f = a.util.count(d.right, "display", !0),
            g = e + f,
            h = 100 * (f / g),
            u = Math.min(90 * f, 585),
            v = 1 * u / f;
        c.className = "sk-toolset-stylesheet";
        c.type = "text/css";
        c.innerHTML = "\tdiv.sk-toolbar div.left {\t\tfloat: left;\t\twidth: " + 100 * (e / g) + "%;\t}\tdiv.sk-toolbar div.right {\t\tfloat: right;\t\twidth: " + h + "%;\t\tmax-width: " + u + "px;\t}\tdiv.sk-toolbar div.left .sk-button {\t\twidth: " + 100 * (1 / e) + "%;\t\tmax-width: " + v + "px;\t}\tdiv.sk-toolbar div.right .sk-button {\t\twidth: " + 100 * (1 / f) + "%;\t\tmax-width: " + v + "px;\t}";
        b.appendChild(c)
    }, e = function() {
        var c = function(b, c) {
            for (var d in b) {
                var e = b[d],
                    f = "";
                "star" === d && (f = " shapes");
                "streamer" === d && (f = " brushes");
                f = {
                    id: "tool-" + d,
                    title: STRING.ucwords(d.replace("menu-", "")),
                    className: "sk-button" + f,
                    parent: c
                };
                0 === e.indexOf(".") ? f.src = e : f.symbol = "icon-" + (e || d);
                f = new a.ui.button(f);
                (a.detect("brush", d) && dom.hasClass(f, "brushes") || a.detect("shape", d) && dom.hasClass(f, "shapes")) && f.appendChild(dom.create('<span class="sk-arrow"></span>'));
                b[d] = {
                    icon: e,
                    display: !0
                }
            }
        };
        !1 === a.peer.detectGetUserMedia() && delete d.right.camera;
        eventjs.add({
            target: sketch.$(".sk-toolset"),
            mouseover: function(b) {
                a.setTooltip("")
            }
        });
        c(d.left, sketch.$(".sk-toolset .left"));
        c(d.right, sketch.$(".sk-toolset .right"));
        a.ui.toolset.initEvents();
        a.on.resize();
        b()
    };
    if ("function" === typeof FlashCanvas) var f = window,
        c = "load";
    else f = "body", c = "ready";
    eventjs.add(f, c, function() {
        glfx.loadFilters(h);
        a.vector.text.attach({
            name: "Capriola",
            filepath: "capriola/Capriola"
        })
    })
})(sketch);
var jsPDF = function() {
    function a(g, b, e, f) {
        g = "undefined" === typeof g ? "p" : g.toString().toLowerCase();
        "undefined" === typeof b && (b = "mm");
        "undefined" === typeof e && (e = "a4");
        "undefined" === typeof f && "undefined" === typeof zpipe && (f = !1);
        var c = e.toString().toLowerCase(),
            k = [],
            m = 0,
            l = f;
        f = {
            a0: [2383.94, 3370.39],
            a1: [1683.78, 2383.94],
            a2: [1190.55, 1683.78],
            a3: [841.89, 1190.55],
            a4: [595.28, 841.89],
            a5: [419.53, 595.28],
            a6: [297.64, 419.53],
            a7: [209.76, 297.64],
            a8: [147.4, 209.76],
            a9: [104.88, 147.4],
            a10: [73.7, 104.88],
            b0: [2834.65, 4008.19],
            b1: [2004.09, 2834.65],
            b2: [1417.32, 2004.09],
            b3: [1000.63, 1417.32],
            b4: [708.66, 1000.63],
            b5: [498.9, 708.66],
            b6: [354.33, 498.9],
            b7: [249.45, 354.33],
            b8: [175.75, 249.45],
            b9: [124.72, 175.75],
            b10: [87.87, 124.72],
            c0: [2599.37, 3676.54],
            c1: [1836.85, 2599.37],
            c2: [1298.27, 1836.85],
            c3: [918.43, 1298.27],
            c4: [649.13, 918.43],
            c5: [459.21, 649.13],
            c6: [323.15, 459.21],
            c7: [229.61, 323.15],
            c8: [161.57, 229.61],
            c9: [113.39, 161.57],
            c10: [79.37, 113.39],
            letter: [612, 792],
            "government-letter": [576, 756],
            legal: [612, 1008],
            "junior-legal": [576, 360],
            ledger: [1224,
                792],
            tabloid: [792, 1224]
        };
        var p = "0 g",
            r = 0,
            q = [],
            u = 2,
            v = !1,
            s = [],
            x = {}, w = {}, A = 16,
            y, z, B, D, E = {
                title: "",
                subject: "",
                author: "",
                keywords: "",
                creator: ""
            }, G = 0,
            J = 0,
            C = {}, O = new d(C),
            N, L = function(a) {
                return a.toFixed(2)
            }, Q = function(a) {
                var b = a.toFixed(0);
                return 10 > a ? "0" + b : b
            }, K = function(a) {
                v ? q[r].push(a) : (k.push(a), m += a.length + 1)
            }, F = function() {
                u++;
                s[u] = m;
                K(u + " 0 obj");
                return u
            }, aa = function(a) {
                K("stream");
                K(a);
                K("endstream")
            }, U, Z, T, P = function(a, b) {
                var c;
                c = a;
                var d = b,
                    e, f, g, h, k, l;
                void 0 === d && (d = {});
                e = d.sourceEncoding ? e : "Unicode";
                g = d.outputEncoding;
                if ((d.autoencode || g) && (x[y].metadata && x[y].metadata[e] && x[y].metadata[e].encoding) && (e = x[y].metadata[e].encoding, !g && x[y].encoding && (g = x[y].encoding), !g && e.codePages && (g = e.codePages[0]), "string" === typeof g && (g = e[g]), g)) {
                    k = !1;
                    h = [];
                    e = 0;
                    for (f = c.length; e < f; e++)(l = g[c.charCodeAt(e)]) ? h.push(String.fromCharCode(l)) : h.push(c[e]), h[e].charCodeAt(0) >> 8 && (k = !0);
                    c = h.join("")
                }
                for (e = c.length; void 0 === k && 0 !== e;) c.charCodeAt(e - 1) >> 8 && (k = !0), e--;
                if (k) {
                    h = d.noBOM ? [] : [254, 255];
                    e = 0;
                    for (f = c.length; e < f; e++) {
                        l = c.charCodeAt(e);
                        d = l >> 8;
                        if (d >> 8) throw Error("Character at position " + e.toString(10) + " of string '" + c + "' exceeds 16bits. Cannot be encoded into UCS-2 BE");
                        h.push(d);
                        h.push(l - (d << 8))
                    }
                    c = String.fromCharCode.apply(void 0, h)
                }
                return c.replace(/\\/g, "\\\\").replace(/\(/g, "\\(").replace(/\)/g, "\\)")
            }, Y = function() {
                r++;
                v = !0;
                q[r] = [];
                K(L(0.200025 * D) + " w");
                K("0 G");
                0 !== G && K(G.toString(10) + " J");
                0 !== J && K(J.toString(10) + " j");
                O.publish("addPage", {
                    pageNumber: r
                })
            }, da = function(a, b) {
                var c;
                void 0 === a && (a = x[y].fontName);
                void 0 === b && (b = x[y].fontStyle);
                try {
                    c = w[a][b]
                } catch (d) {
                    c = void 0
                }
                if (!c) throw Error("Unable to look up font label for font '" + a + "', '" + b + "'. Refer to getFontList() for available fonts.");
                return c
            }, ia = function() {
                v = !1;
                k = [];
                s = [];
                K("%PDF-1.3");
                U = B * D;
                Z = z * D;
                var a, b, c, d, e;
                for (a = 1; a <= r; a++) {
                    F();
                    K("<</Type /Page");
                    K("/Parent 1 0 R");
                    K("/Resources 2 0 R");
                    K("/Contents " + (u + 1) + " 0 R>>");
                    K("endobj");
                    b = q[a].join("\n");
                    F();
                    if (l) {
                        c = [];
                        for (d = 0; d < b.length; ++d) c[d] = b.charCodeAt(d);
                        e = adler32cs.from(b);
                        b = new Deflater(6);
                        b.append(new Uint8Array(c));
                        b = b.flush();
                        c = [new Uint8Array([120, 156]), new Uint8Array(b), new Uint8Array([e & 255, e >> 8 & 255, e >> 16 & 255, e >> 24 & 255])];
                        b = "";
                        for (d in c) c.hasOwnProperty(d) && (b += String.fromCharCode.apply(null, c[d]));
                        K("<</Length " + b.length + " /Filter [/FlateDecode]>>")
                    } else K("<</Length " + b.length + ">>");
                    aa(b);
                    K("endobj")
                }
                s[1] = m;
                K("1 0 obj");
                K("<</Type /Pages");
                T = "/Kids [";
                for (d = 0; d < r; d++) T += 3 + 2 * d + " 0 R ";
                K(T + "]");
                K("/Count " + r);
                K("/MediaBox [0 0 " + L(U) + " " + L(Z) + "]");
                K(">>");
                K("endobj");
                for (var f in x) x.hasOwnProperty(f) && (a = x[f], a.objectNumber = F(), K("<</BaseFont/" + a.PostScriptName + "/Type/Font"), "string" === typeof a.encoding && K("/Encoding/" + a.encoding), K("/Subtype/Type1>>"), K("endobj"));
                O.publish("putResources");
                s[2] = m;
                K("2 0 obj");
                K("<<");
                K("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");
                K("/Font <<");
                for (var g in x) x.hasOwnProperty(g) && K("/" + g + " " + x[g].objectNumber + " 0 R");
                K(">>");
                K("/XObject <<");
                O.publish("putXobjectDict");
                K(">>");
                K(">>");
                K("endobj");
                O.publish("postPutResources");
                F();
                K("<<");
                K("/Producer (jsPDF 0.9.0rc2)");
                E.title && K("/Title (" + P(E.title) + ")");
                E.subject && K("/Subject (" + P(E.subject) + ")");
                E.author && K("/Author (" + P(E.author) + ")");
                E.keywords && K("/Keywords (" + P(E.keywords) + ")");
                E.creator && K("/Creator (" + P(E.creator) + ")");
                f = new Date;
                K("/CreationDate (D:" + [f.getFullYear(), Q(f.getMonth() + 1), Q(f.getDate()), Q(f.getHours()), Q(f.getMinutes()), Q(f.getSeconds())].join("") + ")");
                K(">>");
                K("endobj");
                F();
                K("<<");
                K("/Type /Catalog");
                K("/Pages 1 0 R");
                K("/OpenAction [3 0 R /FitH null]");
                K("/PageLayout /OneColumn");
                O.publish("putCatalog");
                K(">>");
                K("endobj");
                f = m;
                K("xref");
                K("0 " + (u + 1));
                K("0000000000 65535 f ");
                for (g = 1; g <= u; g++) a = s[g].toFixed(0), a = 10 > a.length ? Array(11 - a.length).join("0") + a : a, K(a + " 00000 n ");
                K("trailer");
                K("<<");
                K("/Size " + (u + 1));
                K("/Root " + u + " 0 R");
                K("/Info " + (u - 1) + " 0 R");
                K(">>");
                K("startxref");
                K(f);
                K("%%EOF");
                v = !0;
                return k.join("\n")
            }, na = function(a) {
                var b = "S";
                if ("F" === a) b = "f";
                else if ("FD" === a || "DF" === a) b = "B";
                return b
            }, pa = function(a, b) {
                var c, d, e, f;
                switch (a) {
                    case void 0:
                        return ia();
                    case "blob":
                    case "save":
                        if (navigator.getUserMedia && (void 0 === window.URL || void 0 === window.URL.createObjectURL)) return C.output("dataurlnewwindow");
                        c = ia();
                        d = c.length;
                        e = new Uint8Array(new ArrayBuffer(d));
                        for (f = 0; f < d; f++) e[f] = c.charCodeAt(f);
                        c = new Blob([e], {
                            type: "application/pdf"
                        });
                        if ("save" === a) {
                            saveAs(c, b);
                            break
                        } else return c;
                    case "datauristring":
                    case "dataurlstring":
                        return "data:application/pdf;base64," + btoa(ia());
                    case "datauri":
                    case "dataurl":
                        document.location.href = "data:application/pdf;base64," + btoa(ia());
                        break;
                    case "dataurlnewwindow":
                        window.open("data:application/pdf;base64," + btoa(ia()));
                        break;
                    default:
                        throw Error('Output type "' + a + '" is not supported.');
                }
            };
        if ("pt" === b) D = 1;
        else if ("mm" === b) D = 72 / 25.4;
        else if ("cm" === b) D = 72 / 2.54;
        else if ("in" === b) D = 72;
        else throw "Invalid unit: " + b;
        if (f.hasOwnProperty(c)) z = f[c][1] / D, B = f[c][0] / D;
        else try {
            z = e[1], B = e[0]
        } catch (ea) {
            throw "Invalid format: " + e;
        }
        if ("p" === g || "portrait" === g) g = "p", B > z && (g = B, B = z, z = g);
        else if ("l" === g || "landscape" === g) g = "l", z > B && (g = B, B = z, z = g);
        else throw "Invalid orientation: " + g;
        C.internal = {
            pdfEscape: P,
            getStyle: na,
            getFont: function() {
                return x[da.apply(C,
                    arguments)]
            },
            getFontSize: function() {
                return A
            },
            getLineHeight: function() {
                return 1.15 * A
            },
            btoa: btoa,
            write: function(a, b, c, d) {
                K(1 === arguments.length ? a : Array.prototype.join.call(arguments, " "))
            },
            getCoordinateString: function(a) {
                return L(a * D)
            },
            getVerticalCoordinateString: function(a) {
                return L((z - a) * D)
            },
            collections: {},
            newObject: F,
            putStream: aa,
            events: O,
            scaleFactor: D,
            pageSize: {
                width: B,
                height: z
            },
            output: function(a, b) {
                return pa(a, b)
            },
            getNumberOfPages: function() {
                return q.length - 1
            },
            pages: q
        };
        C.addPage = function() {
            Y();
            return this
        };
        C.text = function(a, b, c, d) {
            var e, f;
            "number" === typeof a && (e = a, f = b, a = c, b = e, c = f);
            "string" === typeof a && a.match(/[\n\r]/) && (a = a.split(/\r\n|\r|\n/g));
            "undefined" === typeof d ? d = {
                noBOM: !0,
                autoencode: !0
            } : (void 0 === d.noBOM && (d.noBOM = !0), void 0 === d.autoencode && (d.autoencode = !0));
            if ("string" === typeof a) d = P(a, d);
            else if (a instanceof Array) {
                a = a.concat();
                for (e = a.length - 1; - 1 !== e; e--) a[e] = P(a[e], d);
                d = a.join(") Tj\nT* (")
            } else throw Error('Type of text must be string or Array. "' + a + '" is not recognized.');
            K("BT\n/" + y + " " + A + " Tf\n" + 1.15 * A + " TL\n" + p + "\n" + L(b * D) + " " + L((z - c) * D) + " Td\n(" + d + ") Tj\nET");
            return this
        };
        C.line = function(a, b, c, d) {
            K(L(a * D) + " " + L((z - b) * D) + " m " + L(c * D) + " " + L((z - d) * D) + " l S");
            return this
        };
        C.lines = function(a, b, c, d, e, f) {
            var g, h, k, l, m, p, q, r;
            "number" === typeof a && (g = a, h = b, a = c, b = g, c = h);
            e = na(e);
            d = void 0 === d ? [1, 1] : d;
            K((b * D).toFixed(3) + " " + ((z - c) * D).toFixed(3) + " m ");
            g = d[0];
            d = d[1];
            h = a.length;
            r = c;
            for (c = 0; c < h; c++) k = a[c], 2 === k.length ? (b = k[0] * g + b, r = k[1] * d + r, K((b * D).toFixed(3) + " " + ((z - r) * D).toFixed(3) + " l")) : (l = k[0] * g + b, m = k[1] * d + r, p = k[2] * g + b, q = k[3] * d + r, b = k[4] * g + b, r = k[5] * d + r, K((l * D).toFixed(3) + " " + ((z - m) * D).toFixed(3) + " " + (p * D).toFixed(3) + " " + ((z - q) * D).toFixed(3) + " " + (b * D).toFixed(3) + " " + ((z - r) * D).toFixed(3) + " c"));
            !0 == f && K(" h");
            K(e);
            return this
        };
        C.rect = function(a, b, c, d, e) {
            e = na(e);
            K([L(a * D), L((z - b) * D), L(c * D), L(-d * D), "re", e].join(" "));
            return this
        };
        C.triangle = function(a, b, c, d, e, f, g) {
            this.lines([
                [c - a, d - b],
                [e - c, f - d],
                [a - e, b - f]
            ], a, b, [1, 1], g, !0);
            return this
        };
        C.roundedRect = function(a, b, c, d, e, f, g) {
            var h = 4 / 3 * (Math.SQRT2 - 1);
            this.lines([
                [c - 2 * e, 0],
                [e * h, 0, e, f - f * h, e, f],
                [0, d - 2 * f],
                [0, f * h, - (e * h), f, - e, f],
                [-c + 2 * e, 0],
                [-(e * h), 0, - e, - (f * h), - e, - f],
                [0, - d + 2 * f],
                [0, - (f * h), e * h, - f, e, - f]
            ], a + e, b, [1, 1], g);
            return this
        };
        C.ellipse = function(a, b, c, d, e) {
            e = na(e);
            var f = 4 / 3 * (Math.SQRT2 - 1) * c,
                g = 4 / 3 * (Math.SQRT2 - 1) * d;
            K([L((a + c) * D), L((z - b) * D), "m", L((a + c) * D), L((z - (b - g)) * D), L((a + f) * D), L((z - (b - d)) * D), L(a * D), L((z - (b - d)) * D), "c"].join(" "));
            K([L((a - f) * D), L((z - (b - d)) * D), L((a - c) * D), L((z - (b - g)) * D), L((a - c) * D), L((z - b) * D), "c"].join(" "));
            K([L((a - c) * D), L((z - (b + g)) * D), L((a - f) * D), L((z - (b + d)) * D), L(a * D), L((z - (b + d)) * D), "c"].join(" "));
            K([L((a + f) * D), L((z - (b + d)) * D), L((a + c) * D), L((z - (b + g)) * D), L((a + c) * D), L((z - b) * D), "c", e].join(" "));
            return this
        };
        C.circle = function(a, b, c, d) {
            return this.ellipse(a, b, c, c, d)
        };
        C.setProperties = function(a) {
            for (var b in E) E.hasOwnProperty(b) && a[b] && (E[b] = a[b]);
            return this
        };
        C.setFontSize = function(a) {
            A = a;
            return this
        };
        C.setFont = function(a, b) {
            y = da(a, b);
            return this
        };
        C.setFontStyle = C.setFontType = function(a) {
            y = da(void 0, a);
            return this
        };
        C.getFontList = function() {
            var a = {}, b, c, d;
            for (b in w) if (w.hasOwnProperty(b)) for (c in a[b] = d = [], w[b]) w[b].hasOwnProperty(c) && d.push(c);
            return a
        };
        C.setLineWidth = function(a) {
            K((a * D).toFixed(2) + " w");
            return this
        };
        C.setDrawColor = function(a, b, c, d) {
            a = void 0 === b || void 0 === d && a === b === c ? "string" === typeof a ? a + " G" : L(a / 255) + " G" : void 0 === d ? "string" === typeof a ? [a, b, c, "RG"].join(" ") : [L(a / 255), L(b / 255), L(c / 255), "RG"].join(" ") : "string" === typeof a ? [a, b, c, d, "K"].join(" ") : [L(a), L(b), L(c), L(d), "K"].join(" ");
            K(a);
            return this
        };
        C.setFillColor = function(a, b, c, d) {
            a = void 0 === b || void 0 === d && a === b === c ? "string" === typeof a ? a + " g" : L(a / 255) + " g" : void 0 === d ? "string" === typeof a ? [a, b, c, "rg"].join(" ") : [L(a / 255), L(b / 255), L(c / 255), "rg"].join(" ") : "string" === typeof a ? [a, b, c, d, "k"].join(" ") : [L(a), L(b), L(c), L(d), "k"].join(" ");
            K(a);
            return this
        };
        C.setTextColor = function(a, b, c) {
            p = 0 === a && 0 === b && 0 === c || "undefined" === typeof b ? (a / 255).toFixed(3) + " g" : [(a / 255).toFixed(3), (b / 255).toFixed(3), (c / 255).toFixed(3), "rg"].join(" ");
            return this
        };
        C.CapJoinStyles = {
            0: 0,
            butt: 0,
            but: 0,
            miter: 0,
            1: 1,
            round: 1,
            rounded: 1,
            circle: 1,
            2: 2,
            projecting: 2,
            project: 2,
            square: 2,
            bevel: 2
        };
        C.setLineCap = function(a) {
            var b = this.CapJoinStyles[a];
            if (void 0 === b) throw Error("Line cap style of '" + a + "' is not recognized. See or extend .CapJoinStyles property for valid styles");
            G = b;
            K(b.toString(10) + " J");
            return this
        };
        C.setLineJoin = function(a) {
            var b = this.CapJoinStyles[a];
            if (void 0 === b) throw Error("Line join style of '" + a + "' is not recognized. See or extend .CapJoinStyles property for valid styles");
            J = b;
            K(b.toString(10) + " j");
            return this
        };
        C.output = pa;
        C.save = function(a) {
            C.output("save", a)
        };
        for (N in a.API) a.API.hasOwnProperty(N) && ("events" === N && a.API.events.length ? function(a, b) {
            var c, d, e;
            for (e = b.length - 1; - 1 !== e; e--) c = b[e][0], d = b[e][1], a.subscribe.apply(a, [c].concat("function" === typeof d ? [d] : d))
        }(O, a.API.events) : C[N] = a.API[N]);
        (function() {
            var a = [
                    ["Helvetica", "helvetica", "normal"],
                    ["Helvetica-Bold", "helvetica", "bold"],
                    ["Helvetica-Oblique", "helvetica", "italic"],
                    ["Helvetica-BoldOblique", "helvetica", "bolditalic"],
                    ["Courier", "courier", "normal"],
                    ["Courier-Bold", "courier", "bold"],
                    ["Courier-Oblique", "courier", "italic"],
                    ["Courier-BoldOblique", "courier", "bolditalic"],
                    ["Times-Roman", "times", "normal"],
                    ["Times-Bold", "times", "bold"],
                    ["Times-Italic", "times", "italic"],
                    ["Times-BoldItalic", "times", "bolditalic"]
                ],
                b, c, d, e;
            b = 0;
            for (c = a.length; b < c; b++) {
                var f = a[b][0],
                    g = a[b][1];
                d = a[b][2];
                e = "F" + (h(x) + 1).toString(10);
                var f = x[e] = {
                        id: e,
                        PostScriptName: f,
                        fontName: g,
                        fontStyle: d,
                        encoding: "StandardEncoding",
                        metadata: {}
                    },
                    k = e;
                void 0 === w[g] && (w[g] = {});
                w[g][d] = k;
                O.publish("addFont", f);
                d = e;
                e = a[b][0].split("-");
                f = e[0];
                e = e[1] || "";
                void 0 === w[f] && (w[f] = {});
                w[f][e] = d
            }
            O.publish("addFonts", {
                fonts: x,
                dictionary: w
            })
        })();
        y = "F1";
        Y();
        O.publish("initialized");
        return C
    }
    "undefined" === typeof btoa && (window.btoa = function(a) {
        var b = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),
            d, f, c, h, m = 0,
            l = 0,
            p = "",
            p = [];
        do d = a.charCodeAt(m++), f = a.charCodeAt(m++), c = a.charCodeAt(m++), h = d << 16 | f << 8 | c, d = h >> 18 & 63, f = h >> 12 & 63, c = h >> 6 & 63, h &= 63, p[l++] = b[d] + b[f] + b[c] + b[h];
        while (m < a.length);
        p = p.join("");
        a = a.length % 3;
        return (a ? p.slice(0, a - 3) : p) + "===".slice(a || 3)
    });
    "undefined" === typeof atob && (window.atob = function(a) {
        var b, d, f, c, h, m = 0,
            l = 0;
        c = "";
        var p = [];
        if (!a) return a;
        a += "";
        do b = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(m++)), d = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(m++)), c = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(m++)),
            h = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(m++)), f = b << 18 | d << 12 | c << 6 | h, b = f >> 16 & 255, d = f >> 8 & 255, f &= 255, 64 === c ? p[l++] = String.fromCharCode(b) : 64 === h ? p[l++] = String.fromCharCode(b, d) : p[l++] = String.fromCharCode(b, d, f);
        while (m < a.length);
        return c = p.join("")
    });
    var h = "function" === typeof Object.keys ? function(a) {
        return Object.keys(a).length
    } : function(a) {
        var b = 0,
            d;
        for (d in a) a.hasOwnProperty(d) && b++;
        return b
    }, d = function(a) {
        this.topics = {};
        this.context = a;
        this.publish = function(a,
                                d) {
            if (this.topics[a]) {
                var f = this.topics[a],
                    c = [],
                    g, h, l, p, r = function() {};
                d = Array.prototype.slice.call(arguments, 1);
                h = 0;
                for (l = f.length; h < l; h++) p = f[h], g = p[0], p[1] && (p[0] = r, c.push(h)), g.apply(this.context, d);
                h = 0;
                for (l = c.length; h < l; h++) f.splice(c[h], 1)
            }
        };
        this.subscribe = function(a, d, f) {
            this.topics[a] ? this.topics[a].push([d, f]) : this.topics[a] = [
                [d, f]
            ];
            return {
                topic: a,
                callback: d
            }
        };
        this.unsubscribe = function(a) {
            if (this.topics[a.topic]) {
                var d = this.topics[a.topic],
                    f, c;
                f = 0;
                for (c = d.length; f < c; f++) d[f][0] === a.callback && d.splice(f, 1)
            }
        }
    };
    a.API = {
        events: []
    };
    return a
}();
(function(a) {
    var h = function() {
        var a = this.internal.collections.addImage_images,
            b;
        for (b in a) {
            var d = a[b],
                f = this.internal.newObject(),
                c = this.internal.write,
                h = this.internal.putStream;
            d.n = f;
            c("<</Type /XObject");
            c("/Subtype /Image");
            c("/Width " + d.w);
            c("/Height " + d.h);
            "Indexed" === d.cs ? c("/ColorSpace [/Indexed /DeviceRGB " + (d.pal.length / 3 - 1) + " " + (f + 1) + " 0 R]") : (c("/ColorSpace /" + d.cs), "DeviceCMYK" === d.cs && c("/Decode [1 0 1 0 1 0 1 0]"));
            c("/BitsPerComponent " + d.bpc);
            "f" in d && c("/Filter /" + d.f);
            "dp" in d && c("/DecodeParms <<" + d.dp + ">>");
            if ("trns" in d && d.trns.constructor == Array) for (var m = "", l = 0; l < d.trns.length; l++) m += d[m][l] + " " + d.trns[l] + " ", c("/Mask [" + m + "]");
            "smask" in d && c("/SMask " + (f + 1) + " 0 R");
            c("/Length " + d.data.length + ">>");
            h(d.data);
            c("endobj")
        }
    }, d = function() {
        var a = this.internal.collections.addImage_images,
            b = this.internal.write,
            d, f;
        for (f in a) d = a[f], b("/I" + d.i, d.n, "0", "R")
    };
    a.addImage = function(a, b, e, f, c, k) {
        if ("object" === typeof a && 1 === a.nodeType) {
            b = document.createElement("canvas");
            b.width = a.clientWidth;
            b.height = a.clientHeight;
            var m = b.getContext("2d");
            if (!m) throw "addImage requires canvas to be supported by browser.";
            m.drawImage(a, 0, 0, b.width, b.height);
            a = b.toDataURL("image/jpeg");
            b = "JPEG"
        }
        if ("JPEG" !== b.toUpperCase()) throw Error("addImage currently only supports format 'JPEG', not '" + b + "'");
        var l;
        b = this.internal.collections.addImage_images;
        var m = this.internal.getCoordinateString,
            p = this.internal.getVerticalCoordinateString;
        "data:image/jpeg;base64," === a.substring(0, 23) && (a = atob(a.replace("data:image/jpeg;base64,", "")));
        if (b) if (Object.keys) l = Object.keys(b).length;
        else {
            var r = b,
                q = 0;
            for (l in r) r.hasOwnProperty(l) && q++;
            l = q
        } else l = 0, this.internal.collections.addImage_images = b = {}, this.internal.events.subscribe("putResources", h), this.internal.events.subscribe("putXobjectDict", d);
        a: {
            var r = a,
                u;
            if (255 === !r.charCodeAt(0) || 216 === !r.charCodeAt(1) || 255 === !r.charCodeAt(2) || 224 === !r.charCodeAt(3) || 74 === !r.charCodeAt(6) || 70 === !r.charCodeAt(7) || 73 === !r.charCodeAt(8) || 70 === !r.charCodeAt(9) || 0 === !r.charCodeAt(10)) throw Error("getJpegSize requires a binary jpeg file");
            u = 256 * r.charCodeAt(4) + r.charCodeAt(5);
            for (var q = 4, v = r.length; q < v;) {
                q += u;
                if (255 !== r.charCodeAt(q)) throw Error("getJpegSize could not find the size of the image");
                if (192 === r.charCodeAt(q + 1) || 193 === r.charCodeAt(q + 1) || 194 === r.charCodeAt(q + 1) || 195 === r.charCodeAt(q + 1) || 196 === r.charCodeAt(q + 1) || 197 === r.charCodeAt(q + 1) || 198 === r.charCodeAt(q + 1) || 199 === r.charCodeAt(q + 1)) {
                    u = 256 * r.charCodeAt(q + 5) + r.charCodeAt(q + 6);
                    r = 256 * r.charCodeAt(q + 7) + r.charCodeAt(q + 8);
                    r = [r, u];
                    break a
                }
                q += 2;
                u = 256 * r.charCodeAt(q) + r.charCodeAt(q + 1)
            }
            r = void 0
        }
        a = {
            w: r[0],
            h: r[1],
            cs: "DeviceRGB",
            bpc: 8,
            f: "DCTDecode",
            i: l,
            data: a
        };
        b[l] = a;
        c || k || (k = c = -96);
        0 > c && (c = -72 * a.w / c / this.internal.scaleFactor);
        0 > k && (k = -72 * a.h / k / this.internal.scaleFactor);
        0 === c && (c = k * a.w / a.h);
        0 === k && (k = c * a.h / a.w);
        this.internal.write("q", m(c), "0 0", m(k), m(e), p(f + k), "cm /I" + a.i, "Do Q");
        return this
    }
})(jsPDF.API);
(function(a) {
    function h(a, b, c, d) {
        this.pdf = a;
        this.x = b;
        this.y = c;
        this.settings = d;
        this.init();
        return this
    }
    function d(a) {
        var b = c[a];
        if (b) return b;
        b = {
            "xx-small": 9,
            "x-small": 11,
            small: 13,
            medium: 16,
            large: 19,
            "x-large": 23,
            "xx-large": 28,
            auto: 0
        }[a];
        if (void 0 !== b || (b = parseFloat(a))) return c[a] = b / 16;
        b = a.match(/([\d\.]+)(px)/);
        return 3 === b.length ? c[a] = parseFloat(b[1]) / 16 : c[a] = 1
    }
    function g(a, c, h) {
        var p = a.childNodes,
            r;
        r = $(a);
        a = {};
        for (var q, u = r.css("font-family").split(","), v = u.shift(); !q && v;) q = b[v.trim().toLowerCase()],
            v = u.shift();
        a["font-family"] = q || "times";
        a["font-style"] = f[r.css("font-style")] || "normal";
        q = e[r.css("font-weight")] || "normal";
        "bold" === q && (a["font-style"] = "normal" === a["font-style"] ? q : q + a["font-style"]);
        a["font-size"] = d(r.css("font-size")) || 1;
        a["line-height"] = d(r.css("line-height")) || 1;
        a.display = "inline" === r.css("display") ? "inline" : "block";
        "block" === a.display && (a["margin-top"] = d(r.css("margin-top")) || 0, a["margin-bottom"] = d(r.css("margin-bottom")) || 0, a["padding-top"] = d(r.css("padding-top")) || 0, a["padding-bottom"] = d(r.css("padding-bottom")) || 0);
        if (q = "block" === a.display) c.setBlockBoundary(), c.setBlockStyle(a);
        u = 0;
        for (v = p.length; u < v; u++) if (r = p[u], "object" === typeof r) if (1 === r.nodeType && "SCRIPT" != r.nodeName) {
            var s = r,
                x = c,
                w = h,
                A = !1,
                y = void 0,
                z = void 0,
                B = w["#" + s.id];
            if (B) if ("function" === typeof B) A = B(s, x);
            else for (y = 0, z = B.length; !A && y !== z;) A = B[y](s, x), y++;
            B = w[s.nodeName];
            if (!A && B) if ("function" === typeof B) A = B(s, x);
            else for (y = 0, z = B.length; !A && y !== z;) A = B[y](s, x), y++;
            A || g(r, c, h)
        } else 3 === r.nodeType && c.addText(r.nodeValue,
            a);
        else "string" === typeof r && c.addText(r, a);
        q && c.setBlockBoundary()
    }
    String.prototype.trim || (String.prototype.trim = function() {
        return this.replace(/^\s+|\s+$/g, "")
    });
    String.prototype.trimLeft || (String.prototype.trimLeft = function() {
        return this.replace(/^\s+/g, "")
    });
    String.prototype.trimRight || (String.prototype.trimRight = function() {
        return this.replace(/\s+$/g, "")
    });
    h.prototype.init = function() {
        this.paragraph = {
            text: [],
            style: []
        };
        this.pdf.internal.write("q")
    };
    h.prototype.dispose = function() {
        this.pdf.internal.write("Q");
        return {
            x: this.x,
            y: this.y
        }
    };
    h.prototype.splitFragmentsIntoLines = function(a, b) {
        for (var c = this.pdf.internal.scaleFactor, d = {}, e, f, g, h, s, x = [], w = [x], A = 0, y = this.settings.width; a.length;) if (h = a.shift(), s = b.shift(), h) if (e = s["font-family"], f = s["font-style"], g = d[e + f], g || (g = this.pdf.internal.getFont(e, f).metadata.Unicode, d[e + f] = g), e = {
            widths: g.widths,
            kerning: g.kerning,
            fontSize: 12 * s["font-size"],
            textIndent: A
        }, f = this.pdf.getStringUnitWidth(h, e) * e.fontSize / c, A + f > y) {
            h = this.pdf.splitTextToSize(h, y, e);
            for (x.push([h.shift(),
                s]); h.length;) x = [
                [h.shift(), s]
            ], w.push(x);
            A = this.pdf.getStringUnitWidth(x[0][0], e) * e.fontSize / c
        } else x.push([h, s]), A += f;
        return w
    };
    h.prototype.RenderTextFragment = function(a, b) {
        var c = this.pdf.internal.getFont(b["font-family"], b["font-style"]);
        this.pdf.internal.write("/" + c.id, (12 * b["font-size"]).toFixed(2), "Tf", "(" + this.pdf.internal.pdfEscape(a) + ") Tj")
    };
    h.prototype.renderParagraph = function() {
        for (var a = this.paragraph.text, b = 0, c = a.length, d, e = !1, f = !1; !e && b !== c;)(d = a[b] = a[b].trimLeft()) && (e = !0), b++;
        for (b = c - 1; c && !f && -1 !== b;)(d = a[b] = a[b].trimRight()) && (f = !0), b--;
        e = /\s+$/g;
        f = !0;
        for (b = 0; b !== c; b++) d = a[b].replace(/\s+/g, " "), f && (d = d.trimLeft()), d && (f = e.test(d)), a[b] = d;
        b = this.paragraph.style;
        d = (c = this.paragraph.blockstyle) || {};
        this.paragraph = {
            text: [],
            style: [],
            blockstyle: {},
            priorblockstyle: c
        };
        if (a.join("").trim()) {
            a = this.splitFragmentsIntoLines(a, b);
            b = 12 / this.pdf.internal.scaleFactor;
            e = (Math.max((c["margin-top"] || 0) - (d["margin-bottom"] || 0), 0) + (c["padding-top"] || 0)) * b;
            c = ((c["margin-bottom"] || 0) + (c["padding-bottom"] || 0)) * b;
            d = this.pdf.internal.write;
            var g, h;
            this.y += e;
            for (d("q", "BT", this.pdf.internal.getCoordinateString(this.x), this.pdf.internal.getVerticalCoordinateString(this.y), "Td"); a.length;) {
                e = a.shift();
                g = f = 0;
                for (h = e.length; g !== h; g++) e[g][0].trim() && (f = Math.max(f, e[g][1]["line-height"], e[g][1]["font-size"]));
                d(0, (-12 * f).toFixed(2), "Td");
                g = 0;
                for (h = e.length; g !== h; g++) e[g][0] && this.RenderTextFragment(e[g][0], e[g][1]);
                this.y += f * b
            }
            d("ET", "Q");
            this.y += c
        }
    };
    h.prototype.setBlockBoundary = function() {
        this.renderParagraph()
    };
    h.prototype.setBlockStyle = function(a) {
        this.paragraph.blockstyle = a
    };
    h.prototype.addText = function(a, b) {
        this.paragraph.text.push(a);
        this.paragraph.style.push(b)
    };
    var b = {
        helvetica: "helvetica",
        "sans-serif": "helvetica",
        serif: "times",
        times: "times",
        "times new roman": "times",
        monospace: "courier",
        courier: "courier"
    }, e = {
        100: "normal",
        200: "normal",
        300: "normal",
        400: "normal",
        500: "bold",
        600: "bold",
        700: "bold",
        800: "bold",
        900: "bold",
        normal: "normal",
        bold: "bold",
        bolder: "bold",
        lighter: "normal"
    }, f = {
        normal: "normal",
        italic: "italic",
        oblique: "italic"
    }, c = {
        normal: 1
    };
    a.fromHTML = function(a, b, c, d) {
        if ("string" === typeof a) {
            var e = "jsPDFhtmlText" + Date.now().toString() + (1E3 * Math.random()).toFixed(0);
            $('<div style="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;"><iframe style="height:1px;width:1px" name="' + e + '" /></div>').appendTo(document.body);
            a = $(window.frames[e].document.body).html(a)[0]
        }
        b = new h(this, b, c, d);
        g(a, b, d.elementHandlers);
        return b.dispose()
    }
})(jsPDF.API);
(function(a) {
    a.addSVG = function(a, d, g, b, e) {
        function f(a) {
            for (var b = parseFloat(a[1]), c = parseFloat(a[2]), d = [], e = 3, f = a.length; e < f;) "c" === a[e] ? (d.push([parseFloat(a[e + 1]), parseFloat(a[e + 2]), parseFloat(a[e + 3]), parseFloat(a[e + 4]), parseFloat(a[e + 5]), parseFloat(a[e + 6])]), e += 7) : "l" === a[e] ? (d.push([parseFloat(a[e + 1]), parseFloat(a[e + 2])]), e += 3) : e += 1;
            return [b, c, d]
        }
        if (void 0 === d || void 0 === d) throw Error("addSVG needs values for 'x' and 'y'");
        var c = function(a) {
                var b = a.createElement("iframe"),
                    c = a.createElement("style");
                c.type = "text/css";
                c.styleSheet ? c.styleSheet.cssText = ".jsPDF_sillysvg_iframe {display:none;position:absolute;}" : c.appendChild(a.createTextNode(".jsPDF_sillysvg_iframe {display:none;position:absolute;}"));
                a.getElementsByTagName("head")[0].appendChild(c);
                b.name = "childframe";
                b.setAttribute("width", 0);
                b.setAttribute("height", 0);
                b.setAttribute("frameborder", "0");
                b.setAttribute("scrolling", "no");
                b.setAttribute("seamless", "seamless");
                b.setAttribute("class", "jsPDF_sillysvg_iframe");
                a.body.appendChild(b);
                return b
            }(document),
            c = function(a, b) {
                var c = (b.contentWindow || b.contentDocument).document;
                c.write(a);
                c.close();
                return c.getElementsByTagName("svg")[0]
            }(a, c);
        a = [1, 1];
        var k = parseFloat(c.getAttribute("width")),
            m = parseFloat(c.getAttribute("height"));
        k && m && (b && e ? a = [b / k, e / m] : b ? a = [b / k, b / k] : e && (a = [e / m, e / m]));
        c = c.childNodes;
        b = 0;
        for (e = c.length; b < e; b++) k = c[b], k.tagName && "PATH" === k.tagName.toUpperCase() && (k = f(k.getAttribute("d").split(" ")), k[0] = k[0] * a[0] + d, k[1] = k[1] * a[1] + g, this.lines.call(this, k[2], k[0], k[1], a));
        return this
    }
})(jsPDF.API);
(function(a) {
    var h = a.getCharWidthsArray = function(a, d) {
        d || (d = {});
        var f = d.widths ? d.widths : this.internal.getFont().metadata.Unicode.widths,
            c = f.fof ? f.fof : 1,
            g = d.kerning ? d.kerning : this.internal.getFont().metadata.Unicode.kerning,
            h = g.fof ? g.fof : 1,
            l, p, r, q = 0,
            u = f[0] || c,
            v = [];
        l = 0;
        for (p = a.length; l < p; l++) r = a.charCodeAt(l), v.push((f[r] || u) / c + (g[r] && g[r][q] || 0) / h), q = r;
        return v
    }, d = function(a) {
        for (var d = a.length, f = 0; d;) d--, f += a[d];
        return f
    };
    a.getStringUnitWidth = function(a, e) {
        return d(h.call(this, a, e))
    };
    var g = function(a,
                     e, f) {
        f || (f = {});
        var c = h(" ", f)[0],
            g = a.split(" "),
            m = [];
        a = [m];
        var l = f.textIndent || 0,
            p = 0,
            r = 0,
            q, u, v, s;
        v = 0;
        for (s = g.length; v < s; v++) {
            q = g[v];
            u = h(q, f);
            r = d(u);
            if (l + p + r > e) {
                if (r > e) {
                    for (var r = q, x = u, w = e, A = [], y = 0, z = r.length, B = 0; y !== z && B + x[y] < e - (l + p);) B += x[y], y++;
                    A.push(r.slice(0, y));
                    l = y;
                    for (B = 0; y !== z;) B + x[y] > w && (A.push(r.slice(l, y)), B = 0, l = y), B += x[y], y++;
                    l !== y && A.push(r.slice(l, y));
                    l = A;
                    m.push(l.shift());
                    for (m = [l.pop()]; l.length;) a.push([l.shift()]);
                    r = d(u.slice(q.length - m[0].length))
                } else m = [q];
                a.push(m);
                l = r
            } else m.push(q),
                l += p + r;
            p = c
        }
        e = [];
        v = 0;
        for (s = a.length; v < s; v++) e.push(a[v].join(" "));
        return e
    };
    a.splitTextToSize = function(a, d, f) {
        f || (f = {});
        var c = f.fontSize || this.internal.getFontSize(),
            h;
        var m = f;
        h = {
            0: 1
        };
        var l = {};
        m.widths && m.kerning ? h = {
            widths: m.widths,
            kerning: m.kerning
        } : (m = this.internal.getFont(m.fontName, m.fontStyle), h = m.metadata.Unicode ? {
            widths: m.metadata.Unicode.widths || h,
            kerning: m.metadata.Unicode.kerning || l
        } : {
            widths: h,
            kerning: l
        });
        a = a.match(/[\n\r]/) ? a.split(/\r\n|\r|\n/g) : [a];
        d = 1 * this.internal.scaleFactor * d / c;
        h.textIndent = f.textIndent ? 1 * f.textIndent * this.internal.scaleFactor / c : 0;
        l = [];
        f = 0;
        for (c = a.length; f < c; f++) l = l.concat(g(a[f], d, h));
        return l
    }
})(jsPDF.API);
(function(a) {
    var h = function(a) {
        for (var b = {}, c = 0; 16 > c; c++) b["klmnopqrstuvwxyz" [c]] = "0123456789abcdef" [c];
        for (var d = {}, g = 1, h, p = d, r = [], q, u = "", v = "", s, x = a.length - 1, c = 1; c != x;) q = a[c], c += 1, "'" == q ? h ? (s = h.join(""), h = void 0) : h = [] : h ? h.push(q) : "{" == q ? (r.push([p, s]), p = {}, s = void 0) : "}" == q ? (q = r.pop(), q[0][q[1]] = p, s = void 0, p = q[0]) : "-" == q ? g = -1 : void 0 === s ? b.hasOwnProperty(q) ? (u += b[q], s = parseInt(u, 16) * g, g = 1, u = "") : u += q : b.hasOwnProperty(q) ? (v += b[q], p[s] = parseInt(v, 16) * g, g = 1, s = void 0, v = "") : v += q;
        return d
    }, d = {
        codePages: ["WinAnsiEncoding"],
        WinAnsiEncoding: h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")
    }, g = {
        Unicode: {
            Courier: d,
            "Courier-Bold": d,
            "Courier-BoldOblique": d,
            "Courier-Oblique": d,
            Helvetica: d,
            "Helvetica-Bold": d,
            "Helvetica-BoldOblique": d,
            "Helvetica-Oblique": d,
            "Times-Roman": d,
            "Times-Bold": d,
            "Times-BoldItalic": d,
            "Times-Italic": d
        }
    }, b = {
        Unicode: {
            "Courier-Oblique": h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
            "Times-BoldItalic": h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),
            "Helvetica-Bold": h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),
            Courier: h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
            "Courier-BoldOblique": h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
            "Times-Bold": h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),
            Helvetica: h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),
            "Helvetica-BoldOblique": h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),
            "Courier-Bold": h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
            "Times-Italic": h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),
            "Times-Roman": h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),
            "Helvetica-Oblique": h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")
        }
    };
    a.events.push(["addFonts", function(a) {
        var d, c, h, m;
        for (c in a.fonts) if (a.fonts.hasOwnProperty(c)) {
            d = a.fonts[c];
            if (h = b.Unicode[d.PostScriptName]) m = d.metadata.Unicode ? d.metadata.Unicode : d.metadata.Unicode = {}, m.widths = h.widths, m.kerning = h.kerning;
            if (h = g.Unicode[d.PostScriptName]) m = d.metadata.Unicode ? d.metadata.Unicode : d.metadata.Unicode = {}, m.encoding = h, h.codePages && h.codePages.length && (d.encoding = h.codePages[0])
        }
    }])
})(jsPDF.API);
(function(a) {
    var h, d, g, b, e = {
        x: void 0,
        y: void 0,
        w: void 0,
        h: void 0,
        ln: void 0
    }, f = 1;
    a.setHeaderFunction = function(a) {
        b = a
    };
    a.getTextDimensions = function(a) {
        h = this.internal.getFont().fontName;
        d = this.internal.getFontSize();
        g = this.internal.getFont().fontStyle;
        var b = 19.049976 / 25.4,
            e;
        e = document.createElement("font");
        e.id = "jsPDFCell";
        e.style.fontStyle = g;
        e.style.fontName = h;
        e.style.fontSize = d + "pt";
        e.innerText = a;
        document.body.appendChild(e);
        a = {
            w: (e.offsetWidth + 1) * b,
            h: (e.offsetHeight + 1) * b
        };
        document.body.removeChild(e);
        return a
    };
    a.cellAddPage = function() {
        this.addPage();
        e = {
            x: void 0,
            y: void 0,
            w: void 0,
            h: void 0,
            ln: void 0
        };
        f += 1
    };
    a.cellInitialize = function() {
        e = {
            x: void 0,
            y: void 0,
            w: void 0,
            h: void 0,
            ln: void 0
        };
        f = 1
    };
    a.cell = function(a, b, d, f, g, h, q) {
        var u = e;
        void 0 !== u.ln && (u.ln === h ? (a = u.x + u.w, b = u.y) : (u.y + u.h + f + 13 >= this.internal.pageSize.height && (this.cellAddPage(), this.printHeaders && this.tableHeaderRow && this.printHeaderRow(h)), b = e.y + e.h));
        if ("" !== g[0]) if (this.printingHeaderRow ? this.rect(a, b, d, f, "FD") : this.rect(a, b, d, f), "right" === q) {
            if (g instanceof Array) for (q = 0; q < g.length; q++) {
                var u = g[q],
                    v = this.getStringUnitWidth(u) * this.internal.getFontSize();
                this.text(u, a + d - v - 3, b + this.internal.getLineHeight() * (q + 1))
            }
        } else this.text(g, a + 3, b + this.internal.getLineHeight());
        e = {
            x: a,
            y: b,
            w: d,
            h: f,
            ln: h
        };
        return this
    };
    a.getKeys = "function" === typeof Object.keys ? function(a) {
        return a ? Object.keys(a) : []
    } : function(a) {
        var b = [],
            d;
        for (d in a) a.hasOwnProperty(d) && b.push(d);
        return b
    };
    a.arrayMax = function(a, b) {
        var d = a[0],
            e, f, g;
        e = 0;
        for (f = a.length; e < f; e += 1) g = a[e],
            b ? -1 === b(d, g) && (d = g) : g > d && (d = g);
        return d
    };
    a.table = function(b, d, e) {
        var f = [],
            g = [],
            h, q, u, v = {}, s = {}, x, w, A = [],
            y, z = [],
            B;
        this.lnMod = 0;
        e && (this.printHeaders = e.printHeaders || !0);
        if (!b) throw "No data for PDF table";
        if (void 0 === d || null === d) f = this.getKeys(b[0]);
        else if (d[0] && "string" !== typeof d[0]) for (q = 0, u = d.length; q < u; q += 1) h = d[q], f.push(h.name), g.push(h.prompt), s[h.name] = h.width;
        else f = d;
        if (e.autoSize) for (B = function(a) {
            return a[h]
        }, q = 0, u = f.length; q < u; q += 1) {
            h = f[q];
            v[h] = b.map(B);
            A.push(this.getTextDimensions(g[q] || h).w);
            w = v[h];
            y = 0;
            for (u = w.length; y < u; y += 1) x = w[y], A.push(this.getTextDimensions(x).w);
            s[h] = a.arrayMax(A)
        }
        if (e.printHeaders) {
            e = this.calculateLineHeight(f, s, g.length ? g : f);
            q = 0;
            for (u = f.length; q < u; q += 1) h = f[q], z.push([13, 13, s[h], e, String(g.length ? g[q] : h)]);
            this.setTableHeaderRow(z);
            this.printHeaderRow(1)
        }
        q = 0;
        for (u = b.length; q < u; q += 1) for (g = b[q], e = this.calculateLineHeight(f, s, g), y = 0, z = f.length; y < z; y += 1) h = f[y], this.cell(13, 13, s[h], e, g[h], q + 2, d[y].align);
        return this
    };
    a.calculateLineHeight = function(a, b, d) {
        for (var e,
                 f = 0, g = 0; g < a.length; g++) e = a[g], d[e] = this.splitTextToSize(String(d[e]), b[e] - 3), e = this.internal.getLineHeight() * d[e].length + 3, e > f && (f = e);
        return f
    };
    a.setTableHeaderRow = function(a) {
        this.tableHeaderRow = a
    };
    a.printHeaderRow = function(a) {
        if (!this.tableHeaderRow) throw "Property tableHeaderRow does not exist.";
        var d, g, h;
        this.printingHeaderRow = !0;
        void 0 !== b && (g = b(this, f), e = {
            x: g[0],
            y: g[1],
            w: g[2],
            h: g[3],
            ln: -1
        });
        this.setFontStyle("bold");
        g = 0;
        for (h = this.tableHeaderRow.length; g < h; g += 1) this.setFillColor(200, 200, 200),
            d = this.tableHeaderRow[g], d = [].concat(d), this.cell.apply(this, d.concat(a));
        this.setFontStyle("normal");
        this.printingHeaderRow = !1
    }
})(jsPDF.API);
(function(a) {
    a.putTotalPages = function(a) {
        a = RegExp(a, "g");
        for (var d = 1; d <= this.internal.getNumberOfPages(); d++) for (var g = 0; g < this.internal.pages[d].length; g++) this.internal.pages[d][g] = this.internal.pages[d][g].replace(a, this.internal.getNumberOfPages());
        return this
    }
})(jsPDF.API);
var BlobBuilder = BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder || function(a) {
        var h = function(a) {
                return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]
            }, d = function() {
                this.data = []
            }, g = function(a, b, c) {
                this.data = a;
                this.size = a.length;
                this.type = b;
                this.encoding = c
            }, b = d.prototype,
            e = g.prototype,
            f = a.FileReaderSync,
            c = function(a) {
                this.code = this[this.name = a]
            }, k = "NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),
            m = k.length,
            l = a.URL || a.webkitURL || a,
            p = l.createObjectURL,
            r = l.revokeObjectURL,
            q = l,
            u = a.btoa,
            v = a.atob,
            s = !1,
            x = function(a) {
                s = !a
            }, w = a.ArrayBuffer,
            A = a.Uint8Array;
        for (d.fake = e.fake = !0; m--;) c.prototype[k[m]] = m + 1;
        try {
            A && x.apply(0, new A(1))
        } catch (y) {}
        l.createObjectURL || (q = a.URL = {});
        q.createObjectURL = function(a) {
            var b = a.type;
            null === b && (b = "application/octet-stream");
            if (a instanceof g) return b = "data:" + b, "base64" === a.encoding ? b + ";base64," + a.data : "URI" === a.encoding ? b + "," + decodeURIComponent(a.data) : u ? b + ";base64," + u(a.data) : b + "," + encodeURIComponent(a.data);
            if (p) return p.call(l, a)
        };
        q.revokeObjectURL = function(a) {
            "data:" !== a.substring(0, 5) && r && r.call(l, a)
        };
        b.append = function(a) {
            var b = this.data;
            if (A && a instanceof w) if (s) b.push(String.fromCharCode.apply(String, new A(a)));
            else {
                b = "";
                a = new A(a);
                for (var d = 0, e = a.length; d < e; d++) b += String.fromCharCode(a[d])
            } else if ("Blob" === h(a) || "File" === h(a)) if (f) d = new f, b.push(d.readAsBinaryString(a));
            else throw new c("NOT_READABLE_ERR");
            else a instanceof g ? "base64" === a.encoding && v ? b.push(v(a.data)) : "URI" === a.encoding ? b.push(decodeURIComponent(a.data)) : "raw" === a.encoding && b.push(a.data) : ("string" !== typeof a && (a += ""), b.push(unescape(encodeURIComponent(a))))
        };
        b.getBlob = function(a) {
            arguments.length || (a = null);
            return new g(this.data.join(""), a, "raw")
        };
        b.toString = function() {
            return "[object BlobBuilder]"
        };
        e.slice = function(a, b, c) {
            var d = arguments.length;
            3 > d && (c = null);
            return new g(this.data.slice(a, 1 < d ? b : this.data.length), c, this.encoding)
        };
        e.toString = function() {
            return "[object Blob]"
        };
        return d
    }(self),
    saveAs = saveAs || navigator.msSaveBlob && navigator.msSaveBlob.bind(navigator) || function(a) {
        var h = a.document,
            d = a.URL || a.webkitURL || a,
            g = h.createElementNS("http://www.w3.org/1999/xhtml", "a"),
            b = "download" in g,
            e = function(b) {
                var c = h.createEvent("MouseEvents");
                c.initMouseEvent("click", !0, !1, a, 0, 0, 0, 0, 0, !1, !1, !1, !1, 0, null);
                return b.dispatchEvent(c)
            }, f = a.webkitRequestFileSystem,
            c = a.requestFileSystem || f || a.mozRequestFileSystem,
            k = function(b) {
                (a.setImmediate || a.setTimeout)(function() {
                    throw b;
                }, 0)
            }, m = 0,
            l = [],
            p = function(a,
                         b, c) {
                b = [].concat(b);
                for (var d = b.length; d--;) {
                    var e = a["on" + b[d]];
                    if ("function" === typeof e) try {
                        e.call(a, c || a)
                    } catch (f) {
                        k(f)
                    }
                }
            }, r = function(d, h) {
                var k = this,
                    q = d.type,
                    r = !1,
                    A, y, z = function() {
                        var b = (a.URL || a.webkitURL || a).createObjectURL(d);
                        l.push(b);
                        return b
                    }, B = function() {
                        p(k, ["writestart", "progress", "write", "writeend"])
                    }, D = function() {
                        if (r || !A) A = z(d);
                        y && (y.location.href = A);
                        k.readyState = k.DONE;
                        B()
                    }, E = function(a) {
                        return function() {
                            if (k.readyState !== k.DONE) return a.apply(this, arguments)
                        }
                    }, G = {
                        create: !0,
                        exclusive: !1
                    },
                    J;
                k.readyState = k.INIT;
                h || (h = "download");
                if (b && (A = z(d), g.href = A, g.download = h, e(g))) {
                    k.readyState = k.DONE;
                    B();
                    return
                }
                a.chrome && (q && "application/octet-stream" !== q) && (J = d.slice || d.webkitSlice, d = J.call(d, 0, d.size, "application/octet-stream"), r = !0);
                f && "download" !== h && (h += ".download");
                y = "application/octet-stream" === q || f ? a : a.open();
                c ? (m += d.size, c(a.TEMPORARY, m, E(function(a) {
                    a.root.getDirectory("saved", G, E(function(a) {
                        var b = function() {
                            a.getFile(h, G, E(function(a) {
                                a.createWriter(E(function(b) {
                                    b.onwriteend = function(b) {
                                        y.location.href = a.toURL();
                                        l.push(a);
                                        k.readyState = k.DONE;
                                        p(k, "writeend", b)
                                    };
                                    b.onerror = function() {
                                        var a = b.error;
                                        a.code !== a.ABORT_ERR && D()
                                    };
                                    ["writestart", "progress", "write", "abort"].forEach(function(a) {
                                        b["on" + a] = k["on" + a]
                                    });
                                    b.write(d);
                                    k.abort = function() {
                                        b.abort();
                                        k.readyState = k.DONE
                                    };
                                    k.readyState = k.WRITING
                                }), D)
                            }), D)
                        };
                        a.getFile(h, {
                            create: !1
                        }, E(function(a) {
                            a.remove();
                            b()
                        }), E(function(a) {
                            a.code === a.NOT_FOUND_ERR ? b() : D()
                        }))
                    }), D)
                }), D)) : D()
            }, q = r.prototype;
        q.abort = function() {
            this.readyState = this.DONE;
            p(this, "abort")
        };
        q.readyState = q.INIT = 0;
        q.WRITING = 1;
        q.DONE = 2;
        q.error = q.onwritestart = q.onprogress = q.onwrite = q.onabort = q.onerror = q.onwriteend = null;
        a.addEventListener("unload", function() {
            for (var a = l.length; a--;) {
                var b = l[a];
                "string" === typeof b ? d.revokeObjectURL(b) : b.remove()
            }
            l.length = 0
        }, !1);
        return function(a, b) {
            return new r(a, b)
        }
    }(self),
    MAX_BITS = 15,
    D_CODES = 30,
    BL_CODES = 19,
    LENGTH_CODES = 29,
    LITERALS = 256,
    L_CODES = LITERALS + 1 + LENGTH_CODES,
    HEAP_SIZE = 2 * L_CODES + 1,
    END_BLOCK = 256,
    MAX_BL_BITS = 7,
    REP_3_6 = 16,
    REPZ_3_10 = 17,
    REPZ_11_138 = 18,
    Buf_size = 16,
    Z_DEFAULT_COMPRESSION = -1,
    Z_FILTERED = 1,
    Z_HUFFMAN_ONLY = 2,
    Z_DEFAULT_STRATEGY = 0,
    Z_NO_FLUSH = 0,
    Z_PARTIAL_FLUSH = 1,
    Z_FULL_FLUSH = 3,
    Z_FINISH = 4,
    Z_OK = 0,
    Z_STREAM_END = 1,
    Z_NEED_DICT = 2,
    Z_STREAM_ERROR = -2,
    Z_DATA_ERROR = -3,
    Z_BUF_ERROR = -5,
    _dist_code = [0, 1, 2, 3, 4, 4, 5, 5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13,
        13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 16, 17, 18, 18, 19, 19, 20, 20, 20, 20, 21,
        21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28,
        28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29];

function Tree() {
    var a = this;
    a.build_tree = function(h) {
        var d = a.dyn_tree,
            g = a.stat_desc.static_tree,
            b = a.stat_desc.elems,
            e, f = -1,
            c;
        h.heap_len = 0;
        h.heap_max = HEAP_SIZE;
        for (e = 0; e < b; e++) 0 !== d[2 * e] ? (h.heap[++h.heap_len] = f = e, h.depth[e] = 0) : d[2 * e + 1] = 0;
        for (; 2 > h.heap_len;) c = h.heap[++h.heap_len] = 2 > f ? ++f : 0, d[2 * c] = 1, h.depth[c] = 0, h.opt_len--, g && (h.static_len -= g[2 * c + 1]);
        a.max_code = f;
        for (e = Math.floor(h.heap_len / 2); 1 <= e; e--) h.pqdownheap(d, e);
        c = b;
        do e = h.heap[1], h.heap[1] = h.heap[h.heap_len--], h.pqdownheap(d, 1), g = h.heap[1],
            h.heap[--h.heap_max] = e, h.heap[--h.heap_max] = g, d[2 * c] = d[2 * e] + d[2 * g], h.depth[c] = Math.max(h.depth[e], h.depth[g]) + 1, d[2 * e + 1] = d[2 * g + 1] = c, h.heap[1] = c++, h.pqdownheap(d, 1);
        while (2 <= h.heap_len);
        h.heap[--h.heap_max] = h.heap[1];
        e = a.dyn_tree;
        for (var f = a.stat_desc.static_tree, k = a.stat_desc.extra_bits, m = a.stat_desc.extra_base, l = a.stat_desc.max_length, p, r, q = 0, b = 0; b <= MAX_BITS; b++) h.bl_count[b] = 0;
        e[2 * h.heap[h.heap_max] + 1] = 0;
        for (c = h.heap_max + 1; c < HEAP_SIZE; c++) g = h.heap[c], b = e[2 * e[2 * g + 1] + 1] + 1, b > l && (b = l, q++), e[2 * g + 1] = b, g > a.max_code || (h.bl_count[b]++, p = 0, g >= m && (p = k[g - m]), r = e[2 * g], h.opt_len += r * (b + p), f && (h.static_len += r * (f[2 * g + 1] + p)));
        if (0 !== q) {
            do {
                for (b = l - 1; 0 === h.bl_count[b];) b--;
                h.bl_count[b]--;
                h.bl_count[b + 1] += 2;
                h.bl_count[l]--;
                q -= 2
            } while (0 < q);
            for (b = l; 0 !== b; b--) for (g = h.bl_count[b]; 0 !== g;) f = h.heap[--c], f > a.max_code || (e[2 * f + 1] != b && (h.opt_len += (b - e[2 * f + 1]) * e[2 * f], e[2 * f + 1] = b), g--)
        }
        e = a.max_code;
        c = h.bl_count;
        h = [];
        g = 0;
        for (b = 1; b <= MAX_BITS; b++) h[b] = g = g + c[b - 1] << 1;
        for (c = 0; c <= e; c++) if (k = d[2 * c + 1], 0 !== k) {
            g = d;
            b = 2 * c;
            f = h[k]++;
            m = 0;
            do m |= f & 1, f >>>= 1, m <<= 1;
            while (0 < --k);
            g[b] = m >>> 1
        }
    }
}
Tree._length_code = [0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25,
    25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28];
Tree.base_length = [0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 16, 20, 24, 28, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 0];
Tree.base_dist = [0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64, 96, 128, 192, 256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096, 6144, 8192, 12288, 16384, 24576];
Tree.d_code = function(a) {
    return 256 > a ? _dist_code[a] : _dist_code[256 + (a >>> 7)]
};
Tree.extra_lbits = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0];
Tree.extra_dbits = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13];
Tree.extra_blbits = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7];
Tree.bl_order = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];

function StaticTree(a, h, d, g, b) {
    this.static_tree = a;
    this.extra_bits = h;
    this.extra_base = d;
    this.elems = g;
    this.max_length = b
}
StaticTree.static_ltree = [12, 8, 140, 8, 76, 8, 204, 8, 44, 8, 172, 8, 108, 8, 236, 8, 28, 8, 156, 8, 92, 8, 220, 8, 60, 8, 188, 8, 124, 8, 252, 8, 2, 8, 130, 8, 66, 8, 194, 8, 34, 8, 162, 8, 98, 8, 226, 8, 18, 8, 146, 8, 82, 8, 210, 8, 50, 8, 178, 8, 114, 8, 242, 8, 10, 8, 138, 8, 74, 8, 202, 8, 42, 8, 170, 8, 106, 8, 234, 8, 26, 8, 154, 8, 90, 8, 218, 8, 58, 8, 186, 8, 122, 8, 250, 8, 6, 8, 134, 8, 70, 8, 198, 8, 38, 8, 166, 8, 102, 8, 230, 8, 22, 8, 150, 8, 86, 8, 214, 8, 54, 8, 182, 8, 118, 8, 246, 8, 14, 8, 142, 8, 78, 8, 206, 8, 46, 8, 174, 8, 110, 8, 238, 8, 30, 8, 158, 8, 94, 8, 222, 8, 62, 8, 190, 8, 126, 8, 254, 8, 1, 8, 129, 8, 65, 8, 193, 8, 33, 8, 161,
    8, 97, 8, 225, 8, 17, 8, 145, 8, 81, 8, 209, 8, 49, 8, 177, 8, 113, 8, 241, 8, 9, 8, 137, 8, 73, 8, 201, 8, 41, 8, 169, 8, 105, 8, 233, 8, 25, 8, 153, 8, 89, 8, 217, 8, 57, 8, 185, 8, 121, 8, 249, 8, 5, 8, 133, 8, 69, 8, 197, 8, 37, 8, 165, 8, 101, 8, 229, 8, 21, 8, 149, 8, 85, 8, 213, 8, 53, 8, 181, 8, 117, 8, 245, 8, 13, 8, 141, 8, 77, 8, 205, 8, 45, 8, 173, 8, 109, 8, 237, 8, 29, 8, 157, 8, 93, 8, 221, 8, 61, 8, 189, 8, 125, 8, 253, 8, 19, 9, 275, 9, 147, 9, 403, 9, 83, 9, 339, 9, 211, 9, 467, 9, 51, 9, 307, 9, 179, 9, 435, 9, 115, 9, 371, 9, 243, 9, 499, 9, 11, 9, 267, 9, 139, 9, 395, 9, 75, 9, 331, 9, 203, 9, 459, 9, 43, 9, 299, 9, 171, 9, 427, 9, 107, 9, 363, 9, 235,
    9, 491, 9, 27, 9, 283, 9, 155, 9, 411, 9, 91, 9, 347, 9, 219, 9, 475, 9, 59, 9, 315, 9, 187, 9, 443, 9, 123, 9, 379, 9, 251, 9, 507, 9, 7, 9, 263, 9, 135, 9, 391, 9, 71, 9, 327, 9, 199, 9, 455, 9, 39, 9, 295, 9, 167, 9, 423, 9, 103, 9, 359, 9, 231, 9, 487, 9, 23, 9, 279, 9, 151, 9, 407, 9, 87, 9, 343, 9, 215, 9, 471, 9, 55, 9, 311, 9, 183, 9, 439, 9, 119, 9, 375, 9, 247, 9, 503, 9, 15, 9, 271, 9, 143, 9, 399, 9, 79, 9, 335, 9, 207, 9, 463, 9, 47, 9, 303, 9, 175, 9, 431, 9, 111, 9, 367, 9, 239, 9, 495, 9, 31, 9, 287, 9, 159, 9, 415, 9, 95, 9, 351, 9, 223, 9, 479, 9, 63, 9, 319, 9, 191, 9, 447, 9, 127, 9, 383, 9, 255, 9, 511, 9, 0, 7, 64, 7, 32, 7, 96, 7, 16, 7, 80, 7,
    48, 7, 112, 7, 8, 7, 72, 7, 40, 7, 104, 7, 24, 7, 88, 7, 56, 7, 120, 7, 4, 7, 68, 7, 36, 7, 100, 7, 20, 7, 84, 7, 52, 7, 116, 7, 3, 8, 131, 8, 67, 8, 195, 8, 35, 8, 163, 8, 99, 8, 227, 8];
StaticTree.static_dtree = [0, 5, 16, 5, 8, 5, 24, 5, 4, 5, 20, 5, 12, 5, 28, 5, 2, 5, 18, 5, 10, 5, 26, 5, 6, 5, 22, 5, 14, 5, 30, 5, 1, 5, 17, 5, 9, 5, 25, 5, 5, 5, 21, 5, 13, 5, 29, 5, 3, 5, 19, 5, 11, 5, 27, 5, 7, 5, 23, 5];
StaticTree.static_l_desc = new StaticTree(StaticTree.static_ltree, Tree.extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);
StaticTree.static_d_desc = new StaticTree(StaticTree.static_dtree, Tree.extra_dbits, 0, D_CODES, MAX_BITS);
StaticTree.static_bl_desc = new StaticTree(null, Tree.extra_blbits, 0, BL_CODES, MAX_BL_BITS);
var MAX_MEM_LEVEL = 9,
    DEF_MEM_LEVEL = 8;

function Config(a, h, d, g, b) {
    this.good_length = a;
    this.max_lazy = h;
    this.nice_length = d;
    this.max_chain = g;
    this.func = b
}
var STORED = 0,
    FAST = 1,
    SLOW = 2,
    config_table = [new Config(0, 0, 0, 0, STORED), new Config(4, 4, 8, 4, FAST), new Config(4, 5, 16, 8, FAST), new Config(4, 6, 32, 32, FAST), new Config(4, 4, 16, 16, SLOW), new Config(8, 16, 32, 32, SLOW), new Config(8, 16, 128, 128, SLOW), new Config(8, 32, 128, 256, SLOW), new Config(32, 128, 258, 1024, SLOW), new Config(32, 258, 258, 4096, SLOW)],
    z_errmsg = "need dictionary;stream end;;;stream error;data error;;buffer error;;".split(";"),
    NeedMore = 0,
    BlockDone = 1,
    FinishStarted = 2,
    FinishDone = 3,
    PRESET_DICT = 32,
    INIT_STATE = 42,
    BUSY_STATE = 113,
    FINISH_STATE = 666,
    Z_DEFLATED = 8,
    STORED_BLOCK = 0,
    STATIC_TREES = 1,
    DYN_TREES = 2,
    MIN_MATCH = 3,
    MAX_MATCH = 258,
    MIN_LOOKAHEAD = MAX_MATCH + MIN_MATCH + 1;

function smaller(a, h, d, g) {
    var b = a[2 * h];
    a = a[2 * d];
    return b < a || b == a && g[h] <= g[d]
}

function Deflate() {
    function a() {
        var a;
        for (a = 0; a < L_CODES; a++) ka[2 * a] = 0;
        for (a = 0; a < D_CODES; a++) ha[2 * a] = 0;
        for (a = 0; a < BL_CODES; a++) ca[2 * a] = 0;
        ka[2 * END_BLOCK] = 1;
        qa = Wa = x.opt_len = x.static_len = 0
    }
    function h(a, b) {
        var c, d = -1,
            e, f = a[1],
            g = 0,
            h = 7,
            k = 4;
        0 === f && (h = 138, k = 3);
        a[2 * (b + 1) + 1] = 65535;
        for (c = 0; c <= b; c++) e = f, f = a[2 * (c + 1) + 1], ++g < h && e == f || (g < k ? ca[2 * e] += g : 0 !== e ? (e != d && ca[2 * e]++, ca[2 * REP_3_6]++) : 10 >= g ? ca[2 * REPZ_3_10]++ : ca[2 * REPZ_11_138]++, g = 0, d = e, 0 === f ? (h = 138, k = 3) : e == f ? (h = 6, k = 3) : (h = 7, k = 4))
    }
    function d(a) {
        x.pending_buf[x.pending++] = a
    }
    function g(a) {
        d(a & 255);
        d(a >>> 8 & 255)
    }
    function b(a, b) {
        va > Buf_size - b ? (Ca |= a << va & 65535, g(Ca), Ca = a >>> Buf_size - va, va += b - Buf_size) : (Ca |= a << va & 65535, va += b)
    }
    function e(a, c) {
        var d = 2 * a;
        b(c[d] & 65535, c[d + 1] & 65535)
    }
    function f(a, c) {
        var d, f = -1,
            g, h = a[1],
            k = 0,
            l = 7,
            m = 4;
        0 === h && (l = 138, m = 3);
        for (d = 0; d <= c; d++) if (g = h, h = a[2 * (d + 1) + 1], !(++k < l && g == h)) {
            if (k < m) {
                do e(g, ca);
                while (0 !== --k)
            } else 0 !== g ? (g != f && (e(g, ca), k--), e(REP_3_6, ca), b(k - 3, 2)) : 10 >= k ? (e(REPZ_3_10, ca), b(k - 3, 3)) : (e(REPZ_11_138, ca), b(k - 11, 7));
            k = 0;
            f = g;
            0 === h ? (l = 138, m = 3) : g == h ? (l = 6, m = 3) : (l = 7, m = 4)
        }
    }
    function c() {
        16 == va ? (g(Ca), va = Ca = 0) : 8 <= va && (d(Ca & 255), Ca >>>= 8, va -= 8)
    }
    function k(a, b) {
        var c, d, e;
        x.pending_buf[Ea + 2 * qa] = a >>> 8 & 255;
        x.pending_buf[Ea + 2 * qa + 1] = a & 255;
        x.pending_buf[W + qa] = b & 255;
        qa++;
        0 === a ? ka[2 * b]++ : (Wa++, a--, ka[2 * (Tree._length_code[b] + LITERALS + 1)]++, ha[2 * Tree.d_code(a)]++);
        if (0 === (qa & 8191) && 2 < ea) {
            c = 8 * qa;
            d = P - aa;
            for (e = 0; e < D_CODES; e++) c += ha[2 * e] * (5 + Tree.extra_dbits[e]);
            if (Wa < Math.floor(qa / 2) && c >>> 3 < Math.floor(d / 2)) return !0
        }
        return qa == fa - 1
    }
    function m(a, c) {
        var d, f,
            g = 0,
            h, k;
        if (0 !== qa) {
            do d = x.pending_buf[Ea + 2 * g] << 8 & 65280 | x.pending_buf[Ea + 2 * g + 1] & 255, f = x.pending_buf[W + g] & 255, g++, 0 === d ? e(f, a) : (h = Tree._length_code[f], e(h + LITERALS + 1, a), k = Tree.extra_lbits[h], 0 !== k && (f -= Tree.base_length[h], b(f, k)), d--, h = Tree.d_code(d), e(h, c), k = Tree.extra_dbits[h], 0 !== k && (d -= Tree.base_dist[h], b(d, k)));
            while (g < qa)
        }
        e(END_BLOCK, a);
        Ka = a[2 * END_BLOCK + 1]
    }
    function l() {
        8 < va ? g(Ca) : 0 < va && d(Ca & 255);
        va = Ca = 0
    }
    function p(a, c, d) {
        b((STORED_BLOCK << 1) + (d ? 1 : 0), 3);
        l();
        Ka = 8;
        g(c);
        g(~c);
        x.pending_buf.set(G.subarray(a,
            a + c), x.pending);
        x.pending += c
    }
    function r(c) {
        var d = 0 <= aa ? aa : -1,
            e = P - aa,
            g, k, q = 0;
        if (0 < ea) {
            sa.build_tree(x);
            V.build_tree(x);
            h(ka, sa.max_code);
            h(ha, V.max_code);
            X.build_tree(x);
            for (q = BL_CODES - 1; 3 <= q && 0 === ca[2 * Tree.bl_order[q] + 1]; q--);
            x.opt_len += 3 * (q + 1) + 14;
            g = x.opt_len + 3 + 7 >>> 3;
            k = x.static_len + 3 + 7 >>> 3;
            k <= g && (g = k)
        } else g = k = e + 5;
        if (e + 4 <= g && -1 != d) p(d, e, c);
        else if (k == g) b((STATIC_TREES << 1) + (c ? 1 : 0), 3), m(StaticTree.static_ltree, StaticTree.static_dtree);
        else {
            b((DYN_TREES << 1) + (c ? 1 : 0), 3);
            d = sa.max_code + 1;
            e = V.max_code + 1;
            q += 1;
            b(d - 257, 5);
            b(e - 1, 5);
            b(q - 4, 4);
            for (g = 0; g < q; g++) b(ca[2 * Tree.bl_order[g] + 1], 3);
            f(ka, d - 1);
            f(ha, e - 1);
            m(ka, ha)
        }
        a();
        c && l();
        aa = P;
        w.flush_pending()
    }
    function q() {
        var a, b, c, d;
        do {
            d = J - da - P;
            if (0 === d && 0 === P && 0 === da) d = B;
            else if (-1 == d) d--;
            else if (P >= B + B - MIN_LOOKAHEAD) {
                G.set(G.subarray(B, B + B), 0);
                Y -= B;
                P -= B;
                aa -= B;
                c = a = L;
                do b = O[--c] & 65535, O[c] = b >= B ? b - B : 0;
                while (0 !== --a);
                c = a = B;
                do b = C[--c] & 65535, C[c] = b >= B ? b - B : 0;
                while (0 !== --a);
                d += B
            }
            if (0 === w.avail_in) break;
            a = w.read_buf(G, P + da, d);
            da += a;
            da >= MIN_MATCH && (N = G[P] & 255, N = (N << F ^ G[P + 1] & 255) & K)
        } while (da < MIN_LOOKAHEAD && 0 !== w.avail_in)
    }
    function u(a) {
        var b = 65535,
            c;
        for (b > y - 5 && (b = y - 5);;) {
            if (1 >= da) {
                q();
                if (0 === da && a == Z_NO_FLUSH) return NeedMore;
                if (0 === da) break
            }
            P += da;
            da = 0;
            c = aa + b;
            if (0 === P || P >= c) if (da = P - c, P = c, r(!1), 0 === w.avail_out) return NeedMore;
            if (P - aa >= B - MIN_LOOKAHEAD && (r(!1), 0 === w.avail_out)) return NeedMore
        }
        r(a == Z_FINISH);
        return 0 === w.avail_out ? a == Z_FINISH ? FinishStarted : NeedMore : a == Z_FINISH ? FinishDone : BlockDone
    }
    function v(a) {
        var b = na,
            c = P,
            d, e = ia,
            f = P > B - MIN_LOOKAHEAD ? P - (B - MIN_LOOKAHEAD) : 0,
            g = ya,
            h = E,
            k = P + MAX_MATCH,
            l = G[c + e - 1],
            m = G[c + e];
        ia >= ba && (b >>= 2);
        g > da && (g = da);
        do if (d = a, G[d + e] == m && G[d + e - 1] == l && G[d] == G[c] && G[++d] == G[c + 1]) {
            c += 2;
            d++;
            do;
            while (G[++c] == G[++d] && G[++c] == G[++d] && G[++c] == G[++d] && G[++c] == G[++d] && G[++c] == G[++d] && G[++c] == G[++d] && G[++c] == G[++d] && G[++c] == G[++d] && c < k);
            d = MAX_MATCH - (k - c);
            c = k - MAX_MATCH;
            if (d > e) {
                Y = a;
                e = d;
                if (d >= g) break;
                l = G[c + e - 1];
                m = G[c + e]
            }
        }
        while ((a = C[a & h] & 65535) > f && 0 !== --b);
        return e <= da ? e : da
    }
    function s(a) {
        for (var b = 0, c, d;;) {
            if (da < MIN_LOOKAHEAD) {
                q();
                if (da < MIN_LOOKAHEAD && a == Z_NO_FLUSH) return NeedMore;
                if (0 === da) break
            }
            da >= MIN_MATCH && (N = (N << F ^ G[P + (MIN_MATCH - 1)] & 255) & K, b = O[N] & 65535, C[P & E] = O[N], O[N] = P);
            ia = U;
            Z = Y;
            U = MIN_MATCH - 1;
            0 !== b && (ia < pa && (P - b & 65535) <= B - MIN_LOOKAHEAD) && (R != Z_HUFFMAN_ONLY && (U = v(b)), 5 >= U && (R == Z_FILTERED || U == MIN_MATCH && 4096 < P - Y) && (U = MIN_MATCH - 1));
            if (ia >= MIN_MATCH && U <= ia) {
                d = P + da - MIN_MATCH;
                c = k(P - 1 - Z, ia - MIN_MATCH);
                da -= ia - 1;
                ia -= 2;
                do ++P <= d && (N = (N << F ^ G[P + (MIN_MATCH - 1)] & 255) & K, b = O[N] & 65535, C[P & E] = O[N], O[N] = P);
                while (0 !== --ia);
                T = 0;
                U = MIN_MATCH - 1;
                P++;
                if (c && (r(!1),
                    0 === w.avail_out)) return NeedMore
            } else if (0 !== T) {
                if ((c = k(0, G[P - 1] & 255)) && r(!1), P++, da--, 0 === w.avail_out) return NeedMore
            } else T = 1, P++, da--
        }
        0 !== T && (k(0, G[P - 1] & 255), T = 0);
        r(a == Z_FINISH);
        return 0 === w.avail_out ? a == Z_FINISH ? FinishStarted : NeedMore : a == Z_FINISH ? FinishDone : BlockDone
    }
    var x = this,
        w, A, y, z, B, D, E, G, J, C, O, N, L, Q, K, F, aa, U, Z, T, P, Y, da, ia, na, pa, ea, R, ba, ya, ka, ha, ca, sa = new Tree,
        V = new Tree,
        X = new Tree;
    x.depth = [];
    var W, fa, qa, Ea, Wa, Ka, Ca, va;
    x.bl_count = [];
    x.heap = [];
    ka = [];
    ha = [];
    ca = [];
    x.pqdownheap = function(a, b) {
        for (var c = x.heap, d = c[b], e = b << 1; e <= x.heap_len;) {
            e < x.heap_len && smaller(a, c[e + 1], c[e], x.depth) && e++;
            if (smaller(a, d, c[e], x.depth)) break;
            c[b] = c[e];
            b = e;
            e <<= 1
        }
        c[b] = d
    };
    x.deflateInit = function(b, c, d, e, f, g) {
        e || (e = Z_DEFLATED);
        f || (f = DEF_MEM_LEVEL);
        g || (g = Z_DEFAULT_STRATEGY);
        b.msg = null;
        c == Z_DEFAULT_COMPRESSION && (c = 6);
        if (1 > f || f > MAX_MEM_LEVEL || e != Z_DEFLATED || 9 > d || 15 < d || 0 > c || 9 < c || 0 > g || g > Z_HUFFMAN_ONLY) return Z_STREAM_ERROR;
        b.dstate = x;
        D = d;
        B = 1 << D;
        E = B - 1;
        Q = f + 7;
        L = 1 << Q;
        K = L - 1;
        F = Math.floor((Q + MIN_MATCH - 1) / MIN_MATCH);
        G = new Uint8Array(2 * B);
        C = [];
        O = [];
        fa = 1 << f + 6;
        x.pending_buf = new Uint8Array(4 * fa);
        y = 4 * fa;
        Ea = Math.floor(fa / 2);
        W = 3 * fa;
        ea = c;
        R = g;
        b.total_in = b.total_out = 0;
        b.msg = null;
        x.pending = 0;
        x.pending_out = 0;
        A = BUSY_STATE;
        z = Z_NO_FLUSH;
        sa.dyn_tree = ka;
        sa.stat_desc = StaticTree.static_l_desc;
        V.dyn_tree = ha;
        V.stat_desc = StaticTree.static_d_desc;
        X.dyn_tree = ca;
        X.stat_desc = StaticTree.static_bl_desc;
        va = Ca = 0;
        Ka = 8;
        a();
        J = 2 * B;
        for (b = O[L - 1] = 0; b < L - 1; b++) O[b] = 0;
        pa = config_table[ea].max_lazy;
        ba = config_table[ea].good_length;
        ya = config_table[ea].nice_length;
        na = config_table[ea].max_chain;
        da = aa = P = 0;
        U = ia = MIN_MATCH - 1;
        N = T = 0;
        return Z_OK
    };
    x.deflateEnd = function() {
        if (A != INIT_STATE && A != BUSY_STATE && A != FINISH_STATE) return Z_STREAM_ERROR;
        G = C = O = x.pending_buf = null;
        x.dstate = null;
        return A == BUSY_STATE ? Z_DATA_ERROR : Z_OK
    };
    x.deflateParams = function(a, b, c) {
        var d = Z_OK;
        b == Z_DEFAULT_COMPRESSION && (b = 6);
        if (0 > b || 9 < b || 0 > c || c > Z_HUFFMAN_ONLY) return Z_STREAM_ERROR;
        config_table[ea].func != config_table[b].func && 0 !== a.total_in && (d = a.deflate(Z_PARTIAL_FLUSH));
        ea != b && (ea = b, pa = config_table[ea].max_lazy, ba = config_table[ea].good_length,
            ya = config_table[ea].nice_length, na = config_table[ea].max_chain);
        R = c;
        return d
    };
    x.deflateSetDictionary = function(a, b, c) {
        a = c;
        var d = 0;
        if (!b || A != INIT_STATE) return Z_STREAM_ERROR;
        if (a < MIN_MATCH) return Z_OK;
        a > B - MIN_LOOKAHEAD && (a = B - MIN_LOOKAHEAD, d = c - a);
        G.set(b.subarray(d, d + a), 0);
        aa = P = a;
        N = G[0] & 255;
        N = (N << F ^ G[1] & 255) & K;
        for (b = 0; b <= a - MIN_MATCH; b++) N = (N << F ^ G[b + (MIN_MATCH - 1)] & 255) & K, C[b & E] = O[N], O[N] = b;
        return Z_OK
    };
    x.deflate = function(a, f) {
        var g, h, l;
        if (f > Z_FINISH || 0 > f) return Z_STREAM_ERROR;
        if (!a.next_out || !a.next_in && 0 !== a.avail_in || A == FINISH_STATE && f != Z_FINISH) return a.msg = z_errmsg[Z_NEED_DICT - Z_STREAM_ERROR], Z_STREAM_ERROR;
        if (0 === a.avail_out) return a.msg = z_errmsg[Z_NEED_DICT - Z_BUF_ERROR], Z_BUF_ERROR;
        w = a;
        g = z;
        z = f;
        A == INIT_STATE && (h = Z_DEFLATED + (D - 8 << 4) << 8, l = (ea - 1 & 255) >> 1, 3 < l && (l = 3), h |= l << 6, 0 !== P && (h |= PRESET_DICT), A = BUSY_STATE, h += 31 - h % 31, d(h >> 8 & 255), d(h & 255));
        if (0 !== x.pending) {
            if (w.flush_pending(), 0 === w.avail_out) return z = -1, Z_OK
        } else if (0 === w.avail_in && f <= g && f != Z_FINISH) return w.msg = z_errmsg[Z_NEED_DICT - Z_BUF_ERROR],
            Z_BUF_ERROR;
        if (A == FINISH_STATE && 0 !== w.avail_in) return a.msg = z_errmsg[Z_NEED_DICT - Z_BUF_ERROR], Z_BUF_ERROR;
        if (0 !== w.avail_in || 0 !== da || f != Z_NO_FLUSH && A != FINISH_STATE) {
            g = -1;
            switch (config_table[ea].func) {
                case STORED:
                    g = u(f);
                    break;
                case FAST:
                    a: {
                        for (g = 0;;) {
                            if (da < MIN_LOOKAHEAD) {
                                q();
                                if (da < MIN_LOOKAHEAD && f == Z_NO_FLUSH) {
                                    g = NeedMore;
                                    break a
                                }
                                if (0 === da) break
                            }
                            da >= MIN_MATCH && (N = (N << F ^ G[P + (MIN_MATCH - 1)] & 255) & K, g = O[N] & 65535, C[P & E] = O[N], O[N] = P);
                            0 !== g && (P - g & 65535) <= B - MIN_LOOKAHEAD && R != Z_HUFFMAN_ONLY && (U = v(g));
                            if (U >= MIN_MATCH) if (h = k(P - Y, U - MIN_MATCH), da -= U, U <= pa && da >= MIN_MATCH) {
                                U--;
                                do P++, N = (N << F ^ G[P + (MIN_MATCH - 1)] & 255) & K, g = O[N] & 65535, C[P & E] = O[N], O[N] = P;
                                while (0 !== --U);
                                P++
                            } else P += U, U = 0, N = G[P] & 255, N = (N << F ^ G[P + 1] & 255) & K;
                            else h = k(0, G[P] & 255), da--, P++;
                            if (h && (r(!1), 0 === w.avail_out)) {
                                g = NeedMore;
                                break a
                            }
                        }
                        r(f == Z_FINISH);
                        g = 0 === w.avail_out ? f == Z_FINISH ? FinishStarted : NeedMore : f == Z_FINISH ? FinishDone : BlockDone
                    }
                    break;
                case SLOW:
                    g = s(f)
            }
            if (g == FinishStarted || g == FinishDone) A = FINISH_STATE;
            if (g == NeedMore || g == FinishStarted) return 0 === w.avail_out && (z = -1), Z_OK;
            if (g == BlockDone) {
                if (f == Z_PARTIAL_FLUSH) b(STATIC_TREES << 1, 3), e(END_BLOCK, StaticTree.static_ltree), c(), 9 > 1 + Ka + 10 - va && (b(STATIC_TREES << 1, 3), e(END_BLOCK, StaticTree.static_ltree), c()), Ka = 7;
                else if (p(0, 0, !1), f == Z_FULL_FLUSH) for (g = 0; g < L; g++) O[g] = 0;
                w.flush_pending();
                if (0 === w.avail_out) return z = -1, Z_OK
            }
        }
        return f != Z_FINISH ? Z_OK : Z_STREAM_END
    }
}
function ZStream() {
    this.total_out = this.avail_out = this.total_in = this.avail_in = this.next_out_index = this.next_in_index = 0
}
ZStream.prototype = {
    deflateInit: function(a, h) {
        this.dstate = new Deflate;
        h || (h = MAX_BITS);
        return this.dstate.deflateInit(this, a, h)
    },
    deflate: function(a) {
        return this.dstate ? this.dstate.deflate(this, a) : Z_STREAM_ERROR
    },
    deflateEnd: function() {
        if (!this.dstate) return Z_STREAM_ERROR;
        var a = this.dstate.deflateEnd();
        this.dstate = null;
        return a
    },
    deflateParams: function(a, h) {
        return this.dstate ? this.dstate.deflateParams(this, a, h) : Z_STREAM_ERROR
    },
    deflateSetDictionary: function(a, h) {
        return this.dstate ? this.dstate.deflateSetDictionary(this,
            a, h) : Z_STREAM_ERROR
    },
    read_buf: function(a, h, d) {
        var g = this.avail_in;
        g > d && (g = d);
        if (0 === g) return 0;
        this.avail_in -= g;
        a.set(this.next_in.subarray(this.next_in_index, this.next_in_index + g), h);
        this.next_in_index += g;
        this.total_in += g;
        return g
    },
    flush_pending: function() {
        var a = this.dstate.pending;
        a > this.avail_out && (a = this.avail_out);
        0 !== a && (this.next_out.set(this.dstate.pending_buf.subarray(this.dstate.pending_out, this.dstate.pending_out + a), this.next_out_index), this.next_out_index += a, this.dstate.pending_out += a,
            this.total_out += a, this.avail_out -= a, this.dstate.pending -= a, 0 === this.dstate.pending && (this.dstate.pending_out = 0))
    }
};

function Deflater(a) {
    var h = new ZStream,
        d = Z_NO_FLUSH,
        g = new Uint8Array(512);
    "undefined" == typeof a && (a = Z_DEFAULT_COMPRESSION);
    h.deflateInit(a);
    h.next_out = g;
    this.append = function(a, e) {
        var f, c = [],
            k = 0,
            m = 0,
            l = 0,
            p;
        if (a.length) {
            h.next_in_index = 0;
            h.next_in = a;
            h.avail_in = a.length;
            do {
                h.next_out_index = 0;
                h.avail_out = 512;
                f = h.deflate(d);
                if (f != Z_OK) throw "deflating: " + h.msg;
                h.next_out_index && (512 == h.next_out_index ? c.push(new Uint8Array(g)) : c.push(new Uint8Array(g.subarray(0, h.next_out_index))));
                l += h.next_out_index;
                e && (0 < h.next_in_index && h.next_in_index != k) && (e(h.next_in_index), k = h.next_in_index)
            } while (0 < h.avail_in || 0 === h.avail_out);
            p = new Uint8Array(l);
            c.forEach(function(a) {
                p.set(a, m);
                m += a.length
            });
            return p
        }
    };
    this.flush = function() {
        var a, d = [],
            f = 0,
            c = 0,
            k;
        do {
            h.next_out_index = 0;
            h.avail_out = 512;
            a = h.deflate(Z_FINISH);
            if (a != Z_STREAM_END && a != Z_OK) throw "deflating: " + h.msg;
            0 < 512 - h.avail_out && d.push(new Uint8Array(g.subarray(0, h.next_out_index)));
            c += h.next_out_index
        } while (0 < h.avail_in || 0 === h.avail_out);
        h.deflateEnd();
        k = new Uint8Array(c);
        d.forEach(function(a) {
            k.set(a, f);
            f += a.length
        });
        return k
    }
}
void
    function(a, h) {
        "object" === typeof module ? module.exports = h() : "function" === typeof define ? define(h) : a.adler32cs = h()
    }(this, function() {
        var a = "function" === typeof ArrayBuffer && "function" === typeof Uint8Array,
            h = null,
            d = function() {
                if (!a) return function() {
                    return !1
                };
                try {
                    var b = require("buffer");
                    "function" === typeof b.Buffer && (h = b.Buffer)
                } catch (c) {}
                return function(a) {
                    return a instanceof ArrayBuffer || null !== h && a instanceof h
                }
            }(),
            g = function() {
                return null !== h ? function(a) {
                    return (new h(a, "utf8")).toString("binary")
                } : function(a) {
                    return unescape(encodeURIComponent(a))
                }
            }(),
            b = function(a, b) {
                for (var c = a & 65535, d = a >>> 16, e = 0, f = b.length; e < f; e++) c = (c + (b.charCodeAt(e) & 255)) % 65521, d = (d + c) % 65521;
                return (d << 16 | c) >>> 0
            }, e = function(a, b) {
                for (var c = a & 65535, d = a >>> 16, e = 0, f = b.length; e < f; e++) c = (c + b[e]) % 65521, d = (d + c) % 65521;
                return (d << 16 | c) >>> 0
            }, f = {}, c = f.Adler32 = function() {
                var f = function(a) {
                    if (!(this instanceof f)) throw new TypeError("Constructor cannot called be as a function.");
                    if (!isFinite(a = null == a ? 1 : +a)) throw Error("First arguments needs to be a finite number.");
                    this.checksum = a >>> 0
                }, h = f.prototype = {};
                h.constructor = f;
                f.from = function(a) {
                    a.prototype = h;
                    return a
                }(function(a) {
                    if (!(this instanceof f)) throw new TypeError("Constructor cannot called be as a function.");
                    if (null == a) throw Error("First argument needs to be a string.");
                    this.checksum = b(1, a.toString())
                });
                f.fromUtf8 = function(a) {
                    a.prototype = h;
                    return a
                }(function(a) {
                    if (!(this instanceof f)) throw new TypeError("Constructor cannot called be as a function.");
                    if (null == a) throw Error("First argument needs to be a string.");
                    a = g(a.toString());
                    this.checksum = b(1, a)
                });
                a && (f.fromBuffer = function(a) {
                    a.prototype = h;
                    return a
                }(function(a) {
                    if (!(this instanceof f)) throw new TypeError("Constructor cannot called be as a function.");
                    if (!d(a)) throw Error("First argument needs to be ArrayBuffer.");
                    a = new Uint8Array(a);
                    return this.checksum = e(1, a)
                }));
                h.update = function(a) {
                    if (null == a) throw Error("First argument needs to be a string.");
                    a = a.toString();
                    return this.checksum = b(this.checksum, a)
                };
                h.updateUtf8 = function(a) {
                    if (null == a) throw Error("First argument needs to be a string.");
                    a = g(a.toString());
                    return this.checksum = b(this.checksum, a)
                };
                a && (h.updateBuffer = function(a) {
                    if (!d(a)) throw Error("First argument needs to be ArrayBuffer.");
                    a = new Uint8Array(a);
                    return this.checksum = e(this.checksum, a)
                });
                h.clone = function() {
                    return new c(this.checksum)
                };
                return f
            }();
        f.from = function(a) {
            if (null == a) throw Error("First argument needs to be a string.");
            return b(1, a.toString())
        };
        f.fromUtf8 = function(a) {
            if (null == a) throw Error("First argument needs to be a string.");
            a = g(a.toString());
            return b(1, a)
        };
        a && (f.fromBuffer = function(a) {
            if (!d(a)) throw Error("First argument need to be ArrayBuffer.");
            a = new Uint8Array(a);
            return e(1, a)
        });
        return f
    });
(function() {
    function a() {
        return function() {}
    }
    function h(a, b) {
        var c = a.split("."),
            d = Z;
        c[0] in d || !d.execScript || d.execScript("var " + c[0]);
        for (var e; c.length && (e = c.shift());) c.length || void 0 === b ? d = d[e] ? d[e] : d[e] = {} : d[e] = b
    }
    function d(a, b) {
        function c() {}
        c.prototype = b.prototype;
        a.superClass_ = b.prototype;
        a.prototype = new c;
        a.prototype.constructor = a
    }
    function g() {}
    function b() {}
    function e() {}
    function f() {}
    function c() {
        this.channel = []
    }
    function k() {}
    function m() {}
    function l(a, b) {
        this.input = T ? new Uint8Array(a) : a;
        this.ip = b | 0
    }
    function p(a) {
        return (a.input[a.ip++] << 24 | a.input[a.ip++] << 16 | a.input[a.ip++] << 8 | a.input[a.ip++]) >>> 0
    }
    function r(a) {
        return a.input[a.ip++] << 24 | a.input[a.ip++] << 16 | a.input[a.ip++] << 8 | a.input[a.ip++]
    }
    function q(a) {
        return a.input[a.ip++] << 8 | a.input[a.ip++]
    }
    function u(a) {
        return (a.input[a.ip++] << 8 | a.input[a.ip++]) << 16 >> 16
    }
    function v(a) {
        return a.input[a.ip++]
    }
    function s(a, b) {
        return T ? a.input.subarray(a.ip, a.ip += b) : a.input.slice(a.ip, a.ip += b)
    }
    function x(a, b) {
        var c = a.input,
            d = a.ip,
            e = [],
            f;
        for (f = 0; f < b; ++f) e[f] = String.fromCharCode(c[d++]);
        a.ip = d;
        return e.join("")
    }
    function w(a, b) {
        var c = a.input,
            d = a.ip,
            e = [],
            f;
        for (f = 0; f < b; ++f) e[f] = String.fromCharCode(c[d++] << 8 | c[d++]);
        a.ip = d;
        return e.join("")
    }
    function A(a, b) {
        var c, d, e, f = [],
            g = 0;
        for (c = a.ip + b; a.ip < c;) if (d = a.input[a.ip++] << 24 >> 24, 0 > d) for (d = 1 - d, e = v(a); 0 < d--;) f[g++] = e;
        else for (d = 1 + d; 0 < d--;) f[g++] = v(a);
        return f
    }
    function y() {}
    function z() {}
    function B(a, b, c) {
        this.header = a;
        this.colorModeData = b;
        this.channel = c;
        this.parsed = !1
    }
    function D() {}
    function E() {}
    function G() {}

    function J() {}
    function C() {}
    function O() {}
    function N() {
        this.info = []
    }
    function L() {}
    function Q() {}
    function K() {}
    function F() {
        this.layerRecord = [];
        this.channelImageData = []
    }
    function aa() {}
    function U(a, b) {
        b || (b = {});
        this.stream = new l(a, b.inputPosition | 0)
    }
    var Z = this,
        T = void 0 !== Z.Uint8Array && void 0 !== Z.Uint16Array && void 0 !== Z.Uint32Array;
    g.prototype.parse = function(a, b) {
        var c;
        this.offset = a.ip;
        this.signature = x(a, 4);
        this.key = x(a, 4);
        c = p(a);
        this.length = c + 12;
        "function" === typeof g[this.key] ? (this.info = new g[this.key],
            this.info.parse(a, c, b)) : Z.console.warn("additional layer information: not implemented", this.key);
        a.seek(this.offset + this.length, 0)
    };
    var P = {
        bevl: {}
    };
    P.bevl = a();
    P.bevl.prototype.parse = function(a) {
        this.offset = a.ip;
        this.size = p(a);
        this.version = p(a);
        this.angle = r(a);
        this.strength = r(a);
        this.blur = r(a);
        this.highlightBlendModeSignature = x(a, 4);
        this.highlightBlendModeKey = x(a, 4);
        this.shadowBlendModeSignature = x(a, 4);
        this.shadowBlendModeKey = x(a, 4);
        a.seek(2);
        this.highlightColor = [p(a), p(a)];
        a.seek(2);
        this.shadowColor = [p(a), p(a)];
        this.bevelStyle = v(a);
        this.highlightOpacity = v(a);
        this.shadowOpacity = v(a);
        this.enabled = !! v(a);
        this.use = !! v(a);
        this.up = !! v(a);
        2 === this.version && (a.seek(2), this.readHighlightColor = [p(a), p(a)], a.seek(2), this.readShadowColor = [p(a), p(a)]);
        this.length = a.ip - this.offset
    };
    P.cmnS = {};
    P.cmnS = a();
    P.cmnS.prototype.parse = function(a) {
        this.offset = a.ip;
        this.size = p(a);
        this.version = p(a);
        this.visible = !! v(a);
        a.seek(2);
        this.length = a.ip - this.offset
    };
    P.dsdw = {};
    P.dsdw = a();
    P.dsdw.prototype.parse = function(a) {
        this.offset = a.ip;
        this.size = p(a);
        this.version = p(a);
        this.blur = r(a);
        this.intensity = r(a);
        this.angle = r(a);
        this.distance = r(a);
        a.seek(2);
        this.color = [p(a), p(a)];
        this.signature = x(a, 4);
        this.blend = x(a, 4);
        this.enabled = !! v(a);
        this.use = !! v(a);
        this.opacity = v(a);
        a.seek(2);
        this.nativeColor = [p(a), p(a)];
        this.length = a.ip - this.offset
    };
    P.iglw = {};
    P.iglw = a();
    P.iglw.prototype.parse = function(a) {
        this.offset = a.ip;
        this.size = p(a);
        this.version = p(a);
        this.blur = r(a);
        this.intensity = r(a);
        a.seek(2);
        this.color = [p(a), p(a)];
        this.signature = x(a, 4);
        this.blend = x(a, 4);
        this.enabled = !! v(a);
        this.opacity = v(a);
        2 === this.version && (this.invert = !! v(a), a.seek(2), this.nativeColor = [p(a), p(a)]);
        this.length = a.ip - this.offset
    };
    P.isdw = {};
    P.isdw = P.dsdw;
    P.oglw = {};
    P.oglw = a();
    P.oglw.prototype.parse = function(a) {
        this.offset = a.ip;
        this.size = p(a);
        this.version = p(a);
        this.blur = r(a);
        this.intensity = r(a);
        a.seek(2);
        this.color = [p(a), p(a)];
        this.signature = x(a, 4);
        this.blend = x(a, 4);
        this.enabled = !! v(a);
        this.opacity = v(a);
        2 === this.version && (a.seek(2), this.nativeColor = [p(a), p(a)]);
        this.length = a.ip - this.offset
    };
    P.sofi = {};
    P.sofi = a();
    P.sofi.prototype.parse = function(a) {
        var b;
        this.offset = a.ip;
        this.size = p(a);
        this.version = p(a);
        b = x(a, 4);
        if ("8BIM" !== b) throw Error("invalid signature:", b);
        this.blend = x(a, 4);
        a.seek(2);
        this.color = [q(a) >> 8, q(a) >> 8, q(a) >> 8, q(a) >> 8];
        this.opacity = v(a);
        this.enabled = !! v(a);
        a.seek(2);
        this.nativeColor = [u(a) >> 8, u(a) >> 8, u(a) >> 8, u(a) >> 8];
        this.length = a.ip - this.offset
    };
    g.Patt = a();
    g.Patt.prototype.parse = function(a, b, c) {
        b = a.ip + b;
        for (this.offset = a.ip; a.ip < b;) p(a), p(a), r(a), u(a), u(a), w(a,
            p(a)), x(a, a.input[a.ip++]), c.colorMode === Y && s(a, 768), s(a, b - this.offset);
        this.length = a.ip - this.offset
    };
    g.PlLd = a();
    g.PlLd.prototype.parse = function(a) {
        this.offset = a.ip;
        this.type = x(a, 4);
        if ("plcL" !== this.type) throw Error("invalid type:", this.type);
        this.version = p(a);
        this.id = x(a, a.input[a.ip++]);
        this.page = r(a);
        this.totalPage = r(a);
        this.antiAlias = r(a);
        this.placedLayerType = r(a);
        this.transform = [a.readFloat64(), a.readFloat64(), a.readFloat64(), a.readFloat64(), a.readFloat64(), a.readFloat64(), a.readFloat64(), a.readFloat64()];
        this.warpVersion = r(a);
        this.warpDescriptorVersion = r(a);
        this.descriptor = new e;
        this.descriptor.parse(a);
        this.length = a.ip - this.offset
    };
    g.SoLd = a();
    g.SoLd.prototype.parse = function(a) {
        this.offset = a.ip;
        this.identifier = x(a, 4);
        if ("soLD" !== this.identifier) throw Error("invalid identifier:", this.identifier);
        this.version = p(a);
        this.descriptorVersion = r(a);
        this.descriptor = new e;
        this.descriptor.parse(a);
        this.length = a.ip - this.offset
    };
    g.TySh = a();
    g.TySh.prototype.parse = function(a) {
        this.offset = a.ip;
        this.version = u(a);
        this.transform = [a.readFloat64(), a.readFloat64(), a.readFloat64(), a.readFloat64(), a.readFloat64(), a.readFloat64()];
        this.textVersion = u(a);
        this.textDescriptorVersion = r(a);
        this.textData = new e;
        this.textData.parse(a);
        this.textData.items !== this.textData.item.length ? Z.console.error("Descriptor parsing failed") : (this.warpVersion = u(a), this.warpDescriptorVersion = r(a), this.warpData = new e, this.warpData.parse(a), Z.console.log("TySh implementation is incomplete"), this.left = r(a), this.top = r(a), this.right = r(a), this.bottom = r(a), this.length = a.ip - this.offset)
    };
    g.clbl = a();
    g.clbl.prototype.parse = function(a) {
        this.offset = a.ip;
        this.blendClippedElements = !! v(a);
        a.seek(3);
        this.length = a.ip - this.offset
    };
    g.fxrp = a();
    g.fxrp.prototype.parse = function(a) {
        this.offset = a.ip;
        this.referencePoint = [a.readFloat64(), a.readFloat64()];
        this.length = a.ip - this.offset
    };
    g.iOpa = a();
    g.iOpa.prototype.parse = function(a) {
        this.offset = a.ip;
        this.opacity = v(a);
        a.seek(3);
        this.length = a.ip - this.offset
    };
    g.infx = a();
    g.infx.prototype.parse = function(a) {
        this.offset = a.ip;
        this.blendInteriorElements = !! v(a);
        a.seek(3);
        this.length = a.ip - this.offset
    };
    g.knko = a();
    g.knko.prototype.parse = function(a) {
        this.offset = a.ip;
        this.knockout = !! v(a);
        a.seek(3);
        this.length = a.ip - this.offset
    };
    g.lclr = a();
    g.lclr.prototype.parse = function(a) {
        this.offset = a.ip;
        this.color = [p(a), p(a)];
        this.length = a.ip - this.offset
    };
    g.lfx2 = a();
    g.lfx2.prototype.parse = function(a) {
        this.offset = a.ip;
        this.version = p(a);
        this.descriptorVersion = p(a);
        this.descriptor = new e;
        this.descriptor.parse(a);
        this.length = a.ip - this.offset
    };
    g.lnsr = a();
    g.lnsr.prototype.parse = function(a) {
        this.offset = a.ip;
        this.id = x(a, 4);
        this.length = a.ip - this.offset
    };
    g.lrFX = a();
    g.lrFX.prototype.parse = function(a) {
        var b, c, d;
        this.offset = a.ip;
        this.version = q(a);
        this.count = q(a);
        this.effect = [];
        for (d = 0; d < this.count; ++d) {
            b = x(a, 4);
            if ("8BIM" !== b) {
                Z.console.warn("invalid signature:", b);
                break
            }
            this.key = b = x(a, 4);
            if ("function" === typeof P[this.key]) c = new P[this.key], c.parse(a), this.effect[d] = {
                key: b,
                effect: c
            };
            else {
                Z.console.warn("detect unknown key:", b);
                break
            }
        }
        this.length = a.ip - this.offset
    };
    g.lsct = a();
    g.lsct.prototype.parse = function(a, b) {
        var c;
        this.offset = a.ip;
        this.type = p(a);
        if (12 === b) {
            c = x(a, 4);
            if ("8BIM" !== c) throw Error("invalid section divider setting signature:", c);
            this.key = x(a, 4)
        }
        this.length = a.ip - this.offset
    };
    g.lspf = a();
    g.lspf.prototype.parse = function(a) {
        this.offset = a.ip;
        this.flags = p(a);
        this.length = a.ip - this.offset
    };
    g.luni = a();
    g.luni.prototype.parse = function(a) {
        var b;
        this.offset = a.ip;
        b = p(a);
        this.layerName = w(a, b);
        1 === (b & 1) && a.seek(2);
        this.length = a.ip - this.offset
    };
    g.lyid = a();
    g.lyid.prototype.parse = function(a) {
        this.offset = a.ip;
        this.layerId = p(a);
        this.length = a.ip - this.offset
    };
    g.lyvr = a();
    g.lyvr.prototype.parse = function(a) {
        this.offset = a.ip;
        this.version = p(a);
        this.length = a.ip - this.offset
    };
    g.shmd = a();
    g.shmd.prototype.parse = function(a) {
        var b, c, d, e, f = this.metadata = [],
            g, h;
        this.offset = a.ip;
        this.items = p(a);
        g = 0;
        for (h = this.items; g < h; ++g) b = x(a, 4), c = x(a, 4), d = v(a), a.seek(3), e = p(a), e = s(a, e), f[g] = {
            signature: b,
            key: c,
            copy: d,
            data: e
        };
        this.length = a.ip - this.offset
    };
    g.vmsk = a();
    g.vmsk.prototype.parse = function(a, b) {
        var c = a.ip + b;
        this.offset = a.ip;
        this.version = p(a);
        for (this.flags = p(a); a.ip + 26 <= c;) this.path = new m, this.path.parse(a);
        this.length = a.ip - this.offset
    };
    e.prototype.parse = function(a) {
        var b, c, d, f;
        this.offset = a.ip;
        b = p(a);
        this.name = w(a, b);
        b = p(a) || 4;
        this.classId = x(a, b);
        this.items = p(a);
        this.item = [];
        d = 0;
        for (f = this.items; d < f; ++d) {
            b = p(a) || 4;
            b = x(a, b);
            c = x(a, 4);
            if ("function" !== typeof e[c]) {
                Z.console.warn("OSType Key not implemented:", c);
                break
            }
            c = new e[c];
            c.parse(a);
            this.item.push({
                key: b,
                data: c
            })
        }
        this.length = a.ip - this.offset
    };
    g.GdFl = a();
    g.GdFl.prototype.parse = function(a) {
        this.offset = a.ip;
        this.version = p(a);
        this.descriptor = new e;
        this.descriptor.parse(a);
        this.length = a.ip - this.offset
    };
    g.SoCo = a();
    g.SoCo.prototype.parse = function(a) {
        this.offset = a.ip;
        this.version = p(a);
        this.descriptor = new e;
        this.descriptor.parse(a);
        this.length = a.ip - this.offset
    };
    e.ObAr = a();
    e.ObAr.prototype.parse = function(a) {
        this.offset = a.ip;
        Z.console.warn("OSType key not implemented (undocumented): ObAr(ObjectArray?)");
        this.length = a.ip - this.offset
    };
    e.Objc = a();
    e.Objc.prototype.parse = function(a) {
        this.offset = a.ip;
        this.value = new e;
        this.value.parse(a);
        this.length = a.ip - this.offset
    };
    e.GlbO = e.Objc;
    e.TEXT = a();
    e.TEXT.prototype.parse = function(a) {
        var b;
        this.offset = a.ip;
        b = p(a);
        this.string = w(a, b);
        this.length = a.ip - this.offset
    };
    e.UnFl = a();
    e.UnFl.prototype.parse = function(a) {
        var b = this.value = [],
            c, d;
        this.offset = a.ip;
        this.key = x(a, 4);
        c = p(a);
        for (d = 0; d < c; ++d) b[d] = a.readFloat64();
        this.length = a.ip - this.offset
    };
    e.UntF = a();
    e.UntF.prototype.parse = function(a) {
        this.offset = a.ip;
        this.units = x(a, 4);
        this.value = a.readFloat64();
        this.length = a.ip - this.offset
    };
    e.VlLs = a();
    e.VlLs.prototype.parse = function(a) {
        var b, c, d, f;
        this.offset = a.ip;
        this.item = [];
        b = p(a);
        for (c = 0; c < b; ++c) {
            d = x(a, 4);
            if ("function" !== typeof e[d]) {
                Z.console.error("OSType Key not implemented:", d);
                return
            }
            f = new e[d];
            f.parse(a);
            this.item.push({
                type: d,
                data: f
            })
        }
        this.length = a.ip - this.offset
    };
    e.alis = a();
    e.alis.prototype.parse = function(a) {
        var b;
        this.offset = a.ip;
        b = p(a);
        this.value = s(a, b);
        this.length = a.ip - this.offset
    };
    e.bool = a();
    e.bool.prototype.parse = function(a) {
        this.offset = a.ip;
        this.value = !! v(a);
        this.length = a.ip - this.offset
    };
    e.doub = a();
    e.doub.prototype.parse = function(a) {
        this.offset = a.ip;
        this.value = a.readFloat64();
        this.length = a.ip - this.offset
    };
    e["enum"] = a();
    e["enum"].prototype.parse = function(a) {
        var b;
        this.offset = a.ip;
        b = p(a);
        0 === b && (b = 4);
        this.type = x(a, b);
        b = p(a);
        0 === b && (b = 4);
        this["enum"] = x(a, b);
        this.length = a.ip - this.offset
    };
    e["long"] = a();
    e["long"].prototype.parse = function(a) {
        this.offset = a.ip;
        this.value = r(a);
        this.length = a.ip - this.offset
    };
    e["obj "] = a();
    e["obj "].prototype.parse = function(a) {
        var b,
            c, d, f;
        this.offset = a.ip;
        this.item = [];
        b = this.items = p(a);
        for (f = 0; f < b; ++f) {
            c = x(a, 4);
            d = e["obj "].Table[c];
            if ("function" !== typeof e[d]) {
                Z.console.error("OSType Key not implemented:", d);
                return
            }
            d = new e[d];
            d.parse(a);
            this.item.push({
                key: c,
                data: d
            })
        }
        this.length = a.ip - this.offset
    };
    e["obj "].Table = {
        prop: "prop",
        Clss: "type",
        Enmr: "enum",
        rele: "rele",
        Idnt: "long",
        indx: "long",
        name: "TEXT"
    };
    e.prop = a();
    e.prop.prototype.parse = function(a) {
        var b;
        this.offset = a.ip;
        b = p(a);
        this.name = w(a, b);
        b = p(a) || 4;
        this.classId = x(a, b);
        b = p(a) || 4;
        this.keyId = x(a, b);
        this.length = a.ip - this.offset
    };
    e.rele = a();
    e.rele.prototype.parse = function(a) {
        var b;
        this.offset = a.ip;
        b = p(a);
        this.name = w(a, b);
        b = p(a) || 4;
        this.classId = x(a, b);
        this.value = p(a);
        this.length = a.ip - this.offset
    };
    e.tdta = a();
    e.tdta.prototype.parse = function(a) {
        var b;
        this.offset = a.ip;
        b = p(a);
        this.data = s(a, b);
        this.length = a.ip - this.offset
    };
    e.type = a();
    e.type.prototype.parse = function(a) {
        var b;
        this.offset = a.ip;
        b = p(a);
        this.name = w(a, b);
        b = p(a) || 4;
        this.classId = x(a, b);
        this.length = a.ip - this.offset
    };
    e.GlbC = e.type;
    var Y = 2;
    c.prototype.parse = function(a) {
        var b;
        this.offset = a.ip;
        this.length = p(a) + 4;
        if (4 === this.length) window.console.log("skip: layer blending ranges(empty body)");
        else for (b = this.offset + this.length, this.black = q(a), this.white = q(a), this.destRange = p(a); a.ip < b;) this.channel.push([p(a), p(a)])
    };
    k.prototype.parse = function(a) {
        var b;
        this.offset = a.ip;
        b = p(a);
        this.length = b + 4;
        0 === b ? window.console.log("skip: layer mask data (empty body)") : (this.top = r(a), this.left = r(a), this.bottom = r(a), this.right = r(a), this.defaultColor = v(a), this.flags = v(a), 20 === b ? this.padding = q(a) : (this.realFlags = v(a), this.realBackground = v(a), this.top2 = r(a), this.left2 = r(a), this.bottom2 = r(a), this.right2 = r(a)))
    };
    m.prototype.parse = function(a) {
        this.offset = a.ip;
        this.type = u(a);
        a.seek(26, this.offset);
        this.length = a.ip - this.offset
    };
    var da = l.prototype;
    if (T) var ia = new ArrayBuffer(8),
        na = new Uint8Array(ia),
        pa = new Float64Array(ia);
    else var ea = Math.pow(2, 48),
        R = Math.pow(2, 40),
        ba = Math.pow(2, 32),
        ya = Math.pow(2, 24),
        ka = Math.pow(2, 16),
        ha = Math.pow(2, 8),
        ca = Math.pow(2, - 1022),
        sa = Math.pow(2, - 52);
    da.readFloat64 = function() {
        var a;
        if (T) {
            a = this.input;
            for (var b = this.ip, c = 8; --c;) na[c] = a[b++];
            a = pa[0]
        } else {
            var c = this.input,
                d = this.ip;
            a = 0 === (c[d] & 128);
            b = (c[d++] & 127) << 4 | (c[d] & 240) >> 4;
            c = (c[d++] & 15) * ea + c[d++] * R + c[d++] * ba + c[d++] * ya + c[d++] * ka + c[d++] * ha + c[d++];
            a = 0 === b ? 0 === c ? 0 : (a ? 1 : -1) * ca * c * sa : 2047 === b ? c ? NaN : a ? Infinity : -Infinity : (a ? 1 : -1) * (Math.pow(2, b - 1023) + c * Math.pow(2, b - 1075))
        }
        this.ip += 8;
        return a
    };
    l.prototype.slice = function(a, b) {
        this.ip = b;
        return T ? this.input.subarray(a, b) : this.input.slice(a,
            b)
    };
    l.prototype.fetch = function(a, b) {
        return T ? this.input.subarray(a, b) : this.input.slice(a, b)
    };
    l.prototype.seek = function(a, b) {
        "number" !== typeof b && (b = this.ip);
        this.ip = b + a
    };
    y.prototype.parse = function(a) {
        this.offset = a.ip;
        this.length = p(a) + 4;
        this.overlayColorSpace = q(a);
        this.colorComponents = [q(a), q(a), q(a), q(a)];
        this.opacity = q(a);
        this.kind = v(a);
        this.filter = s(a, this.offset + this.length - a.ip);
        a.seek(this.offset + this.length, 0)
    };
    z.prototype.parse = function(a) {
        this.offset = a.ip;
        this.signature = x(a, 4);
        if ("8BPS" !== this.signature) throw Error("invalid signature");
        this.version = q(a);
        this.reserved = s(a, 6);
        this.channels = q(a);
        this.rows = p(a);
        this.columns = p(a);
        this.depth = q(a);
        this.colorMode = q(a);
        this.length = a.ip - this.offset
    };
    B.prototype.parse = function() {
        switch (this.header.colorMode) {
            case 0:
                window.console.error("bitmap color mode not supported");
                break;
            case 8:
                window.console.warn("duotone color mode implementation is incomplete");
            case 1:
                var a = this.channel[0],
                    b, c = a.length,
                    d = this.redChannel = new(T ? Uint8Array : Array)(c),
                    e = this.greenChannel = new(T ? Uint8Array : Array)(c),
                    f = this.blueChannel = new(T ? Uint8Array : Array)(c),
                    g = this.header.depth / 8,
                    h;
                for (b = h = 0; b < c; ++h, b += g) d[h] = e[h] = f[h] = a[b];
                break;
            case Y:
                a = this.channel[0];
                c = a.length;
                e = this.redChannel = new(T ? Uint8Array : Array)(c);
                f = this.greenChannel = new(T ? Uint8Array : Array)(c);
                g = this.blueChannel = new(T ? Uint8Array : Array)(c);
                h = this.colorModeData.data;
                var k = h.length / 3;
                for (b = d = 0; b < c; ++d, b += 1) e[d] = h[a[b]], f[d] = h[a[b] + k], g[d] = h[a[b] + 2 * k];
                break;
            case 7:
                window.console.warn("multichannel color mode implementation is incomplete");
            case 3:
                a = this.redChannel = this.channel[0];
                b = this.greenChannel = this.channel[1];
                c = this.blueChannel = this.channel[2];
                e = this.header.depth / 8;
                if (1 !== e) {
                    if (4 === this.channel.length) for (d = this.alphaChannel = this.channel[3], f = h = 0, g = a.length; f < g; ++h, f += e) a[h] = a[f], b[h] = b[f], c[h] = c[f], d[h] = d[f];
                    else for (f = h = 0, g = a.length; f < g; ++h, f += e) a[h] = a[f], b[h] = b[f], c[h] = c[f];
                    T ? (this.redChannel = a.subarray(0, h), this.greenChannel = b.subarray(0, h), this.blueChannel = c.subarray(0, h)) : a.length = b.length = c.length = h;
                    4 === this.channel.length && (T ? this.alphaChannel = d.subarray(0, h) : d.length = h)
                }
                break;
            case 4:
                a = this.channel[0];
                b = this.channel[1];
                c = this.channel[2];
                d = this.channel[3];
                f = a.length;
                g = this.redChannel = new(T ? Uint8Array : Array)(f);
                h = this.greenChannel = new(T ? Uint8Array : Array)(f);
                for (var k = this.blueChannel = new(T ? Uint8Array : Array)(f), l, m, p, q, r = this.header.depth / 8, s, e = s = 0; e < f; ++s, e += r) l = 255 - a[e], m = 255 - b[e], p = 255 - c[e], q = 255 - d[e], g[s] = 65535 - (l * (255 - q) + (q << 8)) >> 8, h[s] = 65535 - (m * (255 - q) + (q << 8)) >> 8, k[s] = 65535 - (p * (255 - q) + (q << 8)) >> 8;
                break;
            case 9:
                for (a = this.channel[0], b = this.channel[1], c = this.channel[2], e = a.length, f = this.redChannel = new(T ? Uint8Array : Array)(e), g = this.greenChannel = new(T ? Uint8Array : Array)(e), h = this.blueChannel = new(T ? Uint8Array : Array)(e), k = 6 / 29, m = this.header.depth / 8, d = l = 0; d < e; ++l, d += m) r = ((100 * a[d] >> 8) + 16) / 116, p = r + (b[d] - 128) / 500, q = r - (c[d] - 128) / 200, p = p > k ? 0.950456 * Math.pow(p, 3) : 3 * (p - 16 / 116) * Math.pow(k, 2), r = r > k ? 1 * Math.pow(r, 3) : 3 * (r - 16 / 116) * Math.pow(k, 2), q = q > k ? 1.088754 * Math.pow(q, 3) : 3 * (q - 16 / 116) * Math.pow(k, 2), f[l] = 255 * Math.pow(2.041588 * p - 0.565007 * r - 0.344731 * q, 1 / 2.2), g[l] = 255 * Math.pow(-0.969244 * p + 1.875968 * r + 0.041555 * q, 1 / 2.2), h[l] = 255 * Math.pow(0.013444 * p - 0.118362 * r + 1.015175 * q, 1 / 2.2)
        }
        this.parsed = !0
    };
    D.prototype.parse = function(a, b) {
        var c;
        this.offset = a.ip;
        c = p(a);
        this.length = c + 4;
        if (b.colorMode === Y && 768 !== c) throw Error("invalid color mode data");
        this.data = s(a, c)
    };
    d(E, f);
    E.prototype.parse = function(a, b) {
        var c = this.channel = [],
            d, e = b.channels,
            f = b.columns * b.rows * (b.depth / 8);
        for (d = 0; d < e; ++d) c[d] = s(a, f)
    };
    d(G, f);
    G.prototype.parse = function(a, b) {
        var c,
            d = this.channel = [],
            e = this.lineLength = [],
            f, g, h = b.rows,
            k = b.channels,
            l;
        for (c = 0; c < h * k; ++c) e[c] = q(a);
        for (f = 0; f < k; ++f) {
            g = [];
            for (c = l = 0; c < h; ++c) g[c] = A(a, e[f * h + c] * (b.depth / 8)), l += g[c].length;
            if (T) for (d[f] = new Uint8Array(l), l = c = 0, h = g.length; c < h; ++c) d[f].set(g[c], l), l += g[c].length;
            else d[f] = Array.prototype.concat.apply([], g)
        }
    };
    J.prototype.parse = function(a, b) {
        this.offset = a.ip;
        this.compressionMethod = q(a);
        switch (this.compressionMethod) {
            case 0:
                this.image = new E;
                break;
            case 1:
                this.image = new G;
                break;
            default:
                throw Error("unknown compression method");
        }
        this.image.parse(a, b);
        this.length = a.ip - this.offset
    };
    J.prototype.createCanvas = function(a, b) {
        var c = document.createElement("canvas"),
            d = c.getContext("2d"),
            e = c.width = a.columns,
            f = c.height = a.rows,
            g, h, k, l, m, p;
        g = new B(a, b, this.image.channel);
        g.parsed || g.parse();
        p = [g.redChannel, g.greenChannel, g.blueChannel];
        if (0 >= e || 0 >= f) return null;
        g = d.createImageData(e, f);
        h = g.data;
        for (l = 0; l < f; ++l) for (k = 0; k < e; ++k) m = l * e + k, h[4 * m] = p[0][m], h[4 * m + 1] = p[1][m], h[4 * m + 2] = p[2][m], h[4 * m + 3] = 255;
        d.putImageData(g, 0, 0);
        return c
    };
    C.prototype.parse = function(a) {
        this.offset = a.ip;
        if ("8BIM" !== x(a, 4)) throw Error("invalid signature");
        this.identifier = q(a);
        this.name = x(a, a.input[a.ip++]);
        this.dataSize = p(a);
        this.data = s(a, this.dataSize);
        this.length = a.ip - this.offset
    };
    O.prototype.parse = function(a) {
        this.offset = a.ip;
        this.length = p(a) + 4;
        this.imageResource = new C;
        this.imageResource.parse(a);
        a.seek(this.offset + this.length, 0)
    };
    N.prototype.parse = function(a, b) {
        var d, e;
        this.offset = a.ip;
        this.top = r(a);
        this.left = r(a);
        this.bottom = r(a);
        this.right = r(a);
        this.channels = q(a);
        d = 0;
        for (e = this.channels; d < e; ++d) this.info[d] = {
            id: u(a),
            length: p(a)
        };
        if ("8BIM" !== x(a, 4)) throw Error("invalid blend mode signature");
        this.blendMode = x(a, 4);
        this.opacity = v(a);
        this.clipping = v(a);
        this.flags = v(a);
        this.filter = v(a);
        this.extraLength = p(a);
        d = a.ip + this.extraLength;
        this.layerMaskData = new k;
        this.layerMaskData.parse(a);
        this.blendingRanges = new c;
        this.blendingRanges.parse(a);
        e = v(a);
        this.name = x(a, e);
        a.seek((4 - (1 + e) % 4) % 4);
        for (this.additionalLayerInfo = []; a.ip < d;) e = new g, e.parse(a, b), this.additionalLayerInfo.push(e);
        this.length = a.ip - this.offset
    };
    d(L, b);
    L.prototype.parse = function(a, b, c) {
        this.channel = s(a, c)
    };
    d(Q, b);
    Q.prototype.parse = function(a, b, c) {
        var d = this.lineLength = [],
            e = [];
        b = b.bottom - b.top;
        var f = a.ip + c,
            g = 0;
        for (c = 0; c < b; ++c) d[c] = q(a);
        for (c = 0; c < b && !(e[c] = A(a, d[c]), g += e[c].length, a.ip >= f); ++c);
        if (T) for (this.channel = new Uint8Array(g), a = c = 0, b = e.length; c < b; ++c) this.channel.set(e[c], a), a += e[c].length;
        else this.channel = Array.prototype.concat.apply([], e)
    };
    K.prototype.parse = function(a, b) {
        var c = this.channel = [],
            d, e, f,
            g, h;
        this.offset = a.ip;
        e = 0;
        for (f = b.channels; e < f; ++e) if (g = a.ip, h = b.info[e], d = q(a), 2 !== h.length) {
            switch (d) {
                case 0:
                    d = new L;
                    break;
                case 1:
                    d = new Q;
                    break;
                default:
                    throw Error("unknown compression method: " + d);
            }
            d.parse(a, b, h.length - 2);
            c[e] = d;
            a.seek(h.length + g, 0)
        }
        this.length = a.ip - this.offset
    };
    K.prototype.createCanvas = function(a, b, c) {
        var d = document.createElement("canvas"),
            e = d.getContext("2d"),
            f = d.width = c.right - c.left,
            g = d.height = c.bottom - c.top,
            h, k, l = this.channel,
            m = [],
            p, q, r, s;
        if (0 === f || 0 === g) return null;
        h = e.createImageData(f,
            g);
        k = h.data;
        p = 0;
        for (q = l.length; p < q; ++p) switch (c.info[p].id) {
            case 0:
            case 1:
            case 2:
            case 3:
                m[c.info[p].id] = l[p].channel;
                break;
            case -1:
                r = l[p].channel;
                break;
            case -2:
                s = l[p].channel;
                break;
            default:
                window.console.warn("not supported channel id", c.info[p].id)
        }
        r && m.push(r);
        a = new B(a, b, m);
        a.parsed || a.parse();
        l = [a.redChannel, a.greenChannel, a.blueChannel, a.alphaChannel];
        for (b = 0; b < g; ++b) for (a = 0; a < f; ++a) c = b * f + a, k[4 * c + 0] = l[0][c], k[4 * c + 1] = l[1][c], k[4 * c + 2] = l[2][c], k[4 * c + 3] = s ? s[c] / 255 * (l[3] ? l[3][c] : 255) : l[3] ? l[3][c] : 255;
        e.putImageData(h, 0, 0);
        return d
    };
    F.prototype.parse = function(a, b) {
        var c, d, e;
        this.offset = a.ip;
        this.length = p(a) + 4;
        this.layerCount = Math.abs(u(a));
        c = 0;
        for (d = this.layerCount; c < d; ++c) e = new N, e.parse(a, b), this.layerRecord[c] = e;
        c = 0;
        for (d = this.layerCount; c < d; ++c) e = new K, e.parse(a, this.layerRecord[c]), this.channelImageData[c] = e;
        a.seek(this.offset + this.length, 0)
    };
    aa.prototype.parse = function(a, b) {
        var c;
        this.offset = a.ip;
        c = p(a);
        this.length = c + 4;
        0 === c && window.console.log("skip: layer and mask information (empty body)");
        c = a.ip + c;
        this.layerInfo = new F;
        this.globalLayerMaskInfo = new y;
        this.additionalLayerInfo = new g;
        this.layerInfo.parse(a, b);
        this.globalLayerMaskInfo.parse(a, b);
        this.additionalLayerInfo.parse(a, b);
        a.seek(c, 0)
    };
    U.prototype.parse = function() {
        var a = this.stream;
        this.header = new z;
        this.colorModeData = new D;
        this.imageResources = new O;
        this.layerAndMaskInformation = new aa;
        this.imageData = new J;
        this.header.parse(a);
        this.colorModeData.parse(a, this.header);
        this.imageResources.parse(a);
        this.layerAndMaskInformation.parse(a,
            this.header);
        this.imageData.parse(a, this.header)
    };
    h("PSD.Parser", U);
    h("PSD.Parser.prototype.parse", U.prototype.parse)
}).call(this);